EABXADHEVT=function(OTBFIOUAIV)
{
	var LXGKVFJUFT;
	var lAudioTag=false;
	if (DAIGBSWBCE==true)
	{
	
		lAudioTag=YMHIHSNADE.sound.usingAudioTag;
	
	
	
		if( window.plugins && window.plugins.NativeAudio && lAudioTag==true )
		{
			switch (OTBFIOUAIV)
			{
			case 'WWYKUMYJBJ' :
				window.plugins.NativeAudio.play('VKEJRPCHKN');
				break;

			case 'CVRQKCGIRI' :
				window.plugins.NativeAudio.play('LFWPDMQYKH');
				break;
			
			case 'BNSLLGGORP' :
				window.plugins.NativeAudio.play('BHLJBCKLKE');
				break;	
			
			case 'TKYUFYJRRA' :
				window.plugins.NativeAudio.play('SFVDEVFFCR');
				break;		
			
			case 'LFYAQLIDAI' :
				window.plugins.NativeAudio.play('KMBKTLXURD');
				break;		
			
			case 'CEDKIIHEHO' :
				window.plugins.NativeAudio.play('Snd20Bastos');
				break;		
				
			case 'CPBEWFVQIJ' :
				
				LXGKVFJUFT = Math.floor(Math.random() * 2) + 1  
				if (LXGKVFJUFT==1)
				{
					window.plugins.NativeAudio.play('DPCNHOBNRM');
				}
				else
				{
					window.plugins.NativeAudio.play('GMKJKKAKMH');
				}

				break;		
				
				
			case 'JCIRYRCUJJ' :
				window.plugins.NativeAudio.play('UHKVCVBOMD');
				break;	

			case 'CLVBGPCTEJ' :
				window.plugins.NativeAudio.play('LKGDBLGIEP');
				break;	
				
		

			case 'USNAAQWHUY' :
				
				LXGKVFJUFT = Math.floor(Math.random() * 2) + 1  
				
				if (LXGKVFJUFT==1)
				{
					window.plugins.NativeAudio.play('KFDIGGAMBI');
				}
				if (LXGKVFJUFT==2)
				{
					window.plugins.NativeAudio.play('MWLXRMDQXK');
				}
				break;	
				
			
			case 'DNBXXHKKYK' :
				LXGKVFJUFT = Math.floor(Math.random() * 4) + 1  
				if (LXGKVFJUFT==1)
				{
					window.plugins.NativeAudio.play('DPIDINSQVF');
				}
				break;	

			case 'JCGKEWDJBQ' :
				window.plugins.NativeAudio.play('GERQISACAV');
				break;		

			case 'CAGCUMKBGA' :
				window.plugins.NativeAudio.play('TSXDMBDDID');
				break;	

			case 'TSYFNOWESC' :
				window.plugins.NativeAudio.play('VLVITFRSLA');
				break;		

			case 'XKBVJQJRBV' :
				LXGKVFJUFT = Math.floor(Math.random() * 4) + 1  
				if (LXGKVFJUFT==1)
				{
					window.plugins.NativeAudio.play('LSQGNFJBGH');
				}
		
				break;		

			case 'LMAYDDUATD' :
				LXGKVFJUFT = Math.floor(Math.random() * 4) + 1  
				if (LXGKVFJUFT==1)
				{
					window.plugins.NativeAudio.play('CVJDMGILKI');
				}
			
				break;	

			case 'YURJWRGUNO' :
				LXGKVFJUFT = Math.floor(Math.random() * 2) + 1  
				if (LXGKVFJUFT==1)
				{
					window.plugins.NativeAudio.play('NEKUUPJKUV');
				}
				if (LXGKVFJUFT==2)
				{
					window.plugins.NativeAudio.play('VPGBDEHDIT');
				}				
				
				break;		

			case 'OTSNYLXEHR' :
				LXGKVFJUFT = Math.floor(Math.random() * 2) + 1  
				if (LXGKVFJUFT==1)
				{
					window.plugins.NativeAudio.play('MIKBDMVLOR');
				}
				if (LXGKVFJUFT==2)
				{
					window.plugins.NativeAudio.play('HKHCMJEIUU');
				}	
				
				break;	

							
			case 'OJJBAIPHEV' :
			
				LXGKVFJUFT = Math.floor(Math.random() * 4) + 1  
				if (LXGKVFJUFT==1)
				{
					window.plugins.NativeAudio.play('JDPOTVNRCT');
				}
				
				break;			
				
		
			}		
			
		}
		else
		{
			switch (OTBFIOUAIV)
			{
				case 'WWYKUMYJBJ' :
					VKEJRPCHKN.play();
					break;

				case 'CVRQKCGIRI' :
					LFWPDMQYKH.play();
					break;
				
				case 'BNSLLGGORP' :
					BHLJBCKLKE.play();
					break;	
				
				case 'TKYUFYJRRA' :
					SFVDEVFFCR.play();
					break;		
				
				case 'LFYAQLIDAI' :
					KMBKTLXURD.play();
					break;		
				
				case 'CEDKIIHEHO' :
					Snd20Bastos.play();
					break;		
					
				case 'CPBEWFVQIJ' :
					
					LXGKVFJUFT = Math.floor(Math.random() * 2) + 1  
					if (LXGKVFJUFT==1)
					{
						DPCNHOBNRM.play();
					}
					else
					{
						GMKJKKAKMH.play();
					}

					break;		
					
					
				case 'JCIRYRCUJJ' :
					UHKVCVBOMD.play();
					break;	

				case 'CLVBGPCTEJ' :
					LKGDBLGIEP.play();
					break;	
					
			

				case 'USNAAQWHUY' :
					
					LXGKVFJUFT = Math.floor(Math.random() * 2) + 1  
					
					if (LXGKVFJUFT==1)
					{
						KFDIGGAMBI.play();
					}
					if (LXGKVFJUFT==2)
					{
						MWLXRMDQXK.play();
					}
					break;	
					
				
				case 'DNBXXHKKYK' :
					LXGKVFJUFT = Math.floor(Math.random() * 4) + 1  
					if (LXGKVFJUFT==1)
					{
						DPIDINSQVF.play();
					}
					break;	

				case 'JCGKEWDJBQ' :
					GERQISACAV.play();
					break;		

				case 'CAGCUMKBGA' :
					TSXDMBDDID.play();
					break;	

				case 'TSYFNOWESC' :
					VLVITFRSLA.play();
					break;		

				case 'XKBVJQJRBV' :
					LXGKVFJUFT = Math.floor(Math.random() * 4) + 1  
					if (LXGKVFJUFT==1)
					{
						LSQGNFJBGH.play();
					}
			
					break;		

				case 'LMAYDDUATD' :
					LXGKVFJUFT = Math.floor(Math.random() * 4) + 1  
					if (LXGKVFJUFT==1)
					{
						CVJDMGILKI.play();
					}
				
					break;	

				case 'YURJWRGUNO' :
					LXGKVFJUFT = Math.floor(Math.random() * 2) + 1  
					if (LXGKVFJUFT==1)
					{
						NEKUUPJKUV.play();
					}
					if (LXGKVFJUFT==2)
					{
						VPGBDEHDIT.play();
					}				
					
					break;		

				case 'OTSNYLXEHR' :
					LXGKVFJUFT = Math.floor(Math.random() * 2) + 1  
					if (LXGKVFJUFT==1)
					{
						MIKBDMVLOR.play();
					}
					if (LXGKVFJUFT==2)
					{
						HKHCMJEIUU.play();
					}	
					
					break;	

								
				case 'OJJBAIPHEV' :
				
					LXGKVFJUFT = Math.floor(Math.random() * 4) + 1  
					if (LXGKVFJUFT==1)
					{
						JDPOTVNRCT.play();
					}
					
					break;			
					
			
			}
		}
	}
}

QTIPILDEPH=function(sprite,UBWRXKMTQN,SLGKDYQCAY,UHTPGPRUJA){
	
	console.log("Entra al tablero "+MYQBNBVHKU);
	if (MYQBNBVHKU==false || LUCRWXJMDR==1)
	{
		NUWTGXUUTS(); // A veces se queda pillado con el tema de las desconexiones. Así garantizo que si alguien tira, la partida comienza
	}
	
	if (OTGNMRHTVK()==true)
	{
		WWAYLOUPUQ(); 
	}
	else
	{
	//Paro el reloj
	//if (UHHXSNXXJK<JLVDFTPUNI && PXGXKDDNFK<JLVDFTPUNI)
	//{
		if (EGPDVIEJEL==true)
		{
			HUUCUYFBLW.stop();
			YJNIRPCWEI.text="";
		}	

		console.log("GRR STLEOJDWSU: "+UBWRXKMTQN+" "+UHTPGPRUJA);
		//var s; 
		//PXEBTYBHGS=((YMHIHSNADE.world.height-AltoCarta-AltoCartaEscalado)/2)+COIVBWRMCC;
		//alert(PXEBTYBHGS+" H"+YMHIHSNADE.world.height+" AltoCarta "+AltoCarta+" AltoCarta Escalado "+AltoCartaEscalado+" Ancho*2"+COIVBWRMCC)
		UOPIKJVEKS.add(sprite);
		SUMEMLHUFX(UBWRXKMTQN);
		if (UBWRXKMTQN=="D"){
			var NOFEDXHMLS=VUFCMULFSR;
			var GHTWROCHVV=QTQIWVWEOI;
			var UYAEIRFYUJ=sprite.angle+DDONCKKEVJ;		
		}
		
		if (UBWRXKMTQN=="U"){
			var NOFEDXHMLS=posX_U;
			var GHTWROCHVV=posY_U;
			var UYAEIRFYUJ=sprite.angle+NXXLHVGDFY;		
		}	
		
		if (UBWRXKMTQN=="L"){
			var NOFEDXHMLS=IXWMVXRIVW;
			var GHTWROCHVV=QFPBRSSRCY;
			var UYAEIRFYUJ=sprite.angle+MALHKNCITQ;	
			
		}	

		if (UBWRXKMTQN=="R"){
			var NOFEDXHMLS=HCTVQVJJIB;
			var GHTWROCHVV=IWGTWFENXM;
			var UYAEIRFYUJ=sprite.angle+WPVNAOXVJH;			
		}	
		
			//log(false,"STLEOJDWSU "+UBWRXKMTQN+" "+NOFEDXHMLS+" "+GHTWROCHVV);
			//log(false,"LUCRWXJMDR para pasar "+SLGKDYQCAY);
			
			
			console.log("MUEVE AL TABLERO: ACABA DE MOVERSE LA CARTA DE "+UHTPGPRUJA+" sprite: "+sprite.name+" STLEOJDWSU: "+UBWRXKMTQN);
			console.log("a la NPYBJSHIFL "+NOFEDXHMLS+" "+GHTWROCHVV);
			VRLYJAAHUE(sprite);
			EABXADHEVT('CVRQKCGIRI');
			PQUFIBKJJH = YMHIHSNADE.add.tween(sprite);
			PQUFIBKJJH.to( {x:NOFEDXHMLS
			,y:GHTWROCHVV,
			angle : UYAEIRFYUJ
			}, MDYSFNYPYP, KYFMRVNHIQ,false);		
			PQUFIBKJJH.onComplete.add( function () {
				log(true,"MUEVE AL TABLERO: VA A LLAMAR A QUIEN GANA MANO "+UHTPGPRUJA);
			FRWLTWDFVM(SLGKDYQCAY,UHTPGPRUJA); //Truco para poder pasar por parmetro
			
			}  );		
			YMHIHSNADE.add.tween(sprite.scale).to( {x:1,y:1}, IRXOKNWTLV, BSXWFYLCEW,true);
			PQUFIBKJJH.start();
			sprite.bringToTop();
	//}	
		

	}

};

UODKOBCGYM=function(TKWCTNGROU,LDCCGSIBKW){

	
	//var COIVBWRMCC;
	//var s; 
	var sprite;
	var UBWRXKMTQN;
	var XACEBCSJAB;
	var i;

	if (OTGNMRHTVK()==true)
	{
		WWAYLOUPUQ(); 
	}
	else
	{
		
	
		if (TTJKWKBPWO.length>0){
			sprite=TTJKWKBPWO[0].TNFAGGMKXD;
			//COIVBWRMCC=sprite.width
			UBWRXKMTQN=HHOPUSIABJ(TTJKWKBPWO[0].jugador);

			KTBOJTXFEU.push(new NQMQGXXHIL(TTJKWKBPWO[0].AGTXFNIKQD,TTJKWKBPWO[0].jugador) );
			VDKOVQXHON.push(new TVYNYTCQYW(TTJKWKBPWO[0].SGCSHJVERI,TTJKWKBPWO[0].UUOPKETETA,TTJKWKBPWO[0].HVCFEWNDRF,TTJKWKBPWO[0].TNFAGGMKXD,null,TTJKWKBPWO[0].jugador,null,TTJKWKBPWO[0].VMKDXVSQEY));
			
			console.log("Acabo de introducir "+VDKOVQXHON[VDKOVQXHON.length-1].SGCSHJVERI+" "+VDKOVQXHON[VDKOVQXHON.length-1].HVCFEWNDRF);
			
			GLFVIKHXMD();

		
			if (VDKOVQXHON.length>0)
			{
				VDKOVQXHON.sort(sort_by('VMKDXVSQEY', false, parseFloat));
			}	
			
			if (UBWRXKMTQN=="D"){
				var NOFEDXHMLS=(( YMHIHSNADE.world.width-AQONVWHHFT-((COIVBWRMCC*6)) - (YAJVUBPNNW*5)  +  COIVBWRMCC )/2)+ (4 *(COIVBWRMCC+ YAJVUBPNNW));
				var GHTWROCHVV=PXEBTYBHGS+( 1*(COIVBWRMCC+ YAJVUBPNNW));
				var UYAEIRFYUJ=0;
				XACEBCSJAB=AGKVNAGGLB;
			}
			
			if (UBWRXKMTQN=="U"){
				var NOFEDXHMLS=(( YMHIHSNADE.world.width-AQONVWHHFT-((COIVBWRMCC*6)) - (YAJVUBPNNW*5)  +  COIVBWRMCC )/2)+ (4 *(COIVBWRMCC+ YAJVUBPNNW));
				var GHTWROCHVV=PXEBTYBHGS-( 1*(COIVBWRMCC+ YAJVUBPNNW));
				var UYAEIRFYUJ=0;
				XACEBCSJAB=TWJONOKGHC;
			}	
			
			if (UBWRXKMTQN=="L"){
				var NOFEDXHMLS=(( YMHIHSNADE.world.width-AQONVWHHFT-((COIVBWRMCC*6)) - (YAJVUBPNNW*5)  +  COIVBWRMCC )/2)+ (3 *(COIVBWRMCC+ YAJVUBPNNW));
				var GHTWROCHVV=PXEBTYBHGS;//+( 1*(COIVBWRMCC+ YAJVUBPNNW));
				var UYAEIRFYUJ=sprite.angle-90;
				XACEBCSJAB=KNVKGHHTYC;
			}	

			if (UBWRXKMTQN=="R"){
				var NOFEDXHMLS=(( YMHIHSNADE.world.width-AQONVWHHFT-((COIVBWRMCC*6)) - (YAJVUBPNNW*5)  +  COIVBWRMCC )/2)+ (5 *(COIVBWRMCC+ YAJVUBPNNW));
				var GHTWROCHVV=PXEBTYBHGS;//+( 1*(COIVBWRMCC+ YAJVUBPNNW));
				var UYAEIRFYUJ=sprite.angle+90;
				XACEBCSJAB=CBCNHFGWLU;
			}	
			
			var CSLRKCVDYI=TTJKWKBPWO[0].jugador;
			var HARWYWXFOX=TTJKWKBPWO[0].AGTXFNIKQD;
			
			for (i=0;i<=XACEBCSJAB.length-1;i++){
				if (sprite.name==XACEBCSJAB[i].TNFAGGMKXD.name){
					break;
				}
			}		
			
			NAYBJTKIKA(XACEBCSJAB[i].TNFAGGMKXD);
			XACEBCSJAB.splice(i,1);
			OROGRNBISW(XACEBCSJAB,UBWRXKMTQN);	
			
			FRWLTWDFVM(HARWYWXFOX,CSLRKCVDYI);
			
			TTJKWKBPWO.splice(0,1);	
				VRLYJAAHUE(sprite);
				EABXADHEVT('CVRQKCGIRI');
				HHBPAROITT = YMHIHSNADE.add.tween(sprite);
				HHBPAROITT.to( {x:NOFEDXHMLS
				,y:GHTWROCHVV,
				angle : UYAEIRFYUJ
				}, MDYSFNYPYP, KYFMRVNHIQ);		
				
				if (TKWCTNGROU!=undefined){
					HHBPAROITT.onComplete.add( function () {
						CGCMEMLMAG(TKWCTNGROU,LDCCGSIBKW);
					}  );		
				}	
				YMHIHSNADE.add.tween(sprite.scale).to( {x:1,y:1}, IRXOKNWTLV, BSXWFYLCEW,true);
				HHBPAROITT.start();
			

		}
		else{
			if (TKWCTNGROU!=undefined){
				CGCMEMLMAG(TKWCTNGROU,LDCCGSIBKW);
			}
		}
	}
};




PMMTTJWRVR=function(){

	
	//var COIVBWRMCC;
	//var s; 
	var sprite;
	var UBWRXKMTQN;
	var XACEBCSJAB;
	var i;

	if (OTGNMRHTVK()==true)
	{
		WWAYLOUPUQ(); 
	}
	else
		{
		if (WSHPROHDIV.length>0){
			sprite=WSHPROHDIV[0].TNFAGGMKXD;
			//COIVBWRMCC=sprite.width
			UBWRXKMTQN=HHOPUSIABJ(WSHPROHDIV[0].jugador);

			//KTBOJTXFEU.push(new NQMQGXXHIL(WSHPROHDIV[0].AGTXFNIKQD,WSHPROHDIV[0].jugador) );
			KTBOJTXFEU.push(new NQMQGXXHIL(LUCRWXJMDR,WSHPROHDIV[0].jugador) );
			
			VDKOVQXHON.push(new TVYNYTCQYW(WSHPROHDIV[0].SGCSHJVERI,WSHPROHDIV[0].UUOPKETETA,WSHPROHDIV[0].HVCFEWNDRF,WSHPROHDIV[0].TNFAGGMKXD,null,WSHPROHDIV[0].jugador,null,WSHPROHDIV[0].VMKDXVSQEY));
			
			console.log("Acabo de introducir "+VDKOVQXHON[VDKOVQXHON.length-1].SGCSHJVERI+" "+VDKOVQXHON[VDKOVQXHON.length-1].HVCFEWNDRF);
			
			GLFVIKHXMD();
			
		UOPIKJVEKS.add(sprite);
		
		if (UBWRXKMTQN=="D"){
			var NOFEDXHMLS=VUFCMULFSR;
			var GHTWROCHVV=QTQIWVWEOI;
			var UYAEIRFYUJ=sprite.angle+DDONCKKEVJ;		
			XACEBCSJAB=AGKVNAGGLB;
		}
		
		if (UBWRXKMTQN=="U"){
			var NOFEDXHMLS=posX_U;
			var GHTWROCHVV=posY_U;
			var UYAEIRFYUJ=sprite.angle+NXXLHVGDFY;		
			XACEBCSJAB=TWJONOKGHC;
		}	
		
		if (UBWRXKMTQN=="L"){
			var NOFEDXHMLS=IXWMVXRIVW;
			var GHTWROCHVV=QFPBRSSRCY;
			var UYAEIRFYUJ=sprite.angle+MALHKNCITQ;	
			XACEBCSJAB=KNVKGHHTYC;
			
		}	

		if (UBWRXKMTQN=="R"){
			var NOFEDXHMLS=HCTVQVJJIB;
			var GHTWROCHVV=IWGTWFENXM;
			var UYAEIRFYUJ=sprite.angle+WPVNAOXVJH;	
			XACEBCSJAB=CBCNHFGWLU;
		}	
				
			var CSLRKCVDYI=WSHPROHDIV[0].jugador;
			var HARWYWXFOX=WSHPROHDIV[0].AGTXFNIKQD;
			HARWYWXFOX=LUCRWXJMDR;
			
			for (i=0;i<=XACEBCSJAB.length-1;i++){
				if (sprite.name==XACEBCSJAB[i].TNFAGGMKXD.name){
					//var posicionX=WIEVLYANFM("D",AGKVNAGGLB[i].NPYBJSHIFL);
					//var posicionY=FIGQBSJQGA("D",AGKVNAGGLB[i].NPYBJSHIFL)
					break;
				}
			}		
			
			NAYBJTKIKA(WSHPROHDIV[0].TNFAGGMKXD);
			
			XACEBCSJAB.splice(i,1);
			OROGRNBISW(XACEBCSJAB,UBWRXKMTQN);	
			
			FRWLTWDFVM(HARWYWXFOX,CSLRKCVDYI);
			
			WSHPROHDIV.splice(0,1);	
				VRLYJAAHUE(sprite);
				EABXADHEVT('CVRQKCGIRI');
				PQUFIBKJJH = YMHIHSNADE.add.tween(sprite);
				PQUFIBKJJH.to( {x:NOFEDXHMLS
				,y:GHTWROCHVV,
				angle : UYAEIRFYUJ
				}, MDYSFNYPYP, KYFMRVNHIQ);		
				
				if (WSHPROHDIV.length>0)
				{
					PQUFIBKJJH.onComplete.add(TJUOUTRMCD,this);
				}
				
				
				
				//TJUOUTRMCD,this)	
				YMHIHSNADE.add.tween(sprite.scale).to( {x:1,y:1}, IRXOKNWTLV, BSXWFYLCEW,true);
				PQUFIBKJJH.start();
				sprite.bringToTop();
			

		}
	}

};



TJUOUTRMCD=function(){

	
	//var COIVBWRMCC;
	//var s; 
	var sprite;
	var UBWRXKMTQN;
	var i;
	var XACEBCSJAB;

	if (OTGNMRHTVK()==true)
	{
		WWAYLOUPUQ(); 
	}
	else
	{
		
		if (WSHPROHDIV.length>0){
		sprite=WSHPROHDIV[0].TNFAGGMKXD;
		//COIVBWRMCC=sprite.width
		UBWRXKMTQN=HHOPUSIABJ(WSHPROHDIV[0].jugador);

		//KTBOJTXFEU.push(new NQMQGXXHIL(WSHPROHDIV[0].AGTXFNIKQD,WSHPROHDIV[0].jugador) );
		KTBOJTXFEU.push(new NQMQGXXHIL(LUCRWXJMDR,WSHPROHDIV[0].jugador) );
		
		VDKOVQXHON.push(new TVYNYTCQYW(WSHPROHDIV[0].SGCSHJVERI,WSHPROHDIV[0].UUOPKETETA,WSHPROHDIV[0].HVCFEWNDRF,WSHPROHDIV[0].TNFAGGMKXD,null,WSHPROHDIV[0].jugador,null,WSHPROHDIV[0].VMKDXVSQEY));
		
		console.log("Acabo de introducir "+VDKOVQXHON[VDKOVQXHON.length-1].SGCSHJVERI+" "+VDKOVQXHON[VDKOVQXHON.length-1].HVCFEWNDRF);
		
		GLFVIKHXMD();
		
		UOPIKJVEKS.add(sprite);	
		if (UBWRXKMTQN=="D"){
			var NOFEDXHMLS=VUFCMULFSR;
			var GHTWROCHVV=QTQIWVWEOI;
			var UYAEIRFYUJ=sprite.angle+DDONCKKEVJ;		
			XACEBCSJAB=AGKVNAGGLB;
		}
		
		if (UBWRXKMTQN=="U"){
			var NOFEDXHMLS=posX_U;
			var GHTWROCHVV=posY_U;
			var UYAEIRFYUJ=sprite.angle+NXXLHVGDFY;		
			XACEBCSJAB=TWJONOKGHC;
		}	
		
		if (UBWRXKMTQN=="L"){
			var NOFEDXHMLS=IXWMVXRIVW;
			var GHTWROCHVV=QFPBRSSRCY;
			var UYAEIRFYUJ=sprite.angle+MALHKNCITQ;	
			XACEBCSJAB=KNVKGHHTYC;
			
		}	

		if (UBWRXKMTQN=="R"){
			var NOFEDXHMLS=HCTVQVJJIB;
			var GHTWROCHVV=IWGTWFENXM;
			var UYAEIRFYUJ=sprite.angle+WPVNAOXVJH;	
			XACEBCSJAB=CBCNHFGWLU;
		}	
		
		var CSLRKCVDYI=WSHPROHDIV[0].jugador;
		var HARWYWXFOX=WSHPROHDIV[0].AGTXFNIKQD;
		HARWYWXFOX=LUCRWXJMDR;

			for (i=0;i<=XACEBCSJAB.length-1;i++)
			{
				if (sprite.name==XACEBCSJAB[i].TNFAGGMKXD.name)
				{
					//var posicionX=WIEVLYANFM("D",AGKVNAGGLB[i].NPYBJSHIFL);
					//var posicionY=FIGQBSJQGA("D",AGKVNAGGLB[i].NPYBJSHIFL)
					break;
				}
			}		
			XACEBCSJAB.splice(i,1);
			OROGRNBISW(XACEBCSJAB,UBWRXKMTQN);	
		
		NAYBJTKIKA(WSHPROHDIV[0].TNFAGGMKXD);	
		WSHPROHDIV.splice(0,1);	
			
			VRLYJAAHUE(sprite);
			FRWLTWDFVM(HARWYWXFOX,CSLRKCVDYI);
			
			EABXADHEVT('CVRQKCGIRI');
			PQUFIBKJJH = YMHIHSNADE.add.tween(sprite);
			PQUFIBKJJH.to( {x:NOFEDXHMLS
			,y:GHTWROCHVV,
			angle : UYAEIRFYUJ
			}, MDYSFNYPYP, KYFMRVNHIQ);		
			
			if (WSHPROHDIV.length>0)
			{
				//PQUFIBKJJH.onComplete.add(
				//			function () {
				//	FRWLTWDFVM(HARWYWXFOX,CSLRKCVDYI,"BUFFER3"); //Truco para poder pasar por parmetro
				//	}
				PQUFIBKJJH.onComplete.add(JKHRSVUIHB,this);		
			}
			/*else
			{
				PQUFIBKJJH.onComplete.add(
					function () {
						FRWLTWDFVM(HARWYWXFOX,CSLRKCVDYI,"BUFFER3"); //Truco para poder pasar por parmetro
					}
					);
			}*/
			//JKHRSVUIHB,this)	
			YMHIHSNADE.add.tween(sprite.scale).to( {x:1,y:1}, IRXOKNWTLV, BSXWFYLCEW,true);
			PQUFIBKJJH.start();
			sprite.bringToTop();
			

		}
	}
};


JKHRSVUIHB=function(){

	
	//var COIVBWRMCC;
	//var s; 
	var sprite;
	var UBWRXKMTQN;
	var i;
	var XACEBCSJAB;

	if (OTGNMRHTVK()==true)
	{
		WWAYLOUPUQ(); 
	}
	else
	{
		if (WSHPROHDIV.length>0){
		sprite=WSHPROHDIV[0].TNFAGGMKXD;
		//COIVBWRMCC=sprite.width
		UBWRXKMTQN=HHOPUSIABJ(WSHPROHDIV[0].jugador);

		//KTBOJTXFEU.push(new NQMQGXXHIL(WSHPROHDIV[0].AGTXFNIKQD,WSHPROHDIV[0].jugador) );
		KTBOJTXFEU.push(new NQMQGXXHIL(LUCRWXJMDR,WSHPROHDIV[0].jugador) );
		
		VDKOVQXHON.push(new TVYNYTCQYW(WSHPROHDIV[0].SGCSHJVERI,WSHPROHDIV[0].UUOPKETETA,WSHPROHDIV[0].HVCFEWNDRF,WSHPROHDIV[0].TNFAGGMKXD,null,WSHPROHDIV[0].jugador,null,WSHPROHDIV[0].VMKDXVSQEY));
		
		console.log("Acabo de introducir "+VDKOVQXHON[VDKOVQXHON.length-1].SGCSHJVERI+" "+VDKOVQXHON[VDKOVQXHON.length-1].HVCFEWNDRF);
		
		GLFVIKHXMD();
		
		UOPIKJVEKS.add(sprite);
		if (UBWRXKMTQN=="D"){
			var NOFEDXHMLS=VUFCMULFSR;
			var GHTWROCHVV=QTQIWVWEOI;
			var UYAEIRFYUJ=sprite.angle+DDONCKKEVJ;		
			XACEBCSJAB=AGKVNAGGLB;
		}
		
		if (UBWRXKMTQN=="U"){
			var NOFEDXHMLS=posX_U;
			var GHTWROCHVV=posY_U;
			var UYAEIRFYUJ=sprite.angle+NXXLHVGDFY;		
			XACEBCSJAB=TWJONOKGHC;
		}	
		
		if (UBWRXKMTQN=="L"){
			var NOFEDXHMLS=IXWMVXRIVW;
			var GHTWROCHVV=QFPBRSSRCY;
			var UYAEIRFYUJ=sprite.angle+MALHKNCITQ;	
			XACEBCSJAB=KNVKGHHTYC;
			
		}	

		if (UBWRXKMTQN=="R"){
			var NOFEDXHMLS=HCTVQVJJIB;
			var GHTWROCHVV=IWGTWFENXM;
			var UYAEIRFYUJ=sprite.angle+WPVNAOXVJH;	
			XACEBCSJAB=CBCNHFGWLU;
		}	
		
			var CSLRKCVDYI=WSHPROHDIV[0].jugador;
			var HARWYWXFOX=WSHPROHDIV[0].AGTXFNIKQD;
			HARWYWXFOX=LUCRWXJMDR;
			
			for (i=0;i<=XACEBCSJAB.length-1;i++){
				if (sprite.name==XACEBCSJAB[i].TNFAGGMKXD.name){
					//var posicionX=WIEVLYANFM("D",AGKVNAGGLB[i].NPYBJSHIFL);
					//var posicionY=FIGQBSJQGA("D",AGKVNAGGLB[i].NPYBJSHIFL)
					break;
				}
			}		
			XACEBCSJAB.splice(i,1);		
			OROGRNBISW(XACEBCSJAB,UBWRXKMTQN);	
			
			NAYBJTKIKA(WSHPROHDIV[0].TNFAGGMKXD);
			WSHPROHDIV.splice(0,1);	
			
			VRLYJAAHUE(sprite);
			FRWLTWDFVM(HARWYWXFOX,CSLRKCVDYI);
			EABXADHEVT('CVRQKCGIRI');
			
			PQUFIBKJJH = YMHIHSNADE.add.tween(sprite);
			PQUFIBKJJH.to( {x:NOFEDXHMLS
			,y:GHTWROCHVV,
			angle : UYAEIRFYUJ
			}, MDYSFNYPYP, KYFMRVNHIQ);		
			
			
			if (WSHPROHDIV.length>0){
				//PQUFIBKJJH.onComplete.add(
				//				function () {
				//		FRWLTWDFVM(HARWYWXFOX,CSLRKCVDYI,"BUFFER4"); //Truco para poder pasar por parmetro
				//		}
				//)
				
				PQUFIBKJJH.onComplete.add(MueveAlTablero_buffer4,this);
			}
		/*	else
			{
				PQUFIBKJJH.onComplete.add(
					function () {
						FRWLTWDFVM(HARWYWXFOX,CSLRKCVDYI,"BUFFER3"); //Truco para poder pasar por parmetro
					}
					);
			}*/
			//MueveAlTablero_buffer4,this)	
			YMHIHSNADE.add.tween(sprite.scale).to( {x:1,y:1}, IRXOKNWTLV, BSXWFYLCEW,true);
			PQUFIBKJJH.start();
			sprite.bringToTop();
			

		}
	}
};


MueveAlTablero_buffer4=function(){

	
	//var COIVBWRMCC;
	//var s; 
	var sprite;
	var UBWRXKMTQN;
	var i;
	var XACEBCSJAB;
	
	if (OTGNMRHTVK()==true)
	{
		WWAYLOUPUQ(); 
	}
	else
	{
		if (WSHPROHDIV.length>0){
		sprite=WSHPROHDIV[0].TNFAGGMKXD;
		//COIVBWRMCC=sprite.width
		UBWRXKMTQN=HHOPUSIABJ(WSHPROHDIV[0].jugador);

		KTBOJTXFEU.push(new NQMQGXXHIL(LUCRWXJMDR,WSHPROHDIV[0].jugador) );
		
		VDKOVQXHON.push(new TVYNYTCQYW(WSHPROHDIV[0].SGCSHJVERI,WSHPROHDIV[0].UUOPKETETA,WSHPROHDIV[0].HVCFEWNDRF,WSHPROHDIV[0].TNFAGGMKXD,null,WSHPROHDIV[0].jugador,null,WSHPROHDIV[0].VMKDXVSQEY));
		
		console.log("Acabo de introducir "+VDKOVQXHON[VDKOVQXHON.length-1].SGCSHJVERI+" "+VDKOVQXHON[VDKOVQXHON.length-1].HVCFEWNDRF);
		
		GLFVIKHXMD();
		
		UOPIKJVEKS.add(sprite);
		if (UBWRXKMTQN=="D"){
			var NOFEDXHMLS=VUFCMULFSR;
			var GHTWROCHVV=QTQIWVWEOI;
			var UYAEIRFYUJ=DDONCKKEVJ;		
			XACEBCSJAB=AGKVNAGGLB;
		}
		
		if (UBWRXKMTQN=="U"){
			var NOFEDXHMLS=posX_U;
			var GHTWROCHVV=posY_U;
			var UYAEIRFYUJ=NXXLHVGDFY;		
			XACEBCSJAB=TWJONOKGHC;
		}	
		
		if (UBWRXKMTQN=="L"){
			var NOFEDXHMLS=IXWMVXRIVW;
			var GHTWROCHVV=QFPBRSSRCY;
			var UYAEIRFYUJ=MALHKNCITQ;	
			XACEBCSJAB=KNVKGHHTYC;
			
		}	

		if (UBWRXKMTQN=="R"){
			var NOFEDXHMLS=HCTVQVJJIB;
			var GHTWROCHVV=IWGTWFENXM;
			var UYAEIRFYUJ=WPVNAOXVJH;	
			XACEBCSJAB=CBCNHFGWLU;
		}	
		
		var CSLRKCVDYI=WSHPROHDIV[0].jugador;
		var HARWYWXFOX=WSHPROHDIV[0].AGTXFNIKQD;
		HARWYWXFOX=LUCRWXJMDR;
		
			for (i=0;i<=XACEBCSJAB.length-1;i++){
				if (sprite.name==XACEBCSJAB[i].TNFAGGMKXD.name){
					//var posicionX=WIEVLYANFM("D",AGKVNAGGLB[i].NPYBJSHIFL);
					//var posicionY=FIGQBSJQGA("D",AGKVNAGGLB[i].NPYBJSHIFL)
					break;
				}
			}		
			XACEBCSJAB.splice(i,1);		
			OROGRNBISW(XACEBCSJAB,UBWRXKMTQN);	

		NAYBJTKIKA(WSHPROHDIV[0].TNFAGGMKXD);	
		WSHPROHDIV.splice(0,1);	
			
			VRLYJAAHUE(sprite);
			
			EABXADHEVT('CVRQKCGIRI');
			PQUFIBKJJH = YMHIHSNADE.add.tween(sprite);
			PQUFIBKJJH.to( {x:NOFEDXHMLS
			,y:GHTWROCHVV,
			angle : UYAEIRFYUJ
			}, MDYSFNYPYP, KYFMRVNHIQ);		
			
			
			//PQUFIBKJJH.onComplete.add(
			//				function () {
			//		FRWLTWDFVM(HARWYWXFOX,CSLRKCVDYI); //Truco para poder pasar por parmetro
			//		}
			//)
			
			PQUFIBKJJH.onComplete.add(
					function () {
						FRWLTWDFVM(HARWYWXFOX,CSLRKCVDYI,"BUFFER3"); //Truco para poder pasar por parmetro
					}
					);
			
			//FRWLTWDFVM,this)	
			YMHIHSNADE.add.tween(sprite.scale).to( {x:1,y:1}, IRXOKNWTLV, BSXWFYLCEW,true);
			PQUFIBKJJH.start();
			sprite.bringToTop();
			

		}
	}
};

EVHFMHFMJU=function(UHTPGPRUJA){
var QJXRLWRPYD;
var i;
var TTJFVWDTMG;
var GGXWYGGNYX;
var QGRDXLLRQW;
var QuienEsMiIzquierda3;	
var FOKWFGRCKO;
var THIYLVHHXQ;
var UPTTDAJONW;
	
	//PELIGROSO
	if (EGPDVIEJEL==false)
	{
		if (VDKOVQXHON.length>0){
			GGXWYGGNYX=UHTPGPRUJA-1;
			if (GGXWYGGNYX==0){
				GGXWYGGNYX=4;
			}
			FOKWFGRCKO=3;
			
				
			QGRDXLLRQW=GGXWYGGNYX-1;
			if (QGRDXLLRQW==0){
				QGRDXLLRQW=4;
			}
			THIYLVHHXQ=2;
			
			
			QuienEsMiIzquierda3=QGRDXLLRQW-1;
			if (QuienEsMiIzquierda3==0){
				QuienEsMiIzquierda3=4;
			}
			UPTTDAJONW=1;
			
			
			for (i=0;i<=VDKOVQXHON.length-1;i++)
			{
				if (VDKOVQXHON[i].jugador==GGXWYGGNYX)
				{
					VDKOVQXHON[i].VMKDXVSQEY=FOKWFGRCKO;
				}
				if (VDKOVQXHON[i].jugador==QGRDXLLRQW)
				{
					VDKOVQXHON[i].VMKDXVSQEY=THIYLVHHXQ;
				}
				if (VDKOVQXHON[i].jugador==QuienEsMiIzquierda3)
				{
					VDKOVQXHON[i].VMKDXVSQEY=UPTTDAJONW;
				}		
				
				if (VDKOVQXHON[i].jugador==UHTPGPRUJA)
				{
					VDKOVQXHON[i].VMKDXVSQEY=4;
				}
				
			}
			
			VDKOVQXHON.sort(sort_by('VMKDXVSQEY', false, parseFloat));
		}
	}
	//PELIGROSO
	if (UHTPGPRUJA==TFSXFTYVGQ)
	{
		IXLQLKYFRI();
	}
	LMGBDQDXWP();
	
	//01/01/2017 LO HE COMENTADO: FALLABA SI MATABA EL ULTIMO Y PINCHABAS ANTES DE QUE SE RECOGIERAN LAS CARTAS
	/*if (VDKOVQXHON.length>0)
	{
				//VDKOVQXHON.sort(sort_by('VMKDXVSQEY', false, parseFloat));
				DVNRTQIWGL= (VDKOVQXHON[VDKOVQXHON.length-1].jugador)+1;	
				for (i=0;i<=VDKOVQXHON.length-1;i++)
				{
					
					console.log("DVNRTQIWGL DE QuienGanaManoRESULTADO "+ (VDKOVQXHON[i].jugador+1)+" "+VDKOVQXHON[i].VMKDXVSQEY);
				}
				
				if (DVNRTQIWGL==5){
					DVNRTQIWGL=1;
				}
			

				
				log(true,"DVNRTQIWGL trucado "+DVNRTQIWGL);

	}*/
	

					
}

FRWLTWDFVM=function(SLGKDYQCAY,UHTPGPRUJA,JugadaDesdeBuffer){
	var QJXRLWRPYD;
	var TTJFVWDTMG;
	var ESHLDBNEQI;
	var  JJUORGEQOU;
	var CBKCESMEVY=false;
	var LJKAEXAOJE=0;
	var UPCWNPYAIE;
	var i;
	var MMMCNMNKTP;
	
	if (SLGKDYQCAY==undefined){
		log(true,"LUCRWXJMDR Recibida por m mismo "+LUCRWXJMDR+" SSUNXNEEHN: "+TFSXFTYVGQ);
		UPCWNPYAIE=LUCRWXJMDR;
		MMMCNMNKTP=TFSXFTYVGQ
	}	
	else{
		log(true,"LUCRWXJMDR Recibida por parmetro "+SLGKDYQCAY+" SSUNXNEEHN: "+UHTPGPRUJA);
		UPCWNPYAIE=SLGKDYQCAY;
		MMMCNMNKTP=UHTPGPRUJA
	}
	
	
	
	//if (1==1)
	if (OTGNMRHTVK()==true)
	{
		WWAYLOUPUQ(); 
	}
	else
	{
	//ape if (HQWFFUCQDR(UPCWNPYAIE,MMMCNMNKTP)==true){
		
		
		
			var WTDTNBNNXE=0;
			/*for (var i=0;i<=KTBOJTXFEU.length-1;i++){
				if (KTBOJTXFEU[i].AGTXFNIKQD>UltimaRonda){
					UltimaRonda=KTBOJTXFEU[i].AGTXFNIKQD;
				}
			}
			*/
			for (var i=0;i<=KTBOJTXFEU.length-1;i++){
				if (KTBOJTXFEU[i].AGTXFNIKQD==UPCWNPYAIE){
					WTDTNBNNXE++;
				}
			}
			
			log(true,"WTDTNBNNXE en la LUCRWXJMDR "+WTDTNBNNXE);
			
		/*	if (WTDTNBNNXE==4){
				KKPQLKMIQR.push(UPCWNPYAIE);
				LUCRWXJMDR++;
				UPCWNPYAIE=LUCRWXJMDR;
				//log(false,"He cambiado a LUCRWXJMDR "+LUCRWXJMDR);
				log(false,"Jugadas en esta LUCRWXJMDR... ");
				for (var i=0;i<=KKPQLKMIQR.length-1;i++){
					log(false,KKPQLKMIQR[i]+",");
				}
			}*/

			
		log(true,"ANTES LIMPIAR MESA LIMPIAR MESA"+VDKOVQXHON.length+" "+WTDTNBNNXE);
		//ape if (VDKOVQXHON.length>=4 && WTDTNBNNXE==4){
			

		
		if (VDKOVQXHON.length>=4 ){
		log(true,"DEBE LIMPIAR MESA");
		TKXPPGUPVV.stop; //Mucho miedo 29/04/2017

				LUCRWXJMDR++;
				UPCWNPYAIE=LUCRWXJMDR;
			
			YBVSVUGPJG.splice(0,100);
			for (i=0;i<=VDKOVQXHON.length-1;i++)
			{
				YBVSVUGPJG.push(new TVYNYTCQYW(VDKOVQXHON[i].SGCSHJVERI,VDKOVQXHON[i].UUOPKETETA,VDKOVQXHON[i].HVCFEWNDRF,VDKOVQXHON[i].TNFAGGMKXD,
					VDKOVQXHON[i].NPYBJSHIFL,VDKOVQXHON[i].jugador,VDKOVQXHON[i].AGTXFNIKQD,VDKOVQXHON[i].VMKDXVSQEY  )	);					
			}
			
			VDKOVQXHON.splice(0,1000);
			
			for (i=0;i<=3;i++)
			
			{
				if (i==0){
					QJXRLWRPYD=YBVSVUGPJG[i].VVRCMEUNOJ;
					ESHLDBNEQI=YBVSVUGPJG[i].SGCSHJVERI;
					TTJFVWDTMG=YBVSVUGPJG[i].jugador;
					JJUORGEQOU=YBVSVUGPJG[i].TNFAGGMKXD
				}
			
				if ( (YBVSVUGPJG[i].VVRCMEUNOJ>QJXRLWRPYD && YBVSVUGPJG[i].SGCSHJVERI==ESHLDBNEQI)
					|| (  YBVSVUGPJG[i].SGCSHJVERI==TGTQPBEQFR && ESHLDBNEQI!=TGTQPBEQFR )
				)
				{

				QJXRLWRPYD=YBVSVUGPJG[i].VVRCMEUNOJ;
				ESHLDBNEQI=YBVSVUGPJG[i].SGCSHJVERI;
				TTJFVWDTMG=YBVSVUGPJG[i].jugador;
				JJUORGEQOU=YBVSVUGPJG[i].TNFAGGMKXD
				
				}
				
				LJKAEXAOJE=LJKAEXAOJE+YBVSVUGPJG[i].WQCPJQWFPN

			}
			
			DVNRTQIWGL=TTJFVWDTMG;
			MuestraTurno();
			MMMCNMNKTP=DVNRTQIWGL;
			JWXRWCVLGC(UPCWNPYAIE);
			
			
			log(true,"DVNRTQIWGL VA GANANDO "+DVNRTQIWGL);
			
			if (TFSXFTYVGQ==1){
				if (TTJFVWDTMG==1){
					PPTWRPRLSI=true;
				}
				if (TTJFVWDTMG==2){
					PPTWRPRLSI=false;
				}
				if (TTJFVWDTMG==3){
					PPTWRPRLSI=true;
				}
				if (TTJFVWDTMG==4){
					PPTWRPRLSI=false;
				}			
			}
			if (TFSXFTYVGQ==2){
				if (TTJFVWDTMG==2){
					PPTWRPRLSI=true;
				}
				if (TTJFVWDTMG==3){
					PPTWRPRLSI=false;
				}
				if (TTJFVWDTMG==4){
					PPTWRPRLSI=true;
				}
				if (TTJFVWDTMG==1){
					PPTWRPRLSI=false;
				}			
			}
			if (TFSXFTYVGQ==3){
				if (TTJFVWDTMG==3){
					PPTWRPRLSI=true;
				}
				if (TTJFVWDTMG==4){
					PPTWRPRLSI=false;
				}
				if (TTJFVWDTMG==1){
					PPTWRPRLSI=true;
				}
				if (TTJFVWDTMG==2){
					PPTWRPRLSI=false;
				}			
			}
			if (TFSXFTYVGQ==4){
				if (TTJFVWDTMG==4){
					PPTWRPRLSI=true;
				}
				if (TTJFVWDTMG==1){
					PPTWRPRLSI=false;
				}
				if (TTJFVWDTMG==2){
					PPTWRPRLSI=true;
				}
				if (TTJFVWDTMG==3){
					PPTWRPRLSI=false;
				}			
			}		
			

			var OTGBWFDOND;
			if (PPTWRPRLSI==true){
				OTGBWFDOND=LQJEJOOAPH("N",	LJKAEXAOJE);			
			}
			else{
				OTGBWFDOND=LQJEJOOAPH("R",	LJKAEXAOJE);	
			}	
			
			log(true,"EXOQTFOAQQ FRWLTWDFVM: "+UHHXSNXXJK+" "+PXGXKDDNFK+" "+OTGBWFDOND);
			
			if (OTGBWFDOND==true)
			{
				
				VRLYJAAHUE(JJUORGEQOU);
				
				//Vibracin
				//if (VDKOVQXHON.length==4)
				//{
				//	log(true,"TABAZO "+TTJFVWDTMG+" "+VDKOVQXHON[3].jugador);
				//}
					
				
				if (LJKAEXAOJE>=21 && YBVSVUGPJG[3].WQCPJQWFPN==11 && TTJFVWDTMG==YBVSVUGPJG[3].jugador) 
				{
					EABXADHEVT("OTSNYLXEHR");
					//addquake();
					//if("vibrate" in window.navigator) {
					if(navigator.vibrate) {
						window.navigator.vibrate(300);
					}
					
					// define the camera offset for the VHYOFJEDUQ
					var margin = 50;
					// and set the world's bounds according to the given margin
					var x = -margin;
					var y = -margin;

					var w = YMHIHSNADE.world.width + margin * 2;
					var h = YMHIHSNADE.world.height + margin * 2;
					YMHIHSNADE.world.setBounds(x, y, w, h);

					// we make sure camera is at position (0,0)
					YMHIHSNADE.world.camera.position.set(0);

					var rumbleOffset = 20;

					// we need to move according to the camera's current position
					var properties = {
					x: YMHIHSNADE.camera.x - rumbleOffset
					};

					// we make it a relly fast movement
					var duration = 50;
					// because it will repeat
					var repeat = 3;
					// we use bounce in-out to soften it a little bit
					var ease = Phaser.Easing.Bounce.InOut;
					var autoStart = false;
					// a little delay because we will run it indefinitely
					var delay = 0;
					// we want to go back to the original position
					var yoyo = true;

					var VHYOFJEDUQ = YMHIHSNADE.add.tween(YMHIHSNADE.camera)
					.to(properties, duration, ease, autoStart, delay, repeat, yoyo);
				  
					// we're using this line for the example to run indefinitely
					VHYOFJEDUQ.onComplete.addOnce(
						function()
						{
							quakeEnd();
							PQUFIBKJJH = YMHIHSNADE.add.tween(JJUORGEQOU.scale);
							PQUFIBKJJH.to( {x:MEPQMUPTEH,y:MEPQMUPTEH}		
							, MDYSFNYPYP, KYFMRVNHIQ,false,PVQFVAAAEY);
							//PQUFIBKJJH.onComplete.add(JFILXLIVJN,this)
								log(false,"LAS HARA PEQUEAS?");
							PQUFIBKJJH.onComplete.add(
								function () {
									JFILXLIVJN(UPCWNPYAIE,MMMCNMNKTP); //Truco para poder pasar por parmetro
									JJUORGEQOU.bringToTop();
								}
							);				
							PQUFIBKJJH.start();
							
						}

					);

					// let the earthquake begins
					VHYOFJEDUQ.start();


					
					
				}
				else
				{
					
					 if (TTJFVWDTMG==YBVSVUGPJG[3].jugador && YBVSVUGPJG[3].WQCPJQWFPN==2 && LUCRWXJMDR<=5)
					 {
						 EABXADHEVT("OJJBAIPHEV");
					 }
		
					 if (TTJFVWDTMG==YBVSVUGPJG[3].jugador && YBVSVUGPJG[3].WQCPJQWFPN==11 && LUCRWXJMDR<=5 && YBVSVUGPJG[3].SGCSHJVERI=="oros")
					 {
						 EABXADHEVT("LMAYDDUATD");
					 }	
					 
					 if (TTJFVWDTMG==YBVSVUGPJG[3].jugador && YBVSVUGPJG[3].WQCPJQWFPN==11 && LUCRWXJMDR<=5 && YBVSVUGPJG[3].SGCSHJVERI=="espadas")
					 {
						 EABXADHEVT("XKBVJQJRBV");
					 }		

					 
					
					PQUFIBKJJH = YMHIHSNADE.add.tween(JJUORGEQOU.scale);
					PQUFIBKJJH.to( {x:MEPQMUPTEH,y:MEPQMUPTEH}		
					, MDYSFNYPYP, KYFMRVNHIQ,false,PVQFVAAAEY);
					//PQUFIBKJJH.onComplete.add(JFILXLIVJN,this)
						log(false,"LAS HARA PEQUEAS?");
					PQUFIBKJJH.onComplete.add(
						function () {
							JFILXLIVJN(UPCWNPYAIE,MMMCNMNKTP); //Truco para poder pasar por parmetro
							JJUORGEQOU.bringToTop();
						}
					);				
					PQUFIBKJJH.start();
					
				}
				
			}
			
		
			
			
			//log(false,"Gana "+TTJFVWDTMG);
			
			
			

			
		}
		else
		{
			
			//var timerCalculaTurno = YMHIHSNADE.time.create(false);
			//timerCalculaTurno.add(1500, function() { //No me gusta pero si quitaba el 1 y el 4 fallaba. Es como que no le daba tiempo
			
				
				
				
				////
				
			

				
				////
				
				
				
				
				//if (VDKOVQXHON.length>=3)
				//{
					
				//	EABXADHEVT("OJJBAIPHEV");
				//}
				
				if (VDKOVQXHON.length>0)
				{
					log(true,"REAL "+VDKOVQXHON[VDKOVQXHON.length-1].VVRCMEUNOJ+" "+ VDKOVQXHON[VDKOVQXHON.length-1].SGCSHJVERI)
					 if (VDKOVQXHON[VDKOVQXHON.length-1].VVRCMEUNOJ==5 && LUCRWXJMDR<=5 && VDKOVQXHON[VDKOVQXHON.length-1].SGCSHJVERI=="bastos")
					 {
						 EABXADHEVT("DNBXXHKKYK");
					 }			
					else
					{
						if (VDKOVQXHON.length==1)
						{
							if ( (VDKOVQXHON[0].SGCSHJVERI==TGTQPBEQFR ||  VDKOVQXHON[0].WQCPJQWFPN==11) && LUCRWXJMDR==5)
							{
								EABXADHEVT("USNAAQWHUY");
							}
						}
					}
				}
				
				
			
				AGLRWERBPD(UPCWNPYAIE); 
			
				log(true,"CAMBIO DVNRTQIWGL A" + DVNRTQIWGL);	
			
				if (EGPDVIEJEL==false){
					//log(true,"IA Desde FRWLTWDFVM");


						//var TKXPPGUPVV = YMHIHSNADE.time.create(false);//REVISIONTIEMPO
						TKXPPGUPVV.stop(); //04/17
						var PLKOPTSHBQ=XNYRSXYRGF(DVNRTQIWGL);
						if(VDKOVQXHON.length>=4)
						{
							PLKOPTSHBQ=PLKOPTSHBQ+2000;
						}
						TKXPPGUPVV.add(PLKOPTSHBQ, function(){TKXPPGUPVV.stop();
						console.log("IA DESDE quienganamano "+PLKOPTSHBQ);
						IA(DVNRTQIWGL);} );
						TKXPPGUPVV.start();		


						
					//}
				}
				
			
			
			
			//} );
			//timerCalculaTurno.start();
			
			

		

							

		}
		
		//if  (UHTPGPRUJA==TFSXFTYVGQ)
		//{
			IXLQLKYFRI();
		//}
		LMGBDQDXWP();
	
	
		/*log(true,"JWXRWCVLGC Desde FRWLTWDFVM");
		JWXRWCVLGC(UPCWNPYAIE);*/
	
	}
	//else
	//{
	//	log(true,"No se puede mover para LUCRWXJMDR "+UPCWNPYAIE+" y jugador "+MMMCNMNKTP);
	//}
	
	
	//log(false,"Q INTENTA METER MANO");
	/*console.log("Desde FRWLTWDFVM")
	HeredandoJugadores(UPCWNPYAIE);*/
	
	
	

}


EstaConectado=function(JugadorValidar)
{
	
	var i;
	var QOWECQVXCM=true
	for (i=0;i<=KYDWXPGHVY.length-1;i++)
	{
		//console.log("XJARYUVBCB "+ESKTEXAVHU);	
		if (JugadorValidar==KYDWXPGHVY[i].SSUNXNEEHN)
		{
			QOWECQVXCM=false;
			break;
		}
	}
	
	return QOWECQVXCM;
}

XNYRSXYRGF=function(JugadorValidar)
{
	var XNYRSXYRGF;
	if( EstaConectado(JugadorValidar)==true )
	{
		if (EGPDVIEJEL==false)
		{
			XNYRSXYRGF=HLBMKNFUWL;	
		}
		else
		{
			XNYRSXYRGF=0.1;	
		}
		
	}
	else
	{
		XNYRSXYRGF=HLBMKNFUWL;	
	}
	
	return XNYRSXYRGF;
}					
					
BSUNPMKJSM=function(UPCWNPYAIE)
{
	var i;
	var RCWBHVLAWM=false;
	var TSSJDMNNWO=0;


	var PLKOPTSHBQ=HLBMKNFUWL+TSSJDMNNWO;
	TKXPPGUPVV.stop(); //04/17			
	TKXPPGUPVV.loop(PLKOPTSHBQ, function(){

		TKXPPGUPVV.stop();

				
		LRYVPILWKS();
		console.log("debería tirar"+DVNRTQIWGL);
		console.log("Soy "+TFSXFTYVGQ);
		console.log("El control lo tiene "+ESKTEXAVHU);
		
		
		for (i=0;i<=KYDWXPGHVY.length-1;i++)
		{
			//console.log("XJARYUVBCB "+ESKTEXAVHU);	
			if (DVNRTQIWGL==KYDWXPGHVY[i].SSUNXNEEHN && TFSXFTYVGQ==ESKTEXAVHU)
			{
					
					console.log("Tirando "+UPCWNPYAIE+ " "+DVNRTQIWGL+" "+MYQBNBVHKU);
					if (MYQBNBVHKU==true)
					{
							console.log("Venga Tira!! "+UPCWNPYAIE+ " "+DVNRTQIWGL);
							console.log("BLOQUEO DESDE SERVER RAPIDO (desconectados) "+DVNRTQIWGL+" "+UPCWNPYAIE);
						//}
						RCWBHVLAWM=true;
						

						break;					
					}
		
			}	
			
		}	
		
		if (RCWBHVLAWM==false){
		
			return true;
		}
		else
		{
			console.log("IA DESDE desconectados");
			TKXPPGUPVV.stop(); //Mucho miedo 29/04/2017
			IA(DVNRTQIWGL);
			return false;
		

			
			
		}
	
	});
		TKXPPGUPVV.start();	

}

JWXRWCVLGC=function(UPCWNPYAIE)
{
	var TiempoParaturno;
	
	if (EGPDVIEJEL==true && VEMBUOOHLM==true)
		{	
			
			console.log("** Contador Turno");
			BSUNPMKJSM( UPCWNPYAIE ); //10/02/2017
			
			
			
			//GWFPRHAYQK=5;	Hago esto para no modificar el VOJPSKOTNY. Quiero que el contador comience pero le sumo segundos para compensar el tiempo de reparto.
			if (LUCRWXJMDR==1 && VDKOVQXHON.length==0)
			{
				TiempoParaturno=GWFPRHAYQK; //ILA 20170128 TiempoParaturno=GWFPRHAYQK; 
			}
			else{
				TiempoParaturno=GWFPRHAYQK;
			}
			
			
			
			//if (XPSRYGDPNI(AGKVNAGGLB[i],TFSXFTYVGQ)==true)
			//{
				log(false,"ESTA CORRIENDO: "+ HUUCUYFBLW.duration.toFixed(0));
				if (DVNRTQIWGL==TFSXFTYVGQ &&  HUUCUYFBLW.duration.toFixed(0)==0  )
				{

							
							log(false,"VECES QUE PONE EL RELOJ")
								var style = { font: "bold 32px Arial", fill: "#fff", boundsAlignH: "center", boundsAlignV: "middle" };

								
								HUUCUYFBLW = YMHIHSNADE.time.create(false);
								HUUCUYFBLW.loop(1000, function(){
									
										//if (MYQBNBVHKU==false)
										//{
										//	HUUCUYFBLW.stop();
										//}
										//else
										//{
											if (YJNIRPCWEI!=undefined)
											{
												YJNIRPCWEI.text="";
											}
											
											if (TiempoParaturno>GWFPRHAYQK)
											{
												YJNIRPCWEI.text="";
											}
											else
											{
												
												if (MYQBNBVHKU==true)
												{
													YJNIRPCWEI.text="Es mi turno "+TiempoParaturno;
												}
												
											}

											
											if (TiempoParaturno<=0)
											{
												HUUCUYFBLW.stop();
												YJNIRPCWEI.text="";
												log(true,"IA Desde JWXRWCVLGC");

													//IA(TFSXFTYVGQ);		DUDA PELIGRO
													//var TKXPPGUPVV = YMHIHSNADE.time.create(false);
													HUUCUYFBLW.stop();
													
													var PLKOPTSHBQ=XNYRSXYRGF(DVNRTQIWGL);
													TKXPPGUPVV.stop(); //04/17
													TKXPPGUPVV.add(PLKOPTSHBQ, function(){
														TKXPPGUPVV.stop();
														console.log("IA desde Contador Turno");
														IA(TFSXFTYVGQ);
													} 
													);
													TKXPPGUPVV.start();	
												//}							
											}
											else
											{
												TiempoParaturno=TiempoParaturno-1;
											}
										//}
										
									});
								
								HUUCUYFBLW.start();
								log(false,"ESTA CORRIENDO: "+ HUUCUYFBLW.duration.toFixed(0));
				}
				else
				{
					if (DVNRTQIWGL!=TFSXFTYVGQ)
					{
						HUUCUYFBLW.stop();
					}
				}
				

			//}
		}
}

AGLRWERBPD=function(UPCWNPYAIE){
	
	
	HUUCUYFBLW.stop();
	
	
	
	if (VDKOVQXHON.length>0){
				VDKOVQXHON.sort(sort_by('VMKDXVSQEY', false, parseFloat));
				DVNRTQIWGL= (VDKOVQXHON[VDKOVQXHON.length-1].jugador)+1;	
				
				if (DVNRTQIWGL==5){
					DVNRTQIWGL=1;
				}
				
				
				for (var i=0;i<=VDKOVQXHON.length-1;i++)
				{
					log(true,"TABA: "+VDKOVQXHON[i].jugador + VDKOVQXHON[i].VMKDXVSQEY);
				}
				
				log(true,"DVNRTQIWGL guay "+DVNRTQIWGL);
	}
	else
	{
		if (DVNRTQIWGL==4){
			DVNRTQIWGL=1;
		}
		else{
			DVNRTQIWGL++;
		}
		log(true,"DVNRTQIWGL feo "+ DVNRTQIWGL);
	}
	MuestraTurno();
	
	JWXRWCVLGC(UPCWNPYAIE);
			
}

JFILXLIVJN=function(TKWCTNGROU,LDCCGSIBKW){
	
	var i;
	for (i=0;i<=AGKVNAGGLB.length-1;i++)
	{
		AGKVNAGGLB[i].TNFAGGMKXD.tint=Phaser.Color.getColor(255,255,255);
	}
	//for (i=0;i<=VDKOVQXHON.length-1;i++){
		//log(false,"ante de hacerse pequeas")
		if(YBVSVUGPJG.length>=1){
		//log(false,"Se hacen pequeas")
		VRLYJAAHUE(YBVSVUGPJG[0].TNFAGGMKXD);
		YBVSVUGPJG[0].TNFAGGMKXD.alpha=1;
		PQUFIBKJJH = YMHIHSNADE.add.tween(YBVSVUGPJG[0].TNFAGGMKXD.scale);
		PQUFIBKJJH.to( {x:RABUWLOKWX
		,y:RABUWLOKWX
		}
		, MDYSFNYPYP, KYFMRVNHIQ,false,PVQFVAAAEY);
		PQUFIBKJJH.onComplete.add(EfectosRecogerCartas1,this)				
		PQUFIBKJJH.start();					
		}
//}
//EfectosHacerPequenas2=function(){
		if(YBVSVUGPJG.length>=2){
		VRLYJAAHUE(YBVSVUGPJG[1].TNFAGGMKXD);
		YBVSVUGPJG[1].TNFAGGMKXD.alpha=1;
		LJRRHVSVKD = YMHIHSNADE.add.tween(YBVSVUGPJG[1].TNFAGGMKXD.scale);
		LJRRHVSVKD.to( {x:RABUWLOKWX
		,y:RABUWLOKWX
		}
		, MDYSFNYPYP, KYFMRVNHIQ,false,PVQFVAAAEY);
		LJRRHVSVKD.onComplete.add(EfectosRecogerCartas2,this)				
		LJRRHVSVKD.start();		
		}
//}
//EfectosHacerPequenas3=function(){
		if(YBVSVUGPJG.length>=3){		
		VRLYJAAHUE(YBVSVUGPJG[2].TNFAGGMKXD);
		YBVSVUGPJG[2].TNFAGGMKXD.alpha=1;
		LCYAHFBDTT = YMHIHSNADE.add.tween(YBVSVUGPJG[2].TNFAGGMKXD.scale);
		LCYAHFBDTT.to( {x:RABUWLOKWX
		,y:RABUWLOKWX
		}
		, MDYSFNYPYP, KYFMRVNHIQ,false,PVQFVAAAEY);
		LCYAHFBDTT.onComplete.add(EfectosRecogerCartas3,this)				
		LCYAHFBDTT.start();		
		}
//}
//EfectosHacerPequenas4=function(){		
		if(YBVSVUGPJG.length>=4){
		//log(false,"Antes de llegar al 4");
		VRLYJAAHUE(YBVSVUGPJG[3].TNFAGGMKXD);
		YBVSVUGPJG[3].TNFAGGMKXD.alpha=1;
		NEPGDYQDEI = YMHIHSNADE.add.tween(YBVSVUGPJG[3].TNFAGGMKXD.scale);
		NEPGDYQDEI.to( {x:RABUWLOKWX
		,y:RABUWLOKWX
		}
		, MDYSFNYPYP, KYFMRVNHIQ,false,PVQFVAAAEY);
		NEPGDYQDEI.onComplete.add(//EfectosRecogerCartas4,this)		
				function () {
					EfectosRecogerCartas4(TKWCTNGROU,LDCCGSIBKW); //Truco para poder pasar por parmetro
				}
		);		
		NEPGDYQDEI.start();		
		}
	//}
		
}
//*/

DFCCHCJBNP=function(UPCWNPYAIE){


	if (OTGNMRHTVK()==true)
	{
		WWAYLOUPUQ(); 
	}
	else
	{

		//if (YBVSVUGPJG.length>=4){
		
		
			log(false,"Se mete en DFCCHCJBNP");
			console.log("Acabo de eliminar.."+YBVSVUGPJG.length+" registros");
			YBVSVUGPJG.splice(0,100);
			
			//LMGBDQDXWP();
			
			if (WSHPROHDIV!=undefined)
			{
				//for (i=0;i<=WSHPROHDIV.length-1;i++){
				log(false,"Se mete en DFCCHCJBNP a saber...");
					if (WSHPROHDIV.length>0){
					//VDKOVQXHON.push(new TVYNYTCQYW(WSHPROHDIV[0].SGCSHJVERI,WSHPROHDIV[0].UUOPKETETA,WSHPROHDIV[0].HVCFEWNDRF,WSHPROHDIV[0].TNFAGGMKXD,null,WSHPROHDIV[0].jugador));
					log(false,"Hay buffer.. y mide "+WSHPROHDIV.length);
					
					PMMTTJWRVR();


					
					}

			}
			
			if (EGPDVIEJEL==false){
				//log(true,"IA Desde Eliminar de la mesa");
					
					//var TKXPPGUPVV = YMHIHSNADE.time.create(false);//REVISIONTIEMPO
					TKXPPGUPVV.stop(); //04/17
					var PLKOPTSHBQ=XNYRSXYRGF(DVNRTQIWGL);
					/*if (PQUFIBKJJH.isRunning==true)
					{
						PLKOPTSHBQ=PLKOPTSHBQ+1500
					}
					else
					{
						console.log("No corre");
					}*/
						
					console.log("Tiempo "+PLKOPTSHBQ);
					TKXPPGUPVV.add(PLKOPTSHBQ, function(){
					TKXPPGUPVV.stop();
					console.log("IA DESDE eliminar de la mesa");
					IA(DVNRTQIWGL);} );
					TKXPPGUPVV.start();		
							
							
				//}
			}
			
			

		//}

		if (EGPDVIEJEL==true)
		{
			//if (TFSXFTYVGQ==1)
			//{
				IXLQLKYFRI();
			//}
		}
		
		//LMGBDQDXWP();
		console.log("SON VUELTAS "+EVAILWGGKX);
		console.log("VIYQDHWIAA EXOQTFOAQQ: "+UHHXSNXXJK+" YOBEPVEEMW: "+PXGXKDDNFK+" GANAR: "+JLVDFTPUNI);
		if (EVAILWGGKX==false)
		{
			if (AGKVNAGGLB.length==0)
			{
				BKBXOKMUUQ();
			}
			
			//if (LUCRWXJMDR==2)
			//{
			//	BKBXOKMUUQ();
			//WWAYLOUPUQ();
			//}
		}
		else
		{
			if (UHHXSNXXJK>=JLVDFTPUNI || PXGXKDDNFK>=JLVDFTPUNI)
			{
				WWAYLOUPUQ(); 
			}
		}
		
		LMGBDQDXWP();
	}
}


HQWFFUCQDR=function(SLGKDYQCAY,UHTPGPRUJA){
	var HAUSUTNHGI=true

		for (var i=0;i<=KTBOJTXFEU.length-1;i++){
			if(KTBOJTXFEU[i].AGTXFNIKQD==SLGKDYQCAY && KTBOJTXFEU[i].SSUNXNEEHN==UHTPGPRUJA){
				HAUSUTNHGI=false;
				break;
			}
		}
	
	if (HAUSUTNHGI==true){
		log(true,"Validado correctamente: LUCRWXJMDR "+SLGKDYQCAY+" "+"SSUNXNEEHN "+UHTPGPRUJA);
	/*	if (SLGKDYQCAY==2 && UHTPGPRUJA==1)
		{
			alert("mierder");
		}*/
		KTBOJTXFEU.push(new NQMQGXXHIL(SLGKDYQCAY,UHTPGPRUJA) );
		console.log("BLOQUEO DESDE SERVER RAPIDO (validando movimietno) "+UHTPGPRUJA+" "+SLGKDYQCAY);
	}
	else{
		log(false,"Validado Incorrectamente: LUCRWXJMDR "+SLGKDYQCAY+" "+"SSUNXNEEHN "+UHTPGPRUJA);
	}
	
	return HAUSUTNHGI;
}

ValidaMovimientoJugadorSinActualizar=function(SLGKDYQCAY,UHTPGPRUJA){
	var HAUSUTNHGI=true
	var i;
	
		for (var i=0;i<=KTBOJTXFEU.length-1;i++){
			if(KTBOJTXFEU[i].AGTXFNIKQD==SLGKDYQCAY && KTBOJTXFEU[i].SSUNXNEEHN==UHTPGPRUJA){
				HAUSUTNHGI=false;
				break;
			}
		}
	
	if (HAUSUTNHGI==true){
		log(true,"No quiero actualizar Array: LUCRWXJMDR "+SLGKDYQCAY+" "+"SSUNXNEEHN "+UHTPGPRUJA);
		//KTBOJTXFEU.push(new NQMQGXXHIL(SLGKDYQCAY,UHTPGPRUJA) );
	}
	else{
		log(true,"Validado Incorrectamente 1, pero no pasa nada: LUCRWXJMDR "+SLGKDYQCAY+" "+"SSUNXNEEHN "+UHTPGPRUJA);
	}
	
	return HAUSUTNHGI;
}

ValidaMovimientoJugadorSinActualizarRapido=function(SLGKDYQCAY,UHTPGPRUJA){
	var HAUSUTNHGI=true
	var i;
	
		for (var i=0;i<=XYXCEMMRDC.length-1;i++){
			if(XYXCEMMRDC[i].AGTXFNIKQD==SLGKDYQCAY && XYXCEMMRDC[i].SSUNXNEEHN==UHTPGPRUJA){
				HAUSUTNHGI=false;
				break;
			}
		}
	
	if (HAUSUTNHGI==true){
		log(true,"No quiero actualizar Array: LUCRWXJMDR "+SLGKDYQCAY+" "+"SSUNXNEEHN "+UHTPGPRUJA);
		//KTBOJTXFEU.push(new NQMQGXXHIL(SLGKDYQCAY,UHTPGPRUJA) );
	}
	else{
		log(true,"Validado Incorrectamente 2, pero no pasa nada: LUCRWXJMDR "+SLGKDYQCAY+" "+"SSUNXNEEHN "+UHTPGPRUJA);
	}
	
	return HAUSUTNHGI;
}


OSBTHSJKFW=function(){
	var HAUSUTNHGI=true;

		for (var i=0;i<=DCOXIXEBRJ.length-1;i++){
			if(DCOXIXEBRJ[i]==TFSXFTYVGQ){
				HAUSUTNHGI=false;
				break;
			}
		}
	
	if (HAUSUTNHGI==true){
	
		DCOXIXEBRJ.push(TFSXFTYVGQ);
	//	console.log("BLOQUEO DESDE SERVER RAPIDO (validando movimietno) "+UHTPGPRUJA+" "+SLGKDYQCAY);
	}
	//else{
	//	log(false,"Validado Incorrectamente: LUCRWXJMDR "+SLGKDYQCAY+" "+"SSUNXNEEHN "+UHTPGPRUJA);
	//}
	
	return HAUSUTNHGI;
}

HGFAUFDVDF=function(){
	var HAUSUTNHGI=true;

		for (var i=0;i<=JEHYBALODM.length-1;i++){
			if(JEHYBALODM[i]==TFSXFTYVGQ){
				HAUSUTNHGI=false;
				break;
			}
		}
	
	if (HAUSUTNHGI==true){
	
		JEHYBALODM.push(TFSXFTYVGQ);
	//	console.log("BLOQUEO DESDE SERVER RAPIDO (validando movimietno) "+UHTPGPRUJA+" "+SLGKDYQCAY);
	}
	//else{
	//	log(false,"Validado Incorrectamente: LUCRWXJMDR "+SLGKDYQCAY+" "+"SSUNXNEEHN "+UHTPGPRUJA);
	//}
	
	return HAUSUTNHGI;
}


IGPARKSECH=function(idJugador){
var HAUSUTNHGI=true;
var i;

	for (i=0;i<=BSFNXQXOTD.length-1;i++){
		if(BSFNXQXOTD[i]==idJugador){
			HAUSUTNHGI=false;
			break;
		}
	}
	
	if (HAUSUTNHGI==true){
		log(false,"DKIFYHXLLC Validado correctamente:  "+idJugador);
		BSFNXQXOTD.push(idJugador);
	}
	else{
		log(false,"Ya estaba validado el DKIFYHXLLC "+idJugador);
	}
	
	return HAUSUTNHGI;
}

RQMTWGKGIA=function(XACEBCSJAB,STLEOJDWSU,SJVCMXWVVI,UHTPGPRUJA,SLGKDYQCAY,VMKDXVSQEY){
	var WXYPYAPQQJ=false;
	var SEQJGUOFTO;
	var i;
	//HQWFFUCQDR(UHTPGPRUJA); //Vamos a registrar cada LUCRWXJMDR que jugador muevae para evitar que pase un jugador dos veces por la misma LUCRWXJMDR
	
	//if (SEQJGUOFTO==true){
	console.log("RQMTWGKGIA: "+UHTPGPRUJA+" "+SLGKDYQCAY);
	
	for (i=0;i<=XACEBCSJAB.length-1;i++){
		if(XACEBCSJAB[i].TNFAGGMKXD.name==SJVCMXWVVI){
			
			WXYPYAPQQJ=true;
			
			if (VDKOVQXHON.length>=4 || WSHPROHDIV.length>0){ //NUEVO EL OR
				
				
				log(true,"Rellenandoo Buffer pq el FXGSEGRXKC BPDXTHCDTB mide..."+VDKOVQXHON.length+" SSUNXNEEHN "+UHTPGPRUJA+" LUCRWXJMDR "+SLGKDYQCAY);
				
				for (var u=0;u<=VDKOVQXHON.length-1;u++)
				{
					log(true,"NI Idea: "+VDKOVQXHON[u].SGCSHJVERI+" "+VDKOVQXHON[u].HVCFEWNDRF)
				}
				
				
				WSHPROHDIV.push(new TVYNYTCQYW(XACEBCSJAB[i].SGCSHJVERI,XACEBCSJAB[i].UUOPKETETA,XACEBCSJAB[i].HVCFEWNDRF,XACEBCSJAB[i].TNFAGGMKXD,null,UHTPGPRUJA,SLGKDYQCAY,VMKDXVSQEY));
				if (WSHPROHDIV.length>0)
				{
					WSHPROHDIV.sort(sort_by('VMKDXVSQEY', false, parseFloat));
				}
				
				log(false,"Rellenandoo Buffer..."+XACEBCSJAB[i].SGCSHJVERI+" "+XACEBCSJAB[i].HVCFEWNDRF);
				
			}
			else{
				
				KTBOJTXFEU.push(new NQMQGXXHIL(SLGKDYQCAY,UHTPGPRUJA) );
				VDKOVQXHON.push(new TVYNYTCQYW(XACEBCSJAB[i].SGCSHJVERI,XACEBCSJAB[i].UUOPKETETA,XACEBCSJAB[i].HVCFEWNDRF,XACEBCSJAB[i].TNFAGGMKXD,null,UHTPGPRUJA,null,VMKDXVSQEY));
				
				console.log("Acabo de introducir "+VDKOVQXHON[VDKOVQXHON.length-1].SGCSHJVERI+" "+VDKOVQXHON[VDKOVQXHON.length-1].HVCFEWNDRF);
				
				GLFVIKHXMD();
				if (VDKOVQXHON.length>0)
				{
					VDKOVQXHON.sort(sort_by('VMKDXVSQEY', false, parseFloat));
				}				
				
				
				log(true,"CREO QUE SE METE AQUI PARA MOVEL AL TABLERO "+UHTPGPRUJA);
				NAYBJTKIKA(XACEBCSJAB[i].TNFAGGMKXD);
				QTIPILDEPH(XACEBCSJAB[i].TNFAGGMKXD,STLEOJDWSU,SLGKDYQCAY,UHTPGPRUJA);
				XACEBCSJAB.splice(i,1);	
				
			}
			
		

			break;
		}
	}
	
	//Tema pestaas: Se puede dar el caso de que el jugador que tiene el Turno mate, se recoja el FXGSEGRXKC y robe carta.
	//Para el de la pestaa siguiente, aun no tena la carta en la mano, con lo que la busco en el FXGSEGRXKC.
	
	//VDKOVQXHON.length>=4 && 
	if (WXYPYAPQQJ==false ){
		log(true,"TVYNYTCQYW NO encontrada 1");
		for (i=0;i<=FXGSEGRXKC.length-1;i++){
			if(FXGSEGRXKC[i].TNFAGGMKXD.name==SJVCMXWVVI){
				WSHPROHDIV.push(new TVYNYTCQYW(FXGSEGRXKC[i].SGCSHJVERI,FXGSEGRXKC[i].UUOPKETETA,FXGSEGRXKC[i].HVCFEWNDRF,FXGSEGRXKC[i].TNFAGGMKXD,null,UHTPGPRUJA,SLGKDYQCAY,VMKDXVSQEY));				
				log(true,"Rellenando Buffer por matanza..."+" SSUNXNEEHN "+UHTPGPRUJA+" LUCRWXJMDR "+SLGKDYQCAY);
				WXYPYAPQQJ=true;
			}			
		}
		
		if (WXYPYAPQQJ==false ){ //Si tampoco se encuentra, lo busco en el TGTQPBEQFR
			log(true,"TVYNYTCQYW NO encontrada 2");
			
			if (FBSDMRLVEL.length>0)
			{
				if(FBSDMRLVEL[0].TNFAGGMKXD.name==SJVCMXWVVI)
				{
					log(true,"TVYNYTCQYW ENCONTRADA!!");
					TTJKWKBPWO.push(new TVYNYTCQYW(FBSDMRLVEL[0].SGCSHJVERI,FBSDMRLVEL[0].UUOPKETETA,FBSDMRLVEL[0].HVCFEWNDRF,FBSDMRLVEL[0].TNFAGGMKXD,null,UHTPGPRUJA,SLGKDYQCAY,VMKDXVSQEY));
				
				}
				else{
					log(false,"TVYNYTCQYW NO ENCONTRADA!!");
				}
				//log(false,"TVYNYTCQYW NO ENCONTRADA!! "+SJVCMXWVVI);
			}
		}
		
		
		if (WSHPROHDIV.length>0)
		{
			WSHPROHDIV.sort(sort_by('VMKDXVSQEY', false, parseFloat));
		}
	
	}
	

	
	OROGRNBISW(XACEBCSJAB,STLEOJDWSU)
	//}
}

VPDVSDLPHG=function(UHTPGPRUJA,SJVCMXWVVI,SLGKDYQCAY,VMKDXVSQEY){
	console.log("Mover Centro Ajeno: Soy "+TFSXFTYVGQ+" Mueve "+UHTPGPRUJA+" la carta "+SJVCMXWVVI+" VDKOVQXHON mide: "+VDKOVQXHON.length);
	
	//if (TFSXFTYVGQ!=UHTPGPRUJA){
		
		if(TFSXFTYVGQ==1){
			if (UHTPGPRUJA==1){
				RQMTWGKGIA(AGKVNAGGLB,"D",SJVCMXWVVI,UHTPGPRUJA,SLGKDYQCAY,VMKDXVSQEY);
			}	
			if (UHTPGPRUJA==2){
				RQMTWGKGIA(CBCNHFGWLU,"R",SJVCMXWVVI,UHTPGPRUJA,SLGKDYQCAY,VMKDXVSQEY);
			}
			if (UHTPGPRUJA==3){
				RQMTWGKGIA(TWJONOKGHC,"U",SJVCMXWVVI,UHTPGPRUJA,SLGKDYQCAY,VMKDXVSQEY);
			}
			if (UHTPGPRUJA==4){
				RQMTWGKGIA(KNVKGHHTYC,"L",SJVCMXWVVI,UHTPGPRUJA,SLGKDYQCAY,VMKDXVSQEY);
			}		
		}

		if(TFSXFTYVGQ==2){
			if (UHTPGPRUJA==2){
				RQMTWGKGIA(AGKVNAGGLB,"D",SJVCMXWVVI,UHTPGPRUJA,SLGKDYQCAY,VMKDXVSQEY);
			}	
			if (UHTPGPRUJA==3){
				RQMTWGKGIA(CBCNHFGWLU,"R",SJVCMXWVVI,UHTPGPRUJA,SLGKDYQCAY,VMKDXVSQEY);
			}
			if (UHTPGPRUJA==4){
				RQMTWGKGIA(TWJONOKGHC,"U",SJVCMXWVVI,UHTPGPRUJA,SLGKDYQCAY,VMKDXVSQEY);
			}
			if (UHTPGPRUJA==1){
				RQMTWGKGIA(KNVKGHHTYC,"L",SJVCMXWVVI,UHTPGPRUJA,SLGKDYQCAY,VMKDXVSQEY);
			}		
		}

		if(TFSXFTYVGQ==3){
			if (UHTPGPRUJA==3){
				RQMTWGKGIA(AGKVNAGGLB,"D",SJVCMXWVVI,UHTPGPRUJA,SLGKDYQCAY,VMKDXVSQEY);
			}	
			if (UHTPGPRUJA==4){
				RQMTWGKGIA(CBCNHFGWLU,"R",SJVCMXWVVI,UHTPGPRUJA,SLGKDYQCAY,VMKDXVSQEY);
			}
			if (UHTPGPRUJA==1){
				RQMTWGKGIA(TWJONOKGHC,"U",SJVCMXWVVI,UHTPGPRUJA,SLGKDYQCAY,VMKDXVSQEY);
			}
			if (UHTPGPRUJA==2){
				RQMTWGKGIA(KNVKGHHTYC,"L",SJVCMXWVVI,UHTPGPRUJA,SLGKDYQCAY,VMKDXVSQEY);
			}		
		}
		
		if(TFSXFTYVGQ==4){
			if (UHTPGPRUJA==4){
				RQMTWGKGIA(AGKVNAGGLB,"D",SJVCMXWVVI,UHTPGPRUJA,SLGKDYQCAY,VMKDXVSQEY);
			}	
			if (UHTPGPRUJA==1){
				RQMTWGKGIA(CBCNHFGWLU,"R",SJVCMXWVVI,UHTPGPRUJA,SLGKDYQCAY,VMKDXVSQEY);
			}
			if (UHTPGPRUJA==2){
				RQMTWGKGIA(TWJONOKGHC,"U",SJVCMXWVVI,UHTPGPRUJA,SLGKDYQCAY,VMKDXVSQEY);
			}
			if (UHTPGPRUJA==3){
				RQMTWGKGIA(KNVKGHHTYC,"L",SJVCMXWVVI,UHTPGPRUJA,SLGKDYQCAY,VMKDXVSQEY);
			}		
		}
		
	//}
	//else
	//{
	//	console.log("No ABWBCAJRXQ al centro ajeno")
	//}
}


GLFVIKHXMD=function(){
	var WJBJUSUMHN;
	var i;
	
	WJBJUSUMHN=TFSXFTYVGQ-1;
	if (WJBJUSUMHN==0){
		WJBJUSUMHN=4;
	}
	
	for (i=0;i<=VDKOVQXHON.length-1;i++)
	{
		
		if (VDKOVQXHON[i].jugador==WJBJUSUMHN)
		{
			//console.log("Ocultando");
			//YGTNAODFHW.visible=false;
			//IEQDMBJCAY.visible=false;
			IEQDMBJCAY.loadTexture('Boton_cantar_off', 0);
			YGTNAODFHW.loadTexture('Boton_cambiar_7_off', 0);
			
		}	
	}	
}


function checkConnection() {

	var QOWECQVXCM=true;
	
	var isCordovaApp = document.URL.indexOf('http://') === -1
		&& document.URL.indexOf('https://') === -1;

	//SVHMCOYULR("Chequeando");
	if (window.plugins)
	{
		
		try
		{
			var networkState = navigator.connection.type;
			/*var states = {};
		


			states[Connection.UNKNOWN]  = 'Unknown connection';
			states[Connection.ETHERNET] = 'Ethernet connection';
			states[Connection.WIFI]     = 'WiFi connection';
			states[Connection.CELL_2G]  = 'Cell 2G connection';
			states[Connection.CELL_3G]  = 'Cell 3G connection';
			states[Connection.CELL_4G]  = 'Cell 4G connection';
			states[Connection.CELL]     = 'Cell generic connection';
			states[Connection.NONE]     = 'No network connection';*/
			

			
			if (networkState=="none")
			{
				QOWECQVXCM=false;
				SVHMCOYULR("Revisa tu conexión a internet");
			}

			
		
		}
		catch(e)
		{
			SVHMCOYULR("Error "+e);
		}
	}

	
	return QOWECQVXCM;
	
}
