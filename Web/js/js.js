function Carta(a,o,e,t,r,n,l,i,d){switch(this.palo=a,this.idCarta=o,this.valor=e,this.cartilla=t,this.posicion=r,this.jugador=n,this.Ronda=l,this.FechaHora=i,this.idPartida=d,e){case 1:this.valorReal=12,this.valorPuntuacion=11;break;case 3:this.valorReal=11,this.valorPuntuacion=10;break;case 10:this.valorReal=10,this.valorPuntuacion=4;break;case 9:this.valorReal=8,this.valorPuntuacion=2;break;case 8:this.valorReal=9,this.valorPuntuacion=3;break;default:this.valorReal=e,this.valorPuntuacion=0}}function CartaBazaNuestra(a,o,e){this.palo=a,this.valorReal=o,this.jugador=e}Repartir_Desde_Arriba=function(a){Repartir_Desde_Arriba_U1(a)},Repartir_Desde_Arriba_U1=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),1==SonVueltas?(TextMarcador.revive(),TextTituloMarcador.revive(),ReproducirSonido("_Vueltas")):ReproducirSonido("_Idas");var o=devuelveX("U",0),e=devuelveY("U",0);(tw1=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),tw1.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Arriba_U2(a)}),tw1.start(),Mazo.pop()},Repartir_Desde_Arriba_U2=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("U",1),e=devuelveY("U",1);(tw2=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),tw2.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Arriba_U3(a)}),tw2.start(),Mazo.pop()},Repartir_Desde_Arriba_U3=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("U",2),e=devuelveY("U",2);(tw3=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),tw3.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Arriba_L1(a)}),tw3.start(),Mazo.pop()},Repartir_Desde_Arriba_L1=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("L",0),e=devuelveY("L",0);(tw4=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),tw4.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Arriba_L2(a)}),tw4.start(),Mazo.pop()},Repartir_Desde_Arriba_L2=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("L",1),e=devuelveY("L",1);(twEsp7=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),twEsp7.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Arriba_L3(a)}),twEsp7.start(),Mazo.pop()},Repartir_Desde_Arriba_L3=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("L",2),e=devuelveY("L",2);(twReu=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),twReu.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Arriba_D1(a)}),twReu.start(),Mazo.pop()},Repartir_Desde_Arriba_D1=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",0),e=devuelveY("D",0);(twRec1=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),twRec1.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Arriba_D2(a)}),twRec1.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Arriba_D2=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",1),e=devuelveY("D",1);(twRec2=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),twRec2.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Arriba_D3(a)}),twRec2.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Arriba_D3=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",2),e=devuelveY("D",2);(twRec3=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),twRec3.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Arriba_R1(a)}),twRec3.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Arriba_R1=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("R",0),e=devuelveY("R",0),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Arriba_R2(a)}),t.start(),Mazo.pop()},Repartir_Desde_Arriba_R2=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("R",1),e=devuelveY("R",1),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Arriba_R3(a)}),t.start(),Mazo.pop()},Repartir_Desde_Arriba_R3=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("R",2),e=devuelveY("R",2),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Arriba_U4(a)}),t.start(),Mazo.pop()},Repartir_Desde_Arriba_U4=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("U",3),e=devuelveY("U",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Arriba_U5(a)}),t.start(),Mazo.pop()},Repartir_Desde_Arriba_U5=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("U",4),e=devuelveY("U",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Arriba_U6(a)}),t.start(),Mazo.pop()},Repartir_Desde_Arriba_U6=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("U",5),e=devuelveY("U",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Arriba_L4(a)}),t.start(),Mazo.pop()},Repartir_Desde_Arriba_L4=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("L",3),e=devuelveY("L",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Arriba_L5(a)}),t.start(),Mazo.pop()},Repartir_Desde_Arriba_L5=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("L",4),e=devuelveY("L",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Arriba_L6(a)}),t.start(),Mazo.pop()},Repartir_Desde_Arriba_L6=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("L",5),e=devuelveY("L",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Arriba_D4(a)}),t.start(),Mazo.pop()},Repartir_Desde_Arriba_D4=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",3),e=devuelveY("D",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Arriba_D5(a)}),t.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Arriba_D5=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",4),e=devuelveY("D",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Arriba_D6(a)}),t.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Arriba_D6=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",5),e=devuelveY("D",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Arriba_R4(a)}),t.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Arriba_R4=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("R",3),e=devuelveY("R",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Arriba_R5(a)}),t.start(),Mazo.pop()},Repartir_Desde_Arriba_R5=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("R",4),e=devuelveY("R",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Arriba_R6(a)}),t.start(),Mazo.pop()},Repartir_Desde_Arriba_R6=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("R",5),e=devuelveY("R",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),SacaTriunfo(a)}),t.start(),Mazo.pop()},Repartir_Desde_Derecha=function(a){Repartir_Desde_Derecha_R1(a)},Repartir_Desde_Derecha_U1=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("U",0),e=devuelveY("U",0);(tw1=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),tw1.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Derecha_U2(a)}),tw1.start(),Mazo.pop()},Repartir_Desde_Derecha_U2=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("U",1),e=devuelveY("U",1);(tw2=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),tw2.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Derecha_U3(a)}),tw2.start(),Mazo.pop()},Repartir_Desde_Derecha_U3=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("U",2),e=devuelveY("U",2);(tw3=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),tw3.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Derecha_L1(a)}),tw3.start(),Mazo.pop()},Repartir_Desde_Derecha_L1=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("L",0),e=devuelveY("L",0);(tw4=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),tw4.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Derecha_L2(a)}),tw4.start(),Mazo.pop()},Repartir_Desde_Derecha_L2=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("L",1),e=devuelveY("L",1);(twEsp7=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),twEsp7.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Derecha_L3(a)}),twEsp7.start(),Mazo.pop()},Repartir_Desde_Derecha_L3=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("L",2),e=devuelveY("L",2);(twRec1=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),twRec1.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Derecha_D1(a)}),twRec1.start(),Mazo.pop()},Repartir_Desde_Derecha_D1=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",0),e=devuelveY("D",0);(twRec2=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),twRec2.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Derecha_D2(a)}),twRec2.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Derecha_D2=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",1),e=devuelveY("D",1);(twReu=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),twReu.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Derecha_D3(a)}),twReu.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Derecha_D3=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",2),e=devuelveY("D",2);(twRec3=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),twRec3.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Derecha_R4(a)}),twRec3.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Derecha_R1=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),1==SonVueltas?(TextMarcador.revive(),TextTituloMarcador.revive(),ReproducirSonido("_Vueltas")):ReproducirSonido("_Idas");var o=devuelveX("R",0),e=devuelveY("R",0),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Derecha_R2(a)}),t.start(),Mazo.pop()},Repartir_Desde_Derecha_R2=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("R",1),e=devuelveY("R",1),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Derecha_R3(a)}),t.start(),Mazo.pop()},Repartir_Desde_Derecha_R3=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("R",2),e=devuelveY("R",2),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Derecha_U1(a)}),t.start(),Mazo.pop()},Repartir_Desde_Derecha_U4=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("U",3),e=devuelveY("U",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Derecha_U5(a)}),t.start(),Mazo.pop()},Repartir_Desde_Derecha_U5=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("U",4),e=devuelveY("U",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Derecha_U6(a)}),t.start(),Mazo.pop()},Repartir_Desde_Derecha_U6=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("U",5),e=devuelveY("U",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Derecha_L4(a)}),t.start(),Mazo.pop()},Repartir_Desde_Derecha_L4=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("L",3),e=devuelveY("L",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Derecha_L5(a)}),t.start(),Mazo.pop()},Repartir_Desde_Derecha_L5=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("L",4),e=devuelveY("L",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Derecha_L6(a)}),t.start(),Mazo.pop()},Repartir_Desde_Derecha_L6=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("L",5),e=devuelveY("L",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Derecha_D4(a)}),t.start(),Mazo.pop()},Repartir_Desde_Derecha_D4=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",3),e=devuelveY("D",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Derecha_D5(a)}),t.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Derecha_D5=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",4),e=devuelveY("D",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Derecha_D6(a)}),t.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Derecha_D6=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",5),e=devuelveY("D",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),SacaTriunfo(a)}),t.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Derecha_R4=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("R",3),e=devuelveY("R",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Derecha_R5(a)}),t.start(),Mazo.pop()},Repartir_Desde_Derecha_R5=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("R",4),e=devuelveY("R",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Derecha_R6(a)}),t.start(),Mazo.pop()},Repartir_Desde_Derecha_R6=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("R",5),e=devuelveY("R",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Derecha_U4(a)}),t.start(),Mazo.pop()},Repartir_Desde_Izquierda=function(a){Repartir_Desde_Izquierda_L1(a)},Repartir_Desde_Izquierda_U1=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("U",0),e=devuelveY("U",0);(tw1=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),tw1.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Izquierda_U2(a)}),tw1.start(),Mazo.pop()},Repartir_Desde_Izquierda_U2=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("U",1),e=devuelveY("U",1);(tw2=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),tw2.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Izquierda_U3(a)}),tw2.start(),Mazo.pop()},Repartir_Desde_Izquierda_U3=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("U",2),e=devuelveY("U",2);(tw3=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),tw3.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Izquierda_L4(a)}),tw3.start(),Mazo.pop()},Repartir_Desde_Izquierda_L1=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),1==SonVueltas?(TextMarcador.revive(),TextTituloMarcador.revive(),ReproducirSonido("_Vueltas")):ReproducirSonido("_Idas");var o=devuelveX("L",0),e=devuelveY("L",0);(tw4=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),tw4.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Izquierda_L2(a)}),tw4.start(),Mazo.pop()},Repartir_Desde_Izquierda_L2=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("L",1),e=devuelveY("L",1);(twEsp7=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),twEsp7.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Izquierda_L3(a)}),twEsp7.start(),Mazo.pop()},Repartir_Desde_Izquierda_L3=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("L",2),e=devuelveY("L",2);(twReu=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),twReu.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Izquierda_D1(a)}),twReu.start(),Mazo.pop()},Repartir_Desde_Izquierda_D1=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",0),e=devuelveY("D",0);(twRec1=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),twRec1.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Izquierda_D2(a)}),twRec1.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Izquierda_D2=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",1),e=devuelveY("D",1);(twRec2=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),twRec2.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Izquierda_D3(a)}),twRec2.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Izquierda_D3=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",2),e=devuelveY("D",2);(twRec3=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),twRec3.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Izquierda_R1(a)}),twRec3.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Izquierda_R1=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("R",0),e=devuelveY("R",0),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Izquierda_R2(a)}),t.start(),Mazo.pop()},Repartir_Desde_Izquierda_R2=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("R",1),e=devuelveY("R",1),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Izquierda_R3(a)}),t.start(),Mazo.pop()},Repartir_Desde_Izquierda_R3=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("R",2),e=devuelveY("R",2),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Izquierda_U1(a)}),t.start(),Mazo.pop()},Repartir_Desde_Izquierda_U4=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("U",3),e=devuelveY("U",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Izquierda_U5(a)}),t.start(),Mazo.pop()},Repartir_Desde_Izquierda_U5=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("U",4),e=devuelveY("U",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Izquierda_U6(a)}),t.start(),Mazo.pop()},Repartir_Desde_Izquierda_U6=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("U",5),e=devuelveY("U",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),SacaTriunfo(a)}),t.start(),Mazo.pop()},Repartir_Desde_Izquierda_L4=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("L",3),e=devuelveY("L",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Izquierda_L5(a)}),t.start(),Mazo.pop()},Repartir_Desde_Izquierda_L5=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("L",4),e=devuelveY("L",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Izquierda_L6(a)}),t.start(),Mazo.pop()},Repartir_Desde_Izquierda_L6=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("L",5),e=devuelveY("L",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Izquierda_D4(a)}),t.start(),Mazo.pop()},Repartir_Desde_Izquierda_D4=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",3),e=devuelveY("D",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Izquierda_D5(a)}),t.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Izquierda_D5=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",4),e=devuelveY("D",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Izquierda_D6(a)}),t.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Izquierda_D6=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",5),e=devuelveY("D",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Izquierda_R4(a)}),t.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Izquierda_R4=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("R",3),e=devuelveY("R",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Izquierda_R5(a)}),t.start(),Mazo.pop()},Repartir_Desde_Izquierda_R5=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("R",4),e=devuelveY("R",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Izquierda_R6(a)}),t.start(),Mazo.pop()},Repartir_Desde_Izquierda_R6=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("R",5),e=devuelveY("R",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Izquierda_U4(a)}),t.start(),Mazo.pop()},PosicionCartas=function(a){var o,e;Mazoposiciones.splice(0,1e3),"D"==a&&(e=MazoD),"U"==a&&(e=MazoU),"L"==a&&(e=MazoL),"R"==a&&(e=MazoR);5<vRonda?(log(!1,"INCREIBLE0"),"R"==a||"U"==a?o=e.length+1:(o=e.length+1,log(!1,"INCREIBLE"))):0==e.length?o=6:7==(o=e.length+1)&&(o=6),0==PartidaComenzada&&(o=6);var t=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCartaEscalado-5*vSeparacion+AnchoCartaEscalado)/2+0*(AnchoCartaEscalado+vSeparacion)-AnchoCartaEscalado-AnchoCarta/2+30,r=game_objeto.world.height-AnchoCartaEscalado-30;Mazoposiciones.push(new PosicionesCartas("ULTIMA_Baza",0,t,r)),t=1==ModoMultijugador?(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-5*vSeparacion+AnchoCarta)/2+5*(AnchoCarta+vSeparacion)+AnchoCarta-AnchoFoto/2+1.5*AnchoCarta:game_objeto.world.width-AnchoCarta;r=AnchoCarta;Mazoposiciones.push(new PosicionesCartas("ULTIMA_Baza_Rival",0,t,r));t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCartaEscalado*o-5*vSeparacion+AnchoCartaEscalado)/2+0*(AnchoCartaEscalado+vSeparacion),r=game_objeto.world.height-AnchoCartaEscalado;if(Mazoposiciones.push(new PosicionesCartas("D",0,t,r-60)),0==cuatrotres)t=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCartaEscalado-5*vSeparacion+AnchoCartaEscalado)/2+0*(AnchoCartaEscalado+vSeparacion);else t=(game_objeto.world.width-vHorizontalPorqueSi-8*AnchoCartaEscalado-5*vSeparacion+AnchoCartaEscalado)/2+0*(AnchoCartaEscalado+vSeparacion);r=game_objeto.world.height-AnchoCartaEscalado;Mazoposiciones.push(new PosicionesCartas("D_CHAT",0,t,r-60));t=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCartaEscalado-5*vSeparacion+AnchoCartaEscalado)/2+0*(AnchoCartaEscalado+vSeparacion),r=game_objeto.world.height-AnchoCartaEscalado;Mazoposiciones.push(new PosicionesCartas("D",98,t,r-60));t=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCartaEscalado-5*vSeparacion+AnchoCartaEscalado)/2-AnchoCartaEscalado/2,r=game_objeto.world.height-2*AltoCarta-vSeparacion/2;Mazoposiciones.push(new PosicionesCartas("D_0",0,t,r-60));t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCartaEscalado*o-5*vSeparacion+AnchoCartaEscalado)/2+1*(AnchoCartaEscalado+vSeparacion),r=game_objeto.world.height-AnchoCartaEscalado;Mazoposiciones.push(new PosicionesCartas("D",1,t,r-60));t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCartaEscalado*o-5*vSeparacion+AnchoCartaEscalado)/2+2*(AnchoCartaEscalado+vSeparacion),r=game_objeto.world.height-AnchoCartaEscalado;Mazoposiciones.push(new PosicionesCartas("D",2,t,r-60));t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCartaEscalado*o-5*vSeparacion+AnchoCartaEscalado)/2+3*(AnchoCartaEscalado+vSeparacion),r=game_objeto.world.height-AnchoCartaEscalado;Mazoposiciones.push(new PosicionesCartas("D",3,t,r-60));t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCartaEscalado*o-5*vSeparacion+AnchoCartaEscalado)/2+4*(AnchoCartaEscalado+vSeparacion),r=game_objeto.world.height-AnchoCartaEscalado;Mazoposiciones.push(new PosicionesCartas("D",4,t,r-60));t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCartaEscalado*o-5*vSeparacion+AnchoCartaEscalado)/2+5*(AnchoCartaEscalado+vSeparacion),r=game_objeto.world.height-AnchoCartaEscalado;Mazoposiciones.push(new PosicionesCartas("D",5,t,r-60));t=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCartaEscalado-5*vSeparacion+AnchoCartaEscalado)/2+5*(AnchoCartaEscalado+vSeparacion),r=game_objeto.world.height-AnchoCartaEscalado;Mazoposiciones.push(new PosicionesCartas("D_5",0,t,r-60));t=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCartaEscalado-5*vSeparacion+AnchoCartaEscalado)/2+5*(AnchoCartaEscalado+vSeparacion),r=game_objeto.world.height-AnchoCartaEscalado;if(Mazoposiciones.push(new PosicionesCartas("D",99,t,r-60)),vRonda<=4)t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCarta*o-5*vSeparacion+AnchoCarta)/2+5*(AnchoCarta+vSeparacion);else t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCarta*o-5*vSeparacion+AnchoCarta)/2+5*(AnchoCarta+vSeparacion)-(6-o)*(AnchoCarta+vSeparacion);r=AnchoCarta;Mazoposiciones.push(new PosicionesCartas("U",0,t,r));t=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-5*vSeparacion+AnchoCarta)/2+4*(AnchoCarta+vSeparacion)+AnchoCarta-AnchoFoto/2,r=2*AnchoCarta;Mazoposiciones.push(new PosicionesCartas("U_0",0,t,r));t=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-5*vSeparacion+AnchoCarta)/2+5*(AnchoCarta+vSeparacion),r=2*AnchoCarta;if(Mazoposiciones.push(new PosicionesCartas("U_CHAT",0,t,r)),vRonda<=4)t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCarta*o-5*vSeparacion+AnchoCarta)/2+4*(AnchoCarta+vSeparacion);else t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCarta*o-5*vSeparacion+AnchoCarta)/2+4*(AnchoCarta+vSeparacion)-(6-o)*(AnchoCarta+vSeparacion);r=AnchoCarta;if(Mazoposiciones.push(new PosicionesCartas("U",1,t,r)),vRonda<=4)t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCarta*o-5*vSeparacion+AnchoCarta)/2+3*(AnchoCarta+vSeparacion);else t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCarta*o-5*vSeparacion+AnchoCarta)/2+3*(AnchoCarta+vSeparacion)-(6-o)*(AnchoCarta+vSeparacion);r=AnchoCarta;Mazoposiciones.push(new PosicionesCartas("U",2,t,r));t=AnchoCarta;if(vRonda<=14)r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+0*(AnchoCarta/2+vSeparacion)*1;else r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+0*(AnchoCarta/2+vSeparacion)*1+(0+o)*(AnchoCarta/2+vSeparacion)*1;Mazoposiciones.push(new PosicionesCartas("L",0,t,r));t=AnchoCarta,r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*6)/2+0*(AnchoCarta/2+vSeparacion)*1;Mazoposiciones.push(new PosicionesCartas("L_CHAT",0,t,r));t=AnchoCarta;if(vRonda<=14)r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+1*(AnchoCarta/2+vSeparacion)*1;else r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+1*(AnchoCarta/2+vSeparacion)*1+(0+o)*(AnchoCarta/2+vSeparacion)*1;Mazoposiciones.push(new PosicionesCartas("L",1,t,r));t=AnchoCarta;if(vRonda<=14)r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+2*(AnchoCarta/2+vSeparacion)*1;else r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+2*(AnchoCarta/2+vSeparacion)*1+(0+o)*(AnchoCarta/2+vSeparacion)*1;Mazoposiciones.push(new PosicionesCartas("L",2,t,r));r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*6)/2+2*(AnchoCarta/2+vSeparacion)*1;Mazoposiciones.push(new PosicionesCartas("L_C",0,t,r)),vFormulaAjuste=vSeparacion*(6-o);t=game_objeto.world.width-AnchoCarta;if(vRonda<=4)r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+5*(AnchoCarta/2+vSeparacion)*1;else r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+5*(AnchoCarta/2+vSeparacion)*1-(6-o)*(AnchoCarta/2+vSeparacion)*1-vFormulaAjuste;Mazoposiciones.push(new PosicionesCartas("R",0,t,r));t=game_objeto.world.width-AnchoCarta,r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*6)/2+5*(AnchoCarta/2+vSeparacion)*1;Mazoposiciones.push(new PosicionesCartas("R_CHAT",0,t,r));t=game_objeto.world.width-AnchoCarta;if(vRonda<=4)r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+4*(AnchoCarta/2+vSeparacion)*1;else r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+4*(AnchoCarta/2+vSeparacion)*1-(6-o)*(AnchoCarta/2+vSeparacion)*1-vFormulaAjuste;Mazoposiciones.push(new PosicionesCartas("R",1,t,r));t=game_objeto.world.width-AnchoCarta;if(vRonda<=4)r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+3*(AnchoCarta/2+vSeparacion)*1;else r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+3*(AnchoCarta/2+vSeparacion)*1-(6-o)*(AnchoCarta/2+vSeparacion)*1-vFormulaAjuste;Mazoposiciones.push(new PosicionesCartas("R",2,t,r));t=game_objeto.world.width-AnchoCarta,r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*6)/2+3*(AnchoCarta/2+vSeparacion)*1;if(Mazoposiciones.push(new PosicionesCartas("R_C",0,t,r)),vRonda<=4)t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCarta*o-5*vSeparacion+AnchoCarta)/2+2*(AnchoCarta+vSeparacion);else t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCarta*o-5*vSeparacion+AnchoCarta)/2+2*(AnchoCarta+vSeparacion)-(6-o)*(AnchoCarta+vSeparacion);r=AnchoCarta;if(Mazoposiciones.push(new PosicionesCartas("U",3,t,r)),vRonda<=4)t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCarta*o-5*vSeparacion+AnchoCarta)/2+1*(AnchoCarta+vSeparacion);else t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCarta*o-5*vSeparacion+AnchoCarta)/2+1*(AnchoCarta+vSeparacion)-(6-o)*(AnchoCarta+vSeparacion);r=AnchoCarta;if(Mazoposiciones.push(new PosicionesCartas("U",4,t,r)),vRonda<=4)t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCarta*o-5*vSeparacion+AnchoCarta)/2+0*(AnchoCarta+vSeparacion);else t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCarta*o-5*vSeparacion+AnchoCarta)/2+0*(AnchoCarta+vSeparacion)-(6-o)*(AnchoCarta+vSeparacion);r=AnchoCarta;Mazoposiciones.push(new PosicionesCartas("U",5,t,r));t=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-5*vSeparacion+AnchoCarta)/2+0*(AnchoCarta+vSeparacion),r=AnchoCarta;Mazoposiciones.push(new PosicionesCartas("U",99,t,r));t=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-5*vSeparacion+AnchoCarta)/2+0*(AnchoCarta+vSeparacion),r=AnchoCarta;Mazoposiciones.push(new PosicionesCartas("U_C",0,t,r));t=AnchoCarta;if(vRonda<=14)r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+3*(AnchoCarta/2+vSeparacion)*1;else r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+3*(AnchoCarta/2+vSeparacion)*1+(0+o)*(AnchoCarta/2+vSeparacion)*1;Mazoposiciones.push(new PosicionesCartas("L",3,t,r));t=AnchoCarta;if(vRonda<=14)r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+4*(AnchoCarta/2+vSeparacion)*1;else r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+4*(AnchoCarta/2+vSeparacion)*1+(0+o)*(AnchoCarta/2+vSeparacion)*1;Mazoposiciones.push(new PosicionesCartas("L",4,t,r));t=AnchoCarta;if(vRonda<=14)r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+5*(AnchoCarta/2+vSeparacion)*1;else r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+5*(AnchoCarta/2+vSeparacion)*1+(0+o)*(AnchoCarta/2+vSeparacion)*1;Mazoposiciones.push(new PosicionesCartas("L",5,t,r));t=vSeparacion+5,r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*6)/2+5*(AnchoCarta/2+vSeparacion)+AnchoCarta/2+vSeparacion;Mazoposiciones.push(new PosicionesCartas("L_0",0,t,r));t=AnchoCarta,r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*6)/2+5*(AnchoCarta/2+vSeparacion);Mazoposiciones.push(new PosicionesCartas("L",99,t,r));t=game_objeto.world.width-AnchoCarta;if(vRonda<=4)r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+2*(AnchoCarta/2+vSeparacion)*1;else r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+2*(AnchoCarta/2+vSeparacion)*1-(6-o)*(AnchoCarta/2+vSeparacion)*1-vFormulaAjuste;Mazoposiciones.push(new PosicionesCartas("R",3,t,r));t=game_objeto.world.width-AnchoCarta;if(vRonda<=4)r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+1*(AnchoCarta/2+vSeparacion)*1;else r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+1*(AnchoCarta/2+vSeparacion)*1-(6-o)*(AnchoCarta/2+vSeparacion)*1-vFormulaAjuste;Mazoposiciones.push(new PosicionesCartas("R",4,t,r));t=game_objeto.world.width-AnchoCarta;if(vRonda<=4)r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+0*(AnchoCarta/2+vSeparacion)*1;else r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+0*(AnchoCarta/2+vSeparacion)*1-(6-o)*(AnchoCarta/2+vSeparacion)*1-vFormulaAjuste;Mazoposiciones.push(new PosicionesCartas("R",5,t,r));t=game_objeto.world.width-AnchoCarta,r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*6)/2+0*(AnchoCarta/2+vSeparacion)*1;Mazoposiciones.push(new PosicionesCartas("R_5",0,t,r));t=game_objeto.world.width-2*(AnchoCarta+vSeparacion),r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*6)/2-1*(AnchoCarta/2+vSeparacion)*1;Mazoposiciones.push(new PosicionesCartas("R_0",0,t,r));t=game_objeto.world.width-AnchoCarta,r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*6)/2+0*(AnchoCarta/2+vSeparacion);Mazoposiciones.push(new PosicionesCartas("R",99,t,r)),PosicionCartasCentro()},PosicionCartasCentro=function(){posX_D=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-5*vSeparacion+AnchoCarta)/2+4*AnchoCarta,posY_D=CentroIrreal+AnchoCarta-AnchoCarta/5-25,posAngle_D=0,posX_U=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-5*vSeparacion+AnchoCarta)/2+4*AnchoCarta,posY_U=CentroIrreal-AnchoCarta/2-15,posAngle_U=0,posX_L=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-5*vSeparacion+AnchoCarta)/2+4*AnchoCarta-AnchoCarta+AnchoCarta/5,posY_L=CentroIrreal-10,posAngle_L=-90,posX_R=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-5*vSeparacion+AnchoCarta)/2+5*AnchoCarta-AnchoCarta/5,posY_R=CentroIrreal-10,posAngle_R=90},CrearTapete=function(){try{textEsperando.kill(),1==ModoMultijugador&&MensajeEsperandoListos(),log(!0,"Se destuye. Recibida")}catch(a){log(!0,"No se destuye. Recibida")}if(1==LogicalTapeteRemoto&&1==LogicalDorsoRemoto){a="TapeteRemoto"==BackTapete.name?"TapeteRemoto2":"TapeteRemoto";try{game_objeto.cache.checkImageKey(a)?(BackTapete.name=a,BackTapete.loadTexture(a,0)):0==cuatrotres?(BackTapete.name="Tapete",BackTapete.loadTexture("Tapete")):(BackTapete.name="Tapete_43",BackTapete.loadTexture("Tapete_43"))}catch(a){log(!0,"No se pudo cargar el tapete remoto."),0==cuatrotres?(BackTapete.name="Tapete",BackTapete.loadTexture("Tapete")):(BackTapete.name="Tapete_43",BackTapete.loadTexture("Tapete_43"))}"TapeteRemoto"==a?game_objeto.cache.checkImageKey("TapeteRemoto2")&&game_objeto.cache.removeImage("TapeteRemoto2"):game_objeto.cache.checkImageKey("TapeteRemoto")&&game_objeto.cache.removeImage("TapeteRemoto"),"ReversoRemoto"==(ReversoGlobal="ReversoRemoto"==ReversoGlobal?game_objeto.cache.checkImageKey("ReversoRemoto2")?"ReversoRemoto2":"ReversoRemoto":game_objeto.cache.checkImageKey("ReversoRemoto")?"ReversoRemoto":"ReversoRemoto2")?game_objeto.cache.checkImageKey("ReversoRemoto2")&&game_objeto.cache.removeImage("ReversoRemoto2"):game_objeto.cache.checkImageKey("ReversoRemoto")&&game_objeto.cache.removeImage("ReversoRemoto"),"ReversoRemoto"!=ReversoGlobal&&"ReversoRemoto2"!=ReversoGlobal||0==game_objeto.cache.checkImageKey(ReversoGlobal)&&(ReversoGlobal="Reverso")}else{if(0==cuatrotres)var a="Tapete";else a="Tapete_43";BackTapete.name=a;try{BackTapete.loadTexture(a,0)}catch(a){log(!0,"No se pudo cargar el tapete local."),0==cuatrotres?(BackTapete.name="Tapete",BackTapete.loadTexture("Tapete")):(BackTapete.name="Tapete_43",BackTapete.loadTexture("Tapete_43"))}ReversoGlobal="Reverso"}LogicalDorsoRemoto=LogicalTapeteRemoto=!1,ActualizaDorsos()},ActualizaDorsos=function(){var a;for(a=0;a<=MazoBarajaBase.length-1;a++)MazoBarajaBase[a].loadTexture(ReversoGlobal,0),MazoBarajaBase[a].events.destroy(),MazoBarajaBase[a].angle=0,MazoBarajaBase[a].scale.setTo(1,1),MazoBarajaBase[a].anchor.setTo(.5,.5),MazoBarajaBase[a].tint=Phaser.Color.getColor(255,255,255),MazoBarajaBase[a].alpha=1},CrearBarajaBase=function(){var a;if(0==MazoBarajaBase.length)for(a=1;a<=40;a++)MazoBarajaBase.push(game_objeto.add.image(-100,game_objeto.world.centerY/2,ReversoGlobal))},CrearBaraja=function(a){var t,r,o,n;if(CancelarAmigos(),ComunBarajas(),0==ModoMultijugador&&(RepartoFinalizado=FinalizandoPartida=PartidaComenzada=!1,Mazo=[],MazoEnviar=[],TextCuentaMundo.kill(),OcultarElegirPareja(),OcultarElegirEmoticono(),BotonSalir.x=xSalir,BotonSalir.revive(),EntradaModoJuego=!0,log(!0,"He repartido yo"),LimpiarVariables(),OcultarFacebook(),1==SonVueltas&&(TextMarcador.revive(),TextTituloMarcador.revive()),CrearTapete()),0==ModoMultijugador?Mazo.splice(0,1e3):MazoEnviar.splice(0,1e3),[12,37,36,35,34,33,32,31,28,27,26,25,24,23,22,8,4,17,16,15,14,13,9,11,1,7,21,18,5,3,38,6,40,19,30,29,39,20,10,2].forEach(function(a,o,e){(t=a)<=10?(r="oros",n=t):t<=20?(r="copas",n=t-10):t<=30?(r="espadas",n=t-20):(r="bastos",n=t-30),0==ModoMultijugador?Mazo.push(new Carta(r,t,n,null,null,null,null,null,idPartida)):MazoEnviar.push(new Carta(r,t,n,null,null,null,null,null,idPartida))}),Mazo=Phaser.ArrayUtils.shuffle(Mazo),MazoEnviar=Phaser.ArrayUtils.shuffle(MazoEnviar),0==ModoMultijugador){for(o=0;o<=Mazo.length-1;o++){var e;if(0==SiempreBocaArriba)Mazo[o].cartilla=MazoBarajaBase[o];else e=Mazo[o].idCarta<=10?Mazo[o].idCarta-0+"_oros":Mazo[o].idCarta<=20?Mazo[o].idCarta-10+"_copas":Mazo[o].idCarta<=30?Mazo[o].idCarta-20+"_espadas":Mazo[o].idCarta-30+"_bastos",Mazo[o].cartilla=game_objeto.add.image(-100,game_objeto.world.centerY/2,TipoBaraja,e),Mazo[o].cartilla.anchor.setTo(.5,.5);1==cuatrotres&&(Mazo[o].cartilla.width=1.2*Mazo[o].cartilla.width,Mazo[o].cartilla.height=1.2*Mazo[o].cartilla.height),Mazo[o].cartilla.name=Mazo[o].idCarta,GrupoMazo.add(Mazo[o].cartilla)}PosicionCartas("D"),Esconde_Mazo(a),4==a&&(1==SoyElJugador&&Repartir_Desde_Abajo(!1),2==SoyElJugador&&Repartir_Desde_Izquierda(!1),3==SoyElJugador&&Repartir_Desde_Arriba(!1),4==SoyElJugador&&Repartir_Desde_Derecha(!1)),1==a&&(2==SoyElJugador&&Repartir_Desde_Abajo(!1),3==SoyElJugador&&Repartir_Desde_Izquierda(!1),4==SoyElJugador&&Repartir_Desde_Arriba(!1),1==SoyElJugador&&Repartir_Desde_Derecha(!1)),2==a&&(3==SoyElJugador&&Repartir_Desde_Abajo(!1),4==SoyElJugador&&Repartir_Desde_Izquierda(!1),1==SoyElJugador&&Repartir_Desde_Arriba(!1),2==SoyElJugador&&Repartir_Desde_Derecha(!1)),3==a&&(4==SoyElJugador&&Repartir_Desde_Abajo(!1),1==SoyElJugador&&Repartir_Desde_Izquierda(!1),2==SoyElJugador&&Repartir_Desde_Arriba(!1),3==SoyElJugador&&Repartir_Desde_Derecha(!1)),game_objeto.world.bringToTop(GrupoTextos),5==(vTurno=a+1)&&(vTurno=1),MuestraTurno(),0==ModoMultijugador?PartidaComenzada=!0:PreparaCaracteristicasMano(),game_objeto.world.bringToTop(GrupoD),log(!1,"Soy el "+SoyElJugador+" y reparte "+a)}},CrearBarajaRecibida=function(a,o,e){var t;for(CancelarAmigos(),1==vCampeonatoOasis&&(TextoCampeonato.text="Humanos: "+MarcadorPartidasNuestro+" Robots: "+MarcadorPartidasRival),ComunBarajas(),RepartoFinalizado=FinalizandoPartida=PartidaComenzada=!1,timerBarajaRecibida.stop(),timerBarajaRecibida.remove(),timerNuevaPartida.stop(),timerNuevaPartida.remove(),TextCuentaMundo.kill(),OcultarElegirPareja(),OcultarElegirEmoticono(),BotonSalir.x=xSalir,BotonSalir.revive(),LimpiarVariables(),EntradaModoJuego=!0,1==SonVueltas&&(TextMarcador.revive(),TextTituloMarcador.revive()),1==ModoMultijugador&&(BotonEscribir.revive(),BotonHablarOn.kill(),BotonHablarOff.revive(),BotonPolicia.revive(),0<ArrayInfoJugador.length&&(BotonEscribir.visible=ArrayInfoJugador[0].ChatDisponible,BotonHablarOn.visible=ArrayInfoJugador[0].ChatDisponible,BotonHablarOff.visible=ArrayInfoJugador[0].ChatDisponible),1==vCampeonatoOasis&&(BotonPolicia.kill(),BotonHablarOn.kill(),BotonHablarOff.kill(),BotonEscribir.kill())),OcultarFacebook(),CrearTapete(),t=0;t<=a.length-1;t++){var r;if(Mazo.push(new Carta(a[t].palo,a[t].idCarta,a[t].valor,null,null,null,null,null,a[t].idPartida)),0==SiempreBocaArriba)Mazo[t].cartilla=MazoBarajaBase[t];else r=Mazo[t].idCarta<=10?Mazo[t].idCarta-0+"_oros":Mazo[t].idCarta<=20?Mazo[t].idCarta-10+"_copas":Mazo[t].idCarta<=30?Mazo[t].idCarta-20+"_espadas":Mazo[t].idCarta-30+"_bastos",Mazo[t].cartilla=game_objeto.add.image(50,game_objeto.world.centerY/2,TipoBaraja,r),Mazo[t].cartilla.anchor.setTo(.5,.5);1==cuatrotres&&(Mazo[t].cartilla.width=1.2*Mazo[t].cartilla.width,Mazo[t].cartilla.height=1.2*Mazo[t].cartilla.height),Mazo[t].cartilla.name=Mazo[t].idCarta,GrupoMazo.add(Mazo[t].cartilla)}MazoEnviarApoyo.splice(0,100),PosicionCartas("D"),log(!1,"Llega..."),Esconde_Mazo(o),log(!0,"REPARTE "+o),4==o&&(1==SoyElJugador&&Repartir_Desde_Abajo(e),2==SoyElJugador&&Repartir_Desde_Izquierda(e),3==SoyElJugador&&Repartir_Desde_Arriba(e),4==SoyElJugador&&Repartir_Desde_Derecha(e)),1==o&&(2==SoyElJugador&&Repartir_Desde_Abajo(e),3==SoyElJugador&&Repartir_Desde_Izquierda(e),4==SoyElJugador&&Repartir_Desde_Arriba(e),1==SoyElJugador&&Repartir_Desde_Derecha(e)),2==o&&(3==SoyElJugador&&Repartir_Desde_Abajo(e),4==SoyElJugador&&Repartir_Desde_Izquierda(e),1==SoyElJugador&&Repartir_Desde_Arriba(e),2==SoyElJugador&&Repartir_Desde_Derecha(e)),3==o&&(4==SoyElJugador&&Repartir_Desde_Abajo(e),1==SoyElJugador&&Repartir_Desde_Izquierda(e),2==SoyElJugador&&Repartir_Desde_Arriba(e),3==SoyElJugador&&Repartir_Desde_Derecha(e)),game_objeto.world.bringToTop(GrupoTextos),log(!1,"Soy el "+SoyElJugador+" y reparte "+o),5==(vTurno=o+1)&&(vTurno=1),game_objeto.world.bringToTop(GrupoD)},EstaConectado=function(a){var o,e=!0;for(o=0;o<=ArrayJugadoresDesconectados.length-1;o++)if(ArrayJugadoresDesconectados[o].Jugador==a){e=!1;break}return e},IA=function(a,o,e){var t,r,n,l,i,d=!1,s=[],c=[];if(timer.stop(),timer.remove(),timerturno.stop(),timerturno.remove(),(1==RepartoFinalizado&&1==PartidaComenzada&&MarcadorNuestro<PuntosGanar&&MarcadorRival<PuntosGanar||1==RepartoFinalizado&&0==SonVueltas&&1==PartidaComenzada)&&0==PuntosFin()&&(a!=SoyElJugador&&PermisoParaTomarControl(a)||a==SoyElJugador&&timerturno.duration.toFixed(0)<=0&&1==ModoMultijugador||0==ModoMultijugador)&&0==FReconectando()&&(0==ModoMultijugador||1==ModoMultijugador&&1==EstoyConectado())&&0==TurnoYaPasado(o,a,e)){for(timerturno.stop(),timerturno.remove(),timer.stop(),timer.remove(),t=MazoCentral.length+1,log(!1,"vRonda "+vRonda),s.splice(0,100),"D"==(l=DevuelveUbicacionCarta(a))&&(c=MazoD),"U"==l&&(c=MazoU),"L"==l&&(c=MazoL),"R"==l&&(c=MazoR),r=0;r<=c.length-1;r++)s.push(new Carta(c[r].palo,c[r].idCarta,c[r].valor,null,null,null)),s[r].cartilla=c[r].cartilla;for(r=0;r<=s.length-1;r++)0==ValidadorReglas(s[r],a)&&(s[r].palo="BORRAR");for(n=0;n<=5;n++)a:for(r=0;r<=s.length-1;r++)if("BORRAR"==s[r].palo){s.splice(r,1);break a}if(0<s.length){for(0==(d=IA_PartidaGanada(s,a,t))&&(d=1==IA_MasDe20()?IA_Sujeta(s,a,"Alto",t):0==SonVueltas?1==IA_MasDe10()&&0==SituacionEspecialDescartar(s,a,t)?4==o?IA_Descarte(s,a,t):IA_Sujeta(s,a,"Bajo",t):1==SituacionEspecialSujetar(s,a,t)?IA_Sujeta(s,a,"Bajo",t):IA_Descarte(s,a,t):1==IA_MasDe10()?IA_Sujeta(s,a,"Bajo",t):3==t?IA_Sujeta(s,a,"Bajo",t):4==t&&4==o?IA_Sujeta(s,a,"Bajo",t):1==SituacionEspecialSujetar(s,a,t)?IA_Sujeta(s,a,"Bajo",t):IA_Descarte(s,a,t)),i=!1,r=0;r<=s.length-1;r++)if(s[r].cartilla.name==d){i=!0;break}if(0==i&&LlamadaIA(a,o,e),(0==ModoMultijugador&&SoyElJugador!=a||1==ModoMultijugador)&&(0==ModoMultijugador||1==ModoMultijugador&&1==EstoyConectado())&&0==TurnoYaPasado(o,a,e)&&1==ValidaMovimientoJugador(o,a,e)&&(log(!0,"IA: ENVIO CARTA AL CENTRO "+d+" AUTOMATICAMENTE CON vTurno "+a),0==ModoMultijugador?MoverCentroAjeno(a,d,o,Date.now(),e,!1):log(!0,"Envio la carta al centro desde IA para mi"),1==ModoMultijugador)){ArrayDelaPropiaSala[a-1].JugadorFull,ArrayDelaPropiaSala[a-1].JugadorSala,ArrayDelaPropiaSala[a-1].Nombre,ArrayDelaPropiaSala[a-1].JugadorSala;Date.now();var u=[];u.splice(0,1e3);var g=1e5*Math.random(),p=new function(a,o,e,t,r,n,l,i,d,s,c,u,g,p,M){this.Habitacion=a,this.SoyElJugador=o,this.Cartilla=e,this.Turno=t,this.Ronda=r,this.SonVueltas=n,this.Partida=l,this.JugadorFull=i,this.JugadorSala=d,this.Nombre=s,this.idPartida=c,this.IdMsg=u,this.ClientId=g,this.SalaID=p,this.Mensaje=M,this.Fecha=new Date(Date.now())}(Habitacion,a,d,a,o,SonVueltas,MarcadorPartidasNuestro+MarcadorPartidasRival,ArrayDelaPropiaSala[a-1].JugadorFull,ArrayDelaPropiaSala[a-1].JugadorSala,ArrayDelaPropiaSala[a-1].Nombre,idPartida,g,ArrayDelaPropiaSala[a-1].JugadorSala,Habitacion,"enviar carta centro");ArrayAccionesDesconexiones.push(p),u.push(p);var M=game_objeto.time.create(!1),v=!0;M.loop(200,function(){try{socket.emit("enviar carta centro",u[0],function(a){EliminarColaMensajes(a,"enviar carta centro")})}catch(a){v=!1}1==v&&(M.stop(),M.remove(),u.splice(0,1e3),s[r].palo==Triunfo&&(1==s[r].valor&&GrabarResultado(a,MarcadorPartidasNuestro+MarcadorPartidasRival,SonVueltas,0,!1,!1,!0,!1),3==s[r].valor&&GrabarResultado(a,MarcadorPartidasNuestro+MarcadorPartidasRival,SonVueltas,0,!1,!1,!1,!0)))}),M.start()}}}},SituacionPartida=function(a,o,e){var t,r,n,l=0;for(1==EsCompi(o)?(r=MarcadorNuestro,n=MarcadorRival):(r=MarcadorRival,n=MarcadorNuestro),t=0;t<=MazoCentral.length-1;t++)l+=MazoCentral[t].valorPuntuacion;return new function(a,o,e){this.PuntosEnMesa=a,this.MarcadorRevisar=o,this.MarcadorRevisarEllos=e}(l,r,n)},IA_MasDe10=function(){var a,o=!1,e=0,t=!1;for(a=0;a<=MazoCentral.length-1;a++)e+=MazoCentral[a].valorPuntuacion,11<=MazoCentral[a].valorReal&&(t=!0);return 10<=e&&1==t&&(o=!0),o},EsCompi=function(a){var o;return 1==SoyElJugador&&(1==a&&(o=!0),2==a&&(o=!1),3==a&&(o=!0),4==a&&(o=!1)),2==SoyElJugador&&(2==a&&(o=!0),3==a&&(o=!1),4==a&&(o=!0),1==a&&(o=!1)),3==SoyElJugador&&(3==a&&(o=!0),4==a&&(o=!1),1==a&&(o=!0),2==a&&(o=!1)),4==SoyElJugador&&(4==a&&(o=!0),1==a&&(o=!1),2==a&&(o=!0),3==a&&(o=!1)),o},PosibleCanteIA=function(t){var r,n=0,l=0;return["oros","copas","espadas","bastos"].forEach(function(a,o,e){for(r=n=0;r<=t.length-1;r++)t[r].palo!=a||9!=t[r].valorReal&&10!=t[r].valorReal||0!=EstaCantado(a)||n++;2==n&&(l+=Triunfo==a?40:20)}),l},TengoCantePaloOSieteCritico=function(a,o,e){var t,r=!1,n=0,l=!1;for(t=0;t<=a.length-1;t++)9!=a[t].valorReal&&10!=a[t].valorReal||a[t].palo!=o||0!=EstaCantado(o)||n++,7==a[t].valorReal&&a[t].palo==Triunfo&&a[t].valorReal==e&&(l=!0);return 2==n?r=!0:0<CartaTriunfo.length&&(1!=n||9!=CartaTriunfo[0].valorReal&&10!=CartaTriunfo[0].valorReal||CartaTriunfo[0].palo!=o||(r=!0),2==n&&(r=!0),11!=CartaTriunfo[0].valorReal&&12!=CartaTriunfo[0].valorReal||1!=l||(r=!0)),r},IA_PartidaGanada=function(a,o,e){var t,r,n,l,i,d=0,s=0,c=0,u=0,g=0,p=0,M=0,v=0,h=0,m=0,z=!1;if(n=(i=SituacionPartida(a,o,e)).MarcadorRevisar,l=i.MarcadorRevisarEllos,r=i.PuntosEnMesa,1==SonVueltas){for(t=0;t<=a.length-1;t++)a[t].palo==Triunfo&&a[t].valorReal>p&&(g=a[t].valorPuntuacion,p=a[t].valorReal,d=t);for(t=0;t<=a.length-1;t++)a[t].palo==Triunfo&&a[t].valorReal>M&&0==TengoCantePaloOSieteCritico(a,a[t].palo,a[t].valorReal)&&(a[t].valorPuntuacion,M=a[t].valorReal,s=t);for(t=0;t<=a.length-1;t++)a[t].valorReal>h&&(v=a[t].valorPuntuacion,h=a[t].valorReal,c=t);for(t=0;t<=a.length-1;t++)a[t].valorReal>m&&0==TengoCantePaloOSieteCritico(a,a[t].palo,a[t].valorReal)&&(a[t].valorPuntuacion,m=a[t].valorReal,u=t);if(C=IA_DevuelveKey(a,a[c].palo,a[c].valorReal),PuntosGanar<=n+v+r&&4==e&&0!=IA_Ganaria(a,o,C)&&(z=C),PuntosGanar<=l+r&&(0==RBazaEsNuestra(MazoCentral,o)||0==NumeroTriunfos(MazoCentral))&&(z=IA_Sujeta(a,o,"Bajo",e)),0==z)if(PuntosGanar<=n+g+r)if(4==e){var C=IA_DevuelveKey(a,a[d].palo,a[d].valorReal);z=0!=IA_Ganaria(a,o,C)&&C}else{C=IA_DevuelveKey(a,a[d].palo,a[d].valorReal);z=0!=IA_Ganaria(a,o,C)&&10!=a[d].valorPuntuacion&&C}else z=!1;if(C=IA_DevuelveKey(a,a[u].palo,a[u].valorReal),n+v+r+PosibleCanteIA(a)>=PuntosGanar&&4==e&&0!=IA_Ganaria(a,o,C)&&(z=C),0==z)if(n+g+r+PosibleCanteIA(a)>=PuntosGanar)if(4==e){C=IA_DevuelveKey(a,a[s].palo,a[s].valorReal);z=0!=IA_Ganaria(a,o,C)&&C}else{C=IA_DevuelveKey(a,a[s].palo,a[s].valorReal);z=(0!=IA_Ganaria(a,o,C)&&10!=a[d].valorPuntuacion||10==a[d].valorPuntuacion&&2<=e)&&C}else z=!1}return z},IA_Ganaria=function(a,o,e){var t,r,n,l=!1,i=[];for(i.splice(0,100),t=0;t<=MazoCentral.length-1;t++)i.push(new CartaBazaNuestra(MazoCentral[t].palo,MazoCentral[t].valorReal,MazoCentral[t].jugador));for(r=0;r<=a.length-1;r++)if(a[r].cartilla.name==e){i.push(new CartaBazaNuestra(a[r].palo,a[r].valorReal,o));break}return 1==RBazaEsNuestra(i,o)&&(l=!0),n=1==l&&e,log(!0,"IA_Ganaria "+o+" "+n),n},IA_MasDe20=function(){var a,o=!1,e=0;for(a=0;a<=MazoCentral.length-1;a++)e+=MazoCentral[a].valorPuntuacion;return 20<=e&&(o=!0),o},TengoBuenTriunfo=function(a,o,e){var t,r,n=!1;for(r=12;7<=r;r--)for(t=0;t<=a.length-1;t++){var l=IA_DevuelveKey(a,a[t].palo,a[t].valorReal);if(a[t].palo==Triunfo&&a[t].valorReal==r){n=l;break}}return n},TengoAsTresTriunfo=function(a,o,e){var t,r,n=!1;for(r=12;11<=r;r--)for(t=0;t<=a.length-1;t++){var l=IA_DevuelveKey(a,a[t].palo,a[t].valorReal);if(a[t].palo==Triunfo&&a[t].valorReal==r){n=l;break}}return n},TengoBuenaCartaTriunfo=function(a,o,e){var t,r,n=!1;for(r=10;8<=r;r--)for(t=0;t<=a.length-1;t++){var l=IA_DevuelveKey(a,a[t].palo,a[t].valorReal);if(a[t].palo==Triunfo&&a[t].valorReal==r){n=l;break}}return n},TengoBuenaCartaNOTriunfo=function(a,o,e){var t,r,n=!1;for(r=12;11<=r;r--)for(t=0;t<=a.length-1;t++){var l=IA_DevuelveKey(a,a[t].palo,a[t].valorReal);if(a[t].palo!=Triunfo&&a[t].valorReal==r){n=l;break}}return n},TienenAsTresNoTriunfo=function(a){var o,e,t=DevuelveUbicacionCarta(a),r=!1;"D"==t&&("R",o=MazoR),"R"==t&&("U",o=MazoU),"U"==t&&("L",o=MazoL),"L"==t&&("D",o=MazoD);var n=MazoCentral[0].palo;for(e=0;e<=o.length-1;e++)if(o[e].palo==n&&o[e].palo!=Triunfo&&12<=o[e].valorReal){r=!0;break}return r},SituacionEspecialSujetar=function(a,o,e){var t,r=!1,n=RBazaEsNuestra(MazoCentral,o);return(t=SituacionPartida(a,o,e)).MarcadorRevisar,t.MarcadorRevisarEllos,t.PuntosEnMesa,0<MazoCentral.length&&5<=vRonda&&1==n&&MazoCentral[0].palo!=Triunfo&&3==e&&1==TienenAsTresNoTriunfo(o)&&(r=!0),4==vRonda&&0==n&&3==e&&1==IA_MasDe10()&&(r=!0),r},SituacionEspecialDescartar=function(a,o,e){var t,r=!1,n=RBazaEsNuestra(MazoCentral,o);return(t=SituacionPartida(a,o,e)).MarcadorRevisar,t.MarcadorRevisarEllos,t.PuntosEnMesa,0<MazoCentral.length&&1==n&&MazoCentral[0].palo!=Triunfo&&3==e&&12<=MazoCentral[0].valorReal&&(r=!0),r},PuedoDescartarme=function(){var a,o=!1;if(0<ArrayDescartePosible.length)for(a=0;a<=ArrayDescartePosible.length-1;a++)if(1==ArrayDescartePosible[a].veces&&ArrayDescartePosible[a].palo!=Triunfo){o=!0;break}return o},IA_Descarte=function(a,o,e){var t,r,n,l,i,d,s=!1,c=!1;n=(d=SituacionPartida(a,o,e)).MarcadorRevisar,l=d.MarcadorRevisarEllos,i=d.PuntosEnMesa;var u=RBazaEsNuestra(MazoCentral,o);for(ArrayDescartePosible.splice(0,100),t=0;t<=a.length-1;t++)CuentaPalos(a[t].palo);if(0==c&&(c=IA_Cargar(a,o,e)),0==c&&1==SonVueltas&&e<=2&&(80<=n||n<=40||90<=l)&&0!=(s=TengoAsTresTriunfo(a,o,e))&&0!=IA_Ganaria(a,o,s)&&(c=s),0==c&&1==SonVueltas&&e<=2&&(n<=40||90<=l)&&i+n<PuntosGanar&&0!=(s=TengoBuenaCartaNOTriunfo(a,o,e))&&(c=s),0==c&&1==SonVueltas&&e<=2&&(n<=40||90<=l)&&0!=(s=TengoBuenaCartaTriunfo(a,o,e))&&0!=IA_Ganaria(a,o,s)&&(c=s),0==c&&3==e&&1==u&&0==TienenAsTresNoTriunfo(o)&&0==SonVueltas&&4==vRonda&&i<10)for(t=0;t<=a.length-1;t++){var g=IA_DevuelveKey(a,a[t].palo,a[t].valorReal);if(a[t].palo!=Triunfo&&11<=a[t].valorReal){c=g;break}}if(0==c&&(5<=vRonda&&1==e||4==vRonda&&1==e&&0==PuedoDescartarme()))for(t=0;t<=a.length-1;t++){g=IA_DevuelveKey(a,a[t].palo,a[t].valorReal);if(a[t].palo!=Triunfo&&12==a[t].valorReal){c=g;break}}if(0==c)for(t=0;t<=ArrayDescartePosible.length-1;t++)if(1==ArrayDescartePosible[t].veces&&ArrayDescartePosible[t].palo!=Triunfo)for(r=0;r<=a.length-1;r++){g=IA_DevuelveKey(a,a[r].palo,a[r].valorReal);if(a[r].palo==ArrayDescartePosible[t].palo&&(a[r].valorPuntuacion<10&&0==SonVueltas||0==a[r].valorPuntuacion&&1==SonVueltas)&&n+a[r].valorPuntuacion+i<PuntosGanar&&0==RompoCante(a,a[r].palo,a[r].valorReal)&&(1==u||0==IA_Ganaria(a,o,g)||1==e)){c=a[r].cartilla.name;break}}return 0==c&&(c=IA_AleatoriaNoTriunfo(a,o,e)),c};var ObjetoDescarte=function(a,o){this.palo=a,this.veces=o};function CartaIA(a,o,e,t){this.palo=a,this.valorReal=o,this.name=e,this.valorPuntuacion=t}function Boot(){Phaser.State.call(this)}CuentaPalos=function(a){var o,e=!1;for(o=0;o<=ArrayDescartePosible.length-1;o++)if(ArrayDescartePosible[o].palo==a){ArrayDescartePosible[o].veces=ArrayDescartePosible[o].veces+1,e=!0;break}0==e&&ArrayDescartePosible.push(new ObjetoDescarte(a,1))},RompoCante=function(a,o,e){var t,r=0,n=!0;if(9==e||10==e){for(t=0;t<=a.length-1;t++)a[t].palo!=o||9!=a[t].valorReal&&10!=a[t].valorReal||r++;if(2==r){for(t=0;t<=RegistrarCantes.length-1;t++)if(RegistrarCantes[t]==o){n=!1;break}}else n=!1}else n=!1;return n},IA_AleatoriaNoTriunfo=function(a,o,e){var t,r,n,l,i=[],d=!1,s=RBazaEsNuestra(MazoCentral,o);for(i.splice(0,100),t=0;t<=a.length-1;t++)i.push(new CartaIA(a[t].palo,a[t].valorReal,a[t].cartilla.name,a[t].valorPuntuacion));if(n=100,0==d)for(t=0;t<=i.length-1;t++)r=IA_DevuelveKey(i,i[t].palo,i[t].valorReal),i[t].valorReal<n&&i[t].palo!=Triunfo&&(1==s||0==IA_Ganaria(a,o,r)||1==e)&&0==RompoCante(i,i[t].palo,i[t].valorReal)&&(n=i[t].valorReal,d=i[t].name);if(n=100,0==d)for(t=0;t<=i.length-1;t++)r=IA_DevuelveKey(i,i[t].palo,i[t].valorReal),i[t].valorReal<n&&i[t].palo==Triunfo&&(1==s||0==IA_Ganaria(a,o,r)||1==e)&&0==RompoCante(i,i[t].palo,i[t].valorReal)&&(4!=e&&3!=e||(4==e||3==e)&&1==EchaElTresSiLoTienesConOtro(i,i[t].valorReal,i[t].palo))&&(n=i[t].valorReal,d=i[t].name);if(n=100,0==d)for(t=0;t<=i.length-1;t++)r=IA_DevuelveKey(i,i[t].palo,i[t].valorReal),i[t].valorReal<n&&i[t].palo!=Triunfo&&0==RompoCante(i,i[t].palo,i[t].valorReal)&&(n=i[t].valorReal,d=i[t].name);if(n=100,0==d)for(t=0;t<=i.length-1;t++)i[t].valorReal<n&&i[t].palo==Triunfo&&0==RompoCante(i,i[t].palo,i[t].valorReal)&&(4!=e&&3!=e||(4==e||3==e)&&1==EchaElTresSiLoTienesConOtro(i,i[t].valorReal,i[t].palo))&&(n=i[t].valorReal,d=i[t].name);if(0==d)for(i=Phaser.ArrayUtils.shuffle(i),n=100,t=0;t<=i.length-1;t++)i[t].valorReal<=n&&(n=i[t].valorReal,d=i[t].name);if(4==e)for(t=l=0;t<=i.length-1;t++)r=IA_DevuelveKey(i,i[t].palo,i[t].valorReal),i[t].valorReal>l&&i[t].palo!=Triunfo&&1==s&&0==RompoCante(i,i[t].palo,i[t].valorReal)&&(l=i[t].valorReal,d=i[t].name);return d},IA_DevuelveTriunfoMenorQue=function(a,o,e,t){var r,n=!1;for(r=0;r<=20;r++)if((a=Phaser.ArrayUtils.shuffle(a))[0].palo==Triunfo&&a[0].valorReal<=t){var l=IA_DevuelveKey(a,a[0].palo,a[0].valorReal);if(0!=IA_Ganaria(o,e,l)){!0,n=a[0].name;break}}return n},MiCompiHaTiradoTriunfo=function(a,o){var e=!1;return 3==o&&0<a.length&&a[0].palo==Triunfo&&(e=!0),e},NumeroTriunfos=function(a){var o,e=0;for(o=0;o<=a.length-1;o++)a[o].palo==Triunfo&&e++;return e},EchaElTresSiLoTienesConOtro=function(a,o,e){var t,r=!0;if(2==NumeroTriunfos(a))if(e==Triunfo&&11==o)r=!0;else for(t=0;t<=a.length-1;t++)a[t].palo==Triunfo&&11==a[t].valorReal&&11!=o&&e==Triunfo&&(r=!1);else r=!0;for(t=0;t<=MazoCentral.length-1;t++)if(MazoCentral[t].palo==Triunfo&&12==MazoCentral[t].valorReal){r=!1;break}return r},IA_Sujeta=function(a,o,e,t){var r,n=!1,l=[],i=0,d="",s="",c=0,u=!1;if(0==(n=IA_Cargar(a,o,t)))if(1==RBazaEsNuestra(MazoCentral,o)&&1==MiCompiHaTiradoTriunfo(MazoCentral,t))n=IA_Descarte(a,o,t);else{for(l.splice(0,100),r=0;r<=a.length-1;r++)l.push(new CartaIA(a[r].palo,a[r].valorReal,a[r].cartilla.name,a[r].valorPuntuacion));if(l=Phaser.ArrayUtils.shuffle(l),0<MazoCentral.length&&0==NumeroTriunfos(l)&&2==t&&MazoCentral[0].palo!=Triunfo&&11<=MazoCentral[0].valorReal)for(r=0;r<=l.length-1;r++){var g=IA_DevuelveKey(l,l[r].palo,l[r].valorReal);if(11<=l[r].valorReal){n=g;break}}if(0==n&&4==t){for(u=!1,r=c=0;r<=l.length-1;r++)if(l[r].palo!=Triunfo){g=IA_DevuelveKey(l,l[r].palo,l[r].valorReal);0!=IA_Ganaria(a,o,g)&&l[r].valorReal>=c&&(c=l[r].valorReal,s=l[r].palo,u=!0)}1==u&&(n=IA_DevuelveKey(l,s,c))}if(0==n)if(4==t||"Bajo"==e){if(NumeroTriunfos(MazoCentral)<2){for(u=!1,i=100,r=0;r<=l.length-1;r++)if(l[r].palo==Triunfo){g=IA_DevuelveKey(l,l[r].palo,l[r].valorReal);0!=IA_Ganaria(a,o,g)&&(4!=t&&3!=t||(4==t||3==t)&&1==EchaElTresSiLoTienesConOtro(l,l[r].valorReal,l[r].palo))&&l[r].valorReal<=i&&(i=l[r].valorReal,d=l[r].palo,u=!0)}1==u&&(n=IA_DevuelveKey(l,d,i))}}else if("Alto"==e){for(u=!1,r=c=0;r<=l.length-1;r++)if(l[r].palo==Triunfo){g=IA_DevuelveKey(l,l[r].palo,l[r].valorReal);0!=IA_Ganaria(a,o,g)&&l[r].valorReal>=c&&(c=l[r].valorReal,s=l[r].palo,u=!0)}1==u&&(n=IA_DevuelveKey(l,s,c))}}return 0==n&&(n=IA_Descarte(a,o,t)),log(!1,"IA_Sujeta "+o+" "+n),n},IA_DeboCargar=function(a){return 1==RBazaEsNuestra(MazoCentral,a)},IA_Cargar=function(a,o,e){var t,r=[],n=RBazaEsNuestra(MazoCentral,o),l=!1;r.splice(0,100);var i=SituacionPartida(a,o,e),d=(i.MarcadorRevisar,i.MarcadorRevisarEllos,i.PuntosEnMesa);for(t=0;t<=a.length-1;t++)r.push(new CartaIA(a[t].palo,a[t].valorReal,a[t].cartilla.name,a[t].valorPuntuacion));if(r=Phaser.ArrayUtils.shuffle(r),4==e)for(t=0;t<=r.length-1;t++){var s=IA_DevuelveKey(r,r[t].palo,r[t].valorReal);if((1==n||0!=IA_Ganaria(a,o,s))&&r[t].palo!=Triunfo&&10<=r[t].valorPuntuacion){c=!0,l=r[t].name;break}}else{var c=!1;if(1==n){for(t=0;t<=MazoCentral.length-1;t++)if(MazoCentral[t].palo==Triunfo&&4<=MazoCentral[t].valorPuntuacion||MazoCentral[t].palo==Triunfo&&2<=MazoCentral[t].valorPuntuacion&&d<=15){c=!0;break}if(1==c)for(t=0;t<=r.length-1;t++)if(r[t].palo!=Triunfo&&10<=r[t].valorPuntuacion){c=!0,l=r[t].name;break}}else l=!1}return log(!1,"IA_Cargar "+o+" "+l),l},IA_DevuelveKey=function(a,o,e){var t,r=!1;for(t=0;t<=a.length-1;t++)if(a[t].valorReal==e&&a[t].palo==o){r=null!=a[t].name?a[t].name:a[t].cartilla.name;break}return r},window.onload=function(){0==(-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://"))&&Inicia()},Inicia=function(){var a,o;window.innerHeight/window.innerWidth<.68?(a=1366,o=662):(a=1366,o=1024);var e=-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://");if(ForceSet=1!=e,ForceSet=!1,1==MaliDetect())var t={width:a,height:o,id:"koko",renderer:Phaser.AUTO,parent:"gamer",transparent:!0,antialias:!0,forceSetTimeOut:ForceSet};else t={width:a,height:o,id:"koko",renderer:Phaser.AUTO,parent:"gamer",transparent:!1,antialias:!0,forceSetTimeOut:ForceSet};var r=new Phaser.Game(t);r.state.add("Boot",Boot),r.state.add("Menu",Menu),r.state.add("Preload",Preload),r.state.add("Level",Level),r.state.start("Boot")};var proto=Object.create(Phaser.State);function Menu(){Phaser.State.call(this)}Boot.prototype=proto,Boot.prototype.init=function(){this.input.maxPointers=1,this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL;var a=-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://");this.stage.disableVisibilityChange=1!=a,this.stage.disableVisibilityChange=!1,this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!1},Boot.prototype.preload=function(){this.load.pack("preload","assets/assets-pack.json")},Boot.prototype.create=function(){this.game.plugins.add(new Phaser.Plugin.SaveCPU),this.game.state.start("Preload")};var proto=Object.create(Phaser.State);function Level(){Phaser.State.call(this)}Menu.prototype=proto,Menu.prototype.create=function(){this.startGame()},Menu.prototype.startGame=function(){this.game.state.start("Level")};var proto=Object.create(Phaser.State);Level.prototype=proto;var vProduccion=!0,BloqueoCartaCentro=!1,vCampeonatoOasis=!1,Maquina,MaquinaSinSSH,MaquinaSSH,vIntentosGlobal,RecienInstalado=!1;1==vProduccion?(vIntentosGlobal=10,Maquina="https://xn--guiotepro-n6a.es",Maquina="https://dev.xn--guiotepro-n6a.es"):(vIntentosGlobal=150,Maquina="http://192.168.43.100:5000");var BloqueoOrganizador=!1,BloqueoIA=!1,DesdeMinimizado=!1,emitterLogos,emitterMagia,BotonSalir,BotonConfiguracion,BotonHablarOn,BotonHablarOff,BotonPolicia,BotonParar,BotonVerMazo,BotonLanzarTarea,BotonContacta,BotonRobots,Copa,AltoBocadilloEstallido,AnchoBocadilloEstallido,TapeteRemotoLoader="",DorsoRemotoLoader="",NoticiaRemotoLoader="",ContadorTapetePedir=0,DetenerIA=!1,FondoNegro,CartaDummie,recognition,UsuariosOnline=0,Transcribe="",vNoEsta,SocketInicializado=!1,FinalizandoPartida=!1,bmd,game_objeto,vSonidoOn=!0,FechaIni,FechaFin,IntentosReconexion=0,Version="2.0.8036",lUsable=!0,socket,SonVueltas=!1,callbackweb,LogicalTapeteRemoto=!1,LogicalDorsoRemoto=!1,inputField,FuerzaSalir=!1,Noticia,ContadorNoticia=0,AntiguoSocket="",PuntosGanar=101,PartidasCoto=3,SoyBazan=!1,CotoGanado=!1,AppVotada=!1,Rapido=!1,RapidoEnDesconexiones=!0,BucleManoCentro=0,TiempoIA=1e3,Tiempoturno=10,BocadilloChatD,textChatD,BocadilloChatL,textChatL,BocadilloChatR,textChatR,BocadilloChatU,textChatU,BocadilloCanteD1,BocadilloCanteD2,BocadilloCanteR1,BocadilloCanteR2,BocadilloCanteL1,BocadilloCanteL2,BocadilloCanteU1,BocadilloCanteU2;1==Rapido&&(TiempoIA=150,Tiempoturno=.2);var Texto="copas",PrimeraVez=!0,vSonidoOnOriginal=!1,BackFondo,BackTapete,ReversoGlobal,idPartida,EligiendoPareja=!1,BotonesPartidaBloqueados=!1,BloquearTirada=!1,PrimeraVezLogin=!1,MazoBarajaBase=[],Mazo=[],MazoEnviar=[],MazoEnviarApoyo=[],MazoR=[],MazoL=[],MazoU=[],MazoD=[],Mazoposiciones=[],MazoCentral=[],CartaTriunfo=[],MazoRecogido=[],MazoRecogidoApoyo=[],MazoRecogidoRival=[],UltimaBazaNuestra=[],UltimaBazaRival=[],ArrayDescartePosible=[],ModoMultijugador=!1,EntradaModoJuego=!1,posX_D,posY_D,posAngle_D,posX_L,posY_L,posAngle_L,posX_R,posY_R,posAngle_R,posX_U,posY_U,posAngle_U,RondaArrastre=4,vEscalaGanadora=1.5,vEscalaPequenas=.9,vEscalaUltimaBaza=1,vEscaladoCarta=1.5,TiempoCartaGanadora=300,GrupoD,GrupoL,GrupoR,GrupoU,GrupoCentral,GrupoUltimaBaza,GrupoMazo,Grupo7,GrupoTextos,GrupoChat,SemaforoCartaRecibida,TriunfoAyuda,ArrayTareas=[],ArrayBloqueoTareas=[],ArrayBloqueoTareasBack=[],ArrayTareasGestionadas=[],ArrayDelaPropiaSala=[],ArrayChatDeshabilitado=[],ArrayJugadoresDesconectados=[],ArrayAccionesDesconexiones=[],SemaforoTextoPuntuacion=[],SemaforoRepartos=[],ArrayInfoJugador=[],QuienTomaElControl,PartidaComenzada=!1,RepartoFinalizado=!1,ObjTurnoU,ObjTurnoL,ObjTurnoD,ObjTurnoR,BolsaDinero,MuestraErrorDesconexion=!0,ObjetoJugadoresRonda=function(a,o,e){this.Ronda=a,this.Jugador=o,this.idPartida=e},ObjetoPartida=function(a,o){this.idPartida=a,this.estado=o},ObjetoBloqueo=function(a,o,e){this.idTarea=a,this.idPartida=o,this.Mensaje},SemaforoRondas=[],vRonda=1,vRondaApoyo=1,RondaJugada=[],SiempreBocaArriba=!1,textoContador,TextCuentaMundo,TipoBaraja="baraja_guinarte",SonidoChascarrillos=!0,SonidoCantes=!0,SonidoCartas=!0,soyelprimero=!1,vVerticalPorqueSi=0,vHorizontalPorqueSi=0,vVerticalDerechaPorqueSi=0,vHorizontalDerechaPorqueSi=0,vHorizontalIzquierdaPorqueSi=0,vSeparacion=15,Habitacion,vVelocidadCartas=150,SoyElJugador,vVelocidadCartasReordernar=250,vVelocidadRobar=350,vTurno=1,vTurnoConsumido=1,LimiteReconexiones=2,LimiteMinimizados=2,LimiteTiempoReconexion=20,vVecesMinimizado=0,vVecesReconectado=0,Triunfo,twChatTextoD1,twChatTextoD2,twChatTextoL1,twChatTextoL2,twChatTextoR1,twChatTextoR2,twChatTextoU1,twChatTextoU2,twChatBocadilloD1,twChatBocadilloD2,twChatBocadilloL1,twChatBocadilloL2,twChatBocadilloR1,twChatBocadilloR2,twChatBocadilloU1,twChatBocadilloU2,twBocadilloCanteD1,twBocadilloCanteD2,twBocadilloCanteD3,twBocadilloCanteD4,twBocadilloCanteL1,twBocadilloCanteL2,twBocadilloCanteL3,twBocadilloCanteL4,twBocadilloCanteR1,twBocadilloCanteR2,twBocadilloCanteR3,twBocadilloCanteR4,twBocadilloCanteU1,twBocadilloCanteU2,twBocadilloCanteU3,twBocadilloCanteU4,tw1,tw2,tw3,tw4,twEsp7,twReu,twRec1,twRec2,twRec3,twBocadillo,twBocadillo2,twFondoNegro,twPeq1,twPeq2,twPeq3,twPeq4,twRecoger1,twRecoger2,twRecoger3,twRecoger4,MarcadorNuestro=0,MarcadorRival=0,MarcadorPartidasRival=0,MarcadorPartidasNuestro=0,MarcadorPartidasRivalFin=0,MarcadorPartidasNuestroFin=0,BotonCantar,BazaNuestraGlobal=!1,RegistrarCantes=[],BotonSiete,BotonMonoJugador,BotonMultiJugador,BotonAleatorio,BotonClasificacion,BotonAmigos,AnchoCarta=0,AnchoCartaEscalado=0,BotonHablar,BotonEscribir,EfectoTween1=Phaser.Easing.Linear.Out,EfectoTween2=Phaser.Easing.Linear.Out,EfectoTweenRebote=Phaser.Easing.Bounce.Out,CentroIrreal=0,MuestraChat=!1,MuestraLogin=!1,AnchoFoto=75,timerturno,timerpareja,timerestoylisto,timer,timerBarajaRecibida,timerNuevaPartida,vConContador=!0,textJugador1,textJugador2,textJugador3,textJugador4,textJugadorRank1,textJugadorRank2,textJugadorRank3,textJugadorRank4,Avatar1,Avatar2,Avatar3,Avatar4,AvatarSprite1,AvatarSprite2,AvatarSprite3,AvatarSprite4,AvatarMedalla1,AvatarMedalla2,AvatarMedalla3,AvatarMedalla4,AvatarLogro1,AvatarLogro2,AvatarLogro3,AvatarLogro4,deb,anchoPantalla=0,altoPantalla=0,textEsperando,textListos,textEligiendo,SndReparto,SndMesa,Snd20,Snd20Oros,Snd20Copas,Snd20Espadas,Snd20Bastos,SndLas40,SndIdas,SndVueltas,SndLas40_2,SndAPorEllos,SndArrastro,SndArrastro_2,SndBocarrana,SndCampeones,SndContar,SndCotoTerminado,SndEspadilla,SndOre,SndMatanzaCaballo,SndMataCompanero,SndOtraVezSera,SndTabazo,SndTabazo_2,SndVueltas,SndIdas2,SndVueltas2,SndGrano,SndUltimas,SndFueraMesa,SndProfesionales,SndCaballoEncimador,SndGafas,SndHabiendoPan,SndHayPros,SndOficio,SndQuinceMas,SndSindicato,SndTuCuenta,SndCremallera,SndMonedas,VerEstable=!0,xSalir,cuatrotres=!1,SndChatarrero,SndChiflar,SndEscupe,SndFaldas,SndGorrion,SndGrijan,SndGuinoteOtro,SndMataBocarrana,SndMonja,SndPajaro,SndPrimeraChicos,SndPuntos,SndToro,SndPrimo,SndToco,SndTaustano,SndNoSube,SndSientate,SndPensar,SndNoSabes,SndNano,SndMejor,SndGenial,SndDar,SndClases,Snd20Copas2,SndArtista,SndArrancao,TiempoAntesDesconexion=0,IntentaConexionInicial=!0,TextMarcador,TextTituloMarcador,TextGbits,TextGbitsIndicador,GBitsLocalSemaforo=!1,GBitsLocal=0,GbitsPendientes=0,GbitsPendientesNuevoDiaSemaforo=!1,ObjetoG,ObjetoDesconexion=function(a,o){this.Jugador=a,this.JugadorSala=o},ObjetoJugador=function(a,o,e,t,r,n,l,i,d,s,c,u,g,p,M,v,h,m,z,C,f,_,S,R,b,A,w,D,T,y,P){this.Nombre=a,this.Sexo=o,this.Foto=e,this.Dorso=t,this.Tapete=r,this.ProveedorID=n,this.RedSocial=l,this.Admin=i,this.VersionOK=d,this.VersionMensaje=s,this.Noticia=c,this.IP=u,this.ChatDisponible=g,this.Nivel=p,this.CampeonSemanal=M,this.Tapete43=v,this.ImagenesEmitter=h,this.gprd=m,this.LimiteReconexiones=z,this.LimiteMinimizados=C,this.LimiteTiempoReconexion=f,this.GbitsResultado=_,this.GbitsDiario=S,this.GbitsPlus=R,this.NuevoDia=b,this.PuntuaciondePRO=A,this.PreguntarSiGustaUser=w,this.IrA=D,this.IrATexto=T,this.Posicion30=y,this.EsPRO=P,this.JugadorFull=n+"-"+l};function PosicionesCartas(a,o,e,t){this.Mazo=a,this.posicion=o,this.x=e,this.y=t}function startRecognition(){if(Transcribe="",window.plugins){HablandoSonidoOff();try{window.plugins.speechRecognition.startListening(function(a){EnviarTextoBocadillo(SoyElJugador,a[0],!1),HablandoSonidoOn()},function(a){HablandoSonidoOn()},{language:"es-ES",showPopup:!1})}catch(a){MensajeError("Opción no disponible en tu dispositivo"),HablandoSonidoOn()}}else{try{HablandoSonidoOff();var a=a||webkitSpeechRecognition;(recognition=new a).lang="es-ES",recognition.continuous=!1,recognition.interimResults=!0,recognition.onresult=function(a){Transcribe="";for(var o=a.resultIndex;o<a.results.length;o++)a.results[o].isFinal&&(Transcribe+=a.results[o][0].transcript)},recognition.onstart=function(a){},recognition.onerror=function(a){MensajeError("Tienes que dar permisos al micrófono"),HablandoSonidoOn()},recognition.onend=function(a){""!=Transcribe&&EnviarTextoBocadillo(SoyElJugador,Transcribe,!1),HablandoSonidoOn()}}catch(a){MensajeError("Opción no disponible en tu dispositivo"),HablandoSonidoOn()}try{recognition.start()}catch(a){MensajeError("Opción no disponible en tu dispositivo"),HablandoSonidoOn()}}}function StopRecognition(){if(window.plugins){HablandoSonidoOn();try{window.plugins.speechRecognition.stopListening(function(a){},function(a){console.error(a),HablandoSonidoOn()})}catch(a){HablandoSonidoOn()}}else try{recognition.stop()}catch(a){}}SistemaOperativo=function(){var o;if(o="",window.plugins)try{o=device.platform}catch(a){o="Android"}return o},CierraChat=function(){"IOS"==SistemaOperativo().toUpperCase()&&document.activeElement.blur(),document.getElementById("nchat").style.display="none"},CierraChat2=function(a){""==a&&CierraChat()},acelera=function(){},Pausado=function(){FechaIni=new Date(Date.now()),MatarConexionPrueba()},Recuperado=function(){window.plugins||ConectaServidorPrueba()},ConfiguraAvatares=function(){null==AvatarSprite1&&((AvatarSprite1=game_objeto.add.image(-0,-0,"general","desconocido")).inputEnabled=!0,AvatarSprite1.events.onInputDown.add(function(){ClickAvatar(1)}),AvatarSprite1.anchor.setTo(.5,.5),(AvatarSprite2=game_objeto.add.image(-0,-0,"general","desconocido")).inputEnabled=!0,AvatarSprite2.events.onInputDown.add(function(){ClickAvatar(2)}),AvatarSprite2.anchor.setTo(.5,.5),(AvatarSprite3=game_objeto.add.image(-0,-0,"general","desconocido")).inputEnabled=!0,AvatarSprite3.events.onInputDown.add(function(){ClickAvatar(3)}),AvatarSprite3.anchor.setTo(.5,.5),(AvatarSprite4=game_objeto.add.image(-0,-0,"general","desconocido")).inputEnabled=!0,AvatarSprite4.events.onInputDown.add(function(){ClickAvatar(4)}),AvatarSprite4.anchor.setTo(.5,.5),AvatarMedalla1=game_objeto.add.image(0,55,"general","medalla"),AvatarMedalla2=game_objeto.add.image(0,55,"general","medalla"),AvatarMedalla3=game_objeto.add.image(0,55,"general","medalla"),AvatarMedalla4=game_objeto.add.image(0,55,"general","medalla"),AvatarLogro1=game_objeto.add.image(0,-35,"general","imagen_turno"),AvatarLogro2=game_objeto.add.image(0,-35,"general","imagen_turno"),AvatarLogro3=game_objeto.add.image(0,-35,"general","imagen_turno"),AvatarLogro4=game_objeto.add.image(0,-35,"general","imagen_turno"),(textJugador1=game_objeto.add.bitmapText(0,0,"MiFuenteAmarilla","BitmapText",22)).anchor.set(.5,.5),(textJugador2=game_objeto.add.bitmapText(0,0,"MiFuenteAmarilla","BitmapText",22)).anchor.set(.5,.5),(textJugador3=game_objeto.add.bitmapText(0,0,"MiFuenteAmarilla","BitmapText",22)).anchor.set(.5,.5),(textJugador4=game_objeto.add.bitmapText(0,0,"MiFuenteAmarilla","BitmapText",22)).anchor.set(.5,.5),(textJugadorRank1=game_objeto.add.bitmapText(0,0,"MiFuenteAmarilla","BitmapText",22)).anchor.set(.5,.5),(textJugadorRank2=game_objeto.add.bitmapText(0,0,"MiFuenteAmarilla","BitmapText",22)).anchor.set(.5,.5),(textJugadorRank3=game_objeto.add.bitmapText(0,0,"MiFuenteAmarilla","BitmapText",22)).anchor.set(.5,.5),(textJugadorRank4=game_objeto.add.bitmapText(0,0,"MiFuenteAmarilla","BitmapText",22)).anchor.set(.5,.5)),MataAvatares(!0)},MataAvatares=function(a){1==SoyElJugador&&1!=a||(AvatarSprite1.kill(),AvatarMedalla1.kill(),AvatarLogro1.kill(),textJugador1.kill(),textJugadorRank1.kill(),game_objeto.cache.checkImageKey("imagen1")&&game_objeto.cache.removeImage("imagen1")),2==SoyElJugador&&1!=a||(AvatarSprite2.kill(),AvatarMedalla2.kill(),AvatarLogro2.kill(),textJugador2.kill(),textJugadorRank2.kill(),game_objeto.cache.checkImageKey("imagen2")&&game_objeto.cache.removeImage("imagen2")),3==SoyElJugador&&1!=a||(AvatarSprite3.kill(),AvatarMedalla3.kill(),AvatarLogro3.kill(),textJugador3.kill(),textJugadorRank3.kill(),game_objeto.cache.checkImageKey("imagen3")&&game_objeto.cache.removeImage("imagen3")),4==SoyElJugador&&1!=a||(AvatarSprite4.kill(),AvatarMedalla4.kill(),AvatarLogro4.kill(),textJugador4.kill(),textJugadorRank4.kill(),game_objeto.cache.checkImageKey("imagen4")&&game_objeto.cache.removeImage("imagen4"))},StorageGet=function(a){var o=!1;return"undefined"!=typeof localStorage?("SonidoOnOff"==a&&(o="true"==localStorage.SonidoOnOff||null==localStorage.SonidoOnOff,o=!0),"TipoBaraja"==a&&(o="0"==localStorage.TipoBaraja||null==localStorage.TipoBaraja?0:1),"AudioChascarrillos"==a&&(o="true"==localStorage.AudioChascarrillos||null==localStorage.AudioChascarrillos),"AudioCantes"==a&&(o="true"==localStorage.AudioCantes||null==localStorage.AudioCantes),"AudioCartas"==a&&(o="true"==localStorage.AudioCartas||null==localStorage.AudioCartas)):("SonidoOnOff"==a&&(o=!0),"TipoBaraja"==a&&(o=0),"AudioChascarrillos"==a&&(o=!0),"AudioCantes"==a&&(o=!0),"AudioCartas"==a&&(o=!0)),o},StorageSet=function(a,o){"undefined"!=typeof localStorage&&("SonidoOnOff"==a&&(localStorage.SonidoOnOff=o),"TipoBaraja"==a&&(localStorage.TipoBaraja=o),"AudioChascarrillos"==a&&(localStorage.AudioChascarrillos=o),"AudioCantes"==a&&(localStorage.AudioCantes=o),"AudioCartas"==a&&(localStorage.AudioCartas=o))},Level.prototype.create=function(){this.game.onPause.add(Pausado,this),this.game.onResume.add(Recuperado,this),CargaOpcionesDefecto(),vSonidoOn=StorageGet("SonidoOnOff"),null==game_objeto?(game_objeto=this,Phaser.Device.firefox&&(game_objeto.load.bitmapFont("MiFuenteAmarilla","assets/fonts/font.png","assets/fonts/font.fnt"),game_objeto.load.bitmapFont("MiFuenteNegra","assets/fonts/fontblack.png","assets/fonts/fontblack.fnt"))):LimpiarSprites(),null==CartaDummie&&(CartaDummie=game_objeto.add.image(-200,-200,TipoBaraja,"1_oros")),null==textEsperando&&(textEsperando=game_objeto.add.bitmapText(game_objeto.world.centerX,game_objeto.world.centerY-50,"MiFuenteAmarilla","BitmapText",50)).anchor.set(.5,.5),textEsperando.text="Esperando jugadores",textEsperando.kill(),null==textListos&&(textListos=game_objeto.add.bitmapText(game_objeto.world.centerX,game_objeto.world.centerY-50,"MiFuenteAmarilla","BitmapText",50)).anchor.set(.5,.5),textListos.text="Un momento por favor...\n Esperando al resto de compañeros.",textListos.kill(),ComunBarajas(),Habitacion=Math.floor(Math.random()),OcultaClasificacion(),window.innerHeight/window.innerWidth<.68?cuatrotres=!1:(cuatrotres=!0,vEscaladoCarta=1.7),window.plugins&&(window.plugins.googleplus.trySilentLogin({offline:!0},function(a){(ObjetoG=a).RedSocial="Google"},function(a){}),facebookConnectPlugin.getLoginStatus(function(a){"connected"==a.status&&facebookConnectPlugin.api("/me?fields=id,name,email,picture",["public_profile","email"],function(a){(ObjetoG=a).RedSocial="Facebook",ObjetoG.userId=a.id},function(){})})),null==Copa&&(SndReparto=game_objeto.add.audio("SndReparto"),SndMesa=game_objeto.add.audio("SndMesa"),Snd20Oros=game_objeto.add.audio("Snd20Oros"),Snd20=game_objeto.add.audio("Snd20"),Snd20Copas=game_objeto.add.audio("Snd20Copas"),Snd20Espadas=game_objeto.add.audio("Snd20Espadas"),Snd20Bastos=game_objeto.add.audio("Snd20Bastos"),SndLas40=game_objeto.add.audio("SndLas40"),SndLas40_2=game_objeto.add.audio("SndLas40_2"),SndIdas=game_objeto.add.audio("SndIdas"),SndVueltas=game_objeto.add.audio("SndVueltas"),SndAPorEllos=game_objeto.add.audio("SndAPorEllos"),SndArrastro=game_objeto.add.audio("SndArrastro"),SndArrastro_2=game_objeto.add.audio("SndArrastro2"),SndBocarrana=game_objeto.add.audio("SndBocarrana"),SndCampeones=game_objeto.add.audio("SndCampeones"),SndContar=game_objeto.add.audio("SndContar"),SndCotoTerminado=game_objeto.add.audio("SndCotoTerminado"),SndEspadilla=game_objeto.add.audio("SndEspadilla"),SndOre=game_objeto.add.audio("SndOre"),SndOtraVezSera=game_objeto.add.audio("SndOtraVezSera"),SndTabazo=game_objeto.add.audio("SndTabazo"),SndTabazo_2=game_objeto.add.audio("SndTabazo2"),SndMatanzaCaballo=game_objeto.add.audio("SndMatanzaCaballo"),SndIdas2=game_objeto.add.audio("SndIdas2"),SndVueltas2=game_objeto.add.audio("SndVueltas2"),SndGrano=game_objeto.add.audio("SndGrano"),SndUltimas=game_objeto.add.audio("SndUltimas"),SndChatarrero=game_objeto.add.audio("SndChatarrero"),SndChiflar=game_objeto.add.audio("SndChiflar"),SndEscupe=game_objeto.add.audio("SndEscupe"),SndFaldas=game_objeto.add.audio("SndFaldas"),SndGorrion=game_objeto.add.audio("SndGorrion"),SndGrijan=game_objeto.add.audio("SndGrijan"),SndGuinoteOtro=game_objeto.add.audio("SndGuinoteOtro"),SndMataBocarrana=game_objeto.add.audio("SndMataBocarrana"),SndMonja=game_objeto.add.audio("SndMonja"),SndPajaro=game_objeto.add.audio("SndPajaro"),SndPrimeraChicos=game_objeto.add.audio("SndPrimeraChicos"),SndPuntos=game_objeto.add.audio("SndPuntos"),SndToro=game_objeto.add.audio("SndToro"),SndFueraMesa=game_objeto.add.audio("SndFueraMesa"),SndProfesionales=game_objeto.add.audio("SndProfesionales"),SndCaballoEncimador=game_objeto.add.audio("SndCaballoEncimador"),SndGafas=game_objeto.add.audio("SndGafas"),SndHabiendoPan=game_objeto.add.audio("SndHabiendoPan"),SndHayPros=game_objeto.add.audio("SndHayPros"),SndOficio=game_objeto.add.audio("SndOficio"),SndQuinceMas=game_objeto.add.audio("SndQuinceMas"),SndSindicato=game_objeto.add.audio("SndSindicato"),SndTuCuenta=game_objeto.add.audio("SndTuCuenta"),SndCremallera=game_objeto.add.audio("SndCremallera"),SndMonedas=game_objeto.add.audio("SndMonedas"),SndPrimo=game_objeto.add.audio("SndPrimo"),SndToco=game_objeto.add.audio("SndToco"),SndTaustano=game_objeto.add.audio("SndTaustano"),SndNoSube=game_objeto.add.audio("SndNoSube"),SndSientate=game_objeto.add.audio("SndSientate"),SndPensar=game_objeto.add.audio("SndPensar"),SndNoSabes=game_objeto.add.audio("SndNoSabes"),SndNano=game_objeto.add.audio("SndNano"),SndMejor=game_objeto.add.audio("SndMejor"),SndGenial=game_objeto.add.audio("SndGenial"),SndDar=game_objeto.add.audio("SndDar"),SndClases=game_objeto.add.audio("SndClases"),Snd20Copas2=game_objeto.add.audio("Snd20Copas2"),SndArtista=game_objeto.add.audio("SndArtista"),SndArrancao=game_objeto.add.audio("SndArrancao")),LogicalDorsoRemoto=LogicalTapeteRemoto=!1,anchoPantalla=1300,altoPantalla=622,null==BackTapete&&(0==cuatrotres?(BackTapete=game_objeto.game.add.image(0,0,"Tapete"),BackFondo=game_objeto.add.image(0,0,"general","fondo_principal")):(BackTapete=game_objeto.game.add.image(0,0,"Tapete_43"),BackFondo=game_objeto.add.image(0,0,"general","fondo_principal_43"))),BackFondo.revive(),BackTapete.kill(),AnchoCarta=CartaDummie.width,AltoCarta=CartaDummie.height,AnchoCartaEscalado=CartaDummie.width*vEscaladoCarta,AltoCartaEscalado=CartaDummie.height*vEscaladoCarta,CentroIrreal=(game_objeto.world.height-AltoCarta-AltoCartaEscalado+AnchoCarta)/2+AnchoCarta-25,PosicionCartas("D"),DibujaTurnos(),ConfiguraAvatares();var a=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCartaEscalado-5*vSeparacion+AnchoCartaEscalado)/2+2*(AnchoCartaEscalado+vSeparacion)+AnchoCarta;null==BotonSiete&&((BotonSiete=game_objeto.add.button(a,game_objeto.world.height-45,"general",function(){Cambiar7(SoyElJugador)},this,"cambiar 7 gris","cambiar 7 gris","cambiar 7 gris","cambiar 7 gris")).anchor.setTo(.5,.5),BotonSiete.width=1.2*BotonSiete.width,BotonSiete.height=1.2*BotonSiete.height),BotonSiete.kill(),SieteDesactivar(),xSalir=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCartaEscalado-5*vSeparacion+AnchoCartaEscalado)/2+2*(AnchoCartaEscalado+vSeparacion)+AnchoCarta+250,1==cuatrotres&&(xSalir+=40),null==BotonSalir&&((BotonSalir=game_objeto.add.button(xSalir,game_objeto.world.height-45,"general",Salir,this,"salir","salir","salir")).anchor.setTo(.5,.5),BotonSalir.width=1.2*BotonSalir.width,BotonSalir.height=1.2*BotonSalir.height),BotonSalir.revive(),CrearTimers();var o=game_objeto.add.image(-300,-300,"general","20 espadas");AltoBocadilloEstallido=o.height,AnchoBocadilloEstallido=o.width,null==Copa&&(Copa=game_objeto.add.image(game_objeto.world.width+500,game_objeto.world.centerY,"general","copa")).anchor.setTo(.5,.5),Copa.kill(),null==BocadilloChatD&&(BocadilloChatD=game_objeto.add.image(0,0,"general","bocadillo_l")),null==BocadilloChatL&&(BocadilloChatL=game_objeto.add.image(0,0,"general","bocadillo_l")),null==BocadilloChatR&&(BocadilloChatR=game_objeto.add.image(0,0,"general","bocadillo_r")),null==BocadilloChatU&&(BocadilloChatU=game_objeto.add.image(0,0,"general","bocadillo_u")),null==textChatD&&(textChatD=game_objeto.add.bitmapText(0,0,"MiFuenteNegra","BitmapText",24)).anchor.set(0,0),null==textChatL&&(textChatL=game_objeto.add.bitmapText(0,0,"MiFuenteNegra","BitmapText",24)).anchor.set(0,0),null==textChatR&&(textChatR=game_objeto.add.bitmapText(0,0,"MiFuenteNegra","BitmapText",24)).anchor.set(0,0),null==textChatU&&(textChatU=game_objeto.add.bitmapText(0,0,"MiFuenteNegra","BitmapText",24)).anchor.set(0,0),BocadilloChatD.kill(),BocadilloChatL.kill(),BocadilloChatR.kill(),BocadilloChatU.kill(),textChatD.kill(),textChatL.kill(),textChatR.kill(),textChatU.kill(),null==BocadilloCanteD1&&(BocadilloCanteD1=game_objeto.add.image(0,0,"general","20 bastos")).anchor.setTo(.5,.5),null==BocadilloCanteD2&&(BocadilloCanteD2=game_objeto.add.image(0,0,"general","20 bastos")).anchor.setTo(.5,.5),null==BocadilloCanteR1&&(BocadilloCanteR1=game_objeto.add.image(0,0,"general","20 bastos")).anchor.setTo(.5,.5),null==BocadilloCanteR2&&(BocadilloCanteR2=game_objeto.add.image(0,0,"general","20 bastos")).anchor.setTo(.5,.5),null==BocadilloCanteL1&&(BocadilloCanteL1=game_objeto.add.image(0,0,"general","20 bastos")).anchor.setTo(.5,.5),null==BocadilloCanteL2&&(BocadilloCanteL2=game_objeto.add.image(0,0,"general","20 bastos")).anchor.setTo(.5,.5),null==BocadilloCanteU1&&(BocadilloCanteU1=game_objeto.add.image(0,0,"general","20 bastos")).anchor.setTo(.5,.5),null==BocadilloCanteU2&&(BocadilloCanteU2=game_objeto.add.image(0,0,"general","20 bastos")).anchor.setTo(.5,.5),BocadilloCanteD1.kill(),BocadilloCanteD2.kill(),BocadilloCanteR1.kill(),BocadilloCanteR2.kill(),BocadilloCanteL1.kill(),BocadilloCanteL2.kill(),BocadilloCanteU1.kill(),BocadilloCanteU2.kill(),null==TextTituloMarcador&&(TextTituloMarcador=game_objeto.add.bitmapText(950,game_objeto.world.height-2*AltoCartaEscalado,"MiFuenteAmarilla","BitmapText",30)).anchor.set(.5,.5),TextTituloMarcador.text="Ntros:\nEllos:",TextTituloMarcador.kill(),null==TextMarcador&&(TextMarcador=game_objeto.add.bitmapText(1075,game_objeto.world.height-2*AltoCartaEscalado,"MiFuenteAmarilla","BitmapText",30)).anchor.set(.5,.5),TextMarcador.kill(),null==TextGbits&&((TextGbits=game_objeto.add.bitmapText(-100,100,"MiFuenteAmarilla","BitmapText",30)).anchor.set(.5,.5),TextGbits.kill()),null==TextGbitsIndicador&&((TextGbitsIndicador=game_objeto.add.bitmapText(-100,100,"MiFuenteRoja","BitmapText",30)).anchor.set(.5,.5),TextGbitsIndicador.kill()),null==TextCuentaMundo&&(TextCuentaMundo=game_objeto.add.bitmapText(-100,145,"MiFuenteAmarilla","BitmapText",24)).anchor.set(.5,.5),null==textoContador&&(textoContador=game_objeto.add.bitmapText(10,100,"MiFuenteAmarilla","BitmapText",44)).anchor.set(.5,.5),textoContador.text="",textoContador.kill();a=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCartaEscalado-5*vSeparacion+AnchoCartaEscalado)/2+0*(AnchoCartaEscalado+vSeparacion)+AnchoCarta;if(null==BotonCantar&&((BotonCantar=game_objeto.add.button(a,game_objeto.world.height-45,"general",function(){Cantar(SoyElJugador)},this,"cantar gris","cantar gris","cantar gris")).anchor.setTo(.5,.5),BotonCantar.width=1.2*BotonCantar.width,BotonCantar.height=1.2*BotonCantar.height),BotonCantar.kill(),CantarDesactivar(),null==BotonConfiguracion&&(BotonConfiguracion=game_objeto.add.button(50+vSeparacion,130,"general",function(){AbrirCerrarLateral()},this,"configuracion","configuracion","configuracion")).anchor.setTo(.5,.5),null==BotonPolicia&&(BotonPolicia=game_objeto.add.button(250+vSeparacion,50,"general",function(){document.getElementById("bdenuncia").click()},this,"policia","policia","policia")).anchor.setTo(.5,.5),BotonPolicia.kill(),null==BotonEscribir&&(BotonEscribir=game_objeto.add.button(50+vSeparacion,50,"general",function(){document.getElementById("bchat").click()},this,"teclado","teclado","teclado")).anchor.setTo(.5,.5),BotonEscribir.kill(),null==BotonHablarOn&&(BotonHablarOn=game_objeto.add.button(150+vSeparacion,50,"general",function(){StopRecognition()},this,"micro_on","micro_on","micro_on")).anchor.setTo(.5,.5),BotonHablarOn.kill(),null==BotonHablarOff&&(BotonHablarOff=game_objeto.add.button(150+vSeparacion,50,"general",function(){startRecognition()},this,"micro_off","micro_off","micro_off")).anchor.setTo(.5,.5),BotonHablarOff.kill(),this.stage.backgroundColor="#2d2d2d",1==vCampeonatoOasis&&(TextoCampeonato=game_objeto.add.bitmapText(0,0,"MiFuenteAmarilla","BitmapText",25),TextoCampeonato.text="Humanos: "+MarcadorPartidasNuestroFin+" Robots: "+MarcadorPartidasRivalFin,TextoCampeonato.anchor.set(.5,.5),TextoCampeonato.x=150,TextoCampeonato.y=20),null==BotonMonoJugador&&((BotonMonoJugador=game_objeto.add.button(game_objeto.world.centerX-120,game_objeto.world.height-170,"general",InicioMonoJugador,this,"jugar_solo","jugar_solo","jugar_solo")).width=BotonMonoJugador.width,BotonMonoJugador.height=BotonMonoJugador.height,BotonMonoJugador.anchor.setTo(.5,.5),1==cuatrotres&&(BotonMonoJugador.width=1.4*BotonMonoJugador.width,BotonMonoJugador.height=1.4*BotonMonoJugador.height,BotonMonoJugador.y=BotonMonoJugador.y-90,BotonMonoJugador.x=BotonMonoJugador.x-45)),BotonMonoJugador.kill(),null==BotonContacta&&(BotonContacta=game_objeto.add.button(game_objeto.world.width-100,game_objeto.world.height-30,"general",function(){LoginCordova(5)},this,"contacta","contacta","contacta")).anchor.setTo(.5,.5),BotonContacta.kill(),null==BotonMultiJugador&&((BotonMultiJugador=game_objeto.add.button(game_objeto.world.centerX+120,game_objeto.world.height-170,"general",InicioMultiJugador,this,"jugar_online","jugar_online","jugar_online")).width=BotonMultiJugador.width,BotonMultiJugador.height=BotonMultiJugador.height,BotonMultiJugador.anchor.setTo(.5,.5),1==cuatrotres&&(BotonMultiJugador.width=1.4*BotonMultiJugador.width,BotonMultiJugador.height=1.4*BotonMultiJugador.height,BotonMultiJugador.y=BotonMultiJugador.y-90,BotonMultiJugador.x=BotonMultiJugador.x+45)),BotonMultiJugador.kill(),null==BotonClasificacion&&((BotonClasificacion=game_objeto.add.button(game_objeto.world.centerX+420,game_objeto.world.centerY-80,"general",SolicitaClasificacion,this,"boton_ranking","boton_ranking","boton_ranking")).width=BotonClasificacion.width,BotonClasificacion.height=BotonClasificacion.height,BotonClasificacion.anchor.setTo(.5,.5),1==cuatrotres&&(BotonClasificacion.width=BotonClasificacion.width,BotonClasificacion.height=BotonClasificacion.height,BotonClasificacion.y=BotonClasificacion.y-110,BotonClasificacion.x=BotonClasificacion.x+70)),BotonClasificacion.kill(),null==BotonAleatorio&&((BotonAleatorio=game_objeto.add.button(game_objeto.world.centerX-120,game_objeto.world.height-170-1e3,"general",InicioMultiJugadorAleatorio,this,"jugar_mundo","jugar_mundo","jugar_mundo")).width=BotonAleatorio.width,BotonAleatorio.height=BotonAleatorio.height,BotonAleatorio.anchor.setTo(.5,.5),1==cuatrotres&&(BotonAleatorio.width=1.4*BotonAleatorio.width,BotonAleatorio.height=1.4*BotonAleatorio.height,BotonAleatorio.y=BotonAleatorio.y-90,BotonAleatorio.x=BotonAleatorio.x-45)),BotonAleatorio.kill(),null==BotonAmigos&&((BotonAmigos=game_objeto.add.button(game_objeto.world.centerX+120+1e3,game_objeto.world.height-170,"general",InicioMultiJugadorAmigos,this,"jugar_con_amigos","jugar_con_amigos","jugar_con_amigos")).width=BotonAmigos.width,BotonAmigos.height=BotonAmigos.height,BotonAmigos.anchor.setTo(.5,.5),1==cuatrotres&&(BotonAmigos.width=1.4*BotonAmigos.width,BotonAmigos.height=1.4*BotonAmigos.height,BotonAmigos.y=BotonAmigos.y-90,BotonAmigos.x=BotonAmigos.x+45)),BotonAmigos.kill(),null==BotonRobots&&((BotonRobots=game_objeto.add.button(game_objeto.world.centerX+35,game_objeto.world.centerY+150,"general",RellenarSala,this,"completar_robots","completar_robots","completar_robots")).width=BotonRobots.width,BotonRobots.height=BotonRobots.height,BotonRobots.anchor.setTo(.5,.5)),BotonRobots.kill(),null==FondoNegro&&((FondoNegro=1==cuatrotres?game_objeto.add.image(0,0,"general","negro_43"):game_objeto.add.image(0,0,"general","negro")).anchor.setTo(.5,.5),FondoNegro.scale.setTo(2,2),FondoNegro.alpha=0),FondoNegro.kill(),ConfiguraPantallaInicio(),null==Noticia&&((Noticia=game_objeto.add.button(a,game_objeto.world.height-45,"general",ClickNoticia,this)).anchor.setTo(.5,.5),Noticia.x=230,Noticia.y=-500,Noticia.IrA="",Noticia.IrATexto=""),Noticia.kill(),null==emitterLogos&&(emitterLogos=game_objeto.add.emitter(game_objeto.world.centerX,-50,100)),null==emitterMagia&&(emitterMagia=game_objeto.add.emitter(game_objeto.world.width-200,45,2)),IntentaConexionInicial=IntentosReconexion<=2,0==EstoyConectado()&&1==PrimeraVez){try{if(ConectaServidor(),1==EstoyConectado())if(0<ArrayInfoJugador.length){ArrayInfoJugador[0].Nombre,ArrayInfoJugador[0].ProveedorID,ArrayInfoJugador[0].RedSocial;try{socket.emit("enviar_peticion_publicidad",socket.id,Version,ObjetoG)}catch(a){}}else try{socket.emit("enviar_peticion_publicidad",socket.id,Version,ObjetoG)}catch(a){}}catch(a){}0==FuerzaSalir&&LoginDesdeWeb()}else if(1==EstoyConectado())try{socket.emit("enviar_peticion_publicidad",socket.id,Version,ObjetoG)}catch(a){}if(FuerzaSalir=PrimeraVez=!1,1==EstoyConectado()&&1==EstoyConectado())try{socket.emit("solicita conectados")}catch(a){}if(textoContador.x=game_objeto.world.centerX,textoContador.y=game_objeto.world.centerY+30,GrupoTextos.add(textEsperando),game_objeto.world.bringToTop(GrupoTextos),GrupoTextos.add(textListos),game_objeto.world.bringToTop(GrupoTextos),null==textEligiendo&&(textEligiendo=game_objeto.add.bitmapText(game_objeto.world.centerX,game_objeto.world.centerY-50,"MiFuenteAmarilla","BitmapText",44)).anchor.set(.5,.5),textEligiendo.kill(),BotonEscribir.kill(),CrearBarajaBase(),1==BotonMonoJugador.alive&&1==BotonMultiJugador.alive&&(BotonSalir.x=xSalir,BotonSalir.kill()),null==BolsaDinero&&((BolsaDinero=game_objeto.add.image(game_objeto.world.width-200,60,"general","bolsa_dinero")).anchor.setTo(.5,.5),BolsaDinero.frameName="bolsa_dinero",BolsaDinero.kill()),MuestraGBits(!1),0<ArrayInfoJugador.length&&1==CotoGanado&&0==AppVotada){var e=!1;0<ArrayInfoJugador.length&&1==ArrayInfoJugador[0].PreguntarSiGustaUser&&(e=!0),AppVotada=!0,1==e&&RateAPP()}},EsNuevoDia=function(){var a=0;return 0==GbitsPendientesNuevoDiaSemaforo&&1==ArrayInfoJugador[0].NuevoDia&&(a=2,GbitsPendientesNuevoDiaSemaforo=!0),a},MuestraGBits=function(){0<ArrayInfoJugador.length&&"DesconocidoPRO"!=ArrayInfoJugador[0].Nombre&&(0==GBitsLocalSemaforo&&(GBitsLocal=ArrayInfoJugador[0].GbitsResultado+ArrayInfoJugador[0].GbitsDiario+ArrayInfoJugador[0].GbitsPlus,GBitsLocalSemaforo=!0),TextGbits.text="x "+GBitsLocal,TextGbits.x=game_objeto.world.width-160+TextGbits.textWidth/2,TextGbits.align="left",TextGbits.x=game_objeto.world.width-200,TextGbits.x=1,TextGbits.y=60,TextGbits.revive(),0!=GbitsPendientes?(EfectoGbitsIndicador(),0<GbitsPendientes?EfectoSubirMarcador(GbitsPendientes):EfectoBajarMarcador(GbitsPendientes)):(BolsaDinero.revive(),BolsaDinero.frameName="bolsa_dinero",TextGbits.text="x "+GBitsLocal,TextGbits.x=game_objeto.world.width-160+TextGbits.textWidth/2))},EfectoGbitsIndicador=function(){var a;TextGbitsIndicador.x=game_objeto.world.width-300,0<GbitsPendientes?(TextGbitsIndicador.y=60,TextGbitsIndicador.font="MiFuenteAmarilla"):(TextGbitsIndicador.y=70,TextGbitsIndicador.font="MiFuenteRoja"),TextGbitsIndicador.fontSize=70,TextGbitsIndicador.width=0,TextGbitsIndicador.height=0,TextGbitsIndicador.alpha=1,(a=game_objeto.add.tween(TextGbitsIndicador.scale)).to({x:1,y:1},300,EfectoTween1,!1,0),a.onComplete.add(function(){twGbits2=game_objeto.add.tween(TextGbitsIndicador),twGbits2.to({alpha:0},1500,EfectoTween1,!0,1e3),twGbits2.start()}),a.start();var o="";0<GbitsPendientes&&(o="+"),TextGbitsIndicador.text=o+GbitsPendientes,TextGbitsIndicador.revive()},EfectoSubirMarcador=function(a){var o;BolsaDinero.revive(),BolsaDinero.frameName="bolsa_dinero",TextGbits.text="x "+GBitsLocal,TextGbits.x=game_objeto.world.width-160+TextGbits.textWidth/2,(o=game_objeto.time.create(!1)).add(500,function(){Reproduce("SndMonedas"),GBitsLocal+=GbitsPendientes,GbitsPendientes=0,TextGbits.text="x "+GBitsLocal,TextGbits.x=game_objeto.world.width-160+TextGbits.textWidth/2,emitterMagia.maxParticles=10,emitterMagia.makeParticles("general","magia"),emitterMagia.y=45,emitterMagia.setRotation(0,0),emitterMagia.setAlpha(.3,.8),emitterMagia.setScale(.5,1),emitterMagia.gravity=200,emitterMagia.minParticleSpeed.setTo(-300,30),emitterMagia.maxParticleSpeed.setTo(300,100),emitterMagia.flow(0,1e3,emitterMagia.maxParticles,10)}),o.start()},EfectoBajarMarcador=function(a){var o,e,t=-1*GbitsPendientes;BolsaDinero.revive(),BolsaDinero.frameName="bolsa_dinero",TextGbits.text="x "+GBitsLocal,TextGbits.x=game_objeto.world.width-160+TextGbits.textWidth/2,(o=game_objeto.time.create(!1)).add(500,function(){Reproduce("SndCremallera"),BolsaDinero.frameName="bolsa_dinero_rota",GBitsLocal+=GbitsPendientes,GbitsPendientes=0,TextGbits.text="x "+GBitsLocal,TextGbits.x=game_objeto.world.width-160+TextGbits.textWidth/2,emitterMagia.maxParticles=t,emitterMagia.makeParticles("general","moneda"),emitterMagia.setRotation(1,1),emitterMagia.setAlpha(1,1),emitterMagia.setScale(1,1),emitterMagia.gravity=200,emitterMagia.y=75,emitterMagia.minParticleSpeed.setTo(-300,30),emitterMagia.maxParticleSpeed.setTo(300,100),emitterMagia.flow(0,1e3,t/2,t),(e=game_objeto.time.create(!1)).add(1500,function(){BolsaDinero.frameName="bolsa_dinero"}),e.start()}),o.start()},EmiteLogos=function(){var a;if(1==game_objeto.cache.checkImageKey("publi")){var o=game_objeto.cache.getFrameCount("publi"),e=[];for(a=1;a<=o;a++)e.push(a);emitterLogos.makeParticles("publi",e),emitterLogos.minParticleSpeed.setTo(-300,30),emitterLogos.maxParticleSpeed.setTo(300,100),emitterLogos.gravity=250,emitterLogos.flow(3e3,1e3,10,40)}},HablandoSonidoOff=function(){BotonHablarOff.kill(),BotonHablarOn.revive(),SonidoOff(!1)},HablandoSonidoOn=function(){BotonHablarOff.revive(),BotonHablarOn.kill(),SonidoOn(!1)},PermisoMicro=function(){window.plugins.speechRecognition.requestPermission(function(){SalirConfirmado(),MatarConexion(),ConectaServidor(),InicioMultiJugador()})},SolicitaClasificacion=function(){var a;if(1==checkConnection())if(a=0<ArrayInfoJugador.length?ArrayInfoJugador[0].JugadorFull:null,1==EstoyConectado())try{socket.emit("solicita_clasificacion",socket.id,a)}catch(a){}else{ConectaServidor();try{socket.emit("solicita_clasificacion",socket.id,a)}catch(a){}}},RellenarSala=function(){if(1==ModoMultijugador&&1==EstoyConectado()){var a=game_objeto.time.create(!1);a.loop(200,function(){try{socket.emit("rellenar sala",Habitacion,ArrayDelaPropiaSala[SoyElJugador-1].JugadorFull,ArrayDelaPropiaSala[SoyElJugador-1].Amigo,ArrayDelaPropiaSala[SoyElJugador-1].EsPRO),a.stop(),a.remove()}catch(a){}}),a.start()}},SonidoOff=function(a){vSonidoOnOriginal=vSonidoOn,vSonidoOn=!1},SonidoOn=function(a){0==a&&0==vSonidoOnOriginal||(vSonidoOn=!0)},ClickNoticia=function(){Noticia.kill(),""!=Noticia.IrATexto&&null!=Noticia.IrATexto&&null!=Noticia.IrATexto&&0!=Noticia.IrATexto&&MostrarIrA(Noticia.IrATexto,Noticia.IrA)},InicioMultiJugadorAmigos=function(){if(1==checkConnection()&&(CancelarAmigos(),1==ModoMultijugador))try{socket.emit("enviar peticion sala amigos")}catch(a){}},PermisoParaTomarControl=function(a){return 1==ModoMultijugador&&SoyElJugador==QuienTomaElControl&&0==EstaConectado(a)||0==ModoMultijugador},GrabarResultado=function(a,o,e,t,r,n,l,i){if(1==ModoMultijugador&&(a==SoyElJugador||PermisoParaTomarControl(a))){var d,s=ArrayDelaPropiaSala[a-1].Desconectado,c=ArrayDelaPropiaSala[a-1].JugadorFull,u=ArrayDelaPropiaSala[a-1].Nombre,g=ArrayDelaPropiaSala[a-1].JugadorSala,p=ArrayDelaPropiaSala[a-1].Sala,M=ArrayDelaPropiaSala[a-1].Amigo,v=ArrayDelaPropiaSala[a-1].IP;d=1==e?"v":"i";var h=null;if(0<t)h=CalculaGBits();try{socket.emit("Enviar_Resultados",c,u,g,p,o,d,s,t,r,n,l,i,M,idPartida,v,h)}catch(a){}}},onSocketListaSalaAmigos=function(a){CrearTablaSalas(a)},CrearTablaSalas=function(a){var o,e,t,r,n=document.getElementById("TablaSalas");OcultarFacebook();for(var l=n.rows.length,i=1;i<l;i++)n.deleteRow(1);for(document.getElementById("DivSalasAmigos").style.display="block",i=0;i<=a.length-1;i++)e=(o=n.insertRow(i+1)).insertCell(0),t=o.insertCell(1),(r=o.insertCell(2)).style.display="none",e.innerHTML=a[i].Sala,t.innerHTML=a[i].Creador,r.innerHTML=a[i].JugadorFull.substring(0,a[i].JugadorFull.indexOf("-",1))+46,o.onclick=function(){MostrarPidePasswordSala(this.cells[0].innerHTML,this.cells[2].innerHTML)}},CerrarTablaSalas=function(){Noticia.kill(),document.getElementById("DivSalasAmigos").style.display="none"},CerrarClasificacion=function(){document.getElementById("DivClasificacionContenedor").style.display="none",MostrarFacebook()},MostrarCrearSala=function(){var a=document.getElementById("DivCrearSala");document.getElementById("sala").value="",document.getElementById("pass").value="",a.style.display="block"},CerrarCrearSala=function(){document.getElementById("DivCrearSala").style.display="none"},CerrarGPRD=function(){document.getElementById("DivGPRD").style.display="none"},MostrarGPRD=function(){document.getElementById("DivGPRD").style.display="block"},MostrarSalir=function(a){var o="",e="";1==a&&(e=" del videojuego"),o=0==ModoMultijugador?"¿Realmente desea Salir"+e+"?":null!=ArrayDelaPropiaSala?4!=ArrayDelaPropiaSala.length?"¿Realmente desea Salir"+e+"?":"¿Realmente desea Salir"+e+"? Salir Implica una derrota.":"¿Realmente desea Salir"+e+"?",document.getElementById("lblSalir").textContent=o,document.getElementById("DivSalir").style.display="block"},MostrarElegirEmoticono=function(){var a,o="",e="",t="",r=0,n="",l="",i="";for(a=0;a<=ArrayDelaPropiaSala.length-1;a++)a+1!=SoyElJugador&&(0==r&&(o=ArrayDelaPropiaSala[a].Nombre,ArrayDelaPropiaSala[a].JugadorSala,"sin_foto"==(n=ArrayDelaPropiaSala[a].Foto)?n="/assets/images/Cartas/Reversos/maquina.jpg":null==n&&(n="/assets/images/desconocido.png"),"/assets/images/"+CalculaAvatarLogro(ArrayDelaPropiaSala[a].Nivel,1),"/assets/images/sin_logro.png",1==ArrayDelaPropiaSala[a].CampeonSemanal&&"/assets/images/medalla.png",ArrayDelaPropiaSala[a].Posicion30),1==r&&(e=ArrayDelaPropiaSala[a].Nombre,ArrayDelaPropiaSala[a].JugadorSala,"sin_foto"==(l=ArrayDelaPropiaSala[a].Foto)?l="/assets/images/Cartas/Reversos/maquina.jpg":null==l&&(l="/assets/images/desconocido.png"),"/assets/images/"+CalculaAvatarLogro(ArrayDelaPropiaSala[a].Nivel,1),"/assets/images/sin_logro.png",1==ArrayDelaPropiaSala[a].CampeonSemanal&&"/assets/images/medalla.png",ArrayDelaPropiaSala[a].Posicion30),2==r&&(t=ArrayDelaPropiaSala[a].Nombre,ArrayDelaPropiaSala[a].JugadorSala,"sin_foto"==(i=ArrayDelaPropiaSala[a].Foto)?i="/assets/images/Cartas/Reversos/maquina.jpg":null==i&&(i="/assets/images/desconocido.png"),"/assets/images/"+CalculaAvatarLogro(ArrayDelaPropiaSala[a].Nivel,1),"/assets/images/sin_logro.png",1==ArrayDelaPropiaSala[a].CampeonSemanal&&"/assets/images/medalla.png",ArrayDelaPropiaSala[a].Posicion30),r++);document.getElementById("JugadorEmoti1").style.display="inline-block",document.getElementById("JugadorEmoti2").style.display="inline-block",document.getElementById("JugadorEmoti3").style.display="inline-block",document.getElementById("JugadorEmoti1Nombre").textContent=o,document.getElementById("JugadorEmoti2Nombre").textContent=e,document.getElementById("JugadorEmoti3Nombre").textContent=t,document.getElementById("FotoEmoti1").src=n,document.getElementById("FotoEmoti2").src=l,document.getElementById("FotoEmoti3").src=i,document.getElementById("DivEmoticonos").style.display="block",$(".single-item").slick({dots:!0,infinite:!0})},OcultarElegirEmoticono=function(){document.getElementById("DivEmoticonos").style.display="none"},MuestraOcultaFotos=function(a,o){a.style.display="/assets/images/sin_logro.png"==o?"none":"inline-block"},MostrarElegirPareja=function(a){var o,e,t="",r="",n="",l=0,i="",d="",s="",c="",u="",g="",p=!1,M=!1,v=!1,h=0,m=0,z=0;for(TextCuentaMundo.kill(),o=0;o<=ArrayDelaPropiaSala.length-1;o++)o+1!=SoyElJugador&&(0==l&&(t=ArrayDelaPropiaSala[o].Nombre,ArrayDelaPropiaSala[o].JugadorSala,"sin_foto"==(i=ArrayDelaPropiaSala[o].Foto)?i="/assets/images/Cartas/Reversos/maquina.jpg":null==i&&(i="/assets/images/desconocido.png"),c="/assets/images/"+CalculaAvatarLogro(ArrayDelaPropiaSala[o].Nivel,1),p="/assets/images/sin_logro.png",1!=ArrayDelaPropiaSala[o].CampeonSemanal&&1!=SoyBazan||(p="/assets/images/medalla.png"),h=99999!=ArrayDelaPropiaSala[o].Posicion30||1==SoyBazan?ArrayDelaPropiaSala[o].Posicion30:""),1==l&&(r=ArrayDelaPropiaSala[o].Nombre,ArrayDelaPropiaSala[o].JugadorSala,"sin_foto"==(d=ArrayDelaPropiaSala[o].Foto)?d="/assets/images/Cartas/Reversos/maquina.jpg":null==d&&(d="/assets/images/desconocido.png"),u="/assets/images/"+CalculaAvatarLogro(ArrayDelaPropiaSala[o].Nivel,1),M="/assets/images/sin_logro.png",1!=ArrayDelaPropiaSala[o].CampeonSemanal&&1!=SoyBazan||(M="/assets/images/medalla.png"),m=99999!=ArrayDelaPropiaSala[o].Posicion30||1==SoyBazan?ArrayDelaPropiaSala[o].Posicion30:""),2==l&&(n=ArrayDelaPropiaSala[o].Nombre,ArrayDelaPropiaSala[o].JugadorSala,"sin_foto"==(s=ArrayDelaPropiaSala[o].Foto)?s="/assets/images/Cartas/Reversos/maquina.jpg":null==s&&(s="/assets/images/desconocido.png"),g="/assets/images/"+CalculaAvatarLogro(ArrayDelaPropiaSala[o].Nivel,1),v="/assets/images/sin_logro.png",1!=ArrayDelaPropiaSala[o].CampeonSemanal&&1!=SoyBazan||(v="/assets/images/medalla.png"),z=99999!=ArrayDelaPropiaSala[o].Posicion30||1==SoyBazan?ArrayDelaPropiaSala[o].Posicion30:""),l++);if((e=document.getElementById("lblPareja")).textContent="Elige a tu pareja",(e=document.getElementById("Pareja1")).style.display="inline-block",(e=document.getElementById("Pareja2")).style.display="inline-block",(e=document.getElementById("Pareja3")).style.display="inline-block",(e=document.getElementById("Pareja1")).textContent=t,(e=document.getElementById("Pareja2")).textContent=r,(e=document.getElementById("Pareja3")).textContent=n,(e=document.getElementById("Foto1")).src=i,MuestraOcultaFotos(e,i),(e=document.getElementById("Foto2")).src=d,MuestraOcultaFotos(e,d),(e=document.getElementById("Foto3")).src=s,MuestraOcultaFotos(e,s),(e=document.getElementById("Nivel1")).src=c,MuestraOcultaFotos(e,c),(e=document.getElementById("Nivel2")).src=u,MuestraOcultaFotos(e,u),(e=document.getElementById("Nivel3")).src=g,MuestraOcultaFotos(e,g),(e=document.getElementById("CampeonSemanal1")).src=p,MuestraOcultaFotos(e,p),(e=document.getElementById("CampeonSemanal2")).src=M,MuestraOcultaFotos(e,M),(e=document.getElementById("CampeonSemanal3")).src=v,MuestraOcultaFotos(e,v),(e=document.getElementById("PosicionMes1")).textContent=h,(e=document.getElementById("PosicionMes2")).textContent=m,(e=document.getElementById("PosicionMes3")).textContent=z,1==a){document.getElementById("DivEligePareja").style.display="block";var C=7;timerpareja.loop(1e3,function(){C<=0?(timerpareja.stop(),timerpareja.remove(),1==EstoyConectado()?RespuestaPareja(2):(SalirConfirmado(),MatarConexion(),ConectaServidor())):C-=1}),timerpareja.start()}},OcultarElegirPareja=function(){timerpareja.stop(),timerpareja.remove(),document.getElementById("DivEligePareja").style.display="none"},MostrarFacebook=function(){document.getElementById("DivFace").style.display="inline-block",document.getElementById("DivInstagram").style.display="inline-block",1==vCampeonatoOasis&&OcultarFacebook()},OcultarFacebook=function(){document.getElementById("DivFace").style.display="none",document.getElementById("DivInstagram").style.display="none"},MostrarIrA=function(a,o){document.getElementById("lblIrA").textContent=a,document.getElementById("lblIrAWeb").textContent=o,document.getElementById("DivIrA").style.display="inline-block"},CerrarIrA=function(){document.getElementById("DivIrA").style.display="none"},AbreNavegador=function(a){0==(-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://"))?window.open(a):cordova.InAppBrowser.open(a,"_blank","location=no")},RespuestaIrA=function(a){if(1==a){var o=document.getElementById("lblIrAWeb").textContent;AbreNavegador(o)}CerrarIrA()},RespuestaPareja=function(a){var o,e;if(document.getElementById("DivEligePareja").style.display="none",EligiendoPareja=!1,0==EstoyConectado()||null==ArrayDelaPropiaSala||ArrayDelaPropiaSala.length<4)SalirConfirmado(),MatarConexion(),ConectaServidor();else{1==SoyElJugador&&(e=3,1==a&&(MiPareja=2),2==a&&(MiPareja=3),3==a&&(MiPareja=4)),2==SoyElJugador&&(e=4,1==a&&(MiPareja=1),2==a&&(MiPareja=3),3==a&&(MiPareja=4)),3==SoyElJugador&&((e=1)==a&&(MiPareja=1),2==a&&(MiPareja=2),3==a&&(MiPareja=4)),4==SoyElJugador&&(e=2,1==a&&(MiPareja=1),2==a&&(MiPareja=2),3==a&&(MiPareja=3));var t=ArrayDelaPropiaSala[MiPareja-1].OrdenEnSala;ArrayDelaPropiaSala[MiPareja-1].OrdenEnSala=e,ArrayDelaPropiaSala[e-1].OrdenEnSala=t;var r=0;if(0<QuienTomaElControl)r=ArrayDelaPropiaSala[QuienTomaElControl-1].JugadorSala;for(ArrayDelaPropiaSala.sort(sort_by("OrdenEnSala",!1,parseFloat)),o=0;o<=ArrayDelaPropiaSala.length-1;o++)if(EstaArray(ArrayDelaPropiaSala[o].JugadorSala,r)){QuienTomaElControl=o+1;break}var n=[];n.splice(0,1e3);try{var l=1e5*Math.random(),i=Math.floor(4*Math.random())+1,d=new function(a,o,e,t,r,n,l,i){this.ArrayDelaPropiaSala=a,this.Habitacion=o,this.QuienReparte=e,this.NuevaPareja=t,this.IdMsg=r,this.ClientId=n,this.SalaID=l,this.Mensaje=i,this.Fecha=new Date(Date.now())}(ArrayDelaPropiaSala,Habitacion,i,MiPareja,l,socket.id,Habitacion,"enviar cambio parejas");ArrayAccionesDesconexiones.push(d),n.push(d),socket.emit("enviar cambio parejas",n[0],function(a){EliminarColaMensajes(a,"enviar cambio parejas")}),n.splice(0,1e3),ArrayJugadoresDesconectados.splice(0,1e3),RecalculaDesconectados()}catch(a){}}},CerrarSalir=function(){document.getElementById("DivSalir").style.display="none"},RespuestaSalir=function(a){var o=document.getElementById("lblSalir").textContent;CerrarSalir(),1==a&&(0<=o.search("videojuego")?navigator.app.exitApp():(0<=o.search("derrota")&&SimularQuitarGBits(),SalirConfirmado(),MatarConexion(),ConectaServidor()))},SimularQuitarGBits=function(){var a;try{0==ArrayDelaPropiaSala[SoyElJugador-1].Amigo&&(a=null!=ArrayInfoJugador&&ArrayInfoJugador[0].PuntuaciondePRO?GbitsPendientes-4:-2,0<=GBitsLocal+a?GbitsPendientes+=a:GbitsPendientes=0)}catch(a){}},EliminarSalaDesdeCliente=function(a){try{socket.emit("enviar_eliminar_sala_amigo_cliente",a)}catch(a){}CancelarAmigos()},MostrarPidePasswordSala=function(o,e){CerrarTablaSalas();var t=document.getElementById("DivPasswordSala");document.getElementById("sala_pass").value=o,document.getElementById("pass_pass").value="",a=e.substring(0,e.length-2),b=ArrayInfoJugador[0].JugadorFull.substring(0,ArrayInfoJugador[0].JugadorFull.indexOf("-",1)+0),1==ArrayInfoJugador[0].Admin||ArrayInfoJugador[0].JugadorFull.substring(0,ArrayInfoJugador[0].JugadorFull.indexOf("-",1)+0)==e.substring(0,e.length-2)?document.getElementById("btnEliminarSala").style.display="inline-block":document.getElementById("btnEliminarSala").style.display="none",t.style.display="block"},CancelarAmigos=function(){CerrarTablaSalas(),CerrarClasificacion(),CerrarCrearSala(),CerrarPidePasswordSala(),OcultaPantallaLogin(),CerrarIrA()},CerrarPidePasswordSala=function(a){document.getElementById("DivPasswordSala").style.display="none"},ValidaPasswordSala=function(a,o){try{socket.emit("enviar validar password",a,o)}catch(a){}CerrarPidePasswordSala()},CrearSala=function(a,o){var e,t;if(""!=a&&1==ModoMultijugador){0<ArrayInfoJugador.length?(e=ArrayInfoJugador[0].Nombre,t=ArrayInfoJugador[0].ProveedorID+"-"+ArrayInfoJugador[0].RedSocial):t=e="";try{socket.emit("enviar sala nueva",a.substring(0,30),o.substring(0,30),e,t),socket.emit("enviar peticion sala amigos")}catch(a){}}CerrarCrearSala()},ConfiguraPantallaInicio=function(){BotonMonoJugador.revive(),BotonMultiJugador.revive(),BotonContacta.revive(),RevivirTextCuentaMundo(),MostrarFacebook(),BotonClasificacion.revive(),OcultarElegirPareja(),OcultarElegirEmoticono(),EligiendoPareja=!1,BotonSalir.kill()},ConfiguraPantallaMultijugador=function(){BotonAleatorio.revive(),BotonAmigos.revive(),RevivirTextCuentaMundo(),MostrarFacebook(),xAleatorio=game_objeto.world.centerX-120,yAleatorio=game_objeto.world.height-170,xAmigos=game_objeto.world.centerX+120,yAmigos=game_objeto.world.height-170,1==cuatrotres&&(yAleatorio=yAmigos-90),1==cuatrotres&&(yAmigos=BotonAmigos.x+45,xAmigos+=45),BotonAleatorio.x=game_objeto.world.centerX-120,BotonAleatorio.y=game_objeto.world.height-170-1e3,BotonAmigos.x=game_objeto.world.centerX+120+1e3,BotonAmigos.y=game_objeto.world.height-170,1==cuatrotres&&(BotonAleatorio.y=BotonAleatorio.y-90,BotonAleatorio.x=BotonAleatorio.x-45,BotonAmigos.y=BotonAmigos.y-90,BotonAmigos.x=BotonAmigos.x-45),game_objeto.add.tween(BotonAmigos).to({x:xAmigos},400,EfectoTween2).start(),game_objeto.add.tween(BotonAleatorio).to({y:yAleatorio},400,EfectoTween1).start()},Abre=function(a){if(0==(-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://")))switch(a){case 1:window.open("/privacidad/privacidad.html","_self");break;case 2:window.open("/privacidad/clasificacion_como.html","_self")}else switch(a){case 1:cordova.InAppBrowser.open(Maquina+"/privacidad/privacidad.html","_blank","location=no");break;case 2:cordova.InAppBrowser.open(Maquina+"/privacidad/clasificacion_como.html","_blank","location=no")}},LoginCordova=function(a){var o,e=!0;if(0==(-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://")))switch(a){case 1:o=window.open("/auth/google","_self");break;case 2:o=window.open("/auth/facebook","_self");break;case 3:o=window.open("/auth/Instagram","_self");break;case 4:o=window.open("/auth/Twitter","_self");break;case 5:e=!1,o=window.open("/contacto")}else{switch(a){case 1:e=!1,window.plugins.googleplus.login({offline:!0},function(a){CierraPantallaLogin(),(ObjetoG=a).RedSocial="Google",RecienInstalado=!0,InicioMultiJugador()},function(a){CierraPantallaLogin()});break;case 2:facebookConnectPlugin.getLoginStatus(function(a){"connected"!=a.status?facebookConnectPlugin.login(["public_profile","email"],function(){facebookConnectPlugin.api("/me?fields=id,name,email,picture",["public_profile","email"],function(a){(ObjetoG=a).RedSocial="Facebook",ObjetoG.userId=a.id,CierraPantallaLogin(),RecienInstalado=!0,InicioMultiJugador()},function(){})},function(){}):facebookConnectPlugin.api("/me?fields=id,name,email,picture",["public_profile","email"],function(a){(ObjetoG=a).RedSocial="Facebook",ObjetoG.userId=a.id,CierraPantallaLogin(),RecienInstalado=!1},function(){})});break;case 3:o=cordova.InAppBrowser.open(Maquina+"/auth/Instagram","_blank","location=no");break;case 4:o=cordova.InAppBrowser.open(Maquina+"/auth/Twitter","_blank","location=no");break;case 5:e=!1,o=cordova.InAppBrowser.open(Maquina+"/contacto","_blank","location=no")}1==e&&(o.addEventListener("exit",function(a){PrimeraVezLogin=RecienInstalado=!0,SalirConfirmado(),MatarConexion(),ConectaServidor()}),o.addEventListener("loadstop",function(a){0<=a.url.search("callbackweb")&&(RecienInstalado=!0,o.close(),RecienInstalado=!0)}))}},RespuestaAudioGoogle=function(a){document.getElementById("DivAudioGoogle").style.display="none",1==a&&PermisoMicro(),RecienInstalado=!1,InicioMultiJugador()},RespuestaAudioOtros=function(a){document.getElementById("DivAudioOtros").style.display="none",0==a?(PrimeraVezLogin=!0,SalirConfirmado(),MatarConexion(),ConectaServidor()):PermisoMicro()},DetenerTiempo=function(){log(!0,"Deteniendo tiempo: Es el Turno de "+vTurno+". Yo soy "+SoyElJugador),DetenerIA=!0,timerturno.stop(),timerturno.remove(),timer.stop(),timer.remove(),log(!0,"Es el Turno de "+vTurno+". Yo soy "+SoyElJugador)},MuestraOcultaChat=function(){0==MuestraChat?(document.getElementById("chat").style.display="block",MuestraChat=!0):(document.getElementById("chat").style.display="none",MuestraChat=!1)},MuestraPantallaLogin=function(){var a;1==VerEstable?((a=document.getElementById("Login")).style.display="block",a.style.position="absolute"):CierraPantallaLogin()},EfectoCante=function(a,o,e){game_objeto.add.tween(e).to({alpha:1},1e3,EfectoTween1,!0).onComplete.add(function(){game_objeto.add.tween(e).to({alpha:0},500,EfectoTween1,!0,1e3,0).onComplete.add(function(){try{e.kill()}catch(a){}})})},TextoBocadillo=function(a,o,e,t,r,n){var l,i,d,s,c,u,g,p,M,v=!1,h=DevuelveUbicacionCarta(a);try{if(null==a)return!1;if(1==e&&(MuestraDorsoCante(a,o,t),0==EstaCantado(o)&&(RegistrarCantes.push(o),1==SoyElJugador&&(2==a&&(20==t?(o="20 en "+o,ActualizaMarcador("R",20,n)):(o="Las 40",ActualizaMarcador("R",40,n)),M=!1),3==a&&(20==t?(o="20 en "+o,ActualizaMarcador("N",20,n)):(o="Las 40",ActualizaMarcador("N",40,n)),M=!0),4==a&&(20==t?(o="20 en "+o,ActualizaMarcador("R",20,n)):(o="Las 40",ActualizaMarcador("R",40,n)),M=!1),1==a&&(20==t?(o="20 en "+o,ActualizaMarcador("N",20,n)):(o="Las 40",ActualizaMarcador("N",40,n)),M=!0)),2==SoyElJugador&&(3==a&&(20==t?(o="20 en "+o,ActualizaMarcador("R",20,n)):(o="Las 40",ActualizaMarcador("R",40,n)),M=!1),4==a&&(20==t?(o="20 en "+o,ActualizaMarcador("N",20,n)):(o="Las 40",ActualizaMarcador("N",40,n)),M=!0),1==a&&(20==t?(o="20 en "+o,ActualizaMarcador("R",20,n)):(o="Las 40",ActualizaMarcador("R",40,n)),M=!1),2==a&&(20==t?(o="20 en "+o,ActualizaMarcador("N",20,n)):(o="Las 40",ActualizaMarcador("N",40,n)),M=!0)),3==SoyElJugador&&(4==a&&(20==t?(o="20 en "+o,ActualizaMarcador("R",20,n)):(o="Las 40",ActualizaMarcador("R",40,n)),M=!1),1==a&&(20==t?(o="20 en "+o,ActualizaMarcador("N",20,n)):(o="Las 40",ActualizaMarcador("N",40,n)),M=!0),2==a&&(20==t?(o="20 en "+o,ActualizaMarcador("R",20,n)):(o="Las 40",ActualizaMarcador("R",40,n)),M=!1),3==a&&(20==t?(o="20 en "+o,ActualizaMarcador("N",20,n)):(o="Las 40",ActualizaMarcador("N",40,n)),M=!0)),4==SoyElJugador&&(1==a&&(20==t?(o="20 en "+o,ActualizaMarcador("R",20,n)):(o="Las 40",ActualizaMarcador("R",40,n)),M=!1),2==a&&(20==t?(o="20 en "+o,ActualizaMarcador("N",20,n)):(o="Las 40",ActualizaMarcador("N",40,n)),M=!0),3==a&&(20==t?(o="20 en "+o,ActualizaMarcador("R",20,n)):(o="Las 40",ActualizaMarcador("R",40,n)),M=!1),4==a&&(20==t?(o="20 en "+o,ActualizaMarcador("N",20,n)):(o="Las 40",ActualizaMarcador("N",40,n)),M=!0)))),0==e||1==e){log(!1,o),27*o.length/2;var m=!1;if("D"==h&&(0==e?(l=devuelveX("D_CHAT",0)-AnchoCartaEscalado+150,i=devuelveY("D_CHAT",0)-1.2*AltoCartaEscalado,c=l+20+500,u=i+20):(l=game_objeto.world.centerX,i=game_objeto.world.height-2*AnchoCartaEscalado,null==twBocadilloCanteD1||1!=twBocadilloCanteD1.isRunning&&1!=twBocadilloCanteD2.isRunning&&1!=twFondoNegro.isRunning||(l+=200,log(!1,"CORRIENDO"),m=!0),c=l+2.7*AnchoBocadilloEstallido,u=i+1.8*AltoBocadilloEstallido),g="bocadillo_d"),"U"==h&&(0==e?(l=devuelveX("U_CHAT",0),i=devuelveY("U_CHAT",0)-AltoCarta/2,c=l+20,u=i+45):(l=game_objeto.world.centerX,i=1.5*AltoCarta,null==twBocadilloCanteU1||1!=twBocadilloCanteU1.isRunning&&1!=twBocadilloCanteU2.isRunning&&1!=twFondoNegro.isRunning||(l+=200,m=!0),c=l+2.7*AnchoBocadilloEstallido,u=i+1.8*AltoBocadilloEstallido),g="bocadillo_u"),"L"==h&&(0==e?(l=devuelveX("L_CHAT",0)+AnchoCarta/2,i=devuelveY("L_CHAT",0)-AnchoCarta+100,c=l+20,u=i+20):(l=2.5*AnchoCarta,i=game_objeto.world.centerY,null==twBocadilloCanteL1||1!=twBocadilloCanteL1.isRunning&&1!=twBocadilloCanteL2.isRunning&&1!=twFondoNegro.isRunning||(i+=100,m=!0),c=l+2.7*AnchoBocadilloEstallido,u=i+1.8*AltoBocadilloEstallido),g="bocadillo_l"),"R"==h&&(0==e?(l=devuelveX("R_CHAT",0)-2.3*AltoCarta,i=devuelveY("R_CHAT",0)-100,c=l+20,u=i+45):(l=game_objeto.world.width-2.5*AnchoCarta,i=game_objeto.world.centerY,null==twBocadilloCanteR1||1!=twBocadilloCanteR1.isRunning&&1!=twBocadilloCanteR2.isRunning&&1!=twFondoNegro.isRunning||(i+=100,m=!0),c=l+2.7*AnchoBocadilloEstallido,u=i+1.8*AltoBocadilloEstallido),g="bocadillo_r"),1==e){switch(20==t?vRonda<=4?(0<=o.indexOf("oros")&&(g="20 oros",ReproducirSonido("_Oros")),0<=o.indexOf("copas")&&(g="20 copas",ReproducirSonido("_Copas")),0<=o.indexOf("espadas")&&(g="20 espadas",ReproducirSonido("_Espadas")),0<=o.indexOf("bastos")&&(g="20 bastos",ReproducirSonido("_Bastos"))):(g="20",ReproducirSonido("_Veinte")):(g="las 40",ReproducirSonido("_Las40")),0==FReconectando()&&navigator.vibrate&&window.navigator.vibrate(300),log(!1,"posicion Bocadillo: "+l),null!=twFondoNegro&&0==twFondoNegro.isRunning?(FondoNegro.revive(),FondoNegro.alpha=.7,FondoNegro.bringToTop(),(twFondoNegro=game_objeto.add.tween(FondoNegro).to({alpha:.7},1e3,EfectoTween1,!0)).onComplete.add(function(){(twFondoNegro=game_objeto.add.tween(FondoNegro).to({alpha:0},500,EfectoTween1,!1,1e3,0)).onComplete.add(function(){"las 40"!=g&&EfectoMarcar20(M),FondoNegro.kill()}),twFondoNegro.start()})):"las 40"!=g&&EfectoMarcar20(M),h){case"D":0==m?(twBocadilloCanteD1,twBocadilloCanteD2,BocadilloCanteD1.frameName=g,BocadilloCanteD1.x=l,BocadilloCanteD1.y=i,(s=BocadilloCanteD1).revive(),EfectoCante(twBocadilloCanteD1,twBocadilloCanteD2,BocadilloCanteD1)):(twBocadilloCanteD3,twBocadilloCanteD4,BocadilloCanteD2.frameName=g,BocadilloCanteD2.x=l,BocadilloCanteD2.y=i,(s=BocadilloCanteD2).revive(),EfectoCante(twBocadilloCanteD3,twBocadilloCanteD4,BocadilloCanteD2));break;case"L":0==m?(twBocadilloCanteL1,twBocadilloCanteL2,BocadilloCanteL1.frameName=g,BocadilloCanteL1.x=l,BocadilloCanteL1.y=i,(s=BocadilloCanteL1).revive(),EfectoCante(twBocadilloCanteL1,twBocadilloCanteL2,BocadilloCanteL1)):(twBocadilloCanteL3,twBocadilloCanteL4,BocadilloCanteL2.frameName=g,BocadilloCanteL2.x=l,BocadilloCanteL2.y=i,(s=BocadilloCanteL2).revive(),EfectoCante(twBocadilloCanteL3,twBocadilloCanteL4,BocadilloCanteL2));break;case"R":0==m?(twBocadilloCanteR1,twBocadilloCanteR2,BocadilloCanteR1.frameName=g,BocadilloCanteR1.x=l,BocadilloCanteR1.y=i,(s=BocadilloCanteR1).revive(),EfectoCante(twBocadilloCanteR1,twBocadilloCanteR2,BocadilloCanteR1)):(twBocadilloCanteR3,twBocadilloCanteR4,BocadilloCanteR2.frameName=g,BocadilloCanteR2.x=l,BocadilloCanteR2.y=i,(s=BocadilloCanteR2).revive(),EfectoCante(twBocadilloCanteR3,twBocadilloCanteR4,BocadilloCanteR2));break;case"U":0==m?(twBocadilloCanteU1,twBocadilloCanteU2,BocadilloCanteU1.frameName=g,BocadilloCanteU1.x=l,BocadilloCanteU1.y=i,(s=BocadilloCanteU1).revive(),EfectoCante(twBocadilloCanteU1,twBocadilloCanteU2,BocadilloCanteU1)):(twBocadilloCanteU3,twBocadilloCanteU4,BocadilloCanteU2.frameName=g,BocadilloCanteU2.x=l,BocadilloCanteU2.y=i,(s=BocadilloCanteU2).revive(),EfectoCante(twBocadilloCanteU3,twBocadilloCanteU4,BocadilloCanteU2))}GrupoChat.add(s),game_objeto.world.bringToTop(GrupoChat)}else{for(p=0;p<=ArrayChatDeshabilitado.length-1;p++)ArrayChatDeshabilitado[p]==h&&(v=!0);if(0==v){switch("D"==h&&(s=BocadilloChatD,d=textChatD),"L"==h&&(s=BocadilloChatL,d=textChatL),"R"==h&&(s=BocadilloChatR,d=textChatR),"U"==h&&(s=BocadilloChatU,d=textChatU),s.kill(),d.kill(),s.x=l,"D"==h&&(s.x=s.x+500),s.y=i,s.alpha=0,s.revive(),d.x=c,d.y=u,d.text="",d.alpha=0,d.revive(),GrupoChat.add(s),GrupoChat.add(d),game_objeto.world.bringToTop(GrupoChat),GrupoChat.bringToTop,o=o.substring(0,42),d.text=wordwrap(o,15),d.alpha=0,h){case"D":twChatTextoD1.pause(),twChatTextoD2.pause(),twChatBocadilloD1.pause(),twChatBocadilloD2.pause(),(twChatBocadilloD1=game_objeto.add.tween(s).to({alpha:1},1500,EfectoTween1,!0)).onComplete.add(function(){(twChatBocadilloD2=game_objeto.add.tween(s).to({alpha:0},1500,EfectoTween1,!0,2e3)).onComplete.add(function(){s.kill()})}),(twChatTextoD1=game_objeto.add.tween(d).to({alpha:1},1500,EfectoTween1,!0)).onComplete.add(function(){(twChatTextoD2=game_objeto.add.tween(d).to({alpha:0},1500,EfectoTween1,!0,2e3)).onComplete.add(function(){d.kill()})});break;case"L":twChatTextoL1.pause(),twChatTextoL2.pause(),twChatBocadilloL1.pause(),twChatBocadilloL2.pause(),(twChatBocadilloL1=game_objeto.add.tween(s).to({alpha:1},1500,EfectoTween1,!0)).onComplete.add(function(){(twChatBocadilloL2=game_objeto.add.tween(s).to({alpha:0},1500,EfectoTween1,!0,2e3)).onComplete.add(function(){s.kill()})}),(twChatTextoL1=game_objeto.add.tween(d).to({alpha:1},1500,EfectoTween1,!0)).onComplete.add(function(){(twChatTextoL2=game_objeto.add.tween(d).to({alpha:0},1500,EfectoTween1,!0,2e3)).onComplete.add(function(){d.kill()})});break;case"R":twChatTextoR1.pause(),twChatTextoR2.pause(),twChatBocadilloR1.pause(),twChatBocadilloR2.pause(),(twChatBocadilloR1=game_objeto.add.tween(s).to({alpha:1},1500,EfectoTween1,!0)).onComplete.add(function(){(twChatBocadilloR2=game_objeto.add.tween(s).to({alpha:0},1500,EfectoTween1,!0,2e3)).onComplete.add(function(){s.kill()})}),(twChatTextoR1=game_objeto.add.tween(d).to({alpha:1},1500,EfectoTween1,!0)).onComplete.add(function(){(twChatTextoR2=game_objeto.add.tween(d).to({alpha:0},1500,EfectoTween1,!0,2e3)).onComplete.add(function(){d.kill()})});break;case"U":twChatTextoU1.pause(),twChatTextoU2.pause(),twChatBocadilloU1.pause(),twChatBocadilloU2.pause(),(twChatBocadilloU1=game_objeto.add.tween(s).to({alpha:1},1500,EfectoTween1,!0)).onComplete.add(function(){(twChatBocadilloU2=game_objeto.add.tween(s).to({alpha:0},1500,EfectoTween1,!0,2e3)).onComplete.add(function(){s.kill()})}),(twChatTextoU1=game_objeto.add.tween(d).to({alpha:1},1500,EfectoTween1,!0)).onComplete.add(function(){(twChatTextoU2=game_objeto.add.tween(d).to({alpha:0},1500,EfectoTween1,!0,2e3)).onComplete.add(function(){d.kill()})})}game_objeto.world.bringToTop(GrupoChat)}}}1==e&&Recuperarse(n,!1,!1)}catch(a){}},EsGuinote=function(a){return 1==a||3==a||11==a||13==a||21==a||23==a||31==a||33==a},EfectoMarcar20=function(a){var o,e,t=[],r=[];for(t=1==a?UltimaBazaNuestra:UltimaBazaRival,e=0;e<=t.length-1;e++)r.push(t[e]);if(0<r.length){for(e=r.length-1;e>=r.length-1-3;e--)0==EsGuinote(r[e].name)&&0!=r[e].key.indexOf("baraja")&&(o=e);if(null==o&&(o=0==r[r.length-1].key.indexOf("baraja")?r.length-2:r.length-1),null!=o){var n=game_objeto.add.tween(r[o]);n.to({x:r[r.length-1].x+100},vVelocidadCartasReordernar,EfectoTween1),n.onComplete.add(function(){r[o].bringToTop(),MostrarAnverso(r[o]);var a=game_objeto.add.tween(r[o]);a.to({x:r[o].x-100},vVelocidadCartasReordernar,EfectoTween1),a.start()}),n.start()}}};var wordwrap=function(a,o){if(null==a)return" ";for(var e=function(a){var o=0;if(0!=a.length)for(var e=0;e<a.length;e++){o+=a[e].length}return o},t=function(a,o){var e,t=[];if(1<=o){var r=(e=o-1,a.match(new RegExp(".{1,"+e+"}","g")));if(1<=r.length){for(var n=0;n<r.length-1;n++){var l=r[n]+"-";t.push(l)}t.push(r[r.length-1])}}return 0==t.length&&t.push(a),t},r=[[]],n=a.split(" "),l=0;l<n.length;l++){var i=n[l];if(i.length>o)for(var d=t(i,o),s=0;s<d.length;s++){var c=d[s];(r=r.concat([[]]))[r.length-1]=r[r.length-1].concat(c)}else e(r[r.length-1])+i.length+1>o&&(r=r.concat([[]])),r[r.length-1]=r[r.length-1].concat(i)}for(l=0;l<r.length;l++)r[l]=r[l].join(" ");return r.join("\n")};EnviarTextoBocadillo=function(a,o,e){try{o=o.substring(0,60)}catch(a){o=""}if(TextoBocadillo(a,o,e,!1,!1,!1),1==ModoMultijugador&&0==e)try{socket.emit("enviar texto",o,Habitacion,a,ArrayDelaPropiaSala[a-1].JugadorFull,ArrayDelaPropiaSala[a-1].Nombre)}catch(a){}},ConectaServidor=function(){try{0==EstoyConectado()&&(socket=io.connect(Maquina,{reconnection:!0,reconnectionDelay:4e3,reconnectionDelayMax:4500,reconnectionAttempts:vIntentosGlobal,"max reconnection attempts":vIntentosGlobal,ForceNew:!1,connect_timeout:4e3,timeout:4500}),SocketInicializado=!1,setEventHandlers())}catch(a){}},ConectaServidorPrueba=function(){vNoEsta=DesdeMinimizado=!0,OcultarElegirPareja(),OcultarElegirEmoticono(),ConectaServidor()},InicioMultiJugador=function(a){if(1==RecienInstalado)document.getElementById("DivAudioGoogle").style.display="block";else if(1==checkConnection()&&(IntentosReconexion=0,BotonSalir.x=xSalir+150,BotonSalir.revive(),ConectaServidor(),vTurno=1,BotonMonoJugador.kill(),BotonMultiJugador.kill(),BotonContacta.kill(),ModoMultijugador=!0,LimpiarVariables(),LimpiarVariablesConexionNueva(),log(!0,"Entra en multijugador"),CantarDesactivar(),SieteDesactivar(),RevivirTextCuentaMundo(),1==EstoyConectado()))try{socket.emit("enviar_peticion_modo_multijugador",Habitacion,socket.id,!1,Version,ObjetoG),socket.emit("solicita conectados")}catch(a){}},InicioPartidaOnline=function(a,o){if(0==BotonesPartidaBloqueados&&1==VerEstable&&(LimpiarVariables(),LimpiarVariablesConexionNueva(),BotonesPartidaBloqueados=!0,game_objeto.time.create(!0).add(5e3,function(){BotonesPartidaBloqueados=!1}),BotonClasificacion.kill(),Noticia.kill(),BotonSalir.revive(),vTurno=1,CancelarAmigos(),1==EstoyConectado()))try{socket.emit("enviar_peticion_partida",socket.id,!0,a,o,Version,ObjetoG)}catch(a){}},InicioMultiJugadorAleatorio=function(){1==checkConnection()&&InicioPartidaOnline(0,!1)},LoginDesdeWeb=function(){var a=getUrlVars().callbackweb;"g#"!=a&&"g"!=a||InicioMultiJugador(!(SocketInicializado=!1))},InicioMonoJugador=function(){ConectaServidor(),1==VerEstable&&(BotonMonoJugador.kill(),BotonMultiJugador.kill(),BotonClasificacion.kill(),BotonContacta.kill(),BotonAleatorio.kill(),BotonAmigos.kill(),TextCuentaMundo.kill(),TextGbits.kill(),TextGbitsIndicador.kill(),BolsaDinero.kill(),ModoMultijugador=!1,LimpiarVariables(),LimpiarVariablesConexionNueva(),QuienTomaElControl=SoyElJugador=1,PartidaComenzada=!0,BackFondo.kill(),BackTapete.revive(),NuevaPartida(4,!0),CantarDesactivar(),SieteDesactivar())},textoturno=function(){var a;return 0==ModoMultijugador?(log(!1,"vTurno en Devolver texto: "+vTurno),1==SoyElJugador&&(2==vTurno&&(a="Es el turno del jugador de su derecha"),3==vTurno&&(a="Es el turno de su compañero"),4==vTurno&&(a="Es el turno del jugador de su izquierda")),2==SoyElJugador&&(3==vTurno&&(a="Es el turno del jugador de su derecha"),4==vTurno&&(a="Es el turno de su compañero"),1==vTurno&&(a="Es el turno del jugador de su izquierda")),3==SoyElJugador&&(4==vTurno&&(a="Es el turno del jugador de su derecha"),1==vTurno&&(a="Es el turno de su compañero"),2==vTurno&&(a="Es el turno del jugador de su izquierda")),4==SoyElJugador&&(1==vTurno&&(a="Es el turno del jugador de su derecha"),2==vTurno&&(a="Es el turno de su compañero"),3==vTurno&&(a="Es el turno del jugador de su izquierda"))):a=" Es el turno de "+ArrayDelaPropiaSala[vTurno-1].Nombre,a};var ObjetoSala=function(a,o,e,t,r,n,l,i,d,s,c,u,g,p,M,v,h,m,z,C,f,_,S,R){this.JugadorSala=a,this.Sala=o,this.SalaCerrada=e,this.Nombre=t,this.Sexo=r,this.Foto=n,this.AvatarSprite,this.Desconectado=i,this.ReconectadoFecha=d,this.Dorso=s,this.Tapete=c,this.Amigo=u,this.JugadorFull=g,this.OrdenEnSala=p,this.JugadorSalaFalseado=M,this.Admin=h,this.IP=m,this.Nivel=z,this.CampeonSemanal=C,this.Tapete43=f,this.ImagenesEmitter=_,this.Posicion30=S,this.EsPRO=R,this.Viva=!0,this.Acabada=!1,this.JugadorSalaAnterior=a,this.NombreOri=v};function fileCompleteTapete(){LogicalTapeteRemoto=!0}function fileCompleteDorso(){LogicalDorsoRemoto=!0}function fileCompleteNoticia(){var a;null!=ArrayInfoJugador[0].Noticia&&(a="NoticiaRemoto"==Noticia.name?"NoticiaRemoto2":"NoticiaRemoto",game_objeto.cache.checkImageKey(a)&&(Noticia.loadTexture(a,0),Noticia.revive()),"NoticiaRemoto"==a?game_objeto.cache.checkImageKey("NoticiaRemoto2")&&game_objeto.cache.removeImage("NoticiaRemoto2"):game_objeto.cache.checkImageKey("NoticiaRemoto")&&game_objeto.cache.removeImage("NoticiaRemoto"),Noticia.x=230,Noticia.y=-500,game_objeto.add.tween(Noticia).to({y:345},1e3,EfectoTweenRebote).start())}function fileComplete1(a){var o;if(o="imagen1",AvatarSprite1.x<0&&(AvatarSprite1.x=-1*AvatarSprite1.x,AvatarSprite1.y=-1*AvatarSprite1.y),1==a)AvatarSprite1.loadTexture("general","desconocido",0);else if(game_objeto.cache.checkImageKey(o))try{AvatarSprite1.loadTexture(o,0)}catch(a){log(!0,"No consigo cargar la imagen de sprite 1")}else AvatarSprite1.loadTexture("general","desconocido",0);AvatarSprite1.width=AnchoFoto,AvatarSprite1.height=AnchoFoto,log(!0,"Se recalcula")}function fileComplete2(a){var o;if(o="imagen2",AvatarSprite2.x<0&&(AvatarSprite2.x=-1*AvatarSprite2.x,AvatarSprite2.y=-1*AvatarSprite2.y),1==a)AvatarSprite2.loadTexture("general","desconocido",0);else if(game_objeto.cache.checkImageKey(o))try{AvatarSprite2.loadTexture(o,0)}catch(a){log(!0,"No consigo cargar la imagen de sprite 2")}else AvatarSprite2.loadTexture("general","desconocido",0);AvatarSprite2.width=AnchoFoto,AvatarSprite2.height=AnchoFoto,log(!0,"Se recalcula")}function fileComplete3(a){var o;if(o="imagen3",AvatarSprite3.x<0&&(AvatarSprite3.x=-1*AvatarSprite3.x,AvatarSprite3.y=-1*AvatarSprite3.y),1==a)AvatarSprite3.loadTexture("general","desconocido",0);else if(game_objeto.cache.checkImageKey(o))try{AvatarSprite3.loadTexture(o,0)}catch(a){log(!0,"No consigo cargar la imagen de sprite 1")}else AvatarSprite3.loadTexture("general","desconocido",0);AvatarSprite3.width=AnchoFoto,AvatarSprite3.height=AnchoFoto,log(!0,"Se recalcula")}function fileComplete4(a){var o;if(o="imagen4",AvatarSprite4.x<0&&(AvatarSprite4.x=-1*AvatarSprite4.x,AvatarSprite4.y=-1*AvatarSprite4.y),1==a)AvatarSprite4.loadTexture("general","desconocido",0);else if(game_objeto.cache.checkImageKey(o))try{AvatarSprite4.loadTexture(o,0)}catch(a){log(!0,"No consigo cargar la imagen de sprite 1")}else AvatarSprite4.loadTexture("general","desconocido",0);AvatarSprite4.width=AnchoFoto,AvatarSprite4.height=AnchoFoto,log(!0,"Se recalcula")}function fileError1(){AvatarSprite1.x<0&&(AvatarSprite1.x=-1*AvatarSprite1.x,AvatarSprite1.y=-1*AvatarSprite1.y),AvatarSprite1.loadTexture("general","desconocido",0),AvatarSprite1.width=AnchoFoto,AvatarSprite1.height=AnchoFoto,log(!0,"Se recalcula")}function fileError2(){AvatarSprite2.x<0&&(AvatarSprite2.x=-1*AvatarSprite2.x,AvatarSprite2.y=-1*AvatarSprite2.y),AvatarSprite2.loadTexture("general","desconocido",0),AvatarSprite2.width=AnchoFoto,AvatarSprite2.height=AnchoFoto,log(!0,"Se recalcula")}function fileError3(){AvatarSprite3.x<0&&(AvatarSprite3.x=-1*AvatarSprite3.x,AvatarSprite3.y=-1*AvatarSprite3.y),AvatarSprite3.loadTexture("general","desconocido",0),AvatarSprite3.width=AnchoFoto,AvatarSprite3.height=AnchoFoto,log(!0,"Se recalcula")}function fileError4(){AvatarSprite4.x<0&&(AvatarSprite4.x=-1*AvatarSprite4.x,AvatarSprite4.y=-1*AvatarSprite4.y),AvatarSprite4.loadTexture("general","desconocido",0),AvatarSprite4.width=AnchoFoto,AvatarSprite4.height=AnchoFoto,log(!0,"Se recalcula")}function MaliDetect(){var a=document.createElement("canvas");a.setAttribute("width","1"),a.setAttribute("height","1"),document.body.appendChild(a);var o=document.getElementsByTagName("canvas"),e=o[0].getContext("webgl",{stencil:!0});if(o[0].parentNode.removeChild(o[0]),!e)return!1;var t,r=e.getExtension("WEBGL_debug_renderer_info");return null!=r&&(t=e.getParameter(r.UNMASKED_RENDERER_WEBGL),0==vProduccion&&MensajeError(t),-1!=t.search(/mali/i))}function MaliDetect2(){document.createElement("canvas");var a=document.getElementsByTagName("canvas")[0].getContext("webgl",{stencil:!0});if(!a)return!1;var o,e=a.getExtension("WEBGL_debug_renderer_info");return null!=e&&(o=a.getParameter(e.UNMASKED_RENDERER_WEBGL),0==vProduccion&&alert(o),-1!=o.search(/mali/i)?(alert("ENCONTRADO"),!0):(alert("NO NCONTRADO"),!1))}function checkOverlap(a,o){var e=a.getBounds(),t=o.getBounds();return a.name!=o.name&&Phaser.Rectangle.intersects(e,t)}function Moviendo_Carta(a){for(var o=MazoD.length-1;0<=o;o--)checkOverlap(a,MazoD[o].cartilla)?MazoD[o].cartilla.tint=Phaser.Color.getColor(175,200,111):MazoD[o].cartilla.tint=Phaser.Color.getColor(255,255,255)}function Parar_Drag(a){var o,e,t=!1;if(0==PuntosFin()){for(ColorManoPosibles(),o=0;o<=MazoD.length-1;o++)if(o!=MazoD.length-1){if(checkOverlap(a,MazoD[o].cartilla)&&checkOverlap(a,MazoD[o+1].cartilla)){Trucaposicion(a,MazoD,MazoD[o+1].posicion-.5),t=!0;break}if(checkOverlap(a,MazoD[o].cartilla)){Trucaposicion(a,MazoD,MazoD[o].posicion-.5),t=!0;break}}else if(checkOverlap(a,MazoD[o].cartilla)){log(!1,"La �ltima"),Trucaposicion(a,MazoD,MazoD[o].posicion+.5),t=!0;break}if(0==vProduccion&&0==vCampeonatoOasis&&MensajeError2("Drag: Soy "+SoyElJugador+" Turno: "+vTurno+" Control:"+QuienTomaElControl+" Reconectando: "+FReconectando()+" Ronda "+vRonda+" Col:"+t+" PC "+PartidaComenzada+" BT "+BloquearTirada),0==t){for(o=0;o<=MazoD.length-1;o++)if(a.name==MazoD[o].cartilla.name){var r=devuelveX("D",MazoD[o].posicion),n=devuelveY("D",MazoD[o].posicion);break}if(log(!0,"LON "+MazoCentral.length),log(!0,"turnoOOO ANTES "+vTurno),log(!0,"turnoOOO DESPUES "+vTurno),log(!0,"turnoOOO "+vTurno),!(0<MazoD.length&&Math.abs(a.x-r)<=1.5*MazoD[MazoD.length-1].cartilla.width&&Math.abs(a.y-n)<=1.5*MazoD[MazoD.length-1].cartilla.height&&vTurno==SoyElJugador)||tw1.isRunning||tw2.isRunning||tw3.isRunning||tw4.isRunning||twEsp7.isRunning||twReu.isRunning||twRec1.isRunning||twRec2.isRunning||twRec3.isRunning||twRecoger1.isRunning||twRecoger2.isRunning||twRecoger3.isRunning||twRecoger4.isRunning||twPeq1.isRunning||twPeq2.isRunning||twPeq3.isRunning||twPeq4.isRunning||1!=PartidaComenzada||0!=PuntosFin()||0!=FReconectando()||0!=BloquearTirada||!(1==ModoMultijugador&&EstoyConectado()||0==ModoMultijugador)||0!=ArrayTareas.length){if(ReubicarCartas(MazoD,"D"),vTurno!=SoyElJugador&&Math.abs(a.x-r)<=MazoD[MazoD.length-1].cartilla.width&&Math.abs(a.y-n)<=MazoD[MazoD.length-1].cartilla.height){e=EscribirTextoGuay(textoturno(),40);var l=game_objeto.time.create(!0);l.add(1500,EliminaTextoPantalla,this,e),l.start()}}else if(1==ValidadorReglas(MazoD[o],SoyElJugador)&&1==ValidaMovimientoJugador(vRonda,SoyElJugador,idPartida)&&(timer.stop(),timer.remove(),OcultarBotones(),0==ModoMultijugador&&(MazoCentral.push(new Carta(MazoD[o].palo,MazoD[o].idCarta,MazoD[o].valor,MazoD[o].cartilla,null,SoyElJugador,null,null,MazoD[o].idPartida)),MueveAlTablero(a,"D",vRonda,SoyElJugador,!1),MazoD.splice(o,1),ReubicarCartas(MazoD,"D")),1==ModoMultijugador)){vNoEsta=!1;Date.now();var i=[];i.splice(0,1e3);var d=1e5*Math.random(),s=new function(a,o,e,t,r,n,l,i,d,s,c,u,g,p,M){this.Habitacion=a,this.SoyElJugador=o,this.Cartilla=e,this.Turno=t,this.Ronda=r,this.SonVueltas=n,this.Partida=l,this.JugadorFull=i,this.JugadorSala=d,this.Nombre=s,this.idPartida=c,this.IdMsg=u,this.ClientId=g,this.SalaID=p,this.Mensaje=M,this.Fecha=new Date(Date.now())}(Habitacion,SoyElJugador,MazoD[o].cartilla.name,vTurno,vRonda,SonVueltas,MarcadorPartidasNuestro+MarcadorPartidasRival,ArrayDelaPropiaSala[SoyElJugador-1].JugadorFull,ArrayDelaPropiaSala[SoyElJugador-1].JugadorSala,ArrayDelaPropiaSala[SoyElJugador-1].Nombre,idPartida,d,ArrayDelaPropiaSala[SoyElJugador-1].JugadorSala,Habitacion,"enviar carta centro");ArrayAccionesDesconexiones.push(s),i.push(s);try{socket.emit("enviar carta centro",i[0],function(a){EliminarColaMensajes(a,"enviar carta centro")}),i.splice(0,1e3),MazoD[o].palo==Triunfo&&(1==MazoD[o].valor&&GrabarResultado(SoyElJugador,MarcadorPartidasNuestro+MarcadorPartidasRival,SonVueltas,0,!1,!1,!0,!1),3==MazoD[o].valor&&GrabarResultado(SoyElJugador,MarcadorPartidasNuestro+MarcadorPartidasRival,SonVueltas,0,!1,!1,!1,!0))}catch(a){}}}else ReubicarCartas(MazoD,"D")}else ReubicarCartas(MazoD,"D")}setEventHandlers=function(){socket.on("connect",onSocketConnected),socket.on("reconnect_attempt",function(){IntentosReconexion++,1==ModoMultijugador&&(1==MuestraErrorDesconexion&&MensajeError("Intentando reconectar..."+IntentosReconexion),MuestraErrorDesconexion=!0,vIntentosGlobal<=IntentosReconexion&&(SalirConfirmado(),MatarConexion(),ConectaServidor()))}),socket.on("reconnect",function(){if(IntentosReconexion=0,1==ModoMultijugador)if(1==BotonAleatorio.alive||1==BotonMonoJugador.alive||0==ArrayDelaPropiaSala.length)PartidaComenzada=!0,SalirConfirmado(),MatarConexion(),ConectaServidor();else{MensajeError("¡Reconectado!"+ArrayDelaPropiaSala[SoyElJugador-1].Nombre);var a=game_objeto.time.create(!1);a.loop(200,function(){try{socket.emit("Reconectado",ArrayDelaPropiaSala[SoyElJugador-1].JugadorSala,ArrayDelaPropiaSala[SoyElJugador-1].Sala,!1,socket.id,idPartida),a.stop(),a.remove()}catch(a){MensajeError("¡Corregir!"+ArrayDelaPropiaSala[SoyElJugador-1].Nombre)}}),a.start()}}),socket.on("enviar_perfil_desde_server",onSocketPerfil),socket.on("enviar_publicidad_desde_server",onSocketPublicidad),socket.on("envio_control",onSocketControl),socket.on("disconnect",onSocketDisconnect),socket.on("conectados_sala",function(a,o){if(0==ArrayTareas.length&&0==FReconectando()&&1==RepartoFinalizado)return onSocketconectadosSala(a.JugadoresEnSala,a.SalaJoin,a.ArrayEnviar,a.QuienTomaElControl,!1),o(a.IdMsg);var e=[];return e.push(a),TareasPendientesDesdeServer(e),0}),socket.on("baraja_desde_server",function(a,o){if(0==ArrayTareas.length&&0==FReconectando()&&1==RepartoFinalizado)return onSocketBarajaDesdeServer(a.data,a.QuienReparte,a.idPartida,!1),o(a.IdMsg);var e=[];return e.push(a),TareasPendientesDesdeServer(e),0}),socket.on("envio_posicion_desde_server",function(a,o){if(0==ArrayTareas.length&&0==FReconectando()&&1==RepartoFinalizado)return onSocketEnvioPosicionDesdeServer(a.JugadorQueMueve,a.KeyMover,a.nuevaposicion,!1),o(a.IdMsg);var e=[];return e.push(a),TareasPendientesDesdeServer(e),0}),socket.on("envio_centro_desde_server",function(a,o){if(1==RepartoFinalizado&&0==ArrayTareas.length&&0==FReconectando()&&1==MazoOBuffer(a.JugadorQueMueve,a.Ronda)&&1==MoverCentroAjenoVerifica(a.JugadorQueMueve,a.KeyMover,a.Ronda,a.Hora,a.idPartida,!1)&&idPartida==a.idPartida&&0==BloqueoCartaCentro)return ValidaMovimientoJugador(a.Ronda,a.JugadorQueMueve,a.idPartida),onSocketEnvioCentroDesdeServer(a.JugadorQueMueve,a.KeyMover,a.Turno,a.Ronda,a.Hora,a.idPartida,!1),o(a.IdMsg);var e=[];return e.push(a),TareasPendientesDesdeServer(e),0}),socket.on("Comenzad Partida",function(a,o){if(1==RepartoFinalizado&&0==ArrayTareas.length&&0==FReconectando()&&idPartida==a.idPartida)return onSocketComenzadPartida(!1,!1),o(a.IdMsg);var e=[];return e.push(a),TareasPendientesDesdeServer(e),0}),socket.on("envio_cante_desde_server",function(a,o){if(1==RepartoFinalizado&&0==ArrayTareas.length&&0==FReconectando())return onSocketCantarDesdeServer(a.JugadorQueMueve,a.puntos,a.texto,!1),o(a.IdMsg);var e=[];return e.push(a),TareasPendientesDesdeServer(e),0}),socket.on("envio_cambio7_desde_server",function(a,o){if(1==RepartoFinalizado&&0==ArrayTareas.length&&0==FReconectando())return onSocketCambiar7DesdeServer(a.JugadorQueMueve,a.KeyMover,!1),o(a.IdMsg);var e=[];return e.push(a),TareasPendientesDesdeServer(e),0}),socket.on("envio_parejas_desde_server",function(a,o){if(0==ArrayTareas.length&&0==FReconectando()&&1==RepartoFinalizado)return onSocketCambiarParejasDesdeServer(a.ArrayDelaPropiaSalaClienteOrdenada,a.QuienReparte,!1),o(a.IdMsg);var e=[];return e.push(a),TareasPendientesDesdeServer(e),0}),socket.on("enviar_texto_desde_server",function(a,o){return onSocketEnviarTextoDesdeServer(a.data,a.QuienHabla),o(a.IdMsg)}),socket.on("enviar_emoticono_desde_server",function(a,o){return onSocketEnviarEmoticonosDesdeServer(a.Desde,a.Hasta,a.idEmoticono),o(a.IdMsg)}),socket.on("desconectado_desde_server",function(a,o){if(0==ArrayTareas.length&&0==FReconectando()&&1==RepartoFinalizado)return onSocketDesconectadoDesdeServer(a.Jugador,a.Nombre,a.posicionJugador,a.MinutosSancion,a.QuienTomaElControl,!1),o(a.IdMsg);var e=[];return e.push(a),TareasPendientesDesdeServer(e),0}),socket.on("reconectado_desde_server",function(a,o){if(0==ArrayTareas.length&&0==FReconectando()&&1==RepartoFinalizado)return onSocketReconectadoDesdeServer(a.Jugador,a.Nombre,a.posicionJugador,a.NuevoId,a.ArraySalaEnviar,a.QuienTomaElControl,a.ArrayTareasServidor,!1),o(a.IdMsg);var e=[];return e.push(a),TareasPendientesDesdeServer(e),0}),socket.on("envio_lista_sala_amigos",onSocketListaSalaAmigos),socket.on("MensajeServidor",onSocketMensajeServidor),socket.on("envio_validacion_salas_ok",onSocketValidacionSalaOK),socket.on("envia_clasificacion",onSocketClasificacion),socket.on("error_personalizado_desde_server",onSocketErrorDesdeServer),socket.on("cuenta jugadores",onSocketContadorJugadores),socket.on("elimina_chat_desde_server",function(){BotonEscribir.kill(),BotonHablarOn.kill(),BotonHablarOff.kill()})},onSocketControl=function(a){var o=QuienTomaElControl;0!=a?QuienTomaElControl=NumeroJugadorSala(a):4<=ArrayDelaPropiaSala.length&&(QuienTomaElControl=-1),QuienTomaElControl==SoyElJugador&&0==o&&0==FReconectando()&&(timer.stop(),timerturno.stop(),SuperOrganizador())},DesbloquearID=function(a){var o;for(o=ArrayBloqueoTareas.length;o--;)ArrayBloqueoTareas[o].idTarea==a&&ArrayBloqueoTareas.splice(o,1)},GestorTareasLibre=function(a,o,e){var t,r=!1,n=!1;if(0<ArrayBloqueoTareas.length){for(t=0;t<=ArrayBloqueoTareas.length-1;t++);r="baraja_desde_server"==ArrayTareas[0].Mensaje}else{for(r=!0,t=0;t<=ArrayBloqueoTareasBack.length-1;t++)ArrayBloqueoTareasBack[t].idTarea==a&&(n=!0);0==n&&(ArrayBloqueoTareas.push(new ObjetoBloqueo(a,o,e)),ArrayBloqueoTareasBack.push(new ObjetoBloqueo(a,o,e)))}return r},DevuelveNombreCartaDebug=function(a){var o,e;switch(a){case 8:o="sota";break;case 9:o="caballo";break;case 10:o="rey";break;case 18:o="sota";break;case 19:o="caballo";break;case 20:o="rey";break;case 28:o="sota";break;case 29:o="caballo";break;case 30:o="rey";break;case 38:o="sota";break;case 39:o="caballo";break;case 40:o="rey";break;default:o=""}return a<=10?(e="oros",""==o&&(o=a)):a<=20?(e="copas",""==o&&(o=a-10)):a<=30?(e="espadas",""==o&&(o=a-20)):(e="bastos",""==o&&(o=a-30)),o+" "+e},EliminaMensaje=function(a){var o=game_objeto.time.create(!1);o.loop(100,function(){try{socket.emit("elimina_mensaje",a[0].IdMsg),o.stop(),o.remove()}catch(a){}}),o.start()},TareasPendientesDesdeServer=function(a,o){var e,t,r,n,l=!0,i=!1,d=!1,s=!1;if(null!=a)for(e=0;e<=a.length-1;e++)MarcadorNuevo()&&("envio_ok_parejas_desde_server"!=a[e].Mensaje&&"envio_parejas_desde_server"!=a[e].Mensaje||(d=!0),"desconectado_desde_server"!=a[e].Mensaje&&"reconectado_desde_server"!=a[e].Mensaje||(s=!0));if(1==d&&1==s&&(l=!1,SalirConfirmado(),MatarConexion(),ConectaServidor()),1==l){var c=["conectados_sala","baraja_desde_server","envio_posicion_desde_server","envio_centro_desde_server","Comenzad Partida","envio_cante_desde_server","envio_cambio7_desde_server","desconectado_desde_server","reconectado_desde_server","salir_pantalla_principal","envio_ok_parejas_desde_server","envio_parejas_desde_server"];if(null!=a){var u=ArrayTareas.length;for(e=0;e<=a.length-1;e++)if(r=!1,0<=c.indexOf(a[e].Mensaje)&&-1==ArrayTareasGestionadas.indexOf(a[e].IdMsgUnico)){for(t=0;t<=ArrayTareas.length-1;t++)ArrayTareas[t].IdMsg==a[e].IdMsg&&(r=!0);if(0==r){0<u&&(i=!0);var g=!0;"envio_centro_desde_server"==a[e].Mensaje&&(g=ValidaMovimientoJugador(a[e].Ronda,a[e].JugadorQueMueve,a[e].idPartida)),1==g&&(ArrayTareas.push(a[e]),ArrayTareasGestionadas.push(a[e].IdMsgUnico))}}else a[e].Mensaje}if(0<ArrayTareas.length&&ArrayTareas.sort(sort_by("Fecha",!1)),1==(l=!0)&&1==i&&(l=!1),0<ArrayTareas.length&&1==l&&0==ArrayBloqueoTareas.length){timerrecolector.stop(),n=ArrayTareas.slice();var p=["envio_posicion_desde_server","envio_centro_desde_server","Comenzad Partida","envio_cante_desde_server","envio_cambio7_desde_server","baraja_desde_server","desconectado_desde_server","reconectado_desde_server","envio_ok_parejas_desde_server","envio_parejas_desde_server","conectados_sala"];if(-1==p.indexOf(n[0].Mensaje)||0<=p.indexOf(n[0].Mensaje)&&1==RepartoFinalizado||("baraja_desde_server"==n[0].Mensaje||"desconectado_desde_server"==n[0].Mensaje||"reconectado_desde_server"==n[0].Mensaje||"envio_ok_parejas_desde_server"==n[0].Mensaje||"envio_parejas_desde_server"==n[0].Mensaje||"conectados_sala"==n[0].Mensaje)&&0==RepartoFinalizado){var M=!0;if("Comenzad Partida"==n[0].Mensaje&&n[0].idPartida!=idPartida&&null!=idPartida&&(M=!1),1==M&&(n[0].Mensaje,1==GestorTareasLibre(n[0].IdMsg,n[0].idPartida,n[0].Mensaje)))switch(n[0].Mensaje){case"salir_pantalla_principal":MatarConexion();break;case"conectados_sala":onSocketconectadosSala(n[0].JugadoresEnSala,n[0].SalaJoin,n[0].ArrayEnviar,n[0].QuienTomaElControl,n[0].IdMsg),EliminaMensaje(n);break;case"baraja_desde_server":onSocketBarajaDesdeServer(n[0].data,n[0].QuienReparte,n[0].idPartida,n[0].IdMsg),EliminaMensaje(n);break;case"envio_posicion_desde_server":onSocketEnvioPosicionDesdeServer(n[0].JugadorQueMueve,n[0].KeyMover,n[0].nuevaposicion,n[0].IdMsg),EliminaMensaje(n);break;case"envio_centro_desde_server":0==BloqueoCartaCentro?(onSocketEnvioCentroDesdeServer(n[0].JugadorQueMueve,n[0].KeyMover,n[0].Turno,n[0].Ronda,n[0].Hora,n[0].idPartida,n[0].IdMsg),EliminaMensaje(n)):BorrarBloqueo(n[0].IdMsg);break;case"Comenzad Partida":onSocketComenzadPartida(!1,n[0].IdMsg),EliminaMensaje(n);break;case"envio_cante_desde_server":onSocketCantarDesdeServer(n[0].JugadorQueMueve,n[0].puntos,n[0].texto,n[0].IdMsg),EliminaMensaje(n);break;case"envio_cambio7_desde_server":onSocketCambiar7DesdeServer(n[0].JugadorQueMueve,n[0].KeyMover,n[0].IdMsg),EliminaMensaje(n);break;case"envio_parejas_desde_server":onSocketCambiarParejasDesdeServer(n[0].ArrayDelaPropiaSalaClienteOrdenada,n[0].QuienReparte,n[0].IdMsg),socket.emit("elimina_mensaje",n[0].IdMsg);break;case"desconectado_desde_server":onSocketDesconectadoDesdeServer(n[0].Jugador,n[0].Nombre,n[0].posicionJugador,n[0].MinutosSancion,n[0].QuienTomaElControl,n[0].IdMsg),EliminaMensaje(n);break;case"reconectado_desde_server":onSocketReconectadoDesdeServer(n[0].Jugador,n[0].Nombre,n[0].posicionJugador,n[0].NuevoId,n[0].ArraySalaEnviar,n[0].QuienTomaElControl,n[0].ArrayTareasServidor,n[0].IdMsg),EliminaMensaje(n)}}}else 0==timerrecolector.running&&(timerrecolector.loop(1e3,function(){0==ArrayBloqueoTareas.length&&0<ArrayTareas.length&&(timerrecolector.stop(),Recuperarse("SinClave",!1,!1))}),timerrecolector.start())}},Recuperarse=function(a,o,e){ArrayTareas.length,1!=o&&BorrarTarea(a),0==ArrayTareas.length?(vVelocidadCartas=150,vVelocidadCartasReordernar=250,TiempoCartaGanadora=300,vVelocidadRobar=350,SuperOrganizador()):TareasPendientesDesdeServer(null)},onSocketErrorDesdeServer=function(a,o){"Error0"!=a&&"Error2"!=a&&"Error3"!=a&&"Error4"!=a||MuestraPantallaLogin(),"Error5"==a&&onSocketMensajeServidor(o,!0),"Error6"==a&&onSocketMensajeServidor(o,!1),"Error7"==a&&onSocketMensajeServidor(o,!1),"Error8"==a&&(onSocketMensajeServidor(o,!0),VerEstable=!1),"Error9"!=a&&"Error10"!=a&&"Error11"!=a||onSocketMensajeServidor(o,!0),"Error12"==a&&onSocketMensajeServidor(o,!0),"Error13"==a&&onSocketMensajeServidor(o,!1)},onSocketContadorJugadores=function(a){TextCuentaMundo.text="",-9999!=a.CuentaMundo&&(TextCuentaMundo.text="Contra el mundo: "+a.CuentaMundo+" personas\nContra amigos: "+a.CuentaAmigos+" personas\n",UsuariosOnline=a.CuentaMundo),-9999!=a.CuentaSolos&&(TextCuentaMundo.text=TextCuentaMundo.text+"Contra el juego: "+a.CuentaSolos+" personas"),0==ArrayDelaPropiaSala.length?TextCuentaMundo.x=game_objeto.world.centerX+250+TextCuentaMundo.textWidth/2:TextCuentaMundo.x=game_objeto.world.centerX-125+TextCuentaMundo.textWidth/2},onSocketCambiarParejasDesdeServer=function(a,o,e){var t,r=0;for(0<QuienTomaElControl&&(r=ArrayDelaPropiaSala[QuienTomaElControl-1].JugadorSala),ArrayDelaPropiaSala=a,t=0;t<=ArrayDelaPropiaSala.length-1;t++)if(EstaArray(ArrayDelaPropiaSala[t].JugadorSala,r)){QuienTomaElControl=t+1;break}ArrayJugadoresDesconectados.splice(0,1e3),RecalculaDesconectados();try{for(t=0;t<=ArrayDelaPropiaSala.length-1;t++)EstaArray(ArrayDelaPropiaSala[t].JugadorSala,socket.id)&&(SoyElJugador=t+1)}catch(a){var n=EscribirTextoGuay("Error cambiando parejas",40);if(""!=n)n.alpha=1,game_objeto.add.tween(n).to({alpha:0},1e3,EfectoTween1,!0,4e3).onComplete.add(function(){n.kill(),SalirConfirmado(),MatarConexion(),ConectaServidor()})}if(DibujaJugadores(!0),MarcadorNuevo()){NuevaPartida(o,!0)}Recuperarse(e,!1,!1)},onSocketClasificacion=function(a,o,e,t,r,n,l,i,d,s,c,u,g,p,M,v){OcultarFacebook(),createPaginador("general",a,r,d,s),createPaginador("semanal",o,n,c,g),createPaginador("anterior",e,l,p,M),createPaginador("30dias",t,i,u,v)},DibujaRankingGeneral=function(a,o,e,t){var r,n,l,i,d,s,c,u,g,p,M,v,h,m,z=(C=document.getElementById("TablaClasificacion")).rows.length;if(null!=a&&0<a.length){for(r=1;r<z;r++)C.deleteRow(1);var C;for(document.getElementById("DivClasificacionContenedor").style.display="inline-block",r=m=0;r<=a.length-1;r++)1==a[r]._Tipo&&(l=(n=C.insertRow(m+1)).insertCell(0),i=n.insertCell(1),d=n.insertCell(2),s=n.insertCell(3),c=n.insertCell(4),u=n.insertCell(5),g=n.insertCell(6),p=n.insertCell(7),M=n.insertCell(8),v=n.insertCell(9),l.innerHTML=a[r]._Posicion,null!=a[r].Foto?i.innerHTML="<img class='zoom' src='"+a[r].Foto+"' style='max-width:30;max-height:30' >":i.innerHTML="<img class='zoom' src='"+Maquina+"/assets/images/desconocido.png' style='max-width:30;max-height:30' >",d.innerHTML=a[r].Jugador,s.innerHTML=a[r]._Jugadas,c.innerHTML=a[r]._Ganadas,u.innerHTML=a[r]._Perdidas,g.innerHTML=a[r]._Retiradas,p.innerHTML=a[r]._Grupo,M.innerHTML=a[r]._Ratio,h=CalculaAvatarLogro(a[r]._Nivel,1),v.innerHTML="<img class='zoom' src='"+Maquina+"/assets/images/"+h+"' style='max-width:30;max-height:30' >",m++);(C=document.getElementById("TextoClasificacionGlobal")).textContent=-1==o?"Para saber tu posición, pulsa sobre Varios Jugadores y consulta de nuevo el ranking.":0==o?"Para saber tu posición, pulsa sobre Varios Jugadores y consulta de nuevo el ranking.":"Estás en la posición "+o+".",C.textContent=C.textContent+"\r\nPara estar en el grupo de los jugones, juega más de "+e+" partidas.\r\nPara estar en el grupo de los frecuentes, juega más de "+t+" partidas."}},DibujaRanking30dias=function(a,o,e,t){var r,n,l,i,d,s,c,u,g,p,M,v,h,m,z=(C=document.getElementById("TablaClasificacion30dias")).rows.length;if(null!=a&&0<a.length){for(r=1;r<z;r++)C.deleteRow(1);var C;for(document.getElementById("DivClasificacionContenedor").style.display="inline-block",r=m=0;r<=a.length-1;r++)1==a[r]._Tipo&&(l=(n=C.insertRow(m+1)).insertCell(0),i=n.insertCell(1),d=n.insertCell(2),s=n.insertCell(3),c=n.insertCell(4),u=n.insertCell(5),g=n.insertCell(6),p=n.insertCell(7),M=n.insertCell(8),v=n.insertCell(9),l.innerHTML=a[r]._Posicion,null!=a[r].Foto?i.innerHTML="<img class='zoom' src='"+a[r].Foto+"' style='max-width:30;max-height:30' >":i.innerHTML="<img class='zoom' src='"+Maquina+"/assets/images/desconocido.png' style='max-width:30;max-height:30' >",d.innerHTML=a[r].Jugador,s.innerHTML=a[r]._Jugadas,c.innerHTML=a[r]._Ganadas,u.innerHTML=a[r]._Perdidas,g.innerHTML=a[r]._Retiradas,p.innerHTML=a[r]._Grupo,M.innerHTML=a[r]._Ratio,h=CalculaAvatarLogro(a[r]._Nivel,1),v.innerHTML="<img class='zoom' src='"+Maquina+"/assets/images/"+h+"' style='max-width:30;max-height:30' >",m++);(C=document.getElementById("TextoClasificacion30dias")).textContent=-1==o?"Para saber tu posición, pulsa sobre Varios Jugadores y consulta de nuevo el ranking.":0==o?"Para saber tu posición, pulsa sobre Varios Jugadores y consulta de nuevo el ranking.":"Estás en la posición "+o+".",C.textContent=C.textContent+"\r\nPara estar en el grupo de los jugones, juega más de "+e+" partidas.\r\nPara estar en el grupo de los frecuentes, juega más de "+t+" partidas."}},DibujaRankingSemanal=function(a,o,e,t){var r,n,l,i,d,s,c,u,g,p,M,v,h,m;if(null!=a&&0<a.length){var z,C=(z=document.getElementById("TablaClasificacionSemanal")).rows.length;for(r=1;r<C;r++)z.deleteRow(1);for(r=m=0;r<=a.length-1;r++)2==a[r]._Tipo&&(l=(n=z.insertRow(m+1)).insertCell(0),i=n.insertCell(1),d=n.insertCell(2),s=n.insertCell(3),c=n.insertCell(4),u=n.insertCell(5),g=n.insertCell(6),p=n.insertCell(7),M=n.insertCell(8),v=n.insertCell(9),l.innerHTML=a[r]._Posicion,null!=a[r].Foto?i.innerHTML="<img class='zoom' src='"+a[r].Foto+"' style='max-width:30;max-height:30' >":i.innerHTML="<img class='zoom' src='"+Maquina+"/assets/images/desconocido.png' style='max-width:30;max-height:30' >",d.innerHTML=a[r].Jugador,s.innerHTML=a[r]._Jugadas,c.innerHTML=a[r]._Ganadas,u.innerHTML=a[r]._Perdidas,g.innerHTML=a[r]._Retiradas,p.innerHTML=a[r]._Grupo,M.innerHTML=a[r]._Ratio,h="sin_logro.png",1==a[r]._CampeonSemanal&&(h="medalla.png"),v.innerHTML="<img class='zoom' src='"+Maquina+"/assets/images/"+h+"' style='max-width:30;max-height:30' >",m++);(z=document.getElementById("TextoClasificacionSemanal")).textContent=-1==o?"Para saber tu posición, pulsa sobre Varios Jugadores y consulta de nuevo el ranking.":0==o?"Para saber tu posición, pulsa sobre Varios Jugadores y consulta de nuevo el ranking.":"Estás en la posición "+o+".",z.textContent=z.textContent+"\r\nPara estar en el grupo de los jugones, juega más de "+e+" partidas.\r\nPara estar en el grupo de los frecuentes, juega más de "+t+" partidas."}},DibujaRankingAnterior=function(a,o,e,t){var r,n,l,i,d,s,c,u,g,p,M,v,h,m;if(null!=a&&0<a.length){var z,C=(z=document.getElementById("TablaClasificacionAnterior")).rows.length;for(r=1;r<C;r++)z.deleteRow(1);for(r=m=0;r<=a.length-1;r++)3==a[r]._Tipo&&(l=(n=z.insertRow(m+1)).insertCell(0),i=n.insertCell(1),d=n.insertCell(2),s=n.insertCell(3),c=n.insertCell(4),u=n.insertCell(5),g=n.insertCell(6),p=n.insertCell(7),M=n.insertCell(8),v=n.insertCell(9),l.innerHTML=a[r]._Posicion,null!=a[r].Foto?i.innerHTML="<img class='zoom' src='"+a[r].Foto+"' style='max-width:30;max-height:30' >":i.innerHTML="<img class='zoom' src='"+Maquina+"/assets/images/desconocido.png' style='max-width:30;max-height:30' >",d.innerHTML=a[r].Jugador,s.innerHTML=a[r]._Jugadas,c.innerHTML=a[r]._Ganadas,u.innerHTML=a[r]._Perdidas,g.innerHTML=a[r]._Retiradas,p.innerHTML=a[r]._Grupo,M.innerHTML=a[r]._Ratio,h="sin_logro.png",1==a[r]._CampeonSemanal&&(h="medalla.png"),v.innerHTML="<img class='zoom' src='"+Maquina+"/assets/images/"+h+"' style='max-width:30;max-height:30' >",m++);(z=document.getElementById("TextoClasificacionAnterior")).textContent=-1==o?"Para saber tu posición, pulsa sobre Varios Jugadores y consulta de nuevo el ranking.":0==o?"Para saber tu posición, pulsa sobre Varios Jugadores y consulta de nuevo el ranking.":"Estás en la posición "+o+".",z.textContent=z.textContent+"\r\nPara estar en el grupo de los jugones, juega más de "+e+" partidas.\r\nPara estar en el grupo de los frecuentes, juega más de "+t+" partidas."}},onSocketValidacionSalaOK=function(a,o){1==a?InicioPartidaOnline(1,o):onSocketErrorDesdeServer("Error7","Contraseña incorrecta.")},onSocketMensajeServidor=function(a,o){var e=EscribirTextoGuay(a,40);e.alpha=1,game_objeto.add.tween(e).to({alpha:0},1e3,EfectoTween1,!0,5e3).onComplete.add(function(){e.kill(),1==o&&(SalirConfirmado(),MatarConexion(),ConectaServidor())})},onSocketConexionFallida=function(){},onSocketServidorCaido=function(){ErrorConexion()},onSocketPerfil=function(a){if(ArrayInfoJugador.splice(0,1e3),CerrarGPRD(),ArrayInfoJugador.push(new ObjetoJugador(a[0].Nombre,a[0].Sexo,a[0].Foto,a[0].Dorso,a[0].Tapete,a[0].ProveedorID,a[0].RedSocial,a[0].Admin,a[0].VersionOK,a[0].VersionMensaje,a[0].Noticia,a[0].IP,a[0].ChatDisponible,a[0].Nivel,a[0].CampeonSemanal,a[0].Tapete43,a[0].ImagenesEmitter,a[0].gprd,a[0].LimiteReconexiones,a[0].LimiteMinimizados,a[0].LimiteTiempoReconexion,a[0].GbitsResultado,a[0].GbitsDiario,a[0].GbitsPlus,a[0].NuevoDia,a[0].PuntuaciondePRO,a[0].PreguntarSiGustaUser,a[0].IrA,a[0].IrATexto,a[0].Posicion30,a[0].EsPRO)),1==a[0].gprd){if(LimiteReconexiones=a[0].LimiteReconexiones,LimiteMinimizados=a[0].LimiteMinimizados,LimiteTiempoReconexion=a[0].LimiteTiempoReconexion,MuestraGBits(!1),""!=a[0].VersionMensaje&&(0==a[0].VersionOK?onSocketErrorDesdeServer("Error8",a[0].VersionMensaje):onSocketErrorDesdeServer("Error13",a[0].VersionMensaje)),MarcadorNuevo()&&0==game_objeto.cache.checkImageKey("publi")){var o=game_objeto.load.atlas("publi",a[0].ImagenesEmitter,Maquina+"/assets/images/publi.json",Phaser.Loader.TEXTURE_ATLAS_JSON_HASH);o.crossOrigin="Anonymous",o.start()}PideCambioTapeteyDorso(ArrayInfoJugador[0].Tapete,ArrayInfoJugador[0].Tapete43,ArrayInfoJugador[0].Dorso,ArrayInfoJugador[0].Noticia,ArrayInfoJugador[0].IrA,ArrayInfoJugador[0].IrATexto),0==BotonMonoJugador.alive&&0==ArrayDelaPropiaSala.length&&ConfiguraPantallaMultijugador()}else MostrarGPRD()},PideCambioTapeteyDorso=function(a,o,e,t,r,n){var l,i,d,s;l=0==cuatrotres?a:o,i="TapeteRemoto"==BackTapete.name?"TapeteRemoto2":"TapeteRemoto",d="ReversoRemoto"==ReversoGlobal?"ReversoRemoto2":"ReversoRemoto",s="NoticiaRemoto"==Noticia.name?"NoticiaRemoto2":"NoticiaRemoto",null!=TapeteRemotoLoader&&null!=TapeteRemotoLoader&&""!=TapeteRemotoLoader||(TapeteRemotoLoader=new Phaser.Loader(game_objeto)),TapeteRemotoLoader.crossOrigin="Anonymous",TapeteRemotoLoader.image(i,l,!0),TapeteRemotoLoader.onFileComplete.add(function(){fileCompleteTapete()}),TapeteRemotoLoader.start(),null!=DorsoRemotoLoader&&null!=DorsoRemotoLoader&&""!=DorsoRemotoLoader||(DorsoRemotoLoader=new Phaser.Loader(game_objeto)),DorsoRemotoLoader.crossOrigin="Anonymous",DorsoRemotoLoader.image(d,e,!0),DorsoRemotoLoader.onFileComplete.add(function(){fileCompleteDorso()}),DorsoRemotoLoader.start(),null!=t&&ContadorNoticia<=2&&4!=ArrayDelaPropiaSala.length&&0==EntradaModoJuego&&(null!=NoticiaRemotoLoader&&null!=NoticiaRemotoLoader&&""!=NoticiaRemotoLoader||(NoticiaRemotoLoader=new Phaser.Loader(game_objeto)),Noticia.IrA=r,Noticia.IrATexto=n,NoticiaRemotoLoader.crossOrigin="Anonymous",NoticiaRemotoLoader.image(s,t,!0),NoticiaRemotoLoader.onFileComplete.add(function(){fileCompleteNoticia()}),NoticiaRemotoLoader.start()),10<++ContadorNoticia&&(ContadorNoticia=0)},onSocketPublicidad=function(a){ArrayInfoJugador.splice(0,1e3);a[0].Tapete;ArrayInfoJugador.push(new ObjetoJugador(a[0].Nombre,a[0].Sexo,a[0].Foto,a[0].Dorso,a[0].Tapete,a[0].ProveedorID,a[0].RedSocial,a[0].Admin,a[0].VersionOK,a[0].VersionMensaje,a[0].Noticia,a[0].IP,a[0].ChatDisponible,a[0].Nivel,a[0].CampeonSemanal,a[0].Tapete43,a[0].ImagenesEmitter,a[0].gprd,a[0].LimiteReconexiones,a[0].LimiteMinimizados,a[0].LimiteTiempoReconexion,a[0].GbitsResultado,a[0].GbitsDiario,a[0].GbitsPlus,a[0].NuevoDia,a[0].PuntuaciondePRO,a[0].PreguntarSiGustaUser,a[0].IrA,a[0].IrATexto,a[0].Posicion30,a[0].EsPRO)),0==a[0].VersionOK?onSocketErrorDesdeServer("Error8",a[0].VersionMensaje):onSocketErrorDesdeServer("Error13",a[0].VersionMensaje),PideCambioTapeteyDorso(a[0].Tapete,a[0].Tapete43,a[0].Dorso,a[0].Noticia,a[0].IrA,a[0].IrATexto)},ExisteJugador=function(a){var o,e=!1;for(o=0;o<=ArrayDelaPropiaSala.length-1;o++)if(EstaArray(ArrayDelaPropiaSala[o].JugadorSala,a)){e=!0;break}return e},onSocketDesconectadoDesdeServer=function(a,o,e,t,r,n){var l;if(0<ArrayDelaPropiaSala.length&&0==EstaArray(ArrayDelaPropiaSala[SoyElJugador-1].JugadorSala,a)&&1==ExisteJugador(a)){log(!0,"Desconecta el jugador "),log(!0,"JUGADOR QUE DESCONECTA "+a);for(var i=0;i<=ArrayDelaPropiaSala.length-1;i++)EstaArray(ArrayDelaPropiaSala[i].JugadorSala,a)&&(ArrayDelaPropiaSala[i].Desconectado=!0);RecalculaDesconectados(),1==ModoMultijugador&&(0<MazoD.length||0<MazoL.length||0<MazoR.length||0<MazoU.length)&&EnviarEstoyListoDesconectados(),1==ModoMultijugador&&0==PartidaComenzada&&MarcadorNuevo()&&SoyElJugador==QuienTomaElControl&&MarcadorNuevo()&&1==EligiendoPareja&&1==EstoyConectado()&&RespuestaPareja(2),l=1;for(i=0;i<=ArrayDelaPropiaSala.length-1;i++)EstaArray(ArrayDelaPropiaSala[i].JugadorSala,a)&&(l=i);var d,s=DevuelveUbicacionCarta(SoyElJugador);if(DevuelveUbicacionCarta(l+1)!=s)(d=game_objeto.time.create(!0)).add(7e3,function(){DibujaJugadores(!0)}),d.start();FReconectando()}Recuperarse(n,!1,!0)},onSocketReconectadoDesdeServer=function(a,o,e,t,r,n,l,i){var d,s,c;null!=r&&1==r.length&&(c=EscribirTextoGuay("La sala ya no es válida. ¡Entra de nuevo! :)",40),BloquearTirada=!0,c.alpha=1,game_objeto.add.tween(c).to({alpha:0},1e3,EfectoTween1,!0,4e3).onComplete.add(function(){c.kill(),SalirConfirmado(),MatarConexion(),ConectaServidor()}));if(null!=t&&null!=t&&0!=t){if(0!=l&&null!=l&&0!=l.length)for(d=0;d<=l.length-1;d++);for(0<ArrayDelaPropiaSala.length&&EstaArray(ArrayDelaPropiaSala[SoyElJugador-1].JugadorSala,a)&&(timerturno.stop(),timerturno.remove(),timer.stop(),timer.remove()),log(!0,"Desconecta el jugador "),log(!0,"JUGADOR QUE RECONECTA "+a),d=0;d<=ArrayJugadoresDesconectados.length-1;d++)if(EstaArray(ArrayJugadoresDesconectados[d].JugadorSala,a)){ArrayJugadoresDesconectados.splice(d,1);break}for(d=0;d<=ArrayDelaPropiaSala.length-1;d++)if(EstaArray(ArrayDelaPropiaSala[d].JugadorSala,a)){ArrayDelaPropiaSala[d].Desconectado=!1;break}if(null!=r&&null!=r&&0<r.length)for(d=0;d<=r.length-1;d++)for(s=0;s<=ArrayDelaPropiaSala.length-1;s++)EstaArray(r[d].JugadorSala,ArrayDelaPropiaSala[s].JugadorSala)&&(ArrayDelaPropiaSala[s].Desconectado=r[d].Desconectado,ArrayDelaPropiaSala[s].JugadorSala=r[d].JugadorSala);ArrayJugadoresDesconectados.splice(0,1e3),RecalculaDesconectados(),DibujaJugadores(!0),1==RapidoEnDesconexiones&&(vVelocidadCartas=50,TiempoCartaGanadora=500,vVelocidadRobar=vVelocidadCartasReordernar=30),BorrarTarea(i),0!=l&&null!=l&&0!=l.length&&0<ArrayDelaPropiaSala.length&&EstaArray(ArrayDelaPropiaSala[SoyElJugador-1].JugadorSala,t)?TareasPendientesDesdeServer(l,!0):Recuperarse(i,!1,!1)}},BorrarTarea=function(a){var o;if(0<ArrayTareas.length)for(o=ArrayTareas.length;o--;)ArrayTareas[o].IdMsg==a&&(ArrayTareas[o].Mensaje,ArrayTareas.splice(o,1));BorrarBloqueo(a)},BorrarBloqueo=function(a){var o;if(DesbloquearTirada(),0<ArrayBloqueoTareas.length)for(o=ArrayBloqueoTareas.length;o--;)ArrayBloqueoTareas[o].idTarea==a&&ArrayBloqueoTareas.splice(o,1)},onSocketConnected=function(){var a="";if(0<ArrayDelaPropiaSala.length&&1==ModoMultijugador&&(1==DesdeMinimizado?vVecesMinimizado++:vVecesReconectado++,LimiteMinimizados<=vVecesMinimizado?a=EscribirTextoGuay("Te has ausentado de la partida "+vVecesMinimizado+" veces.\nTu pareja te necesita al 100% :)",40):LimiteReconexiones<=vVecesReconectado&&(a=EscribirTextoGuay("Pierdes la conectividad con mucha frecuencia.\nIntenta mejorarla y ¡disfruta! :)",40)),""==a)){var o=new Date(Date.now());1e3*LimiteTiempoReconexion<=o-FechaIni&&(a=EscribirTextoGuay("Has tardado demasiado tiempo en regresar. :(",40))}if(""!=a){SimularQuitarGBits(),vVecesReconectado=vVecesMinimizado=0,a.alpha=1,game_objeto.add.tween(a).to({alpha:0},1e3,EfectoTween1,!0,4e3).onComplete.add(function(){a.kill(),SalirConfirmado(),MatarConexion(),ConectaServidor()})}else{if(1==DesdeMinimizado&&0<ArrayDelaPropiaSala.length){var e=game_objeto.time.create(!1);e.loop(200,function(){try{socket.emit("Reconectado",ArrayDelaPropiaSala[SoyElJugador-1].JugadorSala,ArrayDelaPropiaSala[SoyElJugador-1].Sala,!0,socket.id,idPartida),e.stop(),e.remove()}catch(a){}}),e.start()}if(DesdeMinimizado=!1,1==PrimeraVezLogin&&(PrimeraVezLogin=!1,InicioMultiJugador()),IntentosReconexion=0,1==EstoyConectado()){if(1==EstoyConectado()&&(1==BotonMonoJugador.alive||1==BotonAmigos.alive))try{socket.emit("solicita conectados"),socket.emit("enviar_peticion_publicidad",socket.id,Version)}catch(a){}if(1==EstoyConectado()&&0==BotonMonoJugador.alive&&0==PartidaComenzada&&1==ModoMultijugador)try{socket.emit("enviar_peticion_modo_multijugador",Habitacion,socket.id,!1,Version,ObjetoG)}catch(a){}}}},EstoyConectado=function(){var o=!1;try{o=socket.connected}catch(a){o=!1}return o},onSocketDisconnect=function(){ErrorConexion()},onSocketCartaMovida=function(){log(!1,"carta movida")},onSocketBarajaPedida=function(){log(!1,"ya te la env�o")},onSocketComenzadPartida=function(a,o){log(!0,"Le llega"),textListos.kill(),textEligiendo.kill(),PartidaComenzada=!0,PreparaCaracteristicasMano(),MuestraTurno(),0==a&&Recuperarse(o,!1,!1)},MensajeEsperandoJugadores=function(){textEligiendo.kill(),textEsperando.revive(),game_objeto.world.bringToTop(GrupoTextos),textEsperando.alpha=0,game_objeto.add.tween(textEsperando).to({alpha:1},1500,"Linear",!0,0,-1).yoyo(!0,3e3)},MensajeEsperandoListos=function(){textEligiendo.kill(),textListos.revive(),game_objeto.world.bringToTop(GrupoTextos),textListos.alpha=0,game_objeto.add.tween(textListos).to({alpha:1},1500,"Linear",!0,0,-1).yoyo(!0,3e3)},MensajeEsperandoElegir=function(){var a,o=0;EligiendoPareja=!0;var e=1e6;for(a=0;a<=ArrayDelaPropiaSala.length-1;a++)0==ArrayDelaPropiaSala[a].Desconectado&&ArrayDelaPropiaSala[a].Posicion30<e&&(e=ArrayDelaPropiaSala[o=a].Posicion30);textEsperando.kill(),0<ArrayDelaPropiaSala.length?textEligiendo.text=ArrayDelaPropiaSala[o].Nombre+" está eligiendo pareja":textEligiendo.text="Se está eligiendo pareja",textEligiendo.revive(),textEligiendo.alpha=0,game_objeto.add.tween(textEligiendo).to({alpha:1},1500,"Linear",!0,0,-1).yoyo(!0,3e3)},DevuelveUbicacionCartaSegunOrdenConectado=function(a){},ClickAvatar=function(a){var o,e,t,r=!1;for(o=DevuelveUbicacionCarta(a),log(!0,"ALGO CON LA Letra "+o),e=0;e<=ArrayChatDeshabilitado.length-1;e++)if(ArrayChatDeshabilitado[e]==o){r=!0;break}if(0==r?"D"!=o&&(ArrayChatDeshabilitado.push(o),1==a&&(AvatarSprite1.tint=Phaser.Color.getColor(110,110,110)),2==a&&(AvatarSprite2.tint=Phaser.Color.getColor(110,110,110)),3==a&&(AvatarSprite3.tint=Phaser.Color.getColor(110,110,110)),4==a&&(AvatarSprite4.tint=Phaser.Color.getColor(110,110,110))):(ArrayChatDeshabilitado.splice(e,1),1==a&&(AvatarSprite1.tint=Phaser.Color.getColor(255,255,255)),2==a&&(AvatarSprite2.tint=Phaser.Color.getColor(255,255,255)),3==a&&(AvatarSprite3.tint=Phaser.Color.getColor(255,255,255)),4==a&&(AvatarSprite4.tint=Phaser.Color.getColor(255,255,255))),"D"==o)t=EscribirTextoGuay("Pulse sobre la foto de los jugadores\npara activar o desactivar el chat con ellos",40);else if(0==r){if(t=EscribirTextoGuay("Chat deshabilitado con "+ArrayDelaPropiaSala[a-1].Nombre,40),0==ArrayDelaPropiaSala[0].Amigo)try{socket.emit("enviar_silenciar",ArrayInfoJugador[0].JugadorFull,ArrayInfoJugador[0].IP,ArrayDelaPropiaSala[a-1].JugadorFull,Habitacion)}catch(a){}}else if(t=EscribirTextoGuay("Chat habilitado con "+ArrayDelaPropiaSala[a-1].Nombre,40),0==ArrayDelaPropiaSala[0].Amigo)try{socket.emit("enviar_desilenciar",ArrayInfoJugador[0].JugadorFull,ArrayInfoJugador[0].IP,ArrayDelaPropiaSala[a-1].JugadorFull,Habitacion)}catch(a){}t.alpha=1,game_objeto.add.tween(t).to({alpha:0},1e3,EfectoTween1,!0,1e3).onComplete.add(function(){t.kill()})},NumeroJugadorSala=function(a){var o,e=0;for(o=0;o<=ArrayDelaPropiaSala.length-1;o++)EstaArray(ArrayDelaPropiaSala[o].JugadorSala,a)&&(e=o+1);return e},onSocketconectadosSala=function(a,o,e,t,r){var n,l,i=e.length-1,d=!1;for(OcultarFacebook(),Habitacion=o,log(!1,"conectados: "+a),log(!1,"Habitacion: "+Habitacion),s=0;s<=SemaforoTextoPuntuacion.length-1;s++)SemaforoTextoPuntuacion[s].idPartida==Habitacion&&(d=!0);for(0==d&&(idPartida=Habitacion,SemaforoTextoPuntuacion.push(new ObjetoPartida(idPartida,3))),BotonesPartidaBloqueados=!1,BotonSalir.x=xSalir,BotonAleatorio.kill(),BotonAmigos.kill(),TextGbits.kill(),TextGbitsIndicador.kill(),BolsaDinero.kill(),log(!0,"Longitud de conectados sala aleatoria "+i),OcultaPantallaLogin(),log(!0,"Se borra "+i),s=0;s<=i;s++)if(e[s].Sala==o){for(d=!1,n=0;n<=ArrayDelaPropiaSala.length-1;n++)EstaArray(e[s].JugadorSala,ArrayDelaPropiaSala[n].JugadorSala)&&(d=!0);0==d&&(l=null==e[s].Foto||"null"==e[s].Foto||null==e[s].Foto?"sin_foto":e[s].Foto,ArrayDelaPropiaSala.push(new ObjetoSala(e[s].JugadorSala,e[s].Sala,!1,e[s].Nombre,e[s].Sexo,l,null,e[s].Desconectado,e[s].ReconectadoFecha,e[s].Dorso,e[s].Tapete,e[s].Amigo,e[s].JugadorFull,s+1,"",e[s].Nombre,e[s].Admin,e[s].IP,e[s].Nivel,e[s].CampeonSemanal,e[s].Tapete43,e[s].ImagenesEmitter,e[s].Posicion30,e[s].EsPRO)))}RecalculaDesconectados(),i<=2?MensajeEsperandoJugadores():MensajeEsperandoElegir();for(var s=0;s<=ArrayDelaPropiaSala.length-1;s++)EstaArray(ArrayDelaPropiaSala[s].JugadorSala,socket.id)&&(SoyElJugador=s+1,BackFondo.kill(),BackTapete.revive(),log(!0,ArrayDelaPropiaSala[s].Tapete),log(!0,ArrayDelaPropiaSala[s].Dorso),BotonEscribir.revive(),BotonHablarOn.kill(),BotonHablarOff.revive(),BotonPolicia.revive(),0<ArrayInfoJugador.length&&(BotonEscribir.visible=ArrayInfoJugador[0].ChatDisponible,BotonHablarOn.visible=ArrayInfoJugador[0].ChatDisponible,BotonHablarOff.visible=ArrayInfoJugador[0].ChatDisponible,0==ArrayInfoJugador[0].ChatDisponible&&(BotonHablarOn.kill(),BotonHablarOff.kill())),1==vCampeonatoOasis&&(BotonPolicia.kill(),BotonHablarOn.kill(),BotonHablarOff.kill(),BotonEscribir.kill()));if(DibujaJugadores(!0),4==ArrayDelaPropiaSala.length){var c;BotonRobots.kill();var u=1e6;for(s=0;s<=ArrayDelaPropiaSala.length-1;s++)0==ArrayDelaPropiaSala[s].Desconectado&&ArrayDelaPropiaSala[s].Posicion30<u&&(c=ArrayDelaPropiaSala[s].JugadorSala,u=ArrayDelaPropiaSala[s].Posicion30);try{EstaArray(c,socket.id)&&(vTurno=1,MostrarElegirPareja(!0))}catch(a){}}else{for(s=0;s<=ArrayDelaPropiaSala.length-1;s++)0==ArrayDelaPropiaSala[s].Desconectado&&(c=ArrayDelaPropiaSala[s].JugadorSala,u=ArrayDelaPropiaSala[s].Posicion30);try{EstaArray(c,socket.id)&&(UsuariosOnline<=40||1==ArrayDelaPropiaSala[0].Amigo)?BotonRobots.revive():BotonRobots.kill()}catch(a){}}Recuperarse(r,!1,!1)},EstaArray=function(a,o){var e,t,r=[],n=[];1==Array.isArray(o)?n=o.slice():n.push(o),1==Array.isArray(a)?r=a.slice():r.push(a);var l=!1;for(e=0;e<=r.length-1;e++)for(t=0;t<=n.length-1;t++)if(r[e]==n[t]){l=!0;break}return l},CalculaAvatarLogro=function(a,o){var e="SinLogro",t="sin_logro.png";return 1!=a&&1!=SoyBazan||(e="nivel_pro",t="nivel_pro.png"),2==a&&(e="nivel_ninja",t="nivel_ninja.png"),3==a&&(e="nivel_mago",t="nivel_mago.png"),4==a&&(e="nivel_diplomado",t="nivel_diplomado.png"),1==o?t:e},DibujaJugadores=function(a){var o,e,t,r,n,l,i=0,d=0,s=0,c=0,u=0;for(MataAvatares(!1),!1,o=0;o<=ArrayDelaPropiaSala.length-1;o++){i=o+1,log(!0,"Jugador Temporal "+i),e=DevuelveUbicacionCarta(i);var g=DevuelveUbicacionCarta(SoyElJugador);if(log(!0,"Ha devuelto "+e),PosicionCartas("D"),0,"D"==e&&(t=devuelveX("D_5",0)+150,0==cuatrotres?r=devuelveY("L_0",0)+60:(t=devuelveX("D_5",0)+125,r=devuelveY("L_0",0)+70),n=t+85,l=r-15,d=(c=t+45)+50,s=u=r+15+-10-5),"R"==e){n=(t=0==cuatrotres?devuelveX("D_5",0)+285:devuelveX("R_5",0)-30)-30,l=(r=devuelveY("R_5",0)-110)+10,d=(c=t+-100)-50,s=u=r+25+0}if("U"==e&&(t=devuelveX("D_0",0)+65,0==cuatrotres?r=devuelveY("R_5",0)-110:(r=devuelveY("U_0",0)-50,t=devuelveX("D_0",0)+95),n=t-30,l=r+10,d=(c=t+-100)-50,s=u=r+25+0),"L"==e&&(n=(t=devuelveX("L_0",0)+40)+85,l=(r=0==cuatrotres?devuelveY("L_0",0)+60:devuelveY("L_0",0)+70)-15,d=(c=t+45)+50,s=u=r+15+-10-5),0==o){if(AvatarSprite1.x=t,AvatarSprite1.y=r,AvatarSprite1.revive(),1==ArrayDelaPropiaSala[o].CampeonSemanal&&0==ArrayDelaPropiaSala[o].Desconectado&&(AvatarMedalla1.frameName="medalla",AvatarMedalla1.x=c,AvatarMedalla1.y=u,AvatarMedalla1.revive()),0<ArrayDelaPropiaSala[o].Nivel&&0==ArrayDelaPropiaSala[o].Desconectado&&(AvatarLogro1.frameName=CalculaAvatarLogro(ArrayDelaPropiaSala[o].Nivel,2),AvatarLogro1.x=d,AvatarLogro1.y=s,AvatarLogro1.revive()),textJugador1.x=n,textJugador1.text="",textJugador1.text=ArrayDelaPropiaSala[o].NombreOri,textJugador1.revive(),textJugadorRank1.text="",99999!=ArrayDelaPropiaSala[o].Posicion30?textJugadorRank1.text="P: "+ArrayDelaPropiaSala[o].Posicion30:textJugadorRank1.text="",textJugadorRank1.revive(),ArrayDelaPropiaSala[o].Nombre=ArrayDelaPropiaSala[o].NombreOri,textJugador1.x="U"==e||"R"==e?textJugador1.x-textJugador1.textWidth/2-30:textJugador1.x+textJugador1.textWidth/2-30,textJugador1.y=l,textJugadorRank1.y=l,textJugadorRank1.x=t,textJugadorRank1.y=r-57,null!=Avatar1)try{Avatar1.removeAll()}catch(a){}if(null==Avatar1&&(Avatar1=new Phaser.Loader(game_objeto)),0==ArrayDelaPropiaSala[o].Desconectado)"sin_foto"==ArrayDelaPropiaSala[o].Foto?fileComplete1(!0):(Avatar1.crossOrigin="Anonymous",Avatar1.image("imagen1",ArrayDelaPropiaSala[o].Foto,!0),Avatar1.onFileComplete.add(function(){fileComplete1(!1)}),Avatar1.onFileError.add(function(){fileError1()}),Avatar1.onFileStart.add(function(){fileError1()}),Avatar1.start());else if(e!=g){textJugador1.x=n,textJugador1.text="Ordenador 1",textJugador1.x="U"==e||"R"==e?textJugador1.x-textJugador1.textWidth/2-30:textJugador1.x+textJugador1.textWidth/2-30,textJugador1.y=l,textJugadorRank1.text="",textJugadorRank1.x=t,textJugadorRank1.y=r-57,ArrayDelaPropiaSala[o].Nombre="Ordenador 1";var p="Maquina";AvatarSprite1.x<0&&(AvatarSprite1.x=-1*AvatarSprite1.x,AvatarSprite1.y=-1*AvatarSprite1.y),AvatarSprite1.name=p,AvatarSprite1.loadTexture(p,0),AvatarSprite1.width=AnchoFoto,AvatarSprite1.height=AnchoFoto}}if(1==o){if(AvatarSprite2.x=t,AvatarSprite2.y=r,AvatarSprite2.revive(),1==ArrayDelaPropiaSala[o].CampeonSemanal&&0==ArrayDelaPropiaSala[o].Desconectado&&(AvatarMedalla2.frameName="medalla",AvatarMedalla2.x=c,AvatarMedalla2.y=u,AvatarMedalla2.revive()),0<ArrayDelaPropiaSala[o].Nivel&&0==ArrayDelaPropiaSala[o].Desconectado&&(AvatarLogro2.frameName=CalculaAvatarLogro(ArrayDelaPropiaSala[o].Nivel,2),AvatarLogro2.x=d,AvatarLogro2.y=s,AvatarLogro2.revive()),textJugador2.revive(),textJugador2.x=n,textJugador2.text="",textJugador2.text=ArrayDelaPropiaSala[o].NombreOri,ArrayDelaPropiaSala[o].Nombre=ArrayDelaPropiaSala[o].NombreOri,textJugadorRank2.text="",99999!=ArrayDelaPropiaSala[o].Posicion30?textJugadorRank2.text="P: "+ArrayDelaPropiaSala[o].Posicion30:textJugadorRank2.text="",textJugadorRank2.revive(),textJugador2.x="U"==e||"R"==e?textJugador2.x-textJugador2.textWidth/2-30:textJugador2.x+textJugador2.textWidth/2-30,textJugador2.y=l,textJugadorRank2.x=t,textJugadorRank2.y=r-57,null!=Avatar2)try{Avatar2.removeAll()}catch(a){}if(null==Avatar2&&(Avatar2=new Phaser.Loader(game_objeto)),0==ArrayDelaPropiaSala[o].Desconectado)"sin_foto"==ArrayDelaPropiaSala[o].Foto?fileComplete2(!0):(Avatar2.crossOrigin="Anonymous",Avatar2.image("imagen2",ArrayDelaPropiaSala[o].Foto,!0),Avatar2.onFileComplete.add(function(){fileComplete2(!1)}),Avatar2.onFileError.add(function(){fileError2()}),Avatar2.onFileStart.add(function(){fileError2()}),Avatar2.start());else if(e!=g){textJugador2.x=n,textJugador2.text="Ordenador 2",textJugador2.x="U"==e||"R"==e?textJugador2.x-textJugador2.textWidth/2-30:textJugador2.x+textJugador2.textWidth/2-30,textJugador2.y=l,textJugadorRank2.text="",textJugadorRank2.x=t,textJugadorRank2.y=r-57,ArrayDelaPropiaSala[o].Nombre="Ordenador 2";p="Maquina";AvatarSprite2.x<0&&(AvatarSprite2.x=-1*AvatarSprite2.x,AvatarSprite2.y=-1*AvatarSprite2.y),AvatarSprite2.name=p,AvatarSprite2.loadTexture(p,0),AvatarSprite2.width=AnchoFoto,AvatarSprite2.height=AnchoFoto}}if(2==o){if(AvatarSprite3.x=t,AvatarSprite3.y=r,AvatarSprite3.revive(),1==ArrayDelaPropiaSala[o].CampeonSemanal&&0==ArrayDelaPropiaSala[o].Desconectado&&(AvatarMedalla3.frameName="medalla",AvatarMedalla3.x=c,AvatarMedalla3.y=u,AvatarMedalla3.revive()),0<ArrayDelaPropiaSala[o].Nivel&&0==ArrayDelaPropiaSala[o].Desconectado&&(AvatarLogro3.frameName=CalculaAvatarLogro(ArrayDelaPropiaSala[o].Nivel,2),AvatarLogro3.x=d,AvatarLogro3.y=s,AvatarLogro3.revive()),textJugador3.revive(),textJugador3.x=n,textJugador3.text="",textJugador3.text=ArrayDelaPropiaSala[o].NombreOri,ArrayDelaPropiaSala[o].Nombre=ArrayDelaPropiaSala[o].NombreOri,textJugadorRank3.text="",99999!=ArrayDelaPropiaSala[o].Posicion30?textJugadorRank3.text="P: "+ArrayDelaPropiaSala[o].Posicion30:textJugadorRank3.text="",textJugadorRank3.revive(),textJugador3.x="U"==e||"R"==e?textJugador3.x-textJugador3.textWidth/2-30:textJugador3.x+textJugador3.textWidth/2-30,textJugador3.y=l,textJugadorRank3.x=t,textJugadorRank3.y=r-57,null!=Avatar3)try{Avatar3.removeAll()}catch(a){}if(null==Avatar3&&(Avatar3=new Phaser.Loader(game_objeto)),0==ArrayDelaPropiaSala[o].Desconectado)"sin_foto"==ArrayDelaPropiaSala[o].Foto?fileComplete3(!0):(Avatar3.crossOrigin="Anonymous",Avatar3.image("imagen3",ArrayDelaPropiaSala[o].Foto,!0),Avatar3.onFileComplete.add(function(){fileComplete3(!1)}),Avatar3.onFileError.add(function(){fileError3()}),Avatar3.onFileStart.add(function(){fileError3()}),Avatar3.start());else if(e!=g){textJugador3.x=n,textJugador3.text="Ordenador 3",textJugador3.x="U"==e||"R"==e?textJugador3.x-textJugador3.textWidth/2-30:textJugador3.x+textJugador3.textWidth/2-30,textJugador3.y=l,textJugadorRank3.text="",textJugadorRank3.x=t,textJugadorRank3.y=r-57,ArrayDelaPropiaSala[o].Nombre="Ordenador 3";p="Maquina";AvatarSprite3.x<0&&(AvatarSprite3.x=-1*AvatarSprite3.x,AvatarSprite3.y=-1*AvatarSprite3.y),AvatarSprite3.name=p,AvatarSprite3.loadTexture(p,0),AvatarSprite3.width=AnchoFoto,AvatarSprite3.height=AnchoFoto}}if(3==o){if(AvatarSprite4.x=t,AvatarSprite4.y=r,AvatarSprite4.revive(),1==ArrayDelaPropiaSala[o].CampeonSemanal&&0==ArrayDelaPropiaSala[o].Desconectado&&(AvatarMedalla4.frameName="medalla",AvatarMedalla4.x=c,AvatarMedalla4.y=u,AvatarMedalla4.revive()),0<ArrayDelaPropiaSala[o].Nivel&&0==ArrayDelaPropiaSala[o].Desconectado&&(AvatarLogro4.frameName=CalculaAvatarLogro(ArrayDelaPropiaSala[o].Nivel,2),AvatarLogro4.x=d,AvatarLogro4.y=s,AvatarLogro4.revive()),textJugador4.revive(),textJugador4.x=n,textJugador4.text="",textJugador4.text=ArrayDelaPropiaSala[o].NombreOri,ArrayDelaPropiaSala[o].Nombre=ArrayDelaPropiaSala[o].NombreOri,textJugadorRank4.text="",99999!=ArrayDelaPropiaSala[o].Posicion30?textJugadorRank4.text="P: "+ArrayDelaPropiaSala[o].Posicion30:textJugadorRank4.text="",textJugadorRank4.revive(),textJugador4.x="U"==e||"R"==e?textJugador4.x-textJugador4.textWidth/2-30:textJugador4.x+textJugador4.textWidth/2-30,textJugador4.y=l,textJugadorRank4.x=t,textJugadorRank4.y=r-57,null!=Avatar4)try{Avatar4.removeAll()}catch(a){}if(null==Avatar4&&(Avatar4=new Phaser.Loader(game_objeto)),0==ArrayDelaPropiaSala[o].Desconectado)"sin_foto"==ArrayDelaPropiaSala[o].Foto?fileComplete4(!0):(Avatar4.crossOrigin="Anonymous",Avatar4.image("imagen4",ArrayDelaPropiaSala[o].Foto,!0),Avatar4.onFileComplete.add(function(){fileComplete4(!1)}),Avatar4.onFileError.add(function(){fileError4()}),Avatar4.onFileStart.add(function(){fileError4()}),Avatar4.start());else if(e!=g){textJugador4.x=n,textJugador4.text="Ordenador 4",textJugador4.x="U"==e||"R"==e?textJugador4.x-textJugador4.textWidth/2-30:textJugador4.x+textJugador4.textWidth/2-30,textJugador4.y=l,textJugadorRank4.text="",textJugadorRank4.x=t,textJugadorRank4.y=r-57,ArrayDelaPropiaSala[o].Nombre="Ordenador 4";p="Maquina";AvatarSprite4.x<0&&(AvatarSprite4.x=-1*AvatarSprite4.x,AvatarSprite4.y=-1*AvatarSprite4.y),AvatarSprite4.name=p,AvatarSprite4.loadTexture(p,0),AvatarSprite4.width=AnchoFoto,AvatarSprite4.height=AnchoFoto}}}},consol=function(){log(!1,"a")},onSocketBarajaDesdeServer=function(a,o,e,t){var r=60;timerBarajaRecibida.stop(),timerBarajaRecibida.remove(),timerBarajaRecibida.loop(2e3,function(){--r<=0&&(timerBarajaRecibida.stop(),timerBarajaRecibida.remove()),CompruebaPartidaFinalizada(idPartida,e)&&(ValidaRepartosJugador(e)?(0==vProduccion&&0==vCampeonatoOasis&&MensajeError2("Dando vueltas "+e),BorrarTareasObsoletas(),timerBarajaRecibida.stop(),timerBarajaRecibida.remove(),timerNuevaPartida.stop(),timerNuevaPartida.remove(),CierraPartida(idPartida),idPartida=e,CrearBarajaRecibida(a,o,t)):(timerBarajaRecibida.stop(),timerBarajaRecibida.remove()))}),timerBarajaRecibida.start()},onSocketCantarDesdeServer=function(a,o,e,t){TextoBocadillo(a,e,!0,o,!0,t)},onSocketEnvioPosicionDesdeServer=function(a,o,e,t){log(!1,"Recibiendo posicion de jugador"+a+": "+o+" "+e),MoverCartaAjena(a,o,e,t)},onSocketEnvioCentroDesdeServer=function(a,o,e,t,r,n,l){BloqueoCartaCentro=!0,MoverCentroAjeno(a,o,t,r,n,l)},onSocketCambiar7DesdeServer=function(a,o,e){Cambiar7Ajeno(a,o,!1,!1,e,!1)},onSocketEnviarTextoDesdeServer=function(a,o){TextoBocadillo(o,a,!1,!1,!1,!1)},OcultaPantallaLogin=function(){document.getElementById("Login").style.display="none"},RevivirTextCuentaMundo=function(){TextCuentaMundo.text="",0==ArrayDelaPropiaSala.length?TextCuentaMundo.x=game_objeto.world.centerX+250+TextCuentaMundo.textWidth/2:TextCuentaMundo.x=game_objeto.world.centerX-125+TextCuentaMundo.textWidth/2,TextCuentaMundo.revive()},CierraPantallaLogin=function(){document.getElementById("Login").style.display="none",0==MazoD.length&&0==MazoL.length&&0==MazoR.length&&0==MazoU.length&&(BotonMonoJugador.revive(),BotonMultiJugador.revive(),BotonClasificacion.revive(),BotonContacta.revive(),RevivirTextCuentaMundo(),BotonSalir.kill()),BotonAleatorio.kill(),BotonAmigos.kill(),TextGbits.kill(),TextGbitsIndicador.kill(),BolsaDinero.kill()},ErrorConexion=function(){1==ModoMultijugador&&(FechaIni=new Date(Date.now()),timerturno.stop(),timerturno.remove(),timer.stop(),timer.remove(),QuienTomaElControl=0)},MensajeError=function(a){if(null!=game_objeto){GrupoTextos.removeAll();var o=game_objeto.add.bitmapText(game_objeto.world.centerX,game_objeto.world.centerY-25,"MiFuenteAmarilla","BitmapText",50);o.anchor.set(.5,.5),o.text=a,GrupoTextos.add(o),game_objeto.world.bringToTop(GrupoTextos),o.alpha=1,game_objeto.add.tween(o).to({alpha:0},1500,EfectoTween1,!0,1e3).onComplete.add(function(){o.kill()})}},MensajeError2=function(a){if(null!=game_objeto){GrupoTextos.removeAll();var o=game_objeto.add.bitmapText(game_objeto.world.centerX,game_objeto.world.centerY-25,"MiFuenteAmarilla","BitmapText",24);o.anchor.set(.5,.5),o.text=a,GrupoTextos.add(o),game_objeto.world.bringToTop(GrupoTextos),game_objeto.add.tween(o).to({alpha:0},1500,EfectoTween1,!0,1e3).onComplete.add(function(){o.kill()})}},Salir=function(a){MostrarSalir(a)},SalirConfirmado=function(){CancelarAmigos(),EntradaModoJuego=!1,LimpiarVariables(),LimpiarVariablesConexionNueva(),FuerzaSalir=!0},EliminarColaMensajes=function(a,o){var e,t=!1;for(e=0;e<=ArrayAccionesDesconexiones.length-1;e++)if(ArrayAccionesDesconexiones[e].IdMsg==a){t=!0;break}1==t&&ArrayAccionesDesconexiones.splice(e,1)},MuestraTurno=function(){var a=DevuelveUbicacionCarta(vTurno);1==ModoMultijugador&&0<ArrayDelaPropiaSala.length&&(ObjTurnoD.revive(),ObjTurnoL.revive(),ObjTurnoR.revive(),ObjTurnoU.revive(),"D"==a&&(AnimacionTurnoON(ObjTurnoD),AnimacionTurnoOFF(ObjTurnoL),AnimacionTurnoOFF(ObjTurnoR),AnimacionTurnoOFF(ObjTurnoU)),"U"==a&&(AnimacionTurnoON(ObjTurnoU),AnimacionTurnoOFF(ObjTurnoL),AnimacionTurnoOFF(ObjTurnoR),AnimacionTurnoOFF(ObjTurnoD)),"L"==a&&(AnimacionTurnoON(ObjTurnoL),AnimacionTurnoOFF(ObjTurnoU),AnimacionTurnoOFF(ObjTurnoR),AnimacionTurnoOFF(ObjTurnoD)),"R"==a&&(AnimacionTurnoON(ObjTurnoR),AnimacionTurnoOFF(ObjTurnoU),AnimacionTurnoOFF(ObjTurnoL),AnimacionTurnoOFF(ObjTurnoD)))},AnimacionTurnoON=function(a){var o="";if(1==PartidaComenzada&&1==ModoMultijugador){switch(Triunfo){case"oros":o="color_oros";break;case"copas":o="color_copas";break;case"espadas":o="color_espadas";break;case"bastos":o="color_bastos"}a.frameName=o,a.revive()}},AnimacionTurnoOFF=function(a){a.kill()},DibujaTurnos=function(){var a,o,e=devuelveX("U_C",0)-AnchoCarta,t=devuelveY("U_C",0)+AltoCarta/2+vSeparacion;PosicionCartas("D"),1==cuatrotres&&(t+=15),null==ObjTurnoU&&(a=devuelveX("D_0",0)+65,0==cuatrotres?o=devuelveY("R_5",0)-110:(o=devuelveY("U_0",0)-50,a=devuelveX("D_0",0)+95),(ObjTurnoU=game_objeto.add.image(e,t,"general","imagen_turno")).width=28,ObjTurnoU.height=28,ObjTurnoU.anchor.setTo(.5,.5),ObjTurnoU.x=a,ObjTurnoU.y=o),ObjTurnoU.kill();e=devuelveX("L_C",0)+AnchoCarta,t=devuelveY("L_C",0);1==cuatrotres&&(e+=15),null==ObjTurnoL&&(a=devuelveX("L_0",0)+40,o=0==cuatrotres?devuelveY("L_0",0)+60:devuelveY("L_0",0)+70,(ObjTurnoL=game_objeto.add.image(e,t,"general","imagen_turno")).width=28,ObjTurnoL.height=28,ObjTurnoL.anchor.setTo(.5,.5),ObjTurnoL.x=a,ObjTurnoL.y=o),ObjTurnoL.kill();e=devuelveX("R_C",0)-AnchoCarta,t=devuelveY("L_C",0);1==cuatrotres&&(e-=15),null==ObjTurnoR&&(a=0==cuatrotres?devuelveX("D_5",0)+285:devuelveX("R_5",0)-30,o=devuelveY("R_5",0)-110,(ObjTurnoR=game_objeto.add.image(e,t,"general","imagen_turno")).width=28,ObjTurnoR.height=28,ObjTurnoR.anchor.setTo(.5,.5),ObjTurnoR.x=a,ObjTurnoR.y=o),ObjTurnoR.kill();e=devuelveX("U_C",0)-AnchoCarta,t=game_objeto.world.height-AnchoCartaEscalado-AltoCartaEscalado+vSeparacion;null==ObjTurnoD&&(a=devuelveX("D_5",0)+150,0==cuatrotres?o=devuelveY("L_0",0)+60:(a=devuelveX("D_5",0)+125,o=devuelveY("L_0",0)+70),(ObjTurnoD=game_objeto.add.image(e,t,"general","imagen_turno")).width=28,ObjTurnoD.height=28,ObjTurnoD.anchor.setTo(.5,.5),ObjTurnoD.x=a,ObjTurnoD.y=o),ObjTurnoD.kill()},Denunciar=function(){if(1==EstoyConectado()&&null!=idPartida&&null!=idPartida&&0<ArrayDelaPropiaSala.length){var a=EscribirTextoGuay("Revisaremos la partida. ¡Gracias!",40);a.alpha=1,game_objeto.add.tween(a).to({alpha:0},1e3,EfectoTween1,!0,1e3).onComplete.add(function(){a.kill()});try{socket.emit("enviar_denuncia",ArrayDelaPropiaSala[SoyElJugador-1].JugadorFull,idPartida,ArrayDelaPropiaSala[SoyElJugador-1].Sala,ArrayDelaPropiaSala[SoyElJugador-1].Amigo)}catch(a){}}},EnviarGPRD_OK=function(){if(1==EstoyConectado())try{socket.emit("confirmar_gprd",ArrayInfoJugador[0].JugadorFull)}catch(a){}},CalculaTiempoContador=function(){var a;return a=(1==vRonda&&MazoCentral.length,Tiempoturno),1!=vRonda&&(a=Tiempoturno),1==vNoEsta&&(a=5),10==vRonda&&(a=1),1==Rapido&&(a=.2),a},FReconectando=function(){return 0<ArrayTareas.length||0<ArrayBloqueoTareas.length},SuperOrganizador=function(a){var o,e,t=1e3,r=!1;if(0==DetenerIA&&0==FReconectando()){if(MuestraTurno(),0==ModoMultijugador)1==FinalizandoPartida?NuevaPartida(vTurnoConsumido,!1):vTurno!=SoyElJugador&&(r=!0);else if(1==FinalizandoPartida)NuevaPartida(vTurnoConsumido,!1);else if(vTurno==SoyElJugador){if(0==timerturno.duration.toFixed(0)){o=0<TiempoAntesDesconexion?TiempoAntesDesconexion:CalculaTiempoContador(),1==Rapido&&(t=200),log(!1,"VECES QUE PONE EL RELOJ");1==PartidaComenzada&&(timerturno.loop(t,function(){vTurno!=SoyElJugador&&(timerturno.stop(),timerturno.remove()),null!=textoContador&&(textoContador.revive(),textoContador.text=""),Tiempoturno<o?textoContador.text="":1==PartidaComenzada&&0==DetenerIA&&0==FReconectando()&&(textoContador.text="Es mi turno "+o),o<=0&&0==DetenerIA&&0==FReconectando()?(textoContador.text="",textoContador.kill(),timer.stop(),timer.remove(),timerturno.stop(),timerturno.remove(),0==DetenerIA&&0==FReconectando()&&LlamadaIA(vTurno,vRonda,idPartida),vNoEsta=!0,TiempoAntesDesconexion=0):TiempoAntesDesconexion=o-=1}),timerturno.start())}}else for(e=0;e<=ArrayJugadoresDesconectados.length-1;e++)if(vTurno==ArrayJugadoresDesconectados[e].Jugador&&SoyElJugador==QuienTomaElControl&&1==PartidaComenzada){r=!0;break}1==r&&LlamadaIA(vTurno,vRonda,idPartida)}BloqueoOrganizador=!1},LlamadaIA=function(a,o,e){TiempoPensarTirada=TiempoPensar(vTurno),timer.stop(),timer.remove(),timer.add(TiempoPensarTirada,function(){timer.stop(),timer.remove(),0==FReconectando()&&IA(a,o,e)}),timer.start()},ReproducirSonido=function(a){var o,e=!1,t="";switch(a){case"_NoSube":(o=Math.floor(10*Math.random())+1)<=4&&(t="SndNoSube"),5==o&&(t="SndNano"),0==SonidoChascarrillos&&(t="");break;case"_Reparto":t="SndReparto",0==SonidoCartas&&(t="");break;case"_Mesa":t="SndMesa",0==SonidoCartas&&(t="");break;case"_Oros":t="Snd20Oros",0==SonidoCantes&&(t="");break;case"_Copas":t=1==(o=Math.floor(4*Math.random())+1)?"Snd20Copas2":"Snd20Copas",0==SonidoCantes&&(t="");break;case"_Espadas":t="Snd20Espadas",0==SonidoCantes&&(t="");break;case"_Bastos":t="Snd20Bastos",0==SonidoCantes&&(t="");break;case"_Veinte":t="Snd20",0==SonidoCantes&&(t="");break;case"_Las40":t=1==(o=Math.floor(2*Math.random())+1)?"SndLas40":"SndLas40_2",0==SonidoCantes&&(t="");break;case"_Idas":t=1==(o=Math.floor(2*Math.random())+1)?"SndIdas":"SndIdas2",0==SonidoChascarrillos&&(t="");break;case"_Vueltas":t=1==(o=Math.floor(2*Math.random())+1)?"SndVueltas":"SndVueltas2",0==SonidoChascarrillos&&(t="");break;case"_Arrastro":1==(o=Math.floor(2*Math.random())+1)&&(t="SndArrastro"),2==o&&(t="SndArrastro_2"),0==SonidoChascarrillos&&(t="");break;case"_Bocarrana":1==(o=Math.floor(4*Math.random())+1)&&(t="SndBocarrana"),2==o&&(t="SndMataBocarrana"),0==SonidoChascarrillos&&(t="");break;case"_Primo":1==(o=Math.floor(3*Math.random())+1)&&(t="SndPrimo"),0==SonidoChascarrillos&&(t="");break;case"_Gafas":1==(o=Math.floor(3*Math.random())+1)&&(t="SndGafas"),0==SonidoChascarrillos&&(t="");break;case"_Campeones":1==(o=Math.floor(10*Math.random())+1)&&(t="SndFueraMesa"),2==o&&(t="SndClases"),3==o&&(t="SndMejor"),4==o&&(t="SndGenial"),5==o&&(t="SndArtista"),6==o&&(t="SndToco"),7<=o&&(t="SndCampeones"),0==SonidoChascarrillos&&(t="");break;case"_Contar":t=(o=Math.floor(4*Math.random())+1)<=3?"SndContar":"SndTuCuenta",0==SonidoChascarrillos&&(t="");break;case"_CotoTerminado":t="SndCotoTerminado",0==SonidoChascarrillos&&(t="");break;case"_Espadilla":(o=Math.floor(10*Math.random())+1)<=7&&0==e&&(t="SndEspadilla",e=!0),o<=8&&0==e&&(t="SndHabiendoPan",e=!0),o<=9&&0==e&&(t="SndPuntos",e=!0),o<=10&&0==e&&(t="SndPajaro",e=!0),0==SonidoChascarrillos&&(t="");break;case"_Ore":(o=Math.floor(10*Math.random())+1)<=7&&0==e&&(t="SndOre",e=!0),o<=8&&0==e&&(t="SndHabiendoPan",e=!0),o<=9&&0==e&&(t="SndPuntos",e=!0),o<=10&&0==e&&(t="SndPajaro",e=!0),0==SonidoChascarrillos&&(t="");break;case"_OtraVezSera":0==MarcadorPartidasNuestro&&1==MarcadorPartidasRival&&(1==(o=Math.floor(3*Math.random())+1)&&(t="SndPrimeraChicos"),2==o&&(t="SndAPorEllos"),3==o&&(t="SndSindicato"),e=!0),0==MarcadorPartidasNuestro&&2==MarcadorPartidasRival&&(t="SndToro",e=!0),1==(o=Math.floor(3*Math.random())+1)&&0==e&&(t="SndOtraVezSera",e=!0),2==o&&0==e&&(t="SndAPorEllos",e=!0),3==o&&0==e&&(t="SndChiflar",e=!0),0==SonidoChascarrillos&&(t="");break;case"_Tabazo":1==(o=Math.floor(2*Math.random())+1)&&(t="SndTabazo"),2==o&&(t="SndTabazo_2"),0==SonidoChascarrillos&&(t="");break;case"_HayPROS":t=1==(o=Math.floor(4*Math.random())+1)?"SndSientate":"SndHayPros",0==SonidoChascarrillos&&(t="");break;case"_HayProfesionales":1==(o=Math.floor(8*Math.random())+1)&&(t="SndSientate"),2==o&&(t="SndProfesionales"),0==SonidoChascarrillos&&(t="");break;case"_Oficio":(o=Math.floor(4*Math.random())+1)<=2&&0==e&&(t="SndOficio",e=!0),3==o&&0==e&&(t="SndTabazo",e=!0),4==o&&0==e&&(t="SndTabazo_2",e=!0),0==SonidoChascarrillos&&(t="");break;case"_MatanzaCaballo":1==(o=Math.floor(5*Math.random())+1)&&(t="SndMatanzaCaballo"),2==o&&(t="SndCaballoEncimador"),0==SonidoChascarrillos&&(t="");break;case"_Ultimas":t="SndUltimas",0==SonidoCantes&&(t="");break;case"_Grano":1==(o=Math.floor(2*Math.random())+1)&&(t="SndGrano"),0==SonidoChascarrillos&&(t="");break;case"_Puntos_menos15":(o=Math.floor(7*Math.random())+1)<=3&&0==e&&(t="SndPuntos",e=!0),o<=6&&0==e&&(t="SndHabiendoPan",e=!0),o<=7&&0==e&&(t="SndPajaro",e=!0),0==SonidoChascarrillos&&(t="");break;case"_Puntos_mas15":(o=Math.floor(10*Math.random())+1)<=3&&0==e&&(t="SndPuntos",e=!0),o<=6&&0==e&&(t="SndQuinceMas",e=!0),o<=9&&0==e&&(t="SndHabiendoPan",e=!0),o<=10&&0==e&&(t="SndPajaro",e=!0),0==SonidoChascarrillos&&(t="");break;case"_Chatarrero":1==(o=Math.floor(6*Math.random())+1)&&(t="SndChatarrero"),2==o&&(t="SndDar"),3==o&&(t="SndTaustano"),0==SonidoChascarrillos&&(t="");break;case"_Suerte":1==(o=Math.floor(20*Math.random())+1)&&(t="SndGorrion"),2==o&&(t="SndGrijan"),3==o&&(t="SndMonja"),4==o&&(t="SndArrancao"),5==o&&(t="SndNoSabes"),6==o&&(t="SndPensar"),0==SonidoChascarrillos&&(t="");break;case"_Escupe":1==(o=Math.floor(2*Math.random())+1)&&(t="SndEscupe"),0==SonidoChascarrillos&&(t="");break;case"_GuinoteOtro":1==(o=Math.floor(1*Math.random())+1)&&(t="SndGuinoteOtro"),0==SonidoChascarrillos&&(t="");break;case"_Faldas":1==(o=Math.floor(2*Math.random())+1)&&(t="SndFaldas"),0==SonidoChascarrillos&&(t="")}Reproduce(t)},Reproduce=function(Reproduccion){var lAudioTag=!1,SO="";if(""!=Reproduccion&&1==vSonidoOn){if(lAudioTag=game_objeto.sound.usingAudioTag,window.plugins)try{SO=device.platform}catch(a){SO="Android"}if(window.plugins&&window.plugins.NativeAudio&&1==lAudioTag||"IOS"==SO.toUpperCase())window.plugins.NativeAudio.play(Reproduccion);else try{eval(Reproduccion).play()}catch(a){}}},ArreglaReversos=function(){var a;try{for(a=0;a<=MazoL.length-1;a++)MostrarReverso(MazoL[a].cartilla);for(a=0;a<=MazoR.length-1;a++)MostrarReverso(MazoR[a].cartilla);for(a=0;a<=MazoU.length-1;a++)MostrarReverso(MazoU[a].cartilla)}catch(a){}},MueveAlTablero=function(a,o,e,t,r){if(TiempoAntesDesconexion=0,PuntosFin(),1==ModoMultijugador&&(timerturno.stop(),timerturno.remove(),timer.stop(),timer.remove(),textoContador.text=""),GrupoCentral.add(a),PosicionCartas(o),"D"==o)var n=posX_D,l=posY_D,i=a.angle+posAngle_D;if("U"==o)n=posX_U,l=posY_U,i=a.angle+posAngle_U;if("L"==o)n=posX_L,l=posY_L,i=a.angle+posAngle_L;if("R"==o)n=posX_R,l=posY_R,i=a.angle+posAngle_R;DesHabilitarClick(a),ReproducirSonido("_Mesa");try{(tw1=game_objeto.add.tween(a)).to({x:n,y:l,angle:i},vVelocidadCartasReordernar,EfectoTween1,!1),tw1.onComplete.add(function(){log(!0,"MUEVE AL TABLERO: VA A LLAMAR A QUIEN GANA MANO "+t),QuienGanaMano(e,t,r)})}catch(a){}0==cuatrotres?game_objeto.add.tween(a.scale).to({x:1,y:1},vVelocidadCartas,EfectoTween2,!0):game_objeto.add.tween(a.scale).to({x:1.2,y:1.2},vVelocidadCartas,EfectoTween2,!0),tw1.start(),a.bringToTop()},DeboAceptar=function(a,o){return a==vRonda&&o==vTurno},QuienGanaMano=function(a,o,e){var t,r,n,l,i,d,s,c=0;null==a?(log(!0,"vRonda Recibida por m� mismo "+vRonda+" Jugador: "+SoyElJugador),i=vRonda,s=SoyElJugador):(log(!0,"vRonda Recibida por par�metro "+a+" Jugador: "+o),i=a,s=o),PuntosFin();if(MazoCentral.length,4<=MazoCentral.length){for(log(!0,"DEBE LIMPIAR MESA"),timer.stop(),timer.remove(),BloquearTirada=!0,3==(i=vRonda)&&(MensajeError("¡¡ de últimas !!"),ReproducirSonido("_Ultimas")),d=0;d<=3;d++)0==d&&(t=MazoCentral[d].valorReal,n=MazoCentral[d].palo,r=MazoCentral[d].jugador,l=MazoCentral[d].cartilla),(MazoCentral[d].valorReal>t&&MazoCentral[d].palo==n||MazoCentral[d].palo==Triunfo&&n!=Triunfo)&&(t=MazoCentral[d].valorReal,n=MazoCentral[d].palo,r=MazoCentral[d].jugador,l=MazoCentral[d].cartilla),c+=MazoCentral[d].valorPuntuacion;var u;if(vTurnoConsumido=vTurno=r,s=vTurno,MuestraTurno(),log(!0,"vTurno VA GANANDO "+vTurno),1==SoyElJugador&&(1==r&&(BazaNuestraGlobal=!0),2==r&&(BazaNuestraGlobal=!1),3==r&&(BazaNuestraGlobal=!0),4==r&&(BazaNuestraGlobal=!1)),2==SoyElJugador&&(2==r&&(BazaNuestraGlobal=!0),3==r&&(BazaNuestraGlobal=!1),4==r&&(BazaNuestraGlobal=!0),1==r&&(BazaNuestraGlobal=!1)),3==SoyElJugador&&(3==r&&(BazaNuestraGlobal=!0),4==r&&(BazaNuestraGlobal=!1),1==r&&(BazaNuestraGlobal=!0),2==r&&(BazaNuestraGlobal=!1)),4==SoyElJugador&&(4==r&&(BazaNuestraGlobal=!0),1==r&&(BazaNuestraGlobal=!1),2==r&&(BazaNuestraGlobal=!0),3==r&&(BazaNuestraGlobal=!1)),u=1==BazaNuestraGlobal?ActualizaMarcador("N",c,e):ActualizaMarcador("R",c,e),log(!0,"Marcador QuienGanaMano: "+MarcadorNuestro+" "+MarcadorRival+" "+u),1==u)if(DesHabilitarClick(l),21<=c&&11==MazoCentral[3].valorPuntuacion&&r==MazoCentral[3].jugador)if(3!=vRonda&&(11==MazoCentral[3].valorPuntuacion&&10==MazoCentral[2].valorPuntuacion&&MazoCentral[3].palo==MazoCentral[2].palo&&MazoCentral[2].palo==Triunfo?ReproducirSonido("_Oficio"):ReproducirSonido("_Tabazo")),0==FReconectando()){var g=game_objeto.world.width+100,p=game_objeto.world.height+100;game_objeto.world.setBounds(-50,-50,g,p),game_objeto.world.camera.position.set(0,0);var M={x:game_objeto.camera.x-30},v=Phaser.Easing.Bounce.InOut,h=game_objeto.add.tween(game_objeto.camera).to(M,50,v,!1,0,5,!0);h.onComplete.addOnce(function(){quakeEnd(),tw5=game_objeto.add.tween(l.scale),tw5.to({x:vEscalaGanadora,y:vEscalaGanadora},vVelocidadCartasReordernar,EfectoTween1,!1,TiempoCartaGanadora),log(!1,"�LAS HARA PEQUE�AS?"),tw5.onComplete.add(function(){EfectosHacerPequenas(i,s,e),l.bringToTop()}),tw5.start()}),h.start(),navigator.vibrate&&window.navigator.vibrate(300)}else EfectosHacerPequenas(i,s,e),l.bringToTop();else{var m=!1;r==MazoCentral[3].jugador&&2==MazoCentral[3].valorPuntuacion&&(vRonda<3||4==vRonda)&&c<=10&&(ReproducirSonido("_MatanzaCaballo"),m=!0),r==MazoCentral[3].jugador&&11==MazoCentral[3].valorPuntuacion&&(vRonda<3||4==vRonda)&&"oros"==MazoCentral[3].palo&&0==m&&(ReproducirSonido("_Ore"),m=!0),r==MazoCentral[3].jugador&&11==MazoCentral[3].valorPuntuacion&&(vRonda<3||4==vRonda)&&"espadas"==MazoCentral[3].palo&&0==m&&(ReproducirSonido("_Espadilla"),m=!0),r==MazoCentral[3].jugador&&10<=MazoCentral[3].valorPuntuacion&&c<=20&&11<c&&(vRonda<3||4==vRonda)&&0==m&&0==SonVueltas&&(c<15?ReproducirSonido("_Puntos_menos15"):ReproducirSonido("_Puntos_mas15"),m=!0),r==MazoCentral[3].jugador&&MazoCentral[0].valorPuntuacion<10&&MazoCentral[1].valorPuntuacion<10&&MazoCentral[2].valorPuntuacion<10&&MazoCentral[3].valorPuntuacion<10&&8<=c&&(vRonda<3||4==vRonda)&&0==m&&4!=vRonda&&0==SonVueltas&&(ReproducirSonido("_Chatarrero"),m=!0),(r==MazoCentral[0].jugador||r==MazoCentral[2].jugador)&&10<=MazoCentral[3].valorPuntuacion&&5<=vRonda&&0==m&&(ReproducirSonido("_Escupe"),m=!0),(SoyElJugador==MazoCentral[1].jugador&&1==BazaNuestraGlobal&&2<=MazoCentral[3].valorPuntuacion&&MazoCentral[3].valorPuntuacion<=4&&(vRonda<3||4==vRonda)||SoyElJugador==MazoCentral[3].jugador&&1==BazaNuestraGlobal&&2<=MazoCentral[3].valorPuntuacion&&MazoCentral[3].valorPuntuacion<=4&&(vRonda<3||4==vRonda))&&0==m&&(ReproducirSonido("_Grano"),m=!0),2!=vRonda&&4!=vRonda||0!=m||(ReproducirSonido("_Suerte"),m=!0),tw5=game_objeto.add.tween(l.scale),tw5.to({x:vEscalaGanadora,y:vEscalaGanadora},vVelocidadCartasReordernar,EfectoTween1,!1,TiempoCartaGanadora),log(!1,"�LAS HARA PEQUE�AS?"),tw5.onComplete.add(function(){EfectosHacerPequenas(i,s,e),l.bringToTop()}),tw5.start()}}else{if(BloqueoCartaCentro=!1,0<MazoCentral.length){m=!1;log(!0,"REAL "+MazoCentral[MazoCentral.length-1].valorReal+" "+MazoCentral[MazoCentral.length-1].palo),NumeroTriunfos(MazoD)<=1&&vRonda<=1&&vTurno==SoyElJugador&&0==SonVueltas&&(ReproducirSonido("_NoSube"),m=!0),5==MazoCentral[MazoCentral.length-1].valorReal&&"bastos"==MazoCentral[MazoCentral.length-1].palo&&vRonda<=4&&(ReproducirSonido("_Bocarrana"),m=!0),6==MazoCentral[MazoCentral.length-1].valorReal&&"bastos"==MazoCentral[MazoCentral.length-1].palo&&vRonda<=4&&(ReproducirSonido("_Primo"),m=!0),2==MazoCentral[MazoCentral.length-1].valorReal&&"oros"==MazoCentral[MazoCentral.length-1].palo&&vRonda<=4&&(ReproducirSonido("_Gafas"),m=!0),2==MazoCentral.length&&10<=MazoCentral[0].valorPuntuacion&&MazoCentral[0].palo!=Triunfo&&10<=MazoCentral[1].valorPuntuacion&&MazoCentral[1].palo!=Triunfo&&vRonda<=4&&0==m&&(ReproducirSonido("_GuinoteOtro"),m=!0),2==MazoCentral[MazoCentral.length-1].valorPuntuacion&&MazoCentral[MazoCentral.length-1].palo==Triunfo&&5<=vRonda&&0==m&&(ReproducirSonido("_Faldas"),m=!0),1==MazoCentral.length&&(MazoCentral[0].palo!=Triunfo&&11!=MazoCentral[0].valorPuntuacion||5!=vRonda||ReproducirSonido("_Arrastro"))}CalculaTurno(i),log(!0,"CAMBIO vTurno A"+vTurno),0==ModoMultijugador?SuperOrganizador():Recuperarse(e,!1,!1)}ColorManoPosibles(),MostrarOcultarBotonCante()},EstaConectado=function(a){var o,e=!0;for(o=0;o<=ArrayJugadoresDesconectados.length-1;o++)if(a==ArrayJugadoresDesconectados[o].Jugador){e=!1;break}return e},TiempoPensar=function(a){var o;return o=(EstaConectado(a),TiempoIA),(4<=MazoCentral.length||4<=MazoCentral.length)&&vRonda<=3&&(o+=2e3),1==Rapido&&(o=200),o},CalculaTurno=function(a){timerturno.stop(),timerturno.remove(),timer.stop(),timer.remove(),4==vTurno?vTurno=1:vTurno++,SuperOrganizador(),MuestraTurno()},EfectosHacerPequenas=function(a,o,e){var t;for(t=0;t<=MazoD.length-1;t++)MazoD[t].cartilla.tint=Phaser.Color.getColor(255,255,255);1<=MazoCentral.length&&(DesHabilitarClick(MazoCentral[0].cartilla),MazoCentral[0].cartilla.alpha=1,(twPeq1=game_objeto.add.tween(MazoCentral[0].cartilla.scale)).to({x:vEscalaPequenas,y:vEscalaPequenas},vVelocidadCartasReordernar,EfectoTween1,!1,TiempoCartaGanadora),twPeq1.onComplete.add(function(){EfectosRecogerCartas1(e)}),twPeq1.start()),2<=MazoCentral.length&&(DesHabilitarClick(MazoCentral[1].cartilla),MazoCentral[1].cartilla.alpha=1,(twPeq2=game_objeto.add.tween(MazoCentral[1].cartilla.scale)).to({x:vEscalaPequenas,y:vEscalaPequenas},vVelocidadCartasReordernar,EfectoTween1,!1,TiempoCartaGanadora),twPeq2.onComplete.add(function(){EfectosRecogerCartas2(e)}),twPeq2.start()),3<=MazoCentral.length&&(DesHabilitarClick(MazoCentral[2].cartilla),MazoCentral[2].cartilla.alpha=1,(twPeq3=game_objeto.add.tween(MazoCentral[2].cartilla.scale)).to({x:vEscalaPequenas,y:vEscalaPequenas},vVelocidadCartasReordernar,EfectoTween1,!1,TiempoCartaGanadora),twPeq3.onComplete.add(function(){EfectosRecogerCartas3(e)}),twPeq3.start()),4<=MazoCentral.length&&(DesHabilitarClick(MazoCentral[3].cartilla),MazoCentral[3].cartilla.alpha=1,(twPeq4=game_objeto.add.tween(MazoCentral[3].cartilla.scale)).to({x:vEscalaPequenas,y:vEscalaPequenas},vVelocidadCartasReordernar,EfectoTween1,!1,TiempoCartaGanadora),twPeq4.onComplete.add(function(){EfectosRecogerCartas4(a,o,e)}),twPeq4.start())},EliminarDeLaMesa=function(a,o){if(BloqueoCartaCentro=!1,PuntosFin(),log(!1,"Se mete en EliminarDeLaMesa"),MazoCentral.splice(0,4),vRonda++,DesbloquearTirada(),Recuperarse(o,!1,!1),0==ModoMultijugador){TiempoPensar(vTurno);SuperOrganizador()}1==ModoMultijugador&&ColorManoPosibles(),0==SonVueltas&&0==MazoD.length&&0==FinalizandoPartida&&RondaFinalizada(o),MostrarOcultarBotonCante()},onSocketEnviarEmoticonosDesdeServer=function(a,o,e){var t,r,n,l,i,d,s;"U"==(s=DevuelveUbicacionCarta(a))&&(n=game_objeto.world.centerX,i=0),"R"==s&&(n=game_objeto.world.width,i=game_objeto.world.centerY),"L"==s&&(n=0,i=game_objeto.world.centerY),"D"==s&&(n=game_objeto.world.centerX,i=game_objeto.world.height),"U"==(s=DevuelveUbicacionCarta(o))&&(l=game_objeto.world.centerX,d=140),"R"==s&&(l=game_objeto.world.width-140,d=game_objeto.world.centerY),"L"==s&&(l=140,d=game_objeto.world.centerY),"D"==s&&(l=game_objeto.world.centerX,d=game_objeto.world.height-200);var c=game_objeto.add.image(n,i,e);c.anchor.setTo(.5,.5),1==(r=Math.floor(3*Math.random())+1)&&(t=Phaser.Easing.Bounce.Out,game_objeto.add.tween(c).to({x:l,y:d},900,t,!0)),2==r&&(t=Phaser.Easing.Sinusoidal.InOut,game_objeto.add.tween(c).to({x:l,y:d},900,t,!0)),3==r&&(t=Phaser.Easing.Linear.None,game_objeto.add.tween(c).to({x:l,y:d},900,t,!0)),1==Math.floor(5*Math.random())+1<=2&&1!=r&&game_objeto.add.tween(c).to({angle:360},900,Phaser.Easing.Cubic.In,!0,100,0),c.scale.setTo(.1,.1),c.bringToTop(),game_objeto.add.tween(c.scale).to({x:.3,y:.3},900,Phaser.Easing.Linear.None,!0,1e3).onComplete.add(function(){c.bringToTop(),c.kill()})},CalculaQuienEmoticono=function(a,o){var e=0;return 1==a&&(1==o&&(e=2),2==o&&(e=3),3==o&&(e=4)),2==a&&(1==o&&(e=1),2==o&&(e=3),3==o&&(e=4)),3==a&&(1==o&&(e=1),2==o&&(e=2),3==o&&(e=4)),4==a&&(1==o&&(e=1),2==o&&(e=2),3==o&&(e=3)),e},EnviarEmoticonoTodos=function(){var a,o,e="Emoticono1";if((o=document.getElementById("JugadorEmoti1")).checked){a=CalculaQuienEmoticono(SoyElJugador,1);try{socket.emit("enviar_emoticono",SoyElJugador,a,e,Habitacion)}catch(a){}o.checked=!1}if((o=document.getElementById("JugadorEmoti2")).checked){4<(a=CalculaQuienEmoticono(SoyElJugador,2))&&(a-=4);try{socket.emit("enviar_emoticono",SoyElJugador,a,e,Habitacion)}catch(a){}o.checked=!1}if((o=document.getElementById("JugadorEmoti3")).checked){4<(a=CalculaQuienEmoticono(SoyElJugador,3))&&(a-=4);try{socket.emit("enviar_emoticono",SoyElJugador,a,e,Habitacion)}catch(a){}o.checked=!1}OcultarElegirEmoticono()},EnviarEmoticono=function(a){1==a?EnviarEmoticonoTodos():OcultarElegirEmoticono()},ValidaMovimientoJugador=function(a,o,e){return!0},TurnoYaPasado=function(a,o,e){return!1},ValidaRepartosJugador=function(a){var o,e=!0;for(o=0;o<=SemaforoRepartos.length-1;o++)if(SemaforoRepartos[o]==a){e=!1;break}return 1==e&&SemaforoRepartos.push(a),e},VerificaRepartosJugador=function(a){var o,e=!0;for(o=0;o<=SemaforoRepartos.length-1;o++)if(SemaforoRepartos[o]==a){e=!1;break}return e},ValidaTextoPuntuacionJugador=function(){var a,o=!1;for(a=0;a<=SemaforoTextoPuntuacion.length-1;a++)SemaforoTextoPuntuacion[a].idPartida==idPartida&&1==SemaforoTextoPuntuacion[a].estado&&(o=!0,SemaforoTextoPuntuacion[a].estado=2);return o},FinalizaTextoPuntuacionJugador=function(){var a;for(a=0;a<=SemaforoTextoPuntuacion.length-1;a++)SemaforoTextoPuntuacion[a].idPartida==idPartida&&(SemaforoTextoPuntuacion[a].estado=3)},CompruebaPartidaFinalizada=function(a,o){var e,t=!1;if(a!=o){if(0==SemaforoTextoPuntuacion.length)t=!0;else for(e=0;e<=SemaforoTextoPuntuacion.length-1;e++)if(SemaforoTextoPuntuacion[e].idPartida==a&&3==SemaforoTextoPuntuacion[e].estado){t=!0;break}1==t&&SemaforoTextoPuntuacion.push(new ObjetoPartida(o,1))}return t},CierraPartida=function(a){var o;for(o=0;o<=SemaforoTextoPuntuacion.length-1;o++)if(SemaforoTextoPuntuacion[o].idPartida==a&&3==SemaforoTextoPuntuacion[o].estado){SemaforoTextoPuntuacion[o].estado=4;break}},CompruebaPeticionReparto=function(a){var o,e=!1;if(0==SemaforoTextoPuntuacion.length)e=!0;else for(o=0;o<=SemaforoTextoPuntuacion.length-1;o++)if(SemaforoTextoPuntuacion[o].idPartida==a&&3==SemaforoTextoPuntuacion[o].estado){e=!0;break}return e},MazoOBuffer=function(a,o,e){return vTurno==a&&(vRonda==o&&MazoCentral.length<=3)},OrganizarManoMueveCentro=function(a,o,e,t,r,n,l,i){var d,s=!1;if(idPartida==l)for(d=0;d<=a.length-1;d++)if(a[d].cartilla.name==e){s=!0,MazoCentral.length<=3&&1==MazoOBuffer(t,r)?(MazoCentral.push(new Carta(a[d].palo,a[d].idCarta,a[d].valor,a[d].cartilla,null,t,null,n,a[d].idPartida)),OcultarBotones(),MazoCentral.length,log(!0,"CREO QUE SE METE AQUI PARA MOVEL AL TABLERO "+t),MostrarAnverso(a[d].cartilla),MueveAlTablero(a[d].cartilla,o,r,t,i),a.splice(d,1)):s=!1;break}if(0==s){var c=game_objeto.time.create(!0);c.add(2e3,function(){DesbloquearID(i),Recuperarse(i,!0,!1)}),c.start()}ReubicarCartas(a,o)},OrganizarManoMueveCentroVerifica=function(a,o,e,t,r,n,l,i){var d,s=!1;if(idPartida==l)for(d=0;d<=a.length-1;d++)a[d].cartilla.name==e&&(s=!0);return s},MoverCentroAjeno=function(a,o,e,t,r,n){1==SoyElJugador&&(1==a&&OrganizarManoMueveCentro(MazoD,"D",o,a,e,t,r,n),2==a&&OrganizarManoMueveCentro(MazoR,"R",o,a,e,t,r,n),3==a&&OrganizarManoMueveCentro(MazoU,"U",o,a,e,t,r,n),4==a&&OrganizarManoMueveCentro(MazoL,"L",o,a,e,t,r,n)),2==SoyElJugador&&(2==a&&OrganizarManoMueveCentro(MazoD,"D",o,a,e,t,r,n),3==a&&OrganizarManoMueveCentro(MazoR,"R",o,a,e,t,r,n),4==a&&OrganizarManoMueveCentro(MazoU,"U",o,a,e,t,r,n),1==a&&OrganizarManoMueveCentro(MazoL,"L",o,a,e,t,r,n)),3==SoyElJugador&&(3==a&&OrganizarManoMueveCentro(MazoD,"D",o,a,e,t,r,n),4==a&&OrganizarManoMueveCentro(MazoR,"R",o,a,e,t,r,n),1==a&&OrganizarManoMueveCentro(MazoU,"U",o,a,e,t,r,n),2==a&&OrganizarManoMueveCentro(MazoL,"L",o,a,e,t,r,n)),4==SoyElJugador&&(4==a&&OrganizarManoMueveCentro(MazoD,"D",o,a,e,t,r,n),1==a&&OrganizarManoMueveCentro(MazoR,"R",o,a,e,t,r,n),2==a&&OrganizarManoMueveCentro(MazoU,"U",o,a,e,t,r,n),3==a&&OrganizarManoMueveCentro(MazoL,"L",o,a,e,t,r,n))},MoverCentroAjenoVerifica=function(a,o,e,t,r,n){var l=!1;return 1==SoyElJugador&&(1==a&&(l=OrganizarManoMueveCentroVerifica(MazoD,"D",o,a,e,t,r,n)),2==a&&(l=OrganizarManoMueveCentroVerifica(MazoR,"R",o,a,e,t,r,n)),3==a&&(l=OrganizarManoMueveCentroVerifica(MazoU,"U",o,a,e,t,r,n)),4==a&&(l=OrganizarManoMueveCentroVerifica(MazoL,"L",o,a,e,t,r,n))),2==SoyElJugador&&(2==a&&(l=OrganizarManoMueveCentroVerifica(MazoD,"D",o,a,e,t,r,n)),3==a&&(l=OrganizarManoMueveCentroVerifica(MazoR,"R",o,a,e,t,r,n)),4==a&&(l=OrganizarManoMueveCentroVerifica(MazoU,"U",o,a,e,t,r,n)),1==a&&(l=OrganizarManoMueveCentroVerifica(MazoL,"L",o,a,e,t,r,n))),3==SoyElJugador&&(3==a&&(l=OrganizarManoMueveCentroVerifica(MazoD,"D",o,a,e,t,r,n)),4==a&&(l=OrganizarManoMueveCentroVerifica(MazoR,"R",o,a,e,t,r,n)),1==a&&(l=OrganizarManoMueveCentroVerifica(MazoU,"U",o,a,e,t,r,n)),2==a&&(l=OrganizarManoMueveCentroVerifica(MazoL,"L",o,a,e,t,r,n))),4==SoyElJugador&&(4==a&&(l=OrganizarManoMueveCentroVerifica(MazoD,"D",o,a,e,t,r,n)),1==a&&(l=OrganizarManoMueveCentroVerifica(MazoR,"R",o,a,e,t,r,n)),2==a&&(l=OrganizarManoMueveCentroVerifica(MazoU,"U",o,a,e,t,r,n)),3==a&&(l=OrganizarManoMueveCentroVerifica(MazoL,"L",o,a,e,t,r,n))),l},OcultarBotones=function(){var a,o;for(0==(a=SoyElJugador-1)&&(a=4),o=0;o<=MazoCentral.length-1;o++)MazoCentral[o].jugador==a&&(SieteDesactivar(),CantarDesactivar())},checkConnection=function(){var a=!0;-1===document.URL.indexOf("http://")&&document.URL.indexOf("https://");if(window.plugins)try{"none"==navigator.connection.type&&(a=!1,MensajeError("Revisa tu conexión a internet"))}catch(a){MensajeError("Error "+a)}return a},AbrirCerrarLateral=function(){document.getElementById("blateral").click(),CargaOpcionesDefecto()},RateAPP=function(){window.plugins&&("IOS"!=SistemaOperativo().toUpperCase()&&(AppRate.preferences={useLanguage:"es",simpleMode:!0,displayAppName:"GuiñotePRO",usesUntilPrompt:0,promptAgainForEachNewVersion:!1,inAppReview:!1,storeAppURL:{ios:"1232782144",android:"market://details?id=es.guinotepro.guinotepro"},customLocale:{title:"¡Valora %@!",message:"Te necesitamos para seguir creciendo.",cancelButtonLabel:"No, Gracias",laterButtonLabel:"Más tarde",rateButtonLabel:"Valorar ahora",yesButtonLabel:"Sí",noButtonLabel:"No",appRatePromptTitle:"¿Te gusta %@?"},callbacks:{handleNegativeFeedback:function(){window.open("mailto:feedback@example.com","_system")},onRateDialogShow:function(a){},onButtonClicked:function(a){if(0<ArrayInfoJugador.length)try{socket.emit("EnviaValoraApp",a,ArrayInfoJugador[0].JugadorFull)}catch(a){}}}},AppRate.promptForRating()))},SieteActivar=function(){BotonSiete.frameName="cambiar 7",BotonSiete.onInputOver.add(function(){BotonSiete.frameName="cambiar 7"}),BotonSiete.onInputUp.add(function(){BotonSiete.frameName="cambiar 7"}),BotonSiete.onInputDown.add(function(){BotonSiete.frameName="cambiar 7"}),BotonSiete.onInputOut.add(function(){BotonSiete.frameName="cambiar 7"})},SieteDesactivar=function(){BotonSiete.frameName="cambiar 7 gris",BotonSiete.onInputOver.add(function(){BotonSiete.frameName="cambiar 7 gris"}),BotonSiete.onInputUp.add(function(){BotonSiete.frameName="cambiar 7 gris"}),BotonSiete.onInputDown.add(function(){BotonSiete.frameName="cambiar 7 gris"}),BotonSiete.onInputOut.add(function(){BotonSiete.frameName="cambiar 7 gris"})},CantarActivar=function(){BotonCantar.frameName="cantar",BotonCantar.onInputOver.add(function(){BotonCantar.frameName="cantar"}),BotonCantar.onInputUp.add(function(){BotonCantar.frameName="cantar"}),BotonCantar.onInputDown.add(function(){BotonCantar.frameName="cantar"}),BotonCantar.onInputOut.add(function(){BotonCantar.frameName="cantar"})},CantarDesactivar=function(){BotonCantar.frameName="cantar gris",BotonCantar.onInputOver.add(function(){BotonCantar.frameName="cantar gris"}),BotonCantar.onInputUp.add(function(){BotonCantar.frameName="cantar gris"}),BotonCantar.onInputDown.add(function(){BotonCantar.frameName="cantar gris"}),BotonCantar.onInputOut.add(function(){BotonCantar.frameName="cantar gris"})},PuntosFin=function(){return(PuntosGanar<=MarcadorNuestro||PuntosGanar<=MarcadorRival)&&1==SonVueltas},CrearTimers=function(){timerturno=game_objeto.time.create(!1),timerpareja=game_objeto.time.create(!1),timerestoylisto=game_objeto.time.create(!1),timerBarajaRecibida=game_objeto.time.create(!1),timerNuevaPartida=game_objeto.time.create(!1),timer=game_objeto.time.create(!1),timerrecolector=game_objeto.time.create(!1)},MuestraDorsoCante=function(a,o,e){var t,r,n,l,i,d,s,c,u;if(vRonda<=4){for("D"==(t=DevuelveUbicacionCarta(a))&&(r=MazoD),"U"==t&&(r=MazoU),"L"==t&&(r=MazoL),"R"==t&&(r=MazoR),"oros"==o&&(n=8,l=10),"copas"==o&&(n=18,l=20),"espadas"==o&&(n=28,l=30),"bastos"==o&&(n=38,l=40),i=0;i<=r.length-1;i++){if(log(!1,"CARTAAAAAAAASSSS: "+r[i].cartilla.name),r[i].cartilla.name==n)var g=i;if(r[i].cartilla.name==l)var p=i}if(null!=g&&null!=p&&(d=r[g].cartilla,c=r[g].cartilla.name,s=r[p].cartilla,u=r[p].cartilla,20==e&&"D"!=t)){try{d.loadTexture(TipoBaraja,MostrarDibujoCarta(d),0)}catch(a){}game_objeto.add.tween(d).to({alpha:1},2e3,EfectoTween1,!0).onComplete.add(function(){try{for(!0,i=0;i<=MazoCentral.length-1;i++)MazoCentral[i].Cartilla.name==c&&!1;ArreglaReversos()}catch(a){!1}});try{s.loadTexture(TipoBaraja,MostrarDibujoCarta(s),0)}catch(a){}game_objeto.add.tween(s).to({alpha:1},2e3,EfectoTween1,!0).onComplete.add(function(){try{for(ArreglaReversos(),!0,i=0;i<=MazoCentral.length-1;i++)MazoCentral[i].Cartilla.name==u&&!1}catch(a){!1}})}}},MostrarTodasCartas=function(){var a;for(a=0;a<=MazoL.length-1;a++)MazoL[a].cartilla.loadTexture(TipoBaraja,MostrarDibujoCarta(MazoL[a].cartilla),0);for(a=0;a<=MazoU.length-1;a++)MazoU[a].cartilla.loadTexture(TipoBaraja,MostrarDibujoCarta(MazoU[a].cartilla),0);for(a=0;a<=MazoR.length-1;a++)MazoR[a].cartilla.loadTexture(TipoBaraja,MostrarDibujoCarta(MazoR[a].cartilla),0)},MostrarDibujoCarta=function(a){return a.name<=10?a.name-0+"_oros":a.name<=20?a.name-10+"_copas":a.name<=30?a.name-20+"_espadas":a.name-30+"_bastos"},MostrarAnverso=function(a){if(0==SiempreBocaArriba)try{a.loadTexture(TipoBaraja),a.frameName=MostrarDibujoCarta(a)}catch(a){}},MostrarReverso=function(o){if(0==SiempreBocaArriba)try{game_objeto.cache.checkImageKey(ReversoGlobal)||(ReversoGlobal="Reverso"),o.loadTexture(ReversoGlobal,0)}catch(a){log(!0,"El reverso con el catch "+o.key);try{ReversoGlobal="Reverso",o.loadTexture(ReversoGlobal,0)}catch(a){}}},Cambiar7Ajeno=function(a,o,e,t,r,n){var l,i,d,s=!1;for(SieteDesactivar(),d=DevuelveUbicacionCarta(a),log(!1,"Jugador 7: "+a+"Letra: "+d+" KEY: "+o),"D"==d&&(i=MazoD),"L"==d&&(i=MazoL),"U"==d&&(i=MazoU),"R"==d&&(i=MazoR),l=0;l<=i.length-1;l++)if(i[l].cartilla.name==o){s=!0;break}1==s&&(log(!1,"ENCONTRADA"),CartaMover=i[l].cartilla,MostrarAnverso(CartaMover),CartaMover.sendToBack(),CartaTriunfo.push(new Carta(i[l].palo,i[l].idCarta,i[l].valor,i[l].cartilla,null,null,null,null,i[l].idPartida)),Grupo7.add(i[l].cartilla),game_objeto.world.bringToTop(MazoCentral),game_objeto.world.bringToTop(MazoD),i.splice(l,1),ReubicarCartas(i,d),(twEsp7=game_objeto.add.tween(CartaMover)).to({x:(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-8*vSeparacion+AnchoCarta)/2+1*(AnchoCarta+vSeparacion),y:CentroIrreal,angle:90},500,EfectoTween2),twEsp7.onComplete.add(function(){FinalizaCambio7(i,d,a,e,t,r,n)},this),"D"==d&&game_objeto.add.tween(CartaMover.scale).to({x:1,y:1},vVelocidadCartas,EfectoTween2,!0),twEsp7.start())},TengoMedioCuarenta=function(a){var o,e=!1;for(o=0;o<=a.length-1;o++)if((9==a[o].valorReal||10==a[o].valorReal)&&a[o].palo==Triunfo){e=!0;break}return e},Cambiar7=function(a){var o,e,t,r,n=!1;1!=SoyElJugador&&3!=SoyElJugador||(r=1==a||3==a?1==BazaNuestraGlobal:1!=BazaNuestraGlobal),2!=SoyElJugador&&4!=SoyElJugador||(r=2==a||4==a?1==BazaNuestraGlobal:1!=BazaNuestraGlobal);var l=DevuelveUbicacionCarta(a);if("D"==l&&(t=MazoD),"L"==l&&(t=MazoL),"U"==l&&(t=MazoU),"R"==l&&(t=MazoR),(1==ModoMultijugador&&EstoyConectado()||0==ModoMultijugador)&&vRonda<=4&&(0==MazoCentral.length||1==MazoCentral.length)&&(1==r&&1==TengoEl7(a)&&a==SoyElJugador||1==r&&1==TengoEl7(a)&&a!=SoyElJugador&&PermisoParaTomarControl(a)&&7<CartaTriunfo[0].valorReal&&(1==SonVueltas||0==SonVueltas&&(9==CartaTriunfo[0].valorReal||10==CartaTriunfo[0].valorReal)&&1==TengoMedioCuarenta(t)))){for(SieteDesactivar(),o=0;o<=t.length-1;o++)if(7==t[o].valor&&t[o].palo==Triunfo){n=!0;break}if(1==n)if(1==ModoMultijugador){Date.now();var i=[];i.splice(0,1e3);var d=1e5*Math.random(),s=new function(a,o,e,t,r,n,l,i,d,s,c,u,g){this.Habitacion=a,this.JugadorQueMueve=o,this.Cartilla=e,this.SonVueltas=t,this.Partida=r,this.JugadorFull=n,this.JugadorSala=l,this.Nombre=i,this.idPartida=d,this.IdMsg=s,this.ClientId=c,this.SalaID=u,this.Mensaje=g,this.Fecha=new Date(Date.now())}(Habitacion,a,t[o].cartilla.name,SonVueltas,MarcadorPartidasNuestro+MarcadorPartidasRival,ArrayDelaPropiaSala[a-1].JugadorFull,ArrayDelaPropiaSala[a-1].JugadorSala,ArrayDelaPropiaSala[a-1].Nombre,idPartida,d,ArrayDelaPropiaSala[a-1].JugadorSala,Habitacion,"enviar cambio7");ArrayAccionesDesconexiones.push(s),i.push(s);var c=game_objeto.time.create(!1);c.loop(200,function(){try{socket.emit("enviar cambio7",i[0],function(a){EliminarColaMensajes(a,"enviar cambio7")}),i.splice(0,1e3),c.stop(),c.remove()}catch(a){}}),c.start()}else e=t[o].cartilla,CartaTriunfo.push(new Carta(t[o].palo,t[o].idCarta,t[o].valor,t[o].cartilla,5,t[o].jugador,null,null,t[o].idPartida)),MostrarAnverso(e),DesHabilitarClick(CartaTriunfo.length-1),Grupo7.add(t[o].cartilla),game_objeto.world.bringToTop(MazoCentral),game_objeto.world.bringToTop(t),t.splice(o,1),ReubicarCartas(t,l),(twEsp7=game_objeto.add.tween(e)).to({x:(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-8*vSeparacion+AnchoCarta)/2+1*(AnchoCarta+vSeparacion),y:CentroIrreal,angle:90},500,EfectoTween2),twEsp7.onComplete.add(function(){DesHabilitarClick(e),FinalizaCambio7(t,l,a,!1,!1,!1,!1)},this),twEsp7.start(),game_objeto.add.tween(e.scale).to({x:1,y:1},vVelocidadCartas,EfectoTween2,!0)}},FinalizaCambio7=function(a,o,e,t,r,n,l){var i,d,s;a.push(new Carta(CartaTriunfo[0].palo,CartaTriunfo[0].idCarta,CartaTriunfo[0].valor,CartaTriunfo[0].cartilla,7,e,null,null,CartaTriunfo[0].idPartida)),CartaTriunfo.shift(),"D"==o&&(i=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-5*vSeparacion+AnchoCarta)/2+5*(AnchoCarta+vSeparacion),d=game_objeto.world.height-AnchoCarta,s=a[a.length-1].cartilla.angle-90,MostrarAnverso(a[a.length-1].cartilla),GrupoD.add(a[a.length-1].cartilla)),"R"==o&&(i=game_objeto.world.width-AnchoCarta,d=(game_objeto.world.height-vHorizontalDerechaPorqueSi-6*AnchoCarta-5*vSeparacion+AnchoCarta)/2+0*(AnchoCarta+vSeparacion),s=a[a.length-1].cartilla.angle+180,MostrarReverso(a[a.length-1].cartilla),GrupoR.add(a[a.length-1].cartilla)),"L"==o&&(i=AnchoCarta,d=(game_objeto.world.height-vHorizontalDerechaPorqueSi-6*AnchoCarta-5*vSeparacion+AnchoCarta)/2+5*(AnchoCarta+vSeparacion),s=a[a.length-1].cartilla.angle+0,MostrarReverso(a[a.length-1].cartilla),GrupoL.add(a[a.length-1].cartilla),log(!1,"Parte izquierda")),"U"==o&&(i=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-5*vSeparacion+AnchoCarta)/2+0*(AnchoCarta+vSeparacion),d=AnchoCarta,s=a[a.length-1].cartilla.angle-90,MostrarReverso(a[a.length-1].cartilla),GrupoU.add(a[a.length-1].cartilla)),log(!1,"Mueve la carta..."),(twEsp7=game_objeto.add.tween(a[a.length-1].cartilla)).to({x:i,y:d,angle:s},500,EfectoTween2),twEsp7.onComplete.add(function(){ReubicarCartas(a,o,!1,!1,a[a.length-1].cartilla.name),"D"==o&&(PreparaCaracteristicasMano(),HabilitarClick(a[a.length-1].cartilla)),0<Mazo.length&&1==l?RobarCartas1(t,r,n):Recuperarse(n,!1,!1)},this),twEsp7.start(),"D"==o?game_objeto.add.tween(a[a.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0):1==cuatrotres&&game_objeto.add.tween(a[a.length-1].cartilla.scale).to({x:1.2,y:1.2},vVelocidadCartas,EfectoTween2,!0),MostrarOcultarBotonCante()},TengoEl7=function(a){var o,e,t,r=!1;if(0<Mazo.length)for("D"==(t=DevuelveUbicacionCarta(a))&&(e=MazoD),"L"==t&&(e=MazoL),"U"==t&&(e=MazoU),"R"==t&&(e=MazoR),o=0;o<=e.length-1;o++)if(7==e[o].valor&&e[o].palo==Triunfo){r=!0;break}return r},ActualizaMarcador=function(a,o,e){var t,r,n;return"N"==a?MarcadorNuestro+=o:MarcadorRival+=o,t=50<MarcadorNuestro?MarcadorNuestro-50+" Buenas":MarcadorNuestro+" Malas",r=50<MarcadorRival?MarcadorRival-50+" Buenas":MarcadorRival+" Malas",TextMarcador.text=t+"\n"+r,1==PuntosFin()?(0==FinalizandoPartida&&CrearTextoPuntuacion(e),n=!1):n=!0,log(!1,"Nosotros "+MarcadorNuestro),log(!1,"Rival "+MarcadorRival),n},EstaCantado=function(a){var o,e=!1;for(o=0;o<=RegistrarCantes.length-1;o++)if(RegistrarCantes[o]==a){e=!0;break}return e},PosibleCante=function(a){var o,e=!1,t=!1,r=!1,n=!1,l=!1,i=!1,d=!1,s=!1;for(o=0;o<=a.length-1;o++)10==a[o].valorReal&&"oros"==a[o].palo&&(e=!0),10==a[o].valorReal&&"copas"==a[o].palo&&(r=!0),10==a[o].valorReal&&"espadas"==a[o].palo&&(l=!0),10==a[o].valorReal&&"bastos"==a[o].palo&&(d=!0),9==a[o].valorReal&&"oros"==a[o].palo&&(t=!0),9==a[o].valorReal&&"copas"==a[o].palo&&(n=!0),9==a[o].valorReal&&"espadas"==a[o].palo&&(i=!0),9==a[o].valorReal&&"bastos"==a[o].palo&&(s=!0);return 1==e&&1==t&&0==EstaCantado("oros")||1==r&&1==n&&0==EstaCantado("copas")||1==l&&1==i&&0==EstaCantado("espadas")||1==d&&1==s&&0==EstaCantado("bastos")},MostrarOcultarBotonCante=function(){var a,o,e,t;if(log(!0,"Cantes Tamaño: "+MazoCentral.length),0==MazoCentral.length||1==MazoCentral.length){if(1==SoyElJugador&&(o=3,e=2,t=4),2==SoyElJugador&&(o=4,e=1,t=3),3==SoyElJugador&&(o=1,e=2,t=4),4==SoyElJugador&&(o=2,e=1,t=3),1<vRonda)if(0==ModoMultijugador)1==BazaNuestraGlobal?(Cantar(3),Cambiar7(3)):(Cantar(2),Cantar(4),Cambiar7(2),Cambiar7(4));else if(SoyElJugador==QuienTomaElControl&&0==FReconectando())if(1==BazaNuestraGlobal)for(a=0;a<=ArrayJugadoresDesconectados.length-1;a++)ArrayJugadoresDesconectados[a].Jugador==o&&(Cantar(o),Cambiar7(o));else for(a=0;a<=ArrayJugadoresDesconectados.length-1;a++)ArrayJugadoresDesconectados[a].Jugador==e&&(Cantar(e),Cambiar7(e)),ArrayJugadoresDesconectados[a].Jugador==t&&(Cantar(t),Cambiar7(t));log(!0,"Cantes Baza Nuestra: "+BazaNuestraGlobal),log(!0,"Cantes Posible Cante "+PosibleCante(MazoD)),1==BazaNuestraGlobal&&1==PosibleCante(MazoD)?CantarActivar():CantarDesactivar(),1==BazaNuestraGlobal&&1==TengoEl7(SoyElJugador)&&7<CartaTriunfo[0].valorReal?SieteActivar():(BotonSiete.frameName="cambiar 7 gris",SieteDesactivar())}else CantarDesactivar(),SieteDesactivar()},EnviarCante=function(a,o,e,t,r,n,l,i,d){Date.now();var s=[];s.splice(0,1e3);var c=1e5*Math.random(),u=new function(a,o,e,t,r,n,l,i,d,s,c,u,g,p){this.Habitacion=a,this.JugadorQueMueve=o,this.Puntos=e,this.Palo=t,this.SonVueltas=r,this.Partida=n,this.JugadorFull=l,this.JugadorSala=i,this.Nombre=d,this.idPartida=s,this.IdMsg=c,this.ClientId=u,this.SalaID=g,this.Mensaje=p,this.Fecha=new Date(Date.now())}(a,o,e,t,r,n,l,i,d,idPartida,c,i,a,"enviar cante");ArrayAccionesDesconexiones.push(u),s.push(u);var g=game_objeto.time.create(!1);g.loop(200,function(){try{socket.emit("enviar cante",s[0],function(a){EliminarColaMensajes(a,"enviar cante")}),s.splice(0,1e3),g.stop(),g.remove()}catch(a){}}),g.start()},Cantar=function(a){var o,e,t=!1,r=!1,n=!1,l=!1,i=!1,d=!1,s=!1,c=!1,u=[];if((1==ModoMultijugador&&EstoyConectado()||0==ModoMultijugador)&&("cantar"==BotonCantar.frameName&&a==SoyElJugador||a!=SoyElJugador)){for("cantar"==BotonCantar.frameName&&a==SoyElJugador&&CantarDesactivar(),1==ModoMultijugador?("D"==(e=DevuelveUbicacionCarta(a))&&(u=MazoD),"U"==e&&(u=MazoU),"L"==e&&(u=MazoL),"R"==e&&(u=MazoR)):(1==a&&(u=MazoD),2==a&&(u=MazoR),3==a&&(u=MazoU),4==a&&(u=MazoL)),o=0;o<=u.length-1;o++)10==u[o].valorReal&&"oros"==u[o].palo&&(t=!0),10==u[o].valorReal&&"copas"==u[o].palo&&(n=!0),10==u[o].valorReal&&"espadas"==u[o].palo&&(i=!0),10==u[o].valorReal&&"bastos"==u[o].palo&&(s=!0),9==u[o].valorReal&&"oros"==u[o].palo&&(r=!0),9==u[o].valorReal&&"copas"==u[o].palo&&(l=!0),9==u[o].valorReal&&"espadas"==u[o].palo&&(d=!0),9==u[o].valorReal&&"bastos"==u[o].palo&&(c=!0);1==t&&1==r&&0==EstaCantado("oros")&&(log(!1,"Canta en Oros"),"oros"==Triunfo?1==ModoMultijugador?(EnviarCante(Habitacion,a,40,"oros",SonVueltas,MarcadorPartidasNuestro+MarcadorPartidasRival,ArrayDelaPropiaSala[a-1].JugadorFull,ArrayDelaPropiaSala[a-1].JugadorSala,ArrayDelaPropiaSala[a-1].Nombre),GrabarResultado(a,MarcadorPartidasNuestro+MarcadorPartidasRival,SonVueltas,0,!1,!0,!1,!1)):(TextoBocadillo(a,"oros",!0,40,!1,!1),RegistrarCantes.push("oros")):1==ModoMultijugador?(EnviarCante(Habitacion,a,20,"oros",SonVueltas,MarcadorPartidasNuestro+MarcadorPartidasRival,ArrayDelaPropiaSala[a-1].JugadorFull,ArrayDelaPropiaSala[a-1].JugadorSala,ArrayDelaPropiaSala[a-1].Nombre),GrabarResultado(a,MarcadorPartidasNuestro+MarcadorPartidasRival,SonVueltas,0,!0,!1,!1,!1)):(TextoBocadillo(a,"oros",!0,20,!1,!1),RegistrarCantes.push("oros"))),1==n&&1==l&&0==EstaCantado("copas")&&(log(!1,"Canta en copas"),"copas"==Triunfo?1==ModoMultijugador?(EnviarCante(Habitacion,a,40,"copas",SonVueltas,MarcadorPartidasNuestro+MarcadorPartidasRival,ArrayDelaPropiaSala[a-1].JugadorFull,ArrayDelaPropiaSala[a-1].JugadorSala,ArrayDelaPropiaSala[a-1].Nombre),GrabarResultado(a,MarcadorPartidasNuestro+MarcadorPartidasRival,SonVueltas,0,!1,!0,!1,!1)):(TextoBocadillo(a,"copas",!0,40,!1,!1),RegistrarCantes.push("copas")):1==ModoMultijugador?(EnviarCante(Habitacion,a,20,"copas",SonVueltas,MarcadorPartidasNuestro+MarcadorPartidasRival,ArrayDelaPropiaSala[a-1].JugadorFull,ArrayDelaPropiaSala[a-1].JugadorSala,ArrayDelaPropiaSala[a-1].Nombre),GrabarResultado(a,MarcadorPartidasNuestro+MarcadorPartidasRival,SonVueltas,0,!0,!1,!1,!1)):(TextoBocadillo(a,"copas",!0,20,!1,!1),RegistrarCantes.push("copas"))),1==i&&1==d&&0==EstaCantado("espadas")&&(log(!1,"Canta en espadas"),"espadas"==Triunfo?1==ModoMultijugador?(EnviarCante(Habitacion,a,40,"espadas",SonVueltas,MarcadorPartidasNuestro+MarcadorPartidasRival,ArrayDelaPropiaSala[a-1].JugadorFull,ArrayDelaPropiaSala[a-1].JugadorSala,ArrayDelaPropiaSala[a-1].Nombre),GrabarResultado(a,MarcadorPartidasNuestro+MarcadorPartidasRival,SonVueltas,0,!1,!0,!1,!1)):(TextoBocadillo(a,"espadas",!0,40,!1,!1),RegistrarCantes.push("espadas")):1==ModoMultijugador?(EnviarCante(Habitacion,a,20,"espadas",SonVueltas,MarcadorPartidasNuestro+MarcadorPartidasRival,ArrayDelaPropiaSala[a-1].JugadorFull,ArrayDelaPropiaSala[a-1].JugadorSala,ArrayDelaPropiaSala[a-1].Nombre),GrabarResultado(a,MarcadorPartidasNuestro+MarcadorPartidasRival,SonVueltas,0,!0,!1,!1,!1)):(TextoBocadillo(a,"espadas",!0,20,!1,!1),RegistrarCantes.push("espadas"))),1==s&&1==c&&0==EstaCantado("bastos")&&(log(!1,"Canta en bastos"),"bastos"==Triunfo?1==ModoMultijugador?(EnviarCante(Habitacion,a,40,"bastos",SonVueltas,MarcadorPartidasNuestro+MarcadorPartidasRival,ArrayDelaPropiaSala[a-1].JugadorFull,ArrayDelaPropiaSala[a-1].JugadorSala,ArrayDelaPropiaSala[a-1].Nombre),GrabarResultado(a,MarcadorPartidasNuestro+MarcadorPartidasRival,SonVueltas,0,!1,!0,!1,!1)):(TextoBocadillo(a,"bastos",!0,40,!1,!1),RegistrarCantes.push("bastos")):1==ModoMultijugador?(EnviarCante(Habitacion,a,20,"bastos",SonVueltas,MarcadorPartidasNuestro+MarcadorPartidasRival,ArrayDelaPropiaSala[a-1].JugadorFull,ArrayDelaPropiaSala[a-1].JugadorSala,ArrayDelaPropiaSala[a-1].Nombre),GrabarResultado(a,MarcadorPartidasNuestro+MarcadorPartidasRival,SonVueltas,0,!0,!1,!1,!1)):(TextoBocadillo(a,"bastos",!0,20,!1,!1),RegistrarCantes.push("bastos"))),PuntosFin()}},ColorManoPosibles=function(a){var o,e,t=!0;for(e=0;e<=MazoCentral.length-1;e++)MazoCentral[e].jugador==SoyElJugador&&(t=!1);if(vTurno==SoyElJugador&&1==t)for(o=0;o<=MazoD.length-1;o++)1==ValidadorReglas(MazoD[o],SoyElJugador)?MazoD[o].cartilla.tint=Phaser.Color.getColor(255,255,255):MazoD[o].cartilla.tint=Phaser.Color.getColor(110,110,110);else for(o=0;o<=MazoD.length-1;o++)MazoD[o].cartilla.tint=Phaser.Color.getColor(255,255,255)},ValidadorReglas=function(a,o){var e,t,r,n=[],l=[];if("D"==(r=DevuelveUbicacionCarta(o))&&(l=MazoD),"U"==r&&(l=MazoU),"R"==r&&(l=MazoR),"L"==r&&(l=MazoL),0==MazoCentral.length||vRonda<=RondaArrastre)e=!0;else if(1==RTengoMismoPalo(l)){for(log(!1,"Tengo del mismo palo"),n.splice(0,4),t=0;t<=MazoCentral.length-1;t++)n.push(new CartaBazaNuestra(MazoCentral[t].palo,MazoCentral[t].valorReal,MazoCentral[t].jugador));if(1==RBazaEsNuestra(n,o))log(!1,"La Baza es nuestra"),a.palo==MazoCentral[0].palo?(log(!1,"La carta es del mismo palo"),e=!0):(log(!1,"La carta NO es del mismo palo"),e=!1);else{for(log(!1,"NO es nuestra Baza.."),n.splice(0,4),t=0;t<=MazoCentral.length-1;t++)n.push(new CartaBazaNuestra(MazoCentral[t].palo,MazoCentral[t].valorReal,MazoCentral[t].jugador));n.push(new CartaBazaNuestra(a.palo,a.valorReal,o)),log(!1,n[n.length-1].palo+" - "+n[n.length-1].valorReal+" - "+n[n.length-1].jugador),1==RBazaEsNuestra(n,o)?(log(!1,"La Baza no ser�a nuestra"),a.palo==MazoCentral[0].palo?(log(!1,"Es del mismo palo"),e=!0):(log(!1,"No es del mismo palo"),e=!1)):1==RHariaBaza("MismoPalo",o,l)?(log(!1,"Har�a Baza con otra carta del mismo palo"),e=!1):(log(!1,"NO har�a Baza con otra carta del mismo palo"),e=a.palo==MazoCentral[0].palo||1!=RTengoMismoPalo(l))}}else{for(n.splice(0,4),t=0;t<=MazoCentral.length-1;t++)n.push(new CartaBazaNuestra(MazoCentral[t].palo,MazoCentral[t].valorReal,MazoCentral[t].jugador));if(1==RBazaEsNuestra(n,o))e=!0;else{for(n.splice(0,4),t=0;t<=MazoCentral.length-1;t++)n.push(new CartaBazaNuestra(MazoCentral[t].palo,MazoCentral[t].valorReal,MazoCentral[t].jugador));n.push(new CartaBazaNuestra(a.palo,a.valorReal,o)),e=1==RBazaEsNuestra(n,o)||1!=RHariaBaza("OtroPalo",o,l)}}return e},log=function(a,o){},RHariaBaza=function(a,o,e){var t,r,n,l=[];if(n=!1,"MismoPalo"==a)for(t=0;t<=e.length-1;t++)if(0==n){for(l.splice(0,4),r=0;r<=MazoCentral.length-1;r++)l.push(new CartaBazaNuestra(MazoCentral[r].palo,MazoCentral[r].valorReal,MazoCentral[r].jugador));if(MazoCentral[0].palo==e[t].palo&&(l.push(new CartaBazaNuestra(e[t].palo,e[t].valorReal,o)),1==RBazaEsNuestra(l,o))){n=!0;break}}if("MismoPaloSinBaza"==a)for(t=0;t<=e.length-1;t++)if(0==n){for(l.splice(0,4),r=0;r<=MazoCentral.length-1;r++)l.push(new CartaBazaNuestra(MazoCentral[r].palo,MazoCentral[r].valorReal,MazoCentral[r].jugador));if(MazoCentral[0].palo==e[t].palo&&(l.push(new CartaBazaNuestra(e[t].palo,e[t].valorReal,o)),1==RBazaEsNuestra(l,o))){n=!0;break}}if("OtroPalo"==a)for(t=0;t<=e.length-1;t++)if(0==n){for(l.splice(0,4),r=0;r<=MazoCentral.length-1;r++)l.push(new CartaBazaNuestra(MazoCentral[r].palo,MazoCentral[r].valorReal,MazoCentral[r].jugador));if(MazoCentral[0].palo!=e[t].palo&&(l.push(new CartaBazaNuestra(e[t].palo,e[t].valorReal,o)),1==RBazaEsNuestra(l,o))){n=!0;break}}return n},RTengoMismoPalo=function(a){var o,e;for(e=!1,o=0;o<=a.length-1;o++)if(a[o].palo==MazoCentral[0].palo){e=!0;break}return e},RBazaEsNuestra=function(a,o){var e,t,r,n,l;for(e=0;e<=a.length-1;e++)0==e&&(n=a[e].valorReal,l=a[e].palo,t=a[e].jugador),(a[e].valorReal>n&&a[e].palo==l||a[e].palo==Triunfo&&l!=Triunfo)&&(n=a[e].valorReal,l=a[e].palo,t=a[e].jugador);return 1==o&&(1==t&&(r=!0),2==t&&(r=!1),3==t&&(r=!0),4==t&&(r=!1)),2==o&&(2==t&&(r=!0),3==t&&(r=!1),4==t&&(r=!0),1==t&&(r=!1)),3==o&&(3==t&&(r=!0),4==t&&(r=!1),1==t&&(r=!0),2==t&&(r=!1)),4==o&&(4==t&&(r=!0),1==t&&(r=!1),2==t&&(r=!0),3==t&&(r=!1)),r},DevuelveUbicacionCarta=function(a){var o="D";return log(!0,"Dentro de DevuelveUbicacion "+SoyElJugador+" "+a),1==SoyElJugador&&(1==a&&(o="D"),2==a&&(o="R"),3==a&&(o="U"),4==a&&(o="L")),2==SoyElJugador&&(2==a&&(o="D"),3==a&&(o="R"),4==a&&(o="U"),1==a&&(o="L")),3==SoyElJugador&&(3==a&&(o="D"),4==a&&(o="R"),1==a&&(o="U"),2==a&&(o="L")),4==SoyElJugador&&(4==a&&(o="D"),1==a&&(o="R"),2==a&&(o="U"),3==a&&(o="L")),log(!1,"Va a Devolver.."+o),o},DevuelveJugadorSegunMazo=function(a){var o;return 1==SoyElJugador&&("D"==a&&(o=1),"R"==a&&(o=2),"U"==a&&(o=3),"L"==a&&(o=4)),2==SoyElJugador&&("D"==a&&(o=2),"R"==a&&(o=3),"U"==a&&(o=4),"L"==a&&(o=1)),3==SoyElJugador&&("D"==a&&(o=3),"R"==a&&(o=4),"U"==a&&(o=1),"L"==a&&(o=2)),4==SoyElJugador&&("D"==a&&(o=4),"R"==a&&(o=1),"U"==a&&(o=2),"L"==a&&(o=3)),o},Esconde_Mazo=function(a){var o,e;if(1==SoyElJugador&&(1==a&&(e="D"),2==a&&(e="R"),3==a&&(e="U"),4==a&&(e="L")),2==SoyElJugador&&(2==a&&(e="D"),3==a&&(e="R"),4==a&&(e="U"),1==a&&(e="L")),3==SoyElJugador&&(3==a&&(e="D"),4==a&&(e="R"),1==a&&(e="U"),2==a&&(e="L")),4==SoyElJugador&&(4==a&&(e="D"),1==a&&(e="R"),2==a&&(e="U"),3==a&&(e="L")),"D"==e)for(o=0;o<=Mazo.length-1;o++)Mazo[o].cartilla.x=game_objeto.world.centerX+o/2,Mazo[o].cartilla.y=game_objeto.world.height-AltoCartaEscalado-Mazo[o].cartilla.height/2-2*vSeparacion-70;if("U"==e)for(o=0;o<=Mazo.length-1;o++)Mazo[o].cartilla.x=game_objeto.world.centerX+o/2,Mazo[o].cartilla.y=Mazo[o].cartilla.height+Mazo[o].cartilla.height/2+2*vSeparacion;if("L"==e)for(o=0;o<=Mazo.length-1;o++)Mazo[o].cartilla.x=Mazo[o].cartilla.height+Mazo[o].cartilla.height/2+2*vSeparacion+o/2,Mazo[o].cartilla.y=CentroIrreal;if("R"==e)for(o=0;o<=Mazo.length-1;o++)Mazo[o].cartilla.x=game_objeto.world.width-Mazo[o].cartilla.height-Mazo[o].cartilla.height/2-3*vSeparacion+o/2,Mazo[o].cartilla.y=CentroIrreal},MoverMazo=function(){var a;for(a=0;a<=Mazo.length-1;a++){var o=game_objeto.add.tween(Mazo[a].cartilla);o.to({x:(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-5*vSeparacion+AnchoCarta)/2+0*(AnchoCarta+vSeparacion)+a/2,y:CentroIrreal},500,EfectoTween1),o.start()}1==ModoMultijugador?(EnviarEstoyListo(),EnviarEstoyListoDesconectados()):(PreparaCaracteristicasMano(),SuperOrganizador()),BotonCantar.revive(),BotonSiete.revive()},EnviarEstoyListo=function(){if(0==PartidaComenzada){var o=function(a,o,e,t,r,n,l){this.Habitacion=a,this.JugadorSala=o,this.idPartida=e,this.IdMsg=t,this.ClientId=r,this.SalaID=n,this.Mensaje=l,this.Fecha=new Date(Date.now())},e=[];e.splice(0,1e3);var t=1e5*Math.random(),r=game_objeto.time.create(!1);r.loop(200,function(){try{var a=new o(Habitacion,socket.id,idPartida,t,ArrayDelaPropiaSala[SoyElJugador-1].JugadorSala,Habitacion,"Estoy listo");ArrayAccionesDesconexiones.push(a),e.push(a),socket.emit("Estoy listo",e[0],function(a){EliminarColaMensajes(a,"Estoy listo")}),e.splice(0,1e3),RecalculaDesconectados(),EnviarEstoyListoDesconectados(),r.stop(),r.remove()}catch(a){}}),r.start()}},EnviarEstoyListoDesconectados=function(){var a;if(QuienTomaElControl==SoyElJugador)for(a=0;a<=ArrayDelaPropiaSala.length-1;a++)if(1==ArrayDelaPropiaSala[a].Desconectado){var o=[];o.splice(0,1e3);var e=1e5*Math.random();try{var t=new function(a,o,e,t,r,n,l){this.Habitacion=a,this.JugadorSala=o,this.idPartida=e,this.IdMsg=t,this.ClientId=r,this.SalaID=n,this.Mensaje=l,this.Fecha=new Date(Date.now())}(Habitacion,ArrayDelaPropiaSala[a].JugadorSala,idPartida,e,ArrayDelaPropiaSala[a].JugadorSala,Habitacion,"Estoy listo");ArrayAccionesDesconexiones.push(t),o.push(t),socket.emit("Estoy listo",o[0],function(a){EliminarColaMensajes(a,"Estoy listo")}),o.splice(0,1e3)}catch(a){}}},RecalculaDesconectados=function(){var a,o;for(ArrayJugadoresDesconectados.splice(0,1e3),a=0;a<=ArrayDelaPropiaSala.length-1;a++)if(1==ArrayDelaPropiaSala[a].Desconectado){o=!1;for(var e=0;e<=ArrayJugadoresDesconectados.length-1;e++)EstaArray(ArrayJugadoresDesconectados[e].JugadorSala,ArrayDelaPropiaSala[a].JugadorSala)&&(o=!0);0==o&&ArrayJugadoresDesconectados.push(new ObjetoDesconexion(a+1,ArrayDelaPropiaSala[a].JugadorSala))}else for(e=ArrayJugadoresDesconectados.length;e--;)EstaArray(ArrayJugadoresDesconectados[e].JugadorSala,ArrayDelaPropiaSala[a].JugadorSala)&&ArrayJugadoresDesconectados.splice(e,1)},SacaTriunfo=function(a){vVecesReconectado=vVecesMinimizado=0;var o=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);o.to({x:(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-8*vSeparacion+AnchoCarta)/2+1*(AnchoCarta+vSeparacion),y:CentroIrreal,angle:90},500,EfectoTween1),o.onComplete.add(MoverMazo,this),o.start(),CartaTriunfo.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,Mazo[Mazo.length-1].jugador,null,null,Mazo[Mazo.length-1].idPartida)),MostrarAnverso(Mazo[Mazo.length-1].cartilla),Grupo7.add(CartaTriunfo[CartaTriunfo.length-1].cartilla),game_objeto.world.bringToTop(GrupoMazo),game_objeto.world.bringToTop(GrupoD),Triunfo=CartaTriunfo[CartaTriunfo.length-1].palo,Mazo.pop(),1==ModoMultijugador&&(ObjTurnoD.revive(),ObjTurnoR.revive(),ObjTurnoU.revive(),ObjTurnoL.revive()),BloqueoCartaCentro=!(RepartoFinalizado=!0),Recuperarse(a,!1,!1),HayPROS()},MarcadorNuevo=function(){return 0==MarcadorPartidasNuestro&&0==MarcadorPartidasRival&&0==MarcadorNuestro&&0==MarcadorRival},HayPROS=function(){var a,o=0;if(0<ArrayDelaPropiaSala.length)for(a=0;a<=ArrayDelaPropiaSala.length-1;a++)(1==ArrayDelaPropiaSala[a].CampeonSemanal||1<=ArrayDelaPropiaSala[a].Nivel&&ArrayDelaPropiaSala[a].Nivel<=5)&&o++;1<=o?MarcadorNuevo()&&0==SonVueltas&&ReproducirSonido("_HayPROS"):ReproducirSonido("_HayProfesionales")},RobarCartas1=function(a,o,e){var t,r=o;if(log(!1,"Intenta robar.."),0<Mazo.length){if(Mazo[Mazo.length-1].cartilla,"U"==(t=DevuelveUbicacionCarta(r))){var n=MazoU,l=Mazo[Mazo.length-1].cartilla.angle;MostrarReverso(Mazo[Mazo.length-1].cartilla),GrupoU.add(Mazo[Mazo.length-1].cartilla)}if("D"==t){n=MazoD,l=Mazo[Mazo.length-1].cartilla.angle;MostrarAnverso(Mazo[Mazo.length-1].cartilla),GrupoD.add(Mazo[Mazo.length-1].cartilla)}if("L"==t){n=MazoL,l=Mazo[Mazo.length-1].cartilla.angle+90;MostrarReverso(Mazo[Mazo.length-1].cartilla),GrupoL.add(Mazo[Mazo.length-1].cartilla)}if("R"==t){n=MazoR,l=Mazo[Mazo.length-1].cartilla.angle+270;MostrarReverso(Mazo[Mazo.length-1].cartilla),GrupoR.add(Mazo[Mazo.length-1].cartilla)}log(!1,"Tama�o de la mano "+n.length),n.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,Mazo[Mazo.length-1].jugador,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),"D"==t&&PreparaCaracteristicasMano(),Mazo.pop();var i=devuelveX(t,99);log(!1,"X de "+t+" "+i);var d=devuelveY(t,99);0<Mazo.length?((tw1=game_objeto.add.tween(n[n.length-1].cartilla)).to({x:i,y:d,angle:l},vVelocidadRobar,EfectoTween1),tw1.onComplete.add(function(){ReubicarCartas(n,t),RobarCartas2(a,o,e)}),"D"==t&&game_objeto.add.tween(n[n.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),tw1.start()):(log(!1,"No quedan cartas"),log(!1,"Mazo grr: "+Mazo[0].valor+" "+Mazo[0].palo)),0<CartaTriunfo.length&&CartaTriunfo[CartaTriunfo.length-1].cartilla.moveDown()}},RobarCartas2=function(a,o,e){var t,r=o+1;if(0<Mazo.length){if(4<r&&(r-=4),Mazo[Mazo.length-1].cartilla,"U"==(t=DevuelveUbicacionCarta(r))){var n=MazoU,l=Mazo[Mazo.length-1].cartilla.angle;MostrarReverso(Mazo[Mazo.length-1].cartilla),GrupoU.add(Mazo[Mazo.length-1].cartilla)}if("D"==t){n=MazoD,l=Mazo[Mazo.length-1].cartilla.angle;MostrarAnverso(Mazo[Mazo.length-1].cartilla),GrupoD.add(Mazo[Mazo.length-1].cartilla)}if("L"==t){n=MazoL,l=Mazo[Mazo.length-1].cartilla.angle+90;MostrarReverso(Mazo[Mazo.length-1].cartilla),GrupoL.add(Mazo[Mazo.length-1].cartilla)}if("R"==t){n=MazoR,l=Mazo[Mazo.length-1].cartilla.angle+270;MostrarReverso(Mazo[Mazo.length-1].cartilla),GrupoR.add(Mazo[Mazo.length-1].cartilla)}n.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,Mazo[Mazo.length-1].jugador,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),"D"==t&&PreparaCaracteristicasMano(),Mazo.pop();var i=devuelveX(t,99),d=devuelveY(t,99);log(!1,"X de "+t+" "+i),0<Mazo.length&&((tw1=game_objeto.add.tween(n[n.length-1].cartilla)).to({x:i,y:d,angle:l},vVelocidadRobar,EfectoTween1),tw1.onComplete.add(function(){ReubicarCartas(n,t),RobarCartas3(a,o,e)}),"D"==t&&game_objeto.add.tween(n[n.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),tw1.start()),0<CartaTriunfo.length&&CartaTriunfo[CartaTriunfo.length-1].cartilla.moveDown()}},RobarCartas3=function(a,o,e){var t,r=o+2;if(4<r&&(r-=4),0<Mazo.length){if(Mazo[Mazo.length-1].cartilla,"U"==(t=DevuelveUbicacionCarta(r))){var n=MazoU,l=Mazo[Mazo.length-1].cartilla.angle;MostrarReverso(Mazo[Mazo.length-1].cartilla),GrupoU.add(Mazo[Mazo.length-1].cartilla)}if("D"==t){n=MazoD,l=Mazo[Mazo.length-1].cartilla.angle;MostrarAnverso(Mazo[Mazo.length-1].cartilla),GrupoD.add(Mazo[Mazo.length-1].cartilla)}if("L"==t){n=MazoL,l=Mazo[Mazo.length-1].cartilla.angle+90;MostrarReverso(Mazo[Mazo.length-1].cartilla),GrupoL.add(Mazo[Mazo.length-1].cartilla)}if("R"==t){n=MazoR,l=Mazo[Mazo.length-1].cartilla.angle+270;MostrarReverso(Mazo[Mazo.length-1].cartilla),GrupoR.add(Mazo[Mazo.length-1].cartilla)}n.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,Mazo[Mazo.length-1].jugador,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),"D"==t&&PreparaCaracteristicasMano(),Mazo.pop();var i=devuelveX(t,99),d=devuelveY(t,99);log(!1,"X de "+t+" "+i),(0<Mazo.length||0<CartaTriunfo.length)&&((tw1=game_objeto.add.tween(n[n.length-1].cartilla)).to({x:i,y:d,angle:l},vVelocidadRobar,EfectoTween1),tw1.onComplete.add(function(){ReubicarCartas(n,t),RobarCartas4(a,o,e)}),"D"==t&&game_objeto.add.tween(n[n.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),tw1.start()),0<CartaTriunfo.length&&CartaTriunfo[CartaTriunfo.length-1].cartilla.moveDown()}},RobarCartas4=function(a,o,e){var t,r,n=[],l=o+3;if(4<l&&(l-=4),0<Mazo.length||0<CartaTriunfo.length){if(log(!1,"koooo"),(n=0<Mazo.length?Mazo:CartaTriunfo)[n.length-1].cartilla,"U"==(t=DevuelveUbicacionCarta(l))){var i=MazoU,d=n[n.length-1].cartilla.angle;for(r=0;r<=n.length-1;r++)MostrarReverso(n[r].cartilla);GrupoU.add(n[n.length-1].cartilla)}if("D"==t){i=MazoD,d=n[n.length-1].cartilla.angle;MostrarAnverso(n[n.length-1].cartilla),GrupoD.add(n[n.length-1].cartilla)}if("L"==t){i=MazoL,d=n[n.length-1].cartilla.angle+90;for(r=0;r<=n.length-1;r++)MostrarReverso(n[r].cartilla);GrupoL.add(n[n.length-1].cartilla)}if("R"==t){i=MazoR,d=n[n.length-1].cartilla.angle+270;for(r=0;r<=n.length-1;r++)MostrarReverso(n[r].cartilla);GrupoR.add(n[n.length-1].cartilla)}i.push(new Carta(n[n.length-1].palo,n[n.length-1].idCarta,n[n.length-1].valor,n[n.length-1].cartilla,5,n[n.length-1].jugador,null,null,n[n.length-1].idPartida)),ReproducirSonido("_Reparto"),"D"==t&&PreparaCaracteristicasMano(),n.pop(),0==n.length&&(d-=90);var s=devuelveX(t,99),c=devuelveY(t,99);log(!1,"X de "+t+" "+s),(tw1=game_objeto.add.tween(i[i.length-1].cartilla)).to({x:s,y:c,angle:d},vVelocidadCartasReordernar,EfectoTween1),tw1.onComplete.add(function(){ReubicarCartas(i,t),EliminarDeLaMesa(a,e)}),"D"==t&&game_objeto.add.tween(i[i.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),tw1.start(),0<CartaTriunfo.length&&CartaTriunfo[CartaTriunfo.length-1].cartilla.moveDown()}MostrarOcultarBotonCante()},EliminaTextoPantalla=function(a){a.kill()},Trucaposicion=function(a,o,e){if(1==EstoyConectado()||0==ModoMultijugador)for(var t=0;t<=o.length-1;t++)if(o[t].cartilla.name==a.name){if(o[t].posicion=e,1==ModoMultijugador&&0==FReconectando())try{socket.emit("enviar posicion",Habitacion,SoyElJugador,o[t].cartilla.name,e,idPartida)}catch(a){}break}},devuelveX=function(a,o){for(var e=0;e<Mazoposiciones.length;e++)if(Mazoposiciones[e].Mazo==a&&Mazoposiciones[e].posicion==o)return Mazoposiciones[e].x},devuelveY=function(a,o){for(var e=0;e<Mazoposiciones.length;e++)if(Mazoposiciones[e].Mazo==a&&Mazoposiciones[e].posicion==o)return Mazoposiciones[e].y},ReubicarCartas=function(a,o,e,t,r){for(var n=0;n<=a.length-1;n++)a[n].cartilla.name==r&&(a[n].posicion=10);a.sort(sort_by("posicion",!1,parseFloat));for(n=0;n<=a.length-1;n++)a[n].posicion=n;if(1==e){for(n=0;n<=a.length-1&&a[n].cartilla.name!=t;n++);PosicionCartas(o);var l=devuelveX(o,n),i=devuelveY(o,n);"L"==o&&(DesHabilitarClick(a[n].cartilla),(twReu=game_objeto.add.tween(a[n].cartilla)).to({x:l+a[a.length-1].cartilla.width,y:i},vVelocidadCartasReordernar,EfectoTween1),twReu.onComplete.add(EfectosReordenarCartasPrevioL,this),twReu.start()),"R"==o&&(DesHabilitarClick(a[n].cartilla),(twReu=game_objeto.add.tween(a[n].cartilla)).to({x:l-a[a.length-1].cartilla.width,y:i},vVelocidadCartasReordernar,EfectoTween1),twReu.onComplete.add(EfectosReordenarCartasPrevioR,this),twReu.start()),"U"==o&&(DesHabilitarClick(a[n].cartilla),(twReu=game_objeto.add.tween(a[n].cartilla)).to({x:l,y:i+a[a.length-1].cartilla.width},vVelocidadCartasReordernar,EfectoTween1),twReu.onComplete.add(EfectosReordenarCartasPrevioU,this),twReu.start())}else EfectosReordenarCartas(o)},EfectosReordenarCartasPrevioR=function(){EfectosReordenarCartas("R")},EfectosReordenarCartasPrevioL=function(){EfectosReordenarCartas("L")},EfectosReordenarCartasPrevioU=function(){EfectosReordenarCartas("U")},Desolapar=function(){try{GrupoL.sort("y",Phaser.Group.SORT_ASCENDING),GrupoR.sort("y",Phaser.Group.SORT_DESCENDING)}catch(a){}},EfectosReordenarCartas=function(a){var o=[];if("U"==a&&(o=MazoU),"D"==a&&(o=MazoD),"L"==a&&(o=MazoL),"R"==a&&(o=MazoR),PosicionCartas(a),1<=o.length){var e=devuelveX(a,0),t=devuelveY(a,0);Desolapar(),(twReu=game_objeto.add.tween(o[0].cartilla)).to({x:e,y:t},vVelocidadCartasReordernar,EfectoTween1),twReu.onComplete.add(function(){Desolapar()}),twReu.start()}if(2<=o.length){e=devuelveX(a,1),t=devuelveY(a,1);(twReu=game_objeto.add.tween(o[1].cartilla)).to({x:e,y:t},vVelocidadCartasReordernar,EfectoTween1),twReu.onComplete.add(function(){Desolapar()}),twReu.start()}if(3<=o.length){e=devuelveX(a,2),t=devuelveY(a,2);(twReu=game_objeto.add.tween(o[2].cartilla)).to({x:e,y:t},vVelocidadCartasReordernar,EfectoTween1),twReu.onComplete.add(function(){Desolapar()}),twReu.start()}if(4<=o.length){if(0<Mazo.length)e=devuelveX(a,3),t=devuelveY(a,3);else if("R"==a)e=devuelveX(a,3),t=devuelveY(a,3);else e=devuelveX(a,3),t=devuelveY(a,3);(twReu=game_objeto.add.tween(o[3].cartilla)).to({x:e,y:t},vVelocidadCartasReordernar,EfectoTween1),twReu.onComplete.add(function(){Desolapar()}),twReu.start()}if(5<=o.length){e=devuelveX(a,4),t=devuelveY(a,4);(twReu=game_objeto.add.tween(o[4].cartilla)).to({x:e,y:t},vVelocidadCartasReordernar,EfectoTween1),twReu.onComplete.add(function(){Desolapar()}),twReu.start()}if(6<=o.length){e=devuelveX(a,5),t=devuelveY(a,5);(twReu=game_objeto.add.tween(o[5].cartilla)).to({x:e,y:t},vVelocidadCartasReordernar,EfectoTween1),twReu.onComplete.add(function(){Desolapar()}),twReu.start()}},PreparaCaracteristicasMano=function(){var a;for(a=0;a<=MazoD.length-1;a++)MazoD[a].cartilla.inputEnabled=!0,MazoD[a].cartilla.input.enableDrag(!1,!0),MazoD[a].cartilla.events.onDragStop.add(Parar_Drag)},DesHabilitarClick=function(a){a.inputEnabled=!1},HabilitarClick=function(a){log(!1,"Activa el sprite."),a.inputEnabled=!0};var sort_by=function(o,e,t){var r=t?function(a){return t(a[o])}:function(a){return a[o]};return e=e?-1:1,function(a,o){return a=r(a),o=r(o),e*((o<a)-(a<o))}};function Preload(){Phaser.State.call(this)}MoverCartaAjena=function(a,o,e,t){1==SoyElJugador&&(2==a&&OrganizarManoOrdenamiento(MazoR,"R",o,e,t),3==a&&OrganizarManoOrdenamiento(MazoU,"U",o,e,t),4==a&&OrganizarManoOrdenamiento(MazoL,"L",o,e,t)),2==SoyElJugador&&(3==a&&OrganizarManoOrdenamiento(MazoR,"R",o,e,t),4==a&&OrganizarManoOrdenamiento(MazoU,"U",o,e,t),1==a&&OrganizarManoOrdenamiento(MazoL,"L",o,e,t)),3==SoyElJugador&&(4==a&&OrganizarManoOrdenamiento(MazoR,"R",o,e,t),1==a&&OrganizarManoOrdenamiento(MazoU,"U",o,e,t),2==a&&OrganizarManoOrdenamiento(MazoL,"L",o,e,t)),4==SoyElJugador&&(1==a&&OrganizarManoOrdenamiento(MazoR,"R",o,e,t),2==a&&OrganizarManoOrdenamiento(MazoU,"U",o,e,t),3==a&&OrganizarManoOrdenamiento(MazoL,"L",o,e,t))},OrganizarManoOrdenamiento=function(a,o,e,t,r){for(var n=0;n<=a.length-1;n++)if(a[n].cartilla.name==e){a[n].posicion=t,ReubicarCartas(a,o,!0,e);break}Recuperarse(r,!1,!1)},EfectosRecogerCartas1=function(a){var o;if(1<=MazoCentral.length)if(MostrarReverso(MazoCentral[0].cartilla),1==BazaNuestraGlobal){for(o=1;o<=UltimaBazaNuestra.length;o++)UltimaBazaNuestra.alpha=1;UltimaBazaNuestra.splice(0,10),DesHabilitarClick(MazoCentral[0].cartilla),(twRecoger1=game_objeto.add.tween(MazoCentral[0].cartilla)).to({x:devuelveX("ULTIMA_Baza",0),y:devuelveY("ULTIMA_Baza",0),angle:Math.floor(360*Math.random())+1},vVelocidadCartasReordernar,EfectoTween1),twRecoger1.start(),GrupoUltimaBaza.add(MazoCentral[0].cartilla),MazoRecogido.push(MazoCentral[0].cartilla),UltimaBazaNuestra.push(MazoCentral[0].cartilla),HabilitarVerUltimaBaza(MazoCentral[0].cartilla)}else{for(o=1;o<=UltimaBazaRival.length;o++)UltimaBazaRival.alpha=1;UltimaBazaRival.splice(0,10),DesHabilitarClick(MazoCentral[0].cartilla),(twRecoger1=game_objeto.add.tween(MazoCentral[0].cartilla)).to({x:devuelveX("ULTIMA_Baza_Rival",0),y:devuelveY("ULTIMA_Baza_Rival",0),angle:Math.floor(360*Math.random())+1},vVelocidadCartasReordernar,EfectoTween1),twRecoger1.start(),GrupoUltimaBaza.add(MazoCentral[0].cartilla),MazoRecogidoRival.push(MazoCentral[0].cartilla),UltimaBazaRival.push(MazoCentral[0].cartilla),HabilitarVerUltimaBaza(MazoCentral[0].cartilla)}},EfectosRecogerCartas2=function(a){2<=MazoCentral.length&&(MostrarReverso(MazoCentral[1].cartilla),1==BazaNuestraGlobal?(DesHabilitarClick(MazoCentral[1].cartilla),(twRecoger2=game_objeto.add.tween(MazoCentral[1].cartilla)).to({x:devuelveX("ULTIMA_Baza",0),y:devuelveY("ULTIMA_Baza",0),angle:Math.floor(360*Math.random())+1},vVelocidadCartasReordernar,EfectoTween1),twRecoger2.start(),MazoRecogido.push(MazoCentral[1].cartilla),UltimaBazaNuestra.push(MazoCentral[1].cartilla)):(DesHabilitarClick(MazoCentral[1].cartilla),(twRecoger2=game_objeto.add.tween(MazoCentral[1].cartilla)).to({x:devuelveX("ULTIMA_Baza_Rival",0),y:devuelveY("ULTIMA_Baza_Rival",0),angle:Math.floor(360*Math.random())+1},vVelocidadCartasReordernar,EfectoTween1),twRecoger2.start(),MazoRecogidoRival.push(MazoCentral[1].cartilla),UltimaBazaRival.push(MazoCentral[1].cartilla)),HabilitarVerUltimaBaza(MazoCentral[1].cartilla),GrupoUltimaBaza.add(MazoCentral[1].cartilla))},EfectosRecogerCartas3=function(a){3<=MazoCentral.length&&(MostrarReverso(MazoCentral[2].cartilla),1==BazaNuestraGlobal?(DesHabilitarClick(MazoCentral[2].cartilla),(twRecoger3=game_objeto.add.tween(MazoCentral[2].cartilla)).to({x:devuelveX("ULTIMA_Baza",0),y:devuelveY("ULTIMA_Baza",0),angle:Math.floor(360*Math.random())+1},vVelocidadCartasReordernar,EfectoTween1),twRecoger3.start(),MazoRecogido.push(MazoCentral[2].cartilla),UltimaBazaNuestra.push(MazoCentral[2].cartilla)):(DesHabilitarClick(MazoCentral[2].cartilla),(twRecoger3=game_objeto.add.tween(MazoCentral[2].cartilla)).to({x:devuelveX("ULTIMA_Baza_Rival",0),y:devuelveY("ULTIMA_Baza_Rival",0),angle:Math.floor(360*Math.random())+1},vVelocidadCartasReordernar,EfectoTween1),twRecoger3.start(),MazoRecogidoRival.push(MazoCentral[2].cartilla),UltimaBazaRival.push(MazoCentral[2].cartilla)),HabilitarVerUltimaBaza(MazoCentral[2].cartilla),GrupoUltimaBaza.add(MazoCentral[2].cartilla))},EfectosRecogerCartas4=function(a,o,e){4<=MazoCentral.length&&(MostrarReverso(MazoCentral[3].cartilla),1==BazaNuestraGlobal?(DesHabilitarClick(MazoCentral[3].cartilla),(twRecoger4=game_objeto.add.tween(MazoCentral[3].cartilla)).to({x:devuelveX("ULTIMA_Baza",0),y:devuelveY("ULTIMA_Baza",0),angle:Math.floor(360*Math.random())+1},vVelocidadCartasReordernar,EfectoTween1),0<Mazo.length?twRecoger4.onComplete.add(function(){ForzarCambio7(a,o,e),MazoRecogido.push(MazoCentral[3].cartilla),UltimaBazaNuestra.push(MazoCentral[3].cartilla),HabilitarVerUltimaBaza(MazoCentral[3].cartilla),GrupoUltimaBaza.add(MazoCentral[3].cartilla)}):(log(!1,"se deber�a meter aqu�"),MazoRecogido.push(MazoCentral[3].cartilla),UltimaBazaNuestra.push(MazoCentral[3].cartilla),HabilitarVerUltimaBaza(MazoCentral[3].cartilla),GrupoUltimaBaza.add(MazoCentral[3].cartilla),twRecoger4.onComplete.add(function(){EliminarDeLaMesa(a,e)}))):(DesHabilitarClick(MazoCentral[3].cartilla),(twRecoger4=game_objeto.add.tween(MazoCentral[3].cartilla)).to({x:devuelveX("ULTIMA_Baza_Rival",0),y:devuelveY("ULTIMA_Baza_Rival",0),angle:Math.floor(360*Math.random())+1},vVelocidadCartasReordernar,EfectoTween1),0<Mazo.length?twRecoger4.onComplete.add(function(){ForzarCambio7(a,o,e),MazoRecogidoRival.push(MazoCentral[3].cartilla),UltimaBazaRival.push(MazoCentral[3].cartilla),HabilitarVerUltimaBaza(MazoCentral[3].cartilla),GrupoUltimaBaza.add(MazoCentral[3].cartilla)}):(log(!1,"o aqu�"),MazoRecogidoRival.push(MazoCentral[3].cartilla),UltimaBazaRival.push(MazoCentral[3].cartilla),HabilitarVerUltimaBaza(MazoCentral[3].cartilla),GrupoUltimaBaza.add(MazoCentral[3].cartilla),twRecoger4.onComplete.add(function(){EliminarDeLaMesa(a,e)}))),twRecoger4.start())},ForzarCambio7=function(a,o,e){var t,r,n,l,i=!1;for(t=0;t<=MazoD.length-1;t++)MazoD[t].palo==Triunfo&&7==MazoD[t].valor&&(i=!0,n=MazoD[t].cartilla.name,l="D");for(t=0;t<=MazoR.length-1;t++)MazoR[t].palo==Triunfo&&7==MazoR[t].valor&&(i=!0,n=MazoR[t].cartilla.name,l="R");for(t=0;t<=MazoU.length-1;t++)MazoU[t].palo==Triunfo&&7==MazoU[t].valor&&(i=!0,n=MazoU[t].cartilla.name,l="U");for(t=0;t<=MazoL.length-1;t++)MazoL[t].palo==Triunfo&&7==MazoL[t].valor&&(i=!0,n=MazoL[t].cartilla.name,l="L");r=DevuelveJugadorSegunMazo(l),log(!1,"La vRonda es "+a),1==i&&7<CartaTriunfo[0].valorReal&&4==a&&(1==BazaNuestraGlobal&&("D"==l||"U"==l)||0==BazaNuestraGlobal&&("L"==l||"R"==l))?(log(!1,"Carta a cambiar "+n),Cambiar7Ajeno(r,n,a,o,e,!0)):RobarCartas1(a,o,e)},EscribirTextoGuay=function(a,o){return null!=a&&""!=a&&GrupoTextos.removeAll(),TextoGeneral=game_objeto.add.bitmapText(0,0,"MiFuenteAmarilla","BitmapText",o),TextoGeneral.text=a,TextoGeneral.anchor.set(.5,.5),TextoGeneral.x=game_objeto.world.centerX,TextoGeneral.y=game_objeto.world.centerY-25,GrupoTextos.add(TextoGeneral),game_objeto.world.bringToTop(GrupoTextos),TextoGeneral},RondaFinalizada=function(a){0==FinalizandoPartida&&(FinalizandoPartida=!0,LimpiandoPartida(),0==SonVueltas&&Recuento(a))},Recuento=function(a){var o;log(!0,"A contar.."),ReproducirSonido("_Contar"),(o=EscribirTextoGuay("¡¡ A Contar !!",60)).alpha=1,(twRec1=game_objeto.add.tween(o).to({x:game_objeto.world.centerX},800,EfectoTweenRebote)).onComplete.add(function(){(twRec2=game_objeto.add.tween(o).to({alpha:0},1e3,EfectoTween1,!1)).onComplete.add(function(){o.kill(),0==FReconectando()?MueveRecogidasAlCentro():CrearTextoPuntuacion(a)}),twRec2.start()}),twRec1.start(),log(!0,"Recuento")},MueveRecogidasAlCentro=function(){var a;if(log(!1,"LLega a MueveRecogidasAlCentro"),0<MazoRecogido.length){for(a=0;a<=MazoRecogido.length-1;a++)DeshabilitarVerUltimaBaza(MazoRecogido[a]),MazoRecogido[a].bringToTop();for(a=0;a<=MazoRecogidoRival.length-1;a++)DeshabilitarVerUltimaBaza(MazoRecogidoRival[a]);for(a=MazoRecogido.length-1;0<=a;a--)(twRec2=game_objeto.add.tween(MazoRecogido[a])).to({x:game_objeto.world.centerX,y:game_objeto.world.height-MazoRecogido[a].height,angle:0},600,EfectoTween2),0==a&&twRec2.onComplete.add(MueveParaContar,this),twRec2.start(),(twRec3=game_objeto.add.tween(MazoRecogido[a].scale)).to({x:vEscalaUltimaBaza,y:vEscalaUltimaBaza}),twRec3.start()}else CrearTextoPuntuacion()},MueveParaContar=function(){0<MazoRecogido.length&&(MazoRecogido[MazoRecogido.length-1].bringToTop(),MostrarAnverso(MazoRecogido[MazoRecogido.length-1]),(twRec2=game_objeto.add.tween(MazoRecogido[MazoRecogido.length-1])).to({x:game_objeto.world.centerX,y:game_objeto.world.centerY-100,angle:Math.round(180*Math.random()-45)},50,EfectoTween1),1<MazoRecogido.length?twRec2.onComplete.add(function(){MazoRecogido[MazoRecogido.length-1].moveUp(),MazoRecogidoApoyo.push(MazoRecogido[MazoRecogido.length-1]),ReproducirSonido("_Reparto"),MazoRecogido.pop(),MueveParaContar()},this):twRec2.onComplete.add(function(){MazoRecogidoApoyo.push(MazoRecogido[MazoRecogido.length-1]),ReproducirSonido("_Reparto"),MazoRecogido.pop(),MueveParaContar(),MueveParaBarajar()},this),twRec2.start())},MueveParaBarajar=function(){var a,o,e=0,t=0,r=!1;0<MazoRecogidoApoyo.length&&(r=!0),o=DevuelveUbicacionCarta(vTurno);try{"D"==o&&(e=game_objeto.world.centerX,t=game_objeto.world.height+2*MazoRecogidoApoyo[MazoRecogidoApoyo.length-1].height),"U"==o&&(e=game_objeto.world.centerX,t=0-2*MazoRecogidoApoyo[MazoRecogidoApoyo.length-1].height),"L"==o&&(e=0-2*MazoRecogidoApoyo[MazoRecogidoApoyo.length-1].width,t=CentroIrreal),"R"==o&&(e=game_objeto.world.width+2*MazoRecogidoApoyo[MazoRecogidoApoyo.length-1].width,t=CentroIrreal)}catch(a){}if(log(!1,"Tama�o Rival "+MazoRecogidoRival.length),log(!1,"Tama�o Apoyo "+MazoRecogidoApoyo.length),0<MazoRecogidoRival.length)for(a=0;a<=MazoRecogidoRival.length-1;a++)(twRec1=game_objeto.add.tween(MazoRecogidoRival[a])).to({x:e,y:t},1e3,EfectoTween2,!1,500),0==r&&MazoRecogidoRival.length,twRec1.start();if(0<MazoRecogidoApoyo.length)for(a=0;a<=MazoRecogidoApoyo.length-1;a++)(twRec2=game_objeto.add.tween(MazoRecogidoApoyo[a])).to({x:e,y:t},1e3,EfectoTween2,!1,500),1==r&&a==MazoRecogidoApoyo.length-1&&twRec2.onComplete.add(CrearTextoPuntuacion,this),twRec2.start()},BorrarTareasObsoletas=function(){var a;for(a=0;a<=ArrayTareas.length-1;a++)ArrayTareas[a].idPartida==idPartida&&"reconectado_desde_server"!=ArrayTareas[a].Mensaje&&"desconectado_desde_server"!=ArrayTareas[a].Mensaje&&(ArrayTareas[a].Borrar=!0);for(a=ArrayTareas.length;a--;)1==ArrayTareas[a].Borrar&&ArrayTareas.splice(a,1);for(a=0;a<=ArrayBloqueoTareas.length-1;a++)ArrayBloqueoTareas[a].idPartida==idPartida&&"reconectado_desde_server"!=ArrayBloqueoTareas[a].Mensaje&&"desconectado_desde_server"!=ArrayBloqueoTareas[a].Mensaje&&(ArrayBloqueoTareas[a].Borrar=!0);for(a=ArrayBloqueoTareas.length;a--;)1==ArrayBloqueoTareas[a].Borrar&&ArrayBloqueoTareas.splice(a,1)},CalculaGBits=function(){var a,o,e=!1;o=a=0;try{e=0==ArrayDelaPropiaSala[SoyElJugador-1].Amigo}catch(a){e=!1}return 1==e&&(o=EsNuevoDia(),FinCoto()&&(MarcadorPartidasRival<MarcadorPartidasNuestro?a=3==MarcadorPartidasNuestro&&0==MarcadorPartidasRival?null!=ArrayInfoJugador&&ArrayInfoJugador[0].PuntuaciondePRO?10:5:null!=ArrayInfoJugador&&ArrayInfoJugador[0].PuntuaciondePRO?5:3:(a=null!=ArrayInfoJugador&&ArrayInfoJugador[0].PuntuaciondePRO?-4:-2,0<ArrayInfoJugador.length&&ArrayInfoJugador[0].GbitsResultado+ArrayInfoJugador[0].GbitsDiario+ArrayInfoJugador[0].GbitsPlus+a<0&&(a=0))),GbitsPendientes=GbitsPendientes+a+o),new function(a,o){this.GbitsResultado=a,this.GbitsNuevoDia=o}(a,o)},FinCoto=function(){return 1==vCampeonatoOasis?MarcadorPartidasNuestro+MarcadorPartidasRival==PartidasCoto:MarcadorPartidasNuestro==PartidasCoto||MarcadorPartidasRival==PartidasCoto},CrearTextoPuntuacion=function(t){var r,n,l,i,a;if(1==ValidaTextoPuntuacionJugador()){RepartoFinalizado=!1,DesbloquearTirada(),FinalizandoPartida=!0,timerturno.stop(),timerturno.remove(),timer.stop(),timer.remove(),MostrarTodasCartas(),a=0==SonVueltas||1==FReconectando()?0:3500;var o=game_objeto.time.create(!0);o.add(a,function(){LimpiarSprites(),TextMarcador.kill(),TextTituloMarcador.kill();if(1==EstoyConectado())if(0<ArrayInfoJugador.length){ArrayInfoJugador[0].Nombre,ArrayInfoJugador[0].ProveedorID,ArrayInfoJugador[0].RedSocial;try{socket.emit("enviar_peticion_publicidad",socket.id,Version,ObjetoG)}catch(a){}}else try{socket.emit("enviar_peticion_publicidad",socket.id,Version,ObjetoG)}catch(a){}if(1==BazaNuestraGlobal?0==SonVueltas&&(MarcadorNuestro+=10):0==SonVueltas&&(MarcadorRival+=10),SonVueltas=1!=SonVueltas,1==(i=PuntosGanar<=MarcadorNuestro||PuntosGanar<=MarcadorRival)&&(SonVueltas=!1,LimpiandoPartida()),n=50<MarcadorNuestro?MarcadorNuestro-50+" Buenas":MarcadorNuestro+" Malas",l=50<MarcadorRival?MarcadorRival-50+" Buenas":MarcadorRival+" Malas",TextMarcador.text=n+"\n"+l,TextoCampeon="¡¡ Vamos de vueltas !!",PuntosGanar<=MarcadorNuestro&&PuntosGanar<=MarcadorRival?1==BazaNuestraGlobal?(MarcadorPartidasNuestro++,GrabarResultado(SoyElJugador,MarcadorPartidasNuestro+MarcadorPartidasRival-1,SonVueltas,1,!1,!1,!1,!1),MarcadorPartidasNuestro==PartidasCoto?(1==ModoMultijugador&&(CotoGanado=!0),TextoCampeon="¡¡ Ganamos la partida\n y el coto !!"):TextoCampeon="¡¡ Ganamos la partida !!",ReproducirSonido("_Campeones")):(MarcadorPartidasRival++,GrabarResultado(SoyElJugador,MarcadorPartidasNuestro+MarcadorPartidasRival-1,SonVueltas,2,!1,!1,!1,!1),TextoCampeon=MarcadorPartidasRival==PartidasCoto?"¡¡ Perdimos el coto  :(  !!":"Hemos perdido la partida.\n ¡¡ A por ellos !!",ReproducirSonido("_OtraVezSera")):(PuntosGanar<=MarcadorNuestro&&(MarcadorPartidasNuestro++,GrabarResultado(SoyElJugador,MarcadorPartidasNuestro+MarcadorPartidasRival-1,SonVueltas,1,!1,!1,!1,!1),MarcadorPartidasNuestro==PartidasCoto?(1==ModoMultijugador&&(CotoGanado=!0),TextoCampeon="¡¡ Ganamos la partida\n y el coto !!",ContadorNoticia=0):TextoCampeon="¡¡ Ganamos la partida !!",ReproducirSonido("_Campeones")),PuntosGanar<=MarcadorRival&&(MarcadorPartidasRival++,GrabarResultado(SoyElJugador,MarcadorPartidasNuestro+MarcadorPartidasRival-1,SonVueltas,2,!1,!1,!1,!1),MarcadorPartidasRival==PartidasCoto?(TextoCampeon="¡¡ Perdimos el coto  :(  !!",ContadorNoticia=0):TextoCampeon="Hemos perdido la partida.\n ¡¡ A por ellos !!",ReproducirSonido("_OtraVezSera"))),1==vCampeonatoOasis&&(TextoCampeonato.text="Humanos: "+MarcadorPartidasNuestro+" Robots: "+MarcadorPartidasRival),FinCoto()){var a;if(1==ModoMultijugador&&1==EstoyConectado()&&0==ArrayDelaPropiaSala[SoyElJugador-1].Amigo)try{socket.emit("NoResta",socket.id,Habitacion,idPartida)}catch(a){}MarcadorPartidasNuestro==PartidasCoto?(a="copa",EmiteLogos()):a="perder",Copa.frameName=a,Copa.x=game_objeto.world.width+500,Copa.revive(),Copa.alpha=1,(twRec1=game_objeto.add.tween(Copa).to({x:game_objeto.world.centerX},1e3,EfectoTweenRebote,!0)).onComplete.add(function(){ReproducirSonido("_CotoTerminado"),(twRec1=game_objeto.add.tween(Copa).to({alpha:0},0,EfectoTween1,!0,3e3)).onComplete.add(function(){Copa.kill(),Copa.alpha=1})})}(r=EscribirTextoGuay(TextoCampeon,60)).anchor.setTo(.5,.5);var o=1e3,e=2e3;if(1==FReconectando())o=0,e=0;r.alpha=1,(twRec1=game_objeto.add.tween(r).to({alpha:0},o,EfectoTween1,!0,e)).onComplete.add(function(){var a;(a=document.getElementById("Clasificacion").rows[1].cells)[1].innerHTML=n,a[2].innerHTML=MarcadorPartidasNuestro,(a=document.getElementById("Clasificacion").rows[2].cells)[1].innerHTML=l,a[2].innerHTML=MarcadorPartidasRival,document.getElementById("DivResultado").style.display="block",1==i&&(MarcadorRival=MarcadorNuestro=0);var o=0,e=3e3;if(1==FReconectando())o=0,e=0;(twRec2=game_objeto.add.tween(r).to({alpha:0},o,EfectoTween1,!0,e)).onComplete.add(function(){document.getElementById("DivResultado").style.display="none",FinCoto()?(MatarConexion(),ConectaServidor()):(FinalizaTextoPuntuacionJugador(),BorrarTareasObsoletas(),Recuperarse(t))})})}),o.start()}},MatarConexionPrueba=function(){try{MuestraErrorDesconexion=!0,socket.disconnect(),socket=void 0,IntentosReconexion=0}catch(a){}},MatarConexion=function(){GrupoChat.removeAll();try{game_objeto.time.removeAll(),CrearTimers()}catch(a){}try{MuestraErrorDesconexion=!1,socket.disconnect(),socket=void 0,Habitacion=Math.floor(Math.random()),IntentosReconexion=0}catch(a){}Habitacion=Math.floor(Math.random()),LimpiarVariablesConexionNueva(),LimpiarVariables(),game_objeto.state.start("Level",!1,!0)},MatarConexionDeMentira=function(){GrupoChat.removeAll(),Habitacion=Math.floor(Math.random()),LimpiarVariablesConexionNueva(),LimpiarVariables(),game_objeto.state.start("Level",!1,!0)},LimpiarSprites=function(){FondoNegro.kill();try{ObjTurnoR.kill(),ObjTurnoL.kill(),ObjTurnoU.kill(),ObjTurnoD.kill()}catch(a){}Mazo.splice(0,100),MazoR.splice(0,100),MazoL.splice(0,100),MazoU.splice(0,100),MazoD.splice(0,100),MazoCentral.splice(0,100),CartaTriunfo.splice(0,100),MazoRecogido.splice(0,100),MazoRecogidoRival.splice(0,100);try{GrupoD.removeAll(),GrupoL.removeAll(),GrupoR.removeAll(),GrupoU.removeAll(),GrupoMazo.removeAll(),GrupoCentral.removeAll(),GrupoUltimaBaza.removeAll(),Grupo7.removeAll(),GrupoTextos.removeAll(),twChatTextoD1.isRunning||twChatTextoR1.isRunning||twChatTextoL1.isRunning||twChatTextoU1.isRunning||twMensajeError.isRunning||twChatTextoD2.isRunning||twChatTextoR2.isRunning||twChatTextoL2.isRunning||twChatTextoU2.isRunning||twRec1.isRunning||twRec2.isRunning||twRec3.isRunning||twRecoger1.isRunning||twRecoger2.isRunning||twRecoger3.isRunning||game_objeto.tweens.removeAll()}catch(a){}},LimpiarVariables=function(){var a;for(0==FReconectando()&&(BloqueoCartaCentro=!1),RepartoFinalizado=PartidaComenzada=vNoEsta=BloqueoOrganizador=EligiendoPareja=!1,TiempoAntesDesconexion=BucleManoCentro=0,null!=timerturno&&(timerturno.stop(),timerturno.remove()),null!=timerpareja&&(timerpareja.stop(),timerpareja.remove()),null!=timerestoylisto&&(timerestoylisto.stop(),timerestoylisto.remove()),null!=timerBarajaRecibida&&(timerBarajaRecibida.stop(),timerBarajaRecibida.remove()),null!=timerNuevaPartida&&(timerNuevaPartida.stop(),timerNuevaPartida.remove()),null!=timer&&(timer.stop(),timer.remove()),0==ArrayTareas.length&&DesbloquearTirada(),BotonesPartidaBloqueados=!1,Noticia.kill(),TextMarcador.kill(),TextTituloMarcador.kill(),BotonCantar.kill(),BotonSiete.kill(),textoContador.text="",textoContador.kill(),ObjTurnoR.kill(),ObjTurnoL.kill(),ObjTurnoU.kill(),ObjTurnoD.kill(),BotonHablarOn.kill(),BotonHablarOff.kill(),BotonEscribir.kill(),BotonPolicia.kill(),log(!0,"Limpiando variables.."),SieteDesactivar(),CantarDesactivar(),ArrayAccionesDesconexiones.splice(0,1e3),Mazo.splice(0,100),MazoEnviar.splice(0,100),MazoR.splice(0,100),MazoL.splice(0,100),MazoU.splice(0,100),MazoD.splice(0,100),Mazoposiciones.splice(0,100),MazoCentral.splice(0,100),CartaTriunfo.splice(0,100),MazoRecogido.splice(0,100),MazoRecogidoApoyo.splice(0,100),MazoRecogidoRival.splice(0,100),a=SemaforoRondas.length;a--;)SemaforoRondas[a].idPartida==idPartida&&SemaforoRondas.splice(a,1);vRondaApoyo=vRonda=1,RondaJugada.splice(0,100),BazaNuestraGlobal=!1,RegistrarCantes.splice(0,100),UltimaBazaNuestra.splice(0,100),UltimaBazaRival.splice(0,100),ArrayDescartePosible.splice(0,100),log(!0,"Fin limpiando variables..")},DesbloquearTirada=function(){BloquearTirada=!1},LimpiarVariablesConexionNueva=function(){LimpiarVariables(),idPartida=null,BucleManoCentro=TiempoAntesDesconexion=0,FinalizandoPartida=vNoEsta=BotonesPartidaBloqueados=BloqueoOrganizador=EligiendoPareja=BloqueoCartaCentro=!1,ObjTurnoR.kill(),ObjTurnoL.kill(),ObjTurnoU.kill(),ObjTurnoD.kill(),DesbloquearTirada(),log(!0,"Limpiando variables conexión nueva.."),Habitacion=Math.floor(Math.random()),OcultaClasificacion(),SemaforoRepartos.splice(0,1e3),SemaforoTextoPuntuacion.splice(0,100),ArrayTareas.splice(0,1e4),ArrayBloqueoTareas.splice(0,1e4),ArrayBloqueoTareasBack.splice(0,1e4),ArrayTareasGestionadas.splice(0,1e4),ArrayAccionesDesconexiones.splice(0,1e3),TextMarcador.text="",TextMarcador.kill(),TextTituloMarcador.kill(),textoContador.text="",textoContador.kill(),BotonCantar.kill(),BotonSiete.kill(),MarcadorPartidasNuestroFin=MarcadorPartidasNuestro,MarcadorPartidasRivalFin=MarcadorPartidasRival,MarcadorPartidasRival=MarcadorPartidasNuestro=MarcadorRival=MarcadorNuestro=0,ArrayDelaPropiaSala.splice(0,1e3),ArrayJugadoresDesconectados.splice(0,1e3),ArrayChatDeshabilitado.splice(0,1e3),QuienTomaElControl=0,SonVueltas=RepartoFinalizado=PartidaComenzada=!1,vTurno=vRondaApoyo=vRonda=1},CargaOpcionesDefecto=function(){var a;(a=document.getElementById("SelectorBaraja")).selectedIndex=StorageGet("TipoBaraja"),TipoBaraja=1==a.selectedIndex?"baraja_guinarte":"baraja_pro",(a=document.getElementById("OptAudioChascarrillo")).checked=StorageGet("AudioChascarrillos"),(a=document.getElementById("OptAudioCantes")).checked=StorageGet("AudioCantes"),(a=document.getElementById("OptAudioCartas")).checked=StorageGet("AudioCartas"),SonidoChascarrillos=StorageGet("AudioChascarrillos"),SonidoCantes=StorageGet("AudioCantes"),SonidoCartas=StorageGet("AudioCartas")},CambioSelectorBaraja=function(){var a=document.getElementById("SelectorBaraja");StorageSet("TipoBaraja",a.selectedIndex),CargaOpcionesDefecto()},CambioSelectorAudioChascarrillos=function(){var a=document.getElementById("OptAudioChascarrillo");StorageSet("AudioChascarrillos",a.checked),CargaOpcionesDefecto()},CambioSelectorAudioCantes=function(){var a=document.getElementById("OptAudioCantes");StorageSet("AudioCantes",a.checked),CargaOpcionesDefecto()},CambioSelectorAudioCartas=function(){var a=document.getElementById("OptAudioCartas");StorageSet("AudioCartas",a.checked),CargaOpcionesDefecto()},ComunBarajas=function(){CargaOpcionesDefecto(),GrupoD=game_objeto.add.group(),GrupoL=game_objeto.add.group(),GrupoR=game_objeto.add.group(),GrupoU=game_objeto.add.group(),GrupoMazo=game_objeto.add.group(),GrupoCentral=game_objeto.add.group(),GrupoUltimaBaza=game_objeto.add.group(),Grupo7=game_objeto.add.group(),GrupoChat=game_objeto.add.group(),(GrupoTextos=game_objeto.add.group()).add(textEsperando),game_objeto.world.bringToTop(GrupoTextos),GrupoTextos.add(textListos),game_objeto.world.bringToTop(GrupoTextos),twBocadillo=game_objeto.add.tween(CartaDummie),twFondoNegro=game_objeto.add.tween(CartaDummie),twRec1=game_objeto.add.tween(CartaDummie),twRec2=game_objeto.add.tween(CartaDummie),twRec3=game_objeto.add.tween(CartaDummie),tw1=game_objeto.add.tween(CartaDummie),tw2=game_objeto.add.tween(CartaDummie),tw3=game_objeto.add.tween(CartaDummie),tw4=game_objeto.add.tween(CartaDummie),twRecoger1=game_objeto.add.tween(CartaDummie),twRecoger2=game_objeto.add.tween(CartaDummie),twRecoger3=game_objeto.add.tween(CartaDummie),twRecoger4=game_objeto.add.tween(CartaDummie),twPeq1=game_objeto.add.tween(CartaDummie),twPeq2=game_objeto.add.tween(CartaDummie),twPeq3=game_objeto.add.tween(CartaDummie),twPeq4=game_objeto.add.tween(CartaDummie),twChatTextoD1=game_objeto.add.tween(CartaDummie),twChatTextoD2=game_objeto.add.tween(CartaDummie),twChatTextoL1=game_objeto.add.tween(CartaDummie),twChatTextoL2=game_objeto.add.tween(CartaDummie),twChatTextoR1=game_objeto.add.tween(CartaDummie),twChatTextoR2=game_objeto.add.tween(CartaDummie),twChatTextoU1=game_objeto.add.tween(CartaDummie),twChatTextoU2=game_objeto.add.tween(CartaDummie),twChatBocadilloD1=game_objeto.add.tween(CartaDummie),twChatBocadilloD2=game_objeto.add.tween(CartaDummie),twChatBocadilloL1=game_objeto.add.tween(CartaDummie),twChatBocadilloL2=game_objeto.add.tween(CartaDummie),twChatBocadilloR1=game_objeto.add.tween(CartaDummie),twChatBocadilloR2=game_objeto.add.tween(CartaDummie),twChatBocadilloU1=game_objeto.add.tween(CartaDummie),twChatBocadilloU2=game_objeto.add.tween(CartaDummie),twBocadilloCanteD1=game_objeto.add.tween(CartaDummie),twBocadilloCanteD2=game_objeto.add.tween(CartaDummie),twBocadilloCanteD3=game_objeto.add.tween(CartaDummie),twBocadilloCanteD4=game_objeto.add.tween(CartaDummie),twBocadilloCanteL1=game_objeto.add.tween(CartaDummie),twBocadilloCanteL2=game_objeto.add.tween(CartaDummie),twBocadilloCanteL3=game_objeto.add.tween(CartaDummie),twBocadilloCanteL4=game_objeto.add.tween(CartaDummie),twBocadilloCanteR1=game_objeto.add.tween(CartaDummie),twBocadilloCanteR2=game_objeto.add.tween(CartaDummie),twBocadilloCanteR3=game_objeto.add.tween(CartaDummie),twBocadilloCanteR4=game_objeto.add.tween(CartaDummie),twBocadilloCanteU1=game_objeto.add.tween(CartaDummie),twBocadilloCanteU2=game_objeto.add.tween(CartaDummie),twBocadilloCanteU3=game_objeto.add.tween(CartaDummie),twBocadilloCanteU4=game_objeto.add.tween(CartaDummie),twMensajeError=game_objeto.add.tween(CartaDummie)},NuevaPartida=function(a,o){var e,t,r=60,n=!1;timerNuevaPartida.stop(),timerNuevaPartida.remove();var l=vTurno=a;if((l==SoyElJugador||PermisoParaTomarControl(l))&&(1==ModoMultijugador&&EstoyConectado()&&(0==FReconectando()||1==o)||0==ModoMultijugador)){for(t=!1,e=0;e<=ArrayJugadoresDesconectados.length-1;e++)ArrayJugadoresDesconectados[e].Jugador==l&&(t=!0);if(0==ModoMultijugador&&(t=!0),(l==SoyElJugador||1==t)&&(--r<=0&&(timerNuevaPartida.stop(),timerNuevaPartida.remove()),CompruebaPeticionReparto(idPartida))){if(0==ModoMultijugador){var i=idPartida;idPartida=1e5*Math.random(),CompruebaPartidaFinalizada(i,idPartida),CierraPartida(i)}0==ModoMultijugador?(CrearBaraja(l),!0,timerNuevaPartida.stop(),timerNuevaPartida.remove(),n=!0):0==MazoD.length&&0==MazoCentral.length&&0==MazoL.length&&0==MazoR.length&&4<=ArrayDelaPropiaSala.length&&(0==FReconectando()||1==o)&&(CrearBaraja(l),log(!1,MazoEnviar.length),log(!0,"... y la envío"),log(!0,"Envío que reparte: "+l),EnviarBaraja(MazoEnviar,Habitacion,l,SonVueltas,ArrayDelaPropiaSala,MarcadorPartidasNuestro+MarcadorPartidasRival),timerNuevaPartida.stop(),timerNuevaPartida.remove(),n=!0)}}return n},LimpiandoPartida=function(){textoContador.text="",textoContador.kill(),RepartoFinalizado=PartidaComenzada=!1,timerturno.stop(),timerturno.remove(),timer.stop(),timer.remove(),CantarDesactivar(),SieteDesactivar(),BotonCantar.kill(),BotonSiete.kill()},HabilitarVerUltimaBaza=function(a){a.inputEnabled=!0,a.input.disableDrag(),a.events.onInputDown.add(MuestraUltimaBaza)},DeshabilitarVerUltimaBaza=function(a){a.inputEnabled=!1},MuestraUltimaBaza=function(a){var o;log(!1,"mostrando �ltima Baza");var e,t="Nuestro",r=!1,n=[];for(o=0;o<=MazoRecogido.length-1;o++)a.name==MazoRecogido[o].name&&(r=!0,t="Nuestro");if(1==r)e=UltimaBazaNuestra;else{for(o=0;o<=MazoRecogidoRival.length-1;o++)a.name==MazoRecogidoRival[o].name&&(r=!0,t="Rival");1==r&&(e=UltimaBazaRival)}var l=[];for(o=0;o<=e.length-1;o++)0==e[o].key.indexOf("baraja")&&(0,l.push(o));for(o=0;o<=e.length-1;o++)n.push(e[o]),GrupoUltimaBaza.add(n[o]),MostrarAnverso(n[o]);if(1==r){for(o=0;o<=MazoCentral.length-1;o++)MazoCentral[o].cartilla.alpha=.2;try{twUB1=game_objeto.add.tween(n[0].scale),twUB1.to({x:vEscalaUltimaBaza,y:vEscalaUltimaBaza,angle:0},vVelocidadCartasReordernar,EfectoTween1),twUB1.start(),twUB1=game_objeto.add.tween(n[0]),twUB1.to({x:game_objeto.world.centerX,y:CentroIrreal,angle:0},vVelocidadCartasReordernar,EfectoTween1),twUB1.start(),twUB1=game_objeto.add.tween(n[1].scale),twUB1.to({x:vEscalaUltimaBaza,y:vEscalaUltimaBaza,angle:0},vVelocidadCartasReordernar,EfectoTween1),twUB1.start(),twUB1=game_objeto.add.tween(n[1]),twUB1.to({x:game_objeto.world.centerX+1*AnchoCarta+vSeparacion,y:CentroIrreal,angle:0},vVelocidadCartasReordernar,EfectoTween1),twUB1.start(),twUB1=game_objeto.add.tween(n[2].scale),twUB1.to({x:vEscalaUltimaBaza,y:vEscalaUltimaBaza,angle:0},vVelocidadCartasReordernar,EfectoTween1),twUB1.start(),twUB1=game_objeto.add.tween(n[2]),twUB1.to({x:game_objeto.world.centerX+2*AnchoCarta+2*vSeparacion,y:CentroIrreal,angle:0},vVelocidadCartasReordernar,EfectoTween1),twUB1.start(),twUB1=game_objeto.add.tween(n[3].scale),twUB1.to({x:vEscalaUltimaBaza,y:vEscalaUltimaBaza,angle:0},vVelocidadCartasReordernar,EfectoTween1),twUB1.start(),twUB1=game_objeto.add.tween(n[3]),twUB1.to({x:game_objeto.world.centerX+3*AnchoCarta+3*vSeparacion,y:CentroIrreal,angle:0},vVelocidadCartasReordernar,EfectoTween1),twUB1.onComplete.add(function(){EfectoHacerPequenasUltimaBaza(n,t,l)}),twUB1.start()}catch(a){}}},EfectoHacerPequenasUltimaBaza=function(a,o,e){twUB1=game_objeto.add.tween(a[0].scale),twUB1.to({x:vEscalaPequenas,y:vEscalaPequenas},vVelocidadCartasReordernar,EfectoTween1,!1,500),twUB1.start(),twUB1=game_objeto.add.tween(a[1].scale),twUB1.to({x:vEscalaPequenas,y:vEscalaPequenas},vVelocidadCartasReordernar,EfectoTween1,!1,500),twUB1.start(),twUB1=game_objeto.add.tween(a[2].scale),twUB1.to({x:vEscalaPequenas,y:vEscalaPequenas},vVelocidadCartasReordernar,EfectoTween1,!1,500),twUB1.start(),twUB1=game_objeto.add.tween(a[3].scale),twUB1.to({x:vEscalaPequenas,y:vEscalaPequenas},vVelocidadCartasReordernar,EfectoTween1,!1,500),twUB1.onComplete.add(function(){EfectoRecogerUltimaBaza(a,o,e)}),twUB1.start()},EfectoRecogerUltimaBaza=function(a,o,e){var t,r,n;if("Nuestro"==o?(t=devuelveX("ULTIMA_Baza",0),r=devuelveY("ULTIMA_Baza",0)):(t=devuelveX("ULTIMA_Baza_Rival",0),r=devuelveY("ULTIMA_Baza_Rival",0)),MostrarReverso(a[0]),MostrarReverso(a[1]),MostrarReverso(a[2]),MostrarReverso(a[3]),0<e.length)for(n=0;n<=e.length-1;n++)MostrarAnverso(a[e[n]]);for(twUB1=game_objeto.add.tween(a[0]),a[0].alpha=1,twUB1.to({x:t,y:r,angle:Math.floor(360*Math.random())+1},vVelocidadCartasReordernar,EfectoTween1),twUB1.start(),twUB1=game_objeto.add.tween(a[1]),a[1].alpha=1,twUB1.to({x:t,y:r,angle:Math.floor(360*Math.random())+1},vVelocidadCartasReordernar,EfectoTween1),twUB1.start(),twUB1=game_objeto.add.tween(a[2]),a[2].alpha=1,twUB1.to({x:t,y:r,angle:Math.floor(360*Math.random())+1},vVelocidadCartasReordernar,EfectoTween1),twUB1.start(),twUB1=game_objeto.add.tween(a[3]),a[3].alpha=1,twUB1.to({x:t,y:r,angle:Math.floor(360*Math.random())+1},vVelocidadCartasReordernar,EfectoTween1),twUB1.start(),n=0;n<=MazoCentral.length-1;n++)MazoCentral[n].cartilla.alpha=1},quakeEnd=function(){var a=game_objeto.world.width+-100,o=game_objeto.world.height+-100;game_objeto.world.setBounds(0,0,a,o),game_objeto.world.camera.position.set(0,0)},OcultaClasificacion=function(){document.getElementById("DivResultado").style.display="none"},EnviarBaraja=function(a,o,e,t,r,n){Date.now();var l=[];l.splice(0,1e3);var i=1e5*Math.random(),d=new function(a,o,e,t,r,n,l,i,d,s,c){this.MazoEnviar=a,this.Habitacion=o,this.QuienReparte=e,this.SonVueltas=t,this.ArrayDelaPropiaSala=r,this.Partida=n,this.idPartida=l,this.IdMsg=i,this.ClientId=d,this.SalaID=s,this.Mensaje=c,this.Fecha=new Date(Date.now())}(a,o,e,t,r,n,idPartida,i,socket.id,o,"enviar baraja");ArrayAccionesDesconexiones.push(d),l.push(d);var s=game_objeto.time.create(!1);s.loop(200,function(){try{socket.emit("enviar baraja",l[0],function(a){EliminarColaMensajes(a,"enviar baraja")}),l.splice(0,1e3),s.stop(),s.remove()}catch(a){}}),s.start()};var proto=Object.create(Phaser.State);Preload.prototype=proto,Preload.prototype.preload=function(){var a=this.add.image(this.world.centerX,this.world.centerY,"loading");a.anchor.set(.5,.5),this.load.setPreloadSprite(a),this.load.bitmapFont("MiFuenteAmarilla","assets/fonts/font.png","assets/fonts/font.fnt"),this.load.bitmapFont("MiFuenteNegra","assets/fonts/fontblack.png","assets/fonts/fontblack.fnt"),this.load.bitmapFont("MiFuenteRoja","assets/fonts/fontred.png","assets/fonts/fontred.fnt"),this.load.atlas("baraja_pro","assets/images/Cartas/baraja_pro.png","assets/images/Cartas/baraja_pro.json",Phaser.Loader.TEXTURE_ATLAS_JSON_HASH),this.load.atlas("baraja_guinarte","assets/images/Cartas/baraja_guinarte.png","assets/images/Cartas/baraja_guinarte.json",Phaser.Loader.TEXTURE_ATLAS_JSON_HASH),this.load.atlas("general","assets/images/general.png","assets/images/general.json",Phaser.Loader.TEXTURE_ATLAS_JSON_HASH),this.load.image("Emoticono1","assets/images/emoticonos/emoticono1.png"),this.load.image("Reverso","assets/images/Cartas/Reversos/reverso.png",!0),this.load.image("Maquina","assets/images/Cartas/Reversos/maquina.jpg"),this.load.image("Tapete","assets/images/Cartas/Tapetes/tapete.jpg"),this.load.image("Tapete_43","assets/images/Cartas/Tapetes/tapete_43.jpg"),window.plugins&&window.plugins.NativeAudio&&(LoadCordova("SndMesa","assets/sounds/mesa.mp3"),LoadCordova("SndReparto","assets/sounds/reparto.mp3"),LoadCordova("Snd20","assets/sounds/cantes/20.mp3"),LoadCordova("Snd20Oros","assets/sounds/cantes/20_oros.mp3"),LoadCordova("Snd20Copas","assets/sounds/cantes/20_copas.mp3"),LoadCordova("Snd20Espadas","assets/sounds/cantes/20_espadas.mp3"),LoadCordova("Snd20Bastos","assets/sounds/cantes/20_bastos.mp3"),LoadCordova("SndLas40","assets/sounds/cantes/las_40.mp3"),LoadCordova("SndLas40_2","assets/sounds/cantes/las_40_2.mp3"),LoadCordova("SndIdas","assets/sounds/idas.mp3"),LoadCordova("SndVueltas","assets/sounds/vueltas.mp3"),LoadCordova("SndAPorEllos","assets/sounds/a_por_ellos.mp3"),LoadCordova("SndArrastro","assets/sounds/arrastro.mp3"),LoadCordova("SndArrastro2","assets/sounds/arrastro_2.mp3"),LoadCordova("SndBocarrana","assets/sounds/bocarrana.mp3"),LoadCordova("SndCampeones","assets/sounds/campeones.mp3"),LoadCordova("SndContar","assets/sounds/contar.mp3"),LoadCordova("SndCotoTerminado","assets/sounds/coto_terminado.mp3"),LoadCordova("SndEspadilla","assets/sounds/espadilla.mp3"),LoadCordova("SndOre","assets/sounds/ore.mp3"),LoadCordova("SndOtraVezSera","assets/sounds/otra_vez.mp3"),LoadCordova("SndTabazo","assets/sounds/tabazo.mp3"),LoadCordova("SndTabazo2","assets/sounds/tabazo_2.mp3"),LoadCordova("SndMatanzaCaballo","assets/sounds/matanza_caballo.mp3"),LoadCordova("SndIdas2","assets/sounds/idas2.mp3"),LoadCordova("SndVueltas2","assets/sounds/vueltas2.mp3"),LoadCordova("SndGrano","assets/sounds/grano.mp3"),LoadCordova("SndUltimas","assets/sounds/ultimas.mp3"),LoadCordova("SndChatarrero","assets/sounds/chatarrero.mp3"),LoadCordova("SndChiflar","assets/sounds/chiflar.mp3"),LoadCordova("SndEscupe","assets/sounds/escupe.mp3"),LoadCordova("SndFaldas","assets/sounds/faldas.mp3"),LoadCordova("SndGorrion","assets/sounds/gorrion.mp3"),LoadCordova("SndGrijan","assets/sounds/grijan.mp3"),LoadCordova("SndGuinoteOtro","assets/sounds/guinote_otro.mp3"),LoadCordova("SndMataBocarrana","assets/sounds/mata_bocarrana.mp3"),LoadCordova("SndMonja","assets/sounds/monja.mp3"),LoadCordova("SndPajaro","assets/sounds/pajaro.mp3"),LoadCordova("SndPrimeraChicos","assets/sounds/chicos.mp3"),LoadCordova("SndPuntos","assets/sounds/puntosaudio.mp3"),LoadCordova("SndToro","assets/sounds/toro.mp3"),LoadCordova("SndFueraMesa","assets/sounds/fuera_mesa.mp3"),LoadCordova("SndProfesionales","assets/sounds/atencion_profesionales.mp3"),LoadCordova("SndCaballoEncimador","assets/sounds/caballo_encimador.mp3"),LoadCordova("SndGafas","assets/sounds/el_gafas.mp3"),LoadCordova("SndHabiendoPan","assets/sounds/habiendo_pan.mp3"),LoadCordova("SndHayPros","assets/sounds/hay_pros.mp3"),LoadCordova("SndOficio","assets/sounds/muerto_oficio.mp3"),LoadCordova("SndQuinceMas","assets/sounds/quince_o_mas.mp3"),LoadCordova("SndSindicato","assets/sounds/sindicato_dos_seguidas.mp3"),LoadCordova("SndTuCuenta","assets/sounds/tu_cuenta.mp3"),LoadCordova("SndCremallera","assets/sounds/cremallera.mp3"),LoadCordova("SndMonedas","assets/sounds/monedas.mp3"),LoadCordova("SndPrimo","assets/sounds/primo.mp3"),LoadCordova("SndToco","assets/sounds/toco.mp3"),LoadCordova("SndTaustano","assets/sounds/taustano.mp3"),LoadCordova("SndNoSube","assets/sounds/nosube.mp3"),LoadCordova("SndSientate","assets/sounds/sientate.mp3"),LoadCordova("SndPensar","assets/sounds/pensar.mp3"),LoadCordova("SndNoSabes","assets/sounds/nosabes.mp3"),LoadCordova("SndNano","assets/sounds/nano.mp3"),LoadCordova("SndMejor","assets/sounds/mejor.mp3"),LoadCordova("SndGenial","assets/sounds/genial.mp3"),LoadCordova("SndDar","assets/sounds/dar.mp3"),LoadCordova("SndClases","assets/sounds/clases.mp3"),LoadCordova("Snd20Copas2","assets/sounds/copas.mp3"),LoadCordova("SndArtista","assets/sounds/artista.mp3"),LoadCordova("SndArrancao","assets/sounds/arrancao.mp3")),this.load.audio("SndCremallera",["assets/sounds/cremallera.ogg","assets/sounds/cremallera.mp3"]),this.load.audio("SndMonedas",["assets/sounds/monedas.ogg","assets/sounds/monedas.mp3"]),this.load.audio("SndFueraMesa",["assets/sounds/fuera_mesa.ogg","assets/sounds/fuera_mesa.mp3"]),this.load.audio("SndProfesionales",["assets/sounds/atencion_profesionales.ogg","assets/sounds/atencion_profesionales.mp3"]),this.load.audio("SndCaballoEncimador",["assets/sounds/caballo_encimador.ogg","assets/sounds/caballo_encimador.mp3"]),this.load.audio("SndGafas",["assets/sounds/el_gafas.ogg","assets/sounds/el_gafas.mp3"]),this.load.audio("SndHabiendoPan",["assets/sounds/habiendo_pan.ogg","assets/sounds/habiendo_pan.mp3"]),this.load.audio("SndHayPros",["assets/sounds/hay_pros.ogg","assets/sounds/hay_pros.mp3"]),this.load.audio("SndOficio",["assets/sounds/muerto_oficio.ogg","assets/sounds/muerto_oficio.mp3"]),this.load.audio("SndQuinceMas",["assets/sounds/quince_o_mas.ogg","assets/sounds/quince_o_mas.mp3"]),this.load.audio("SndSindicato",["assets/sounds/sindicato_dos_seguidas.ogg","assets/sounds/sindicato_dos_seguidas.mp3"]),this.load.audio("SndTuCuenta",["assets/sounds/tu_cuenta.ogg","assets/sounds/tu_cuenta.mp3"]),this.load.audio("SndReparto",["assets/sounds/reparto.ogg","assets/sounds/reparto.mp3"]),this.load.audio("SndMesa",["assets/sounds/mesa.ogg","assets/sounds/mesa.mp3"]),this.load.audio("Snd20",["assets/sounds/cantes/20.ogg","assets/sounds/cantes/20.mp3"]),this.load.audio("Snd20Oros",["assets/sounds/cantes/20_oros.ogg","assets/sounds/cantes/20_oros.mp3"]),this.load.audio("Snd20Copas",["assets/sounds/cantes/20_copas.ogg","assets/sounds/cantes/20_copas.mp3"]),this.load.audio("Snd20Espadas",["assets/sounds/cantes/20_espadas.ogg","assets/sounds/cantes/20_espadas.mp3"]),this.load.audio("Snd20Bastos",["assets/sounds/cantes/20_bastos.ogg","assets/sounds/cantes/20_bastos.mp3"]),this.load.audio("SndLas40",["assets/sounds/cantes/las_40.ogg","assets/sounds/cantes/las_40.mp3"]),this.load.audio("SndLas40_2",["assets/sounds/cantes/las_40_2.ogg","assets/sounds/cantes/las_40_2.mp3"]),this.load.audio("SndIdas",["assets/sounds/idas.ogg","assets/sounds/idas.mp3"]),this.load.audio("SndVueltas",["assets/sounds/vueltas.ogg","assets/sounds/vueltas.mp3"]),this.load.audio("SndAPorEllos",["assets/sounds/a_por_ellos.ogg","assets/sounds/a_por_ellos.mp3"]),this.load.audio("SndArrastro",["assets/sounds/arrastro.ogg","assets/sounds/arrastro.mp3"]),this.load.audio("SndArrastro2",["assets/sounds/arrastro_2.ogg","assets/sounds/arrastro_2.mp3"]),this.load.audio("SndBocarrana",["assets/sounds/bocarrana.ogg","assets/sounds/bocarrana.mp3"]),this.load.audio("SndCampeones",["assets/sounds/campeones.ogg","assets/sounds/campeones.mp3"]),this.load.audio("SndContar",["assets/sounds/contar.ogg","assets/sounds/contar.mp3"]),this.load.audio("SndCotoTerminado",["assets/sounds/coto_terminado.ogg","assets/sounds/coto_terminado.mp3"]),this.load.audio("SndEspadilla",["assets/sounds/espadilla.ogg","assets/sounds/espadilla.mp3"]),this.load.audio("SndOre",["assets/sounds/ore.ogg","assets/sounds/ore.mp3"]),this.load.audio("SndOtraVezSera",["assets/sounds/otra_vez.ogg","assets/sounds/otra_vez.mp3"]),this.load.audio("SndTabazo",["assets/sounds/tabazo.ogg","assets/sounds/tabazo.mp3"]),this.load.audio("SndTabazo2",["assets/sounds/tabazo_2.ogg","assets/sounds/tabazo_2.mp3"]),this.load.audio("SndMatanzaCaballo",["assets/sounds/matanza_caballo.ogg","assets/sounds/matanza_caballo.mp3"]),this.load.audio("SndIdas2",["assets/sounds/idas2.ogg","assets/sounds/idas2.mp3"]),this.load.audio("SndVueltas2",["assets/sounds/vueltas2.ogg","assets/sounds/vueltas2.mp3"]),this.load.audio("SndGrano",["assets/sounds/grano.ogg","assets/sounds/grano.mp3"]),this.load.audio("SndUltimas",["assets/sounds/ultimas.ogg","assets/sounds/ultimas.mp3"]),this.load.audio("SndChatarrero",["assets/sounds/chatarrero.ogg","assets/sounds/chatarrero.mp3"]),this.load.audio("SndChiflar",["assets/sounds/chiflar.ogg","assets/sounds/chiflar.mp3"]),this.load.audio("SndEscupe",["assets/sounds/escupe.ogg","assets/sounds/escupe.mp3"]),this.load.audio("SndFaldas",["assets/sounds/faldas.ogg","assets/sounds/faldas.mp3"]),this.load.audio("SndGorrion",["assets/sounds/gorrion.ogg","assets/sounds/gorrion.mp3"]),this.load.audio("SndGrijan",["assets/sounds/grijan.ogg","assets/sounds/grijan.mp3"]),this.load.audio("SndGuinoteOtro",["assets/sounds/guinote_otro.ogg","assets/sounds/guinote_otro.mp3"]),this.load.audio("SndMataBocarrana",["assets/sounds/mata_bocarrana.ogg","assets/sounds/mata_bocarrana.mp3"]),this.load.audio("SndMonja",["assets/sounds/monja.ogg","assets/sounds/monja.mp3"]),this.load.audio("SndPajaro",["assets/sounds/pajaro.ogg","assets/sounds/pajaro.mp3"]),this.load.audio("SndPrimeraChicos",["assets/sounds/chicos.ogg","assets/sounds/chicos.mp3"]),this.load.audio("SndPuntos",["assets/sounds/puntosaudio.ogg","assets/sounds/puntosaudio.mp3"]),this.load.audio("SndToro",["assets/sounds/toro.ogg","assets/sounds/toro.mp3"]),this.load.audio("SndPrimo",["assets/sounds/primo.ogg","assets/sounds/primo.mp3"]),this.load.audio("SndToco",["assets/sounds/toco.ogg","assets/sounds/toco.mp3"]),this.load.audio("SndTaustano",["assets/sounds/taustano.ogg","assets/sounds/taustano.mp3"]),this.load.audio("SndNoSube",["assets/sounds/nosube.ogg","assets/sounds/nosube.mp3"]),this.load.audio("SndSientate",["assets/sounds/sientate.ogg","assets/sounds/sientate.mp3"]),this.load.audio("SndPensar",["assets/sounds/pensar.ogg","assets/sounds/pensar.mp3"]),this.load.audio("SndNoSabes",["assets/sounds/nosabes.ogg","assets/sounds/nosabes.mp3"]),this.load.audio("SndNano",["assets/sounds/nano.ogg","assets/sounds/nano.mp3"]),this.load.audio("SndMejor",["assets/sounds/mejor.ogg","assets/sounds/mejor.mp3"]),this.load.audio("SndGenial",["assets/sounds/genial.ogg","assets/sounds/genial.mp3"]),this.load.audio("SndDar",["assets/sounds/dar.ogg","assets/sounds/dar.mp3"]),this.load.audio("SndClases",["assets/sounds/clases.ogg","assets/sounds/clases.mp3"]),this.load.audio("Snd20Copas2",["assets/sounds/copas.ogg","assets/sounds/copas.mp3"]),this.load.audio("SndArtista",["assets/sounds/artista.ogg","assets/sounds/artista.mp3"]),this.load.audio("SndArrancao",["assets/sounds/arrancao.ogg","assets/sounds/arrancao.mp3"]),this.load.spritesheet("spr_cantar","assets/buttons/button_sprite_sheet.png",193,71)},LoadCordova=function(a,o){window.plugins.NativeAudio.preloadSimple(a,o,function(a){},function(a){})},Preload.prototype.create=function(){this.game.state.start("Menu")},Repartir_Desde_Abajo=function(a){Repartir_Desde_Abajo_D1(a)},Repartir_Desde_Abajo_U1=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");try{var o=devuelveX("U",0),e=devuelveY("U",0);(tw1=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),tw1.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Abajo_U2(a)}),tw1.start(),Mazo.pop()}catch(a){}},Repartir_Desde_Abajo_U2=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("U",1),e=devuelveY("U",1);(tw2=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),tw2.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Abajo_U3(a)}),tw2.start(),Mazo.pop()},Repartir_Desde_Abajo_U3=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("U",2),e=devuelveY("U",2);(tw3=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),tw3.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Abajo_L1(a)}),tw3.start(),Mazo.pop()},Repartir_Desde_Abajo_L1=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("L",0),e=devuelveY("L",0);(tw4=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),tw4.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Abajo_L2(a)}),tw4.start(),Mazo.pop()},Repartir_Desde_Abajo_L2=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("L",1),e=devuelveY("L",1);(twEsp7=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),twEsp7.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Abajo_L3(a)}),twEsp7.start(),Mazo.pop()},Repartir_Desde_Abajo_L3=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("L",2),e=devuelveY("L",2);(twReu=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),twReu.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Abajo_D4(a)}),twReu.start(),Mazo.pop()},Repartir_Desde_Abajo_D1=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null,null,null,Mazo[Mazo.length-1].idPartida)),MostrarAnverso(Mazo[Mazo.length-1].cartilla);try{ReproducirSonido("_Reparto"),1==SonVueltas?(TextMarcador.revive(),TextTituloMarcador.revive(),ReproducirSonido("_Vueltas")):ReproducirSonido("_Idas");var o=devuelveX("D",0),e=devuelveY("D",0);(twRec1=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),twRec1.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Abajo_D2(a)}),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),twRec1.start(),Mazo.pop()}catch(a){}},Repartir_Desde_Abajo_D2=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",1),e=devuelveY("D",1);(twRec2=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),twRec2.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Abajo_D3(a)}),twRec2.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Abajo_D3=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",2),e=devuelveY("D",2);(twRec3=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),twRec3.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Abajo_R1(a)}),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),twRec3.start(),Mazo.pop()},Repartir_Desde_Abajo_R1=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("R",0),e=devuelveY("R",0),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Abajo_R2(a)}),t.start(),Mazo.pop()},Repartir_Desde_Abajo_R2=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("R",1),e=devuelveY("R",1),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Abajo_R3(a)}),t.start(),Mazo.pop()},Repartir_Desde_Abajo_R3=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("R",2),e=devuelveY("R",2),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Abajo_U1(a)}),t.start(),Mazo.pop()},Repartir_Desde_Abajo_U4=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("U",3),e=devuelveY("U",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Abajo_U5(a)}),t.start(),Mazo.pop()},Repartir_Desde_Abajo_U5=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("U",4),e=devuelveY("U",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Abajo_U6(a)}),t.start(),Mazo.pop()},Repartir_Desde_Abajo_U6=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("U",5),e=devuelveY("U",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Abajo_L4(a)}),t.start(),Mazo.pop()},Repartir_Desde_Abajo_L4=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("L",3),e=devuelveY("L",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Abajo_L5(a)}),t.start(),Mazo.pop()},Repartir_Desde_Abajo_L5=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("L",4),e=devuelveY("L",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Abajo_L6(a)}),t.start(),Mazo.pop()},Repartir_Desde_Abajo_L6=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("L",5),e=devuelveY("L",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),SacaTriunfo(a)}),t.start(),Mazo.pop()},Repartir_Desde_Abajo_D4=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",3),e=devuelveY("D",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Abajo_D5(a)}),t.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Abajo_D5=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",4),e=devuelveY("D",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Abajo_D6(a)}),t.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Abajo_D6=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",5),e=devuelveY("D",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Abajo_R4(a)}),t.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Abajo_R4=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("R",3),e=devuelveY("R",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Abajo_R5(a)}),t.start(),Mazo.pop()},Repartir_Desde_Abajo_R5=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("R",4),e=devuelveY("R",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Abajo_R6(a)}),t.start(),Mazo.pop()},Repartir_Desde_Abajo_R6=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null,null,null,Mazo[Mazo.length-1].idPartida)),ReproducirSonido("_Reparto");var o=devuelveX("R",5),e=devuelveY("R",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Abajo_U4(a)}),t.start(),Mazo.pop()};