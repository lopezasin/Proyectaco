function Level(){Phaser.State.call(this)}function PosicionesCartas(a,o,e,t){this.Mazo=a,this.posicion=o,this.x=e,this.y=t}function startRecognition(){if(Transcribe="",window.plugins){PermisoMicro(),HablandoSonidoOff();try{window.plugins.speechRecognition.startListening(function(a){EnviarTextoBocadillo(SoyElJugador,a[0],!1),HablandoSonidoOn()},function(a){socket.emit("Consola","Error 2 "+a),console.error(a),HablandoSonidoOn()},{language:"es-ES",showPopup:!1})}catch(a){socket.emit("Consola","Error 1 "+a),MensajeError("Opción no disponible en tu dispositivo"),HablandoSonidoOn()}}else{try{HablandoSonidoOff();var a=a||webkitSpeechRecognition;(recognition=new a).lang="es-ES",recognition.continuous=!1,recognition.interimResults=!0,recognition.onresult=function(a){Transcribe="";for(var o=a.resultIndex;o<a.results.length;o++)a.results[o].isFinal&&(Transcribe+=a.results[o][0].transcript)},recognition.onstart=function(a){},recognition.onerror=function(a){MensajeError("Tienes que dar permisos al micrófono"),HablandoSonidoOn()},recognition.onend=function(a){""!=Transcribe&&EnviarTextoBocadillo(SoyElJugador,Transcribe,!1),HablandoSonidoOn()}}catch(a){MensajeError("Opción no disponible en tu dispositivo"),HablandoSonidoOn()}try{recognition.start()}catch(a){MensajeError("Opción no disponible en tu dispositivo"),HablandoSonidoOn()}}}function StopRecognition(){if(window.plugins){HablandoSonidoOn();try{window.plugins.speechRecognition.stopListening(function(a){},function(a){console.error(a),HablandoSonidoOn()})}catch(a){HablandoSonidoOn()}}else try{recognition.stop()}catch(a){}}function dragUpdate(a,o,e,t,r){for(n=0;n<MazoD.length;n++)if(MazoD[n].idCarta==a.name){n;break}for(var n=0;n<MazoD.length;n++)game_objeto.physics.arcade.overlap(MazoD[n].cartilla,MazoD[n],colision_cartas,null,this)}function fileCompleteTapete(){LogicalTapeteRemoto=!0}function fileCompleteDorso(){LogicalDorsoRemoto=!0}function fileCompleteNoticia(){null!=ArrayInfoJugador[0].Noticia&&(Noticia.visible=!0,Noticia.loadTexture("NoticiaRemoto",0),game_objeto.add.tween(Noticia).to({y:345},1e3,EfectoTweenRebote).start())}function fileComplete1(){var a;a="imagen1",AvatarSprite1.x<0&&(AvatarSprite1.x=-1*AvatarSprite1.x,AvatarSprite1.y=-1*AvatarSprite1.y),AvatarSprite1.name=a;try{AvatarSprite1.loadTexture(a,0)}catch(a){log(!0,"No consigo cargar la imagen de sprite 1")}AvatarSprite1.width=AnchoFoto,AvatarSprite1.height=AnchoFoto,log(!0,"Se recalcula")}function fileComplete2(){var a;a="imagen2",AvatarSprite2.x<0&&(AvatarSprite2.x=-1*AvatarSprite2.x,AvatarSprite2.y=-1*AvatarSprite2.y),AvatarSprite2.name=a;try{AvatarSprite2.loadTexture(a,0)}catch(a){log(!0,"No consigo cargar la imagen de sprite 2")}AvatarSprite2.width=AnchoFoto,AvatarSprite2.height=AnchoFoto}function fileComplete3(){var a;a="imagen3",AvatarSprite3.x<0&&(AvatarSprite3.x=-1*AvatarSprite3.x,AvatarSprite3.y=-1*AvatarSprite3.y),AvatarSprite3.name=a;try{AvatarSprite3.loadTexture(a,0)}catch(a){log(!0,"No consigo cargar la imagen de sprite 3")}AvatarSprite3.width=AnchoFoto,AvatarSprite3.height=AnchoFoto}function fileComplete4(){var a;a="imagen4",AvatarSprite4.x<0&&(AvatarSprite4.x=-1*AvatarSprite4.x,AvatarSprite4.y=-1*AvatarSprite4.y),AvatarSprite4.name=a;try{AvatarSprite4.loadTexture(a,0)}catch(a){log(!0,"No consigo cargar la imagen de sprite 4")}AvatarSprite4.width=AnchoFoto,AvatarSprite4.height=AnchoFoto}function checkOverlap(a,o){var e=a.getBounds(),t=o.getBounds();return a.name!=o.name&&Phaser.Rectangle.intersects(e,t)}function Moviendo_Carta(a){for(var o=MazoD.length-1;o>=0;o--)checkOverlap(a,MazoD[o].cartilla)?MazoD[o].cartilla.tint=Phaser.Color.getColor(175,200,111):MazoD[o].cartilla.tint=Phaser.Color.getColor(255,255,255)}function Parar_Drag(a){var o,e,t=!1;for(log(!1,"KEYYYYYYYYYYYYYYYYYYYY "+a.name),log(!1,"elimina"),0==vProduccion&&MensajeError2("Drag: Soy "+SoyElJugador+" Turno: "+vTurno+" Control:"+QuienTomaElControl+" Reconectando: "+vReconectando+" Ronda "+vRonda),1==ModoMultijugador&&socket.emit("Consola","0: "+ArrayDelaPropiaSala[0].JugadorSala+" 1: "+ArrayDelaPropiaSala[1].JugadorSala+" 2: "+ArrayDelaPropiaSala[2].JugadorSala+" 3: "+ArrayDelaPropiaSala[3].JugadorSala),ColorManoPosibles(),o=0;o<=MazoD.length-1;o++)if(o!=MazoD.length-1){if(checkOverlap(a,MazoD[o].cartilla)&&checkOverlap(a,MazoD[o+1].cartilla)){Trucaposicion(a,MazoD,MazoD[o+1].posicion-.5),t=!0;break}if(checkOverlap(a,MazoD[o].cartilla)){Trucaposicion(a,MazoD,MazoD[o].posicion-.5),t=!0;break}}else if(checkOverlap(a,MazoD[o].cartilla)){log(!1,"La �ltima"),Trucaposicion(a,MazoD,MazoD[o].posicion+.5),t=!0;break}if(0==t){for(o=0;o<=MazoD.length-1;o++)if(a.name==MazoD[o].cartilla.name){var r=devuelveX("D",MazoD[o].posicion),n=devuelveY("D",MazoD[o].posicion);break}if(log(!0,"LON "+MazoCentral.length),log(!0,"turnoOOO ANTES "+vTurno),log(!0,"turnoOOO DESPUES "+vTurno),log(!0,"turnoOOO "+vTurno),!(Math.abs(a.x-r)<=1.5*MazoD[MazoD.length-1].cartilla.width&&Math.abs(a.y-n)<=1.5*MazoD[MazoD.length-1].cartilla.height&&vTurno==SoyElJugador)||tw1.isRunning||tw2.isRunning||tw3.isRunning||tw4.isRunning||twEsp7.isRunning||twReu.isRunning||twRec1.isRunning||twRec2.isRunning||twRec3.isRunning||twRecoger1.isRunning||twRecoger2.isRunning||twRecoger3.isRunning||twRecoger4.isRunning||twPeq1.isRunning||twPeq2.isRunning||twPeq3.isRunning||twPeq4.isRunning||1!=PartidaComenzada||!(MarcadorNuestro<PuntosGanar&&MarcadorRival<PuntosGanar||0==SonVueltas)||0!=PuntosFin()||0!=vReconectando||0!=BloquearTirada||!(1==ModoMultijugador&&EstoyConectado()||0==ModoMultijugador)||0!=ArrayTareas.length){if(ReubicarCartas(MazoD,"D"),vTurno!=SoyElJugador&&Math.abs(a.x-r)<=MazoD[MazoD.length-1].cartilla.width&&Math.abs(a.y-n)<=MazoD[MazoD.length-1].cartilla.height){e=EscribirTextoGuay(textoturno(),40);var i=game_objeto.time.create(!0);i.add(1500,EliminaTextoPantalla,this,e),i.start()}}else if(1==ValidadorReglas(MazoD[o],SoyElJugador)&&1==ValidaMovimientoJugador(vRonda,SoyElJugador)&&(timer.stop(),OcultarBotones(),0==ModoMultijugador&&(MazoCentral.push(new Carta(MazoD[o].palo,MazoD[o].idCarta,MazoD[o].valor,MazoD[o].cartilla,null,SoyElJugador,null,null)),MueveAlTablero(a,"D",vRonda,SoyElJugador,!1),MazoD.splice(o,1),ReubicarCartas(MazoD,"D")),1==ModoMultijugador)){vNoEsta=!1;Date.now();var l=[];l.splice(0,1e3);var d=1e5*Math.random(),s=new function(a,o,e,t,r,n,i,l,d,s,c,u,g,p){this.Habitacion=a,this.SoyElJugador=o,this.Cartilla=e,this.Turno=t,this.Ronda=r,this.SonVueltas=n,this.Partida=i,this.JugadorFull=l,this.JugadorSala=d,this.Nombre=s,this.IdMsg=c,this.ClientId=u,this.SalaID=g,this.Mensaje=p,this.Fecha=new Date(Date.now())}(Habitacion,SoyElJugador,MazoD[o].cartilla.name,vTurno,vRonda,SonVueltas,MarcadorPartidasNuestro+MarcadorPartidasRival,ArrayDelaPropiaSala[SoyElJugador-1].JugadorFull,ArrayDelaPropiaSala[SoyElJugador-1].JugadorSala,ArrayDelaPropiaSala[SoyElJugador-1].Nombre,d,ArrayDelaPropiaSala[SoyElJugador-1].JugadorSala,Habitacion,"enviar carta centro");ArrayAccionesDesconexiones.push(s),l.push(s),socket.emit("enviar carta centro",l[0],function(a){EliminarColaMensajes(a,"enviar carta centro")}),l.splice(0,1e3),MazoD[o].palo==Triunfo&&(1==MazoD[o].valor&&GrabarResultado(SoyElJugador,MarcadorPartidasNuestro+MarcadorPartidasRival,SonVueltas,0,!1,!1,!0,!1),3==MazoD[o].valor&&GrabarResultado(SoyElJugador,MarcadorPartidasNuestro+MarcadorPartidasRival,SonVueltas,0,!1,!1,!1,!0))}}else ReubicarCartas(MazoD,"D")}function Boot(){Phaser.State.call(this)}function Menu(){Phaser.State.call(this)}function Carta(a,o,e,t,r,n,i,l){switch(this.palo=a,this.idCarta=o,this.valor=e,this.cartilla=t,this.posicion=r,this.jugador=n,this.Ronda=i,this.FechaHora=l,e){case 1:this.valorReal=12,this.valorPuntuacion=11;break;case 3:this.valorReal=11,this.valorPuntuacion=10;break;case 10:this.valorReal=10,this.valorPuntuacion=4;break;case 9:this.valorReal=8,this.valorPuntuacion=2;break;case 8:this.valorReal=9,this.valorPuntuacion=3;break;default:this.valorReal=e,this.valorPuntuacion=0}}function CartaBazaNuestra(a,o,e){this.palo=a,this.valorReal=o,this.jugador=e}function Preload(){Phaser.State.call(this)}function CartaIA(a,o,e,t){this.palo=a,this.valorReal=o,this.name=e,this.valorPuntuacion=t}var proto=Object.create(Phaser.State);Level.prototype=proto;var vProduccion=!0,Maquina,MaquinaSinSSH,MaquinaSSH;1==vProduccion?(vIntentosGlobal=10,Maquina="https://b.xn--guiotepro-n6a.com"):(vIntentosGlobal=15,Maquina="http://192.168.43.72:5000");var vIntentosGlobal=15,DetenerIA=!1,FondoNegro,CartaDummie,recognition,UsuariosOnline=0,Transcribe="",vReconectando=!1,vNoEsta,SocketInicializado=!1,FinalizandoPartida=!1,bmd,game_objeto,vSonidoOn,FechaIni,FechaFin,IntentosReconexion=0,Version="1.0.8",lUsable=!0,socket,SonVueltas=!1,callbackweb,LogicalTapeteRemoto=!1,LogicalDorsoRemoto=!1,inputField,FuerzaSalir=!1,Noticia,ContadorNoticia=0,AntiguoSocket="",PuntosGanar=101,PartidasCoto=3,Rapido=!1,BucleManoCentro=0,TiempoIA=1500,Tiempoturno=20;1==Rapido&&(TiempoIA=150,Tiempoturno=.2);var PrimeraVez=!0,vSonidoOnOriginal=!1,BackFondo,BackTapete,ReversoGlobal,idPartida,BotonesPartidaBloqueados=!1,BloquearTirada=!1,PrimeraVezLogin=!1,Mazo=[],MazoEnviar=[],MazoEnviarApoyo=[],MazoR=[],MazoL=[],MazoU=[],MazoD=[],Mazoposiciones=[],MazoCentral=[],MazoCentralBuffer=[],MazoCentralBufferEspecial7=[],CartaTriunfo=[],MazoRecogido=[],MazoRecogidoApoyo=[],MazoRecogidoRival=[],UltimaBazaNuestra=[],UltimaBazaRival=[],ArrayDescartePosible=[],ModoMultijugador=!1,EntradaModoJuego=!1,posX_D,posY_D,posAngle_D,posX_L,posY_L,posAngle_L,posX_R,posY_R,posAngle_R,posX_U,posY_U,posAngle_U,RondaArrastre=4,vEscalaGanadora=1.5,vEscalaPequenas=.9,vEscalaUltimaBaza=1,vEscaladoCarta=1.5,TiempoCartaGanadora=300,GrupoD,GrupoL,GrupoR,GrupoU,GrupoCentral,GrupoUltimaBaza,GrupoMazo,Grupo7,GrupoTextos,SemaforoCartaRecibida,ArrayTareas=[],ArrayBloqueoTareas=[],ArrayTareasBuffer=[],ArrayTareasGestionadas=[],ArrayDelaPropiaSala=[],ArrayChatDeshabilitado=[],ArrayJugadoresDesconectados=[],ArrayAccionesDesconexiones=[],SemaforoTextoPuntuacion=[],SemaforoRepartos=[],ArrayInfoJugador=[],QuienTomaElControl,PartidaComenzada=!1,RepartoFinalizado=!1,ObjTurnoU,ObjTurnoL,ObjTurnoD,ObjTurnoR,MuestraErrorDesconexion=!0,ObjetoJugadoresRonda=function(a,o){this.Ronda=a,this.Jugador=o},SemaforoRondas=[],SemaforoAvatars=[],vRonda=1,vRondaApoyo=1,RondaJugada=[],SiempreBocaArriba=!1,textoContador,TextCuentaMundo,soyelprimero=!1,vVerticalPorqueSi=0,vHorizontalPorqueSi=0,vVerticalDerechaPorqueSi=0,vHorizontalDerechaPorqueSi=0,vHorizontalIzquierdaPorqueSi=0,vSeparacion=15,Habitacion,vVelocidadCartas=150,SoyElJugador,vVelocidadCartasReordernar=250,vVelocidadRobar=350,vTurno=1,Triunfo,twText,twText2,twTextbis,twText2bis,tw1,tw2,tw3,tw4,twEsp7,twReu,twRec1,twRec2,twRec3,twBocadillo,twBocadillo2,twFondoNegro,twPeq1,twPeq2,twPeq3,twPeq4,twRecoger1,twRecoger2,twRecoger3,twRecoger4,MarcadorNuestro=0,MarcadorRival=0,MarcadorPartidasRival=0,MarcadorPartidasNuestro=0,BotonCantar,BazaNuestraGlobal=!1,RegistrarCantes=[],BotonSiete,BotonMonoJugador,BotonMultiJugador,BotonAleatorio,BotonClasificacion,BotonAmigos,AnchoCarta=0,AnchoCartaEscalado=0,BotonHablar,BotonEscribir,EfectoTween1=Phaser.Easing.Linear.Out,EfectoTween2=Phaser.Easing.Linear.Out,EfectoTweenRebote=Phaser.Easing.Bounce.Out,CentroIrreal=0,MuestraChat=!1,MuestraLogin=!1,AnchoFoto=75,timerturno,timerpareja,timerestoylisto,timer,timerBarajaRecibida,timerNuevaPartida,vConContador=!0,textJugador1,textJugador2,textJugador3,textJugador4,Avatar1,Avatar2,Avatar3,Avatar4,AvatarSprite1,AvatarSprite2,AvatarSprite3,AvatarSprite4,AvatarMedalla1,AvatarMedalla2,AvatarMedalla3,AvatarMedalla4,AvatarLogro1,AvatarLogro2,AvatarLogro3,AvatarLogro4,deb,anchoPantalla=0,altoPantalla=0,textEsperando,textListos,textEligiendo,SndReparto,SndMesa,Snd20Oros,Snd20Copas,Snd20Espadas,Snd20Bastos,SndLas40,SndIdas,SndVueltas,SndLas40_2,SndAPorEllos,SndArrastro,SndArrastro_2,SndBocarrana,SndCampeones,SndContar,SndCotoTerminado,SndEspadilla,SndOre,SndMatanzaCaballo,SndMataCompanero,SndOtraVezSera,SndTabazo,SndTabazo_2,SndVueltas,SndIdas2,SndVueltas2,SndGrano,SndUltimas,xSalir,cuatrotres=!1,SndChatarrero,SndChiflar,SndEscupe,SndFaldas,SndGorrion,SndGrijan,SndGuinoteOtro,SndMataBocarrana,SndMonja,SndPajaro,SndPrimeraChicos,SndPuntos,SndToro,IntentaConexionInicial=!0,TextMarcador,TextTituloMarcador,ObjetoG,ObjetoDesconexion=function(a,o){this.Jugador=a,this.JugadorSala=o},ObjetoJugador=function(a,o,e,t,r,n,i,l,d,s,c,u,g,p,M){this.Nombre=a,this.Sexo=o,this.Foto=e,this.Dorso=t,this.Tapete=r,this.ProveedorID=n,this.RedSocial=i,this.Admin=l,this.VersionOK=d,this.VersionMensaje=s,this.Noticia=c,this.IP=u,this.ChatDisponible=g,this.Nivel=p,this.CampeonSemanal=M,this.JugadorFull=n+"-"+i};acelera=function(){},Pausado=function(){SalirConfirmado(),MatarConexion()},Recuperado=function(){window.location.reload()},Level.prototype.create=function(){this.game.onPause.add(Pausado,this),this.game.onResume.add(Recuperado,this),vSonidoOn=!0,game_objeto=this,Habitacion=Math.floor(Math.random()),OcultaClasificacion(),window.innerHeight/window.innerWidth<.68?cuatrotres=!1:(cuatrotres=!0,vEscaladoCarta=1.7),window.plugins&&window.plugins.googleplus.trySilentLogin({offline:!0},function(a){ObjetoG=a},function(a){}),SndReparto=game_objeto.add.audio("SndReparto"),SndMesa=game_objeto.add.audio("SndMesa"),Snd20Oros=game_objeto.add.audio("Snd20Oros"),Snd20Copas=game_objeto.add.audio("Snd20Copas"),Snd20Espadas=game_objeto.add.audio("Snd20Espadas"),Snd20Bastos=game_objeto.add.audio("Snd20Bastos"),SndLas40=game_objeto.add.audio("SndLas40"),SndLas40_2=game_objeto.add.audio("SndLas40_2"),SndIdas=game_objeto.add.audio("SndIdas"),SndVueltas=game_objeto.add.audio("SndVueltas"),SndAPorEllos=game_objeto.add.audio("SndAPorEllos"),SndArrastro=game_objeto.add.audio("SndArrastro"),SndArrastro_2=game_objeto.add.audio("SndArrastro2"),SndBocarrana=game_objeto.add.audio("SndBocarrana"),SndCampeones=game_objeto.add.audio("SndCampeones"),SndContar=game_objeto.add.audio("SndContar"),SndCotoTerminado=game_objeto.add.audio("SndCotoTerminado"),SndEspadilla=game_objeto.add.audio("SndEspadilla"),SndOre=game_objeto.add.audio("SndOre"),SndOtraVezSera=game_objeto.add.audio("SndOtraVezSera"),SndTabazo=game_objeto.add.audio("SndTabazo"),SndTabazo_2=game_objeto.add.audio("SndTabazo2"),SndMatanzaCaballo=game_objeto.add.audio("SndMatanzaCaballo"),SndIdas2=game_objeto.add.audio("SndIdas2"),SndVueltas2=game_objeto.add.audio("SndVueltas2"),SndGrano=game_objeto.add.audio("SndGrano"),SndUltimas=game_objeto.add.audio("SndUltimas"),SndChatarrero=game_objeto.add.audio("SndChatarrero"),SndChiflar=game_objeto.add.audio("SndChiflar"),SndEscupe=game_objeto.add.audio("SndEscupe"),SndFaldas=game_objeto.add.audio("SndFaldas"),SndGorrion=game_objeto.add.audio("SndGorrion"),SndGrijan=game_objeto.add.audio("SndGrijan"),SndGuinoteOtro=game_objeto.add.audio("SndGuinoteOtro"),SndMataBocarrana=game_objeto.add.audio("SndMataBocarrana"),SndMonja=game_objeto.add.audio("SndMonja"),SndPajaro=game_objeto.add.audio("SndPajaro"),SndPrimeraChicos=game_objeto.add.audio("SndPrimeraChicos"),SndPuntos=game_objeto.add.audio("SndPuntos"),SndToro=game_objeto.add.audio("SndToro"),LogicalTapeteRemoto=!1,LogicalDorsoRemoto=!1,anchoPantalla=1300,altoPantalla=622,0==cuatrotres?(BackTapete=this.game.add.tileSprite(0,0,game_objeto.world.width,game_objeto.world.height,"Tapete"),BackFondo=game_objeto.add.image(0,0,"FondoPrincipal")):(BackTapete=this.game.add.tileSprite(0,0,game_objeto.world.width,game_objeto.world.height,"Tapete_43"),BackFondo=game_objeto.add.image(0,0,"FondoPrincipal_43")),BackFondo.visible=!0,BackTapete.visible=!1;a=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCartaEscalado-5*vSeparacion+AnchoCartaEscalado)/2+2*(AnchoCartaEscalado+vSeparacion)+AnchoCarta;(BotonSiete=game_objeto.add.button(a,game_objeto.world.height-45,"Boton_cambiar_7_on",Cambiar7,this,2,1,0)).visible=!1,BotonSiete.anchor.setTo(.5,.5),BotonSiete.width=1.2*BotonSiete.width,BotonSiete.height=1.2*BotonSiete.height,xSalir=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCartaEscalado-5*vSeparacion+AnchoCartaEscalado)/2+2*(AnchoCartaEscalado+vSeparacion)+AnchoCarta+250,1==cuatrotres&&(xSalir+=40),BotonSalir=game_objeto.add.button(xSalir,game_objeto.world.height-45,"Boton_Salir",Salir,this,2,1,0),BotonSalir.visible=!0,BotonSalir.anchor.setTo(.5,.5),BotonSalir.width=1.2*BotonSalir.width,BotonSalir.height=1.2*BotonSalir.height,CrearTimers(),(textoContador=game_objeto.add.bitmapText(0,100,"MiFuenteAmarilla","BitmapText",44)).text="",textoContador.anchor.set(.5,.5),CartaDummie=game_objeto.add.image(-200,-200,"A01"),AnchoCarta=CartaDummie.width,AltoCarta=CartaDummie.height,AnchoCartaEscalado=CartaDummie.width*vEscaladoCarta,AltoCartaEscalado=CartaDummie.height*vEscaladoCarta,CentroIrreal=(game_objeto.world.height-AltoCarta-AltoCartaEscalado+AnchoCarta)/2+AnchoCarta-25,PosicionCartas("D");(TextTituloMarcador=game_objeto.add.bitmapText(950,game_objeto.world.height-2*AltoCartaEscalado,"MiFuenteAmarilla","BitmapText",25)).anchor.set(.5,.5),TextTituloMarcador.text="Ntros:\nEllos:",TextTituloMarcador.visible=!1,(TextMarcador=game_objeto.add.bitmapText(1060,game_objeto.world.height-2*AltoCartaEscalado,"MiFuenteAmarilla","BitmapText",25)).anchor.set(.5,.5),TextMarcador.visible=!1,(TextCuentaMundo=game_objeto.add.bitmapText(-100,100,"MiFuenteAmarilla","BitmapText",24)).anchor.set(.5,.5),BotonDIV=game_objeto.add.button(400,0,"spr_cantar",function(){MuestraOcultaChat()},this,2,1,0),BotonDIV.visible=!1;a=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCartaEscalado-5*vSeparacion+AnchoCartaEscalado)/2+0*(AnchoCartaEscalado+vSeparacion)+AnchoCarta;(BotonCantar=game_objeto.add.button(a,game_objeto.world.height-45,"Boton_cantar_on",function(){Cantar(SoyElJugador)},this,2,1,0)).visible=!1,BotonCantar.anchor.setTo(.5,.5),BotonCantar.width=1.2*BotonCantar.width,BotonCantar.height=1.2*BotonCantar.height,BotonSonidoOn=game_objeto.add.button(50+vSeparacion,120,"Boton_sonido_on",function(){SonidoOff(!0)},this,2,1,0),BotonSonidoOn.anchor.setTo(.5,.5),BotonSonidoOn.visible=!1,BotonSonidoOff=game_objeto.add.button(50+vSeparacion,120,"Boton_sonido_off",function(){SonidoOn(!0)},this,2,1,0),BotonSonidoOff.anchor.setTo(.5,.5),BotonSonidoOff.visible=!0,BotonHablarOff=game_objeto.add.button(190+vSeparacion,50,"Boton_micro_off",function(){startRecognition()},this,2,1,0),BotonHablarOff.anchor.setTo(.5,.5),BotonHablarOff.visible=!1,(BotonEscribir=game_objeto.add.button(110+vSeparacion,50,"Boton_escribir",function(){document.getElementById("bchat").click()})).anchor.setTo(.5,.5),BotonHablarOff.visible=!1,BotonHablarOn=game_objeto.add.button(190+vSeparacion,50,"Boton_micro_on",function(){StopRecognition()},this,2,1,0),BotonHablarOn.anchor.setTo(.5,.5),BotonHablarOn.visible=!1,1==vSonidoOn&&(BotonSonidoOn.visible=!0,BotonSonidoOff.visible=!1),this.stage.backgroundColor="#2d2d2d",this.lCartaEnviada=0,BotonParar=game_objeto.add.button(900,0,"spr_cantar",function(){DetenerTiempo()},this,2,1,0),BotonParar.visible=!1,BotonVerMazo=game_objeto.add.button(1100,0,"spr_cantar",function(){if(MazoCentralBuffer.length>0)for(a=0;a<=MazoCentralBuffer.length-1;a++);if(ArrayTareas.length>0)for(a=0;a<=ArrayTareas.length-1;a++);if(MazoD.length>0)for(a=0;a<=MazoD.length-1;a++);if(MazoL.length>0)for(a=0;a<=MazoL.length-1;a++);if(MazoR.length>0)for(a=0;a<=MazoR.length.length-1;a++);if(MazoU.length>0)for(var a=0;a<=MazoU.length-1;a++);},this,2,1,0),BotonVerMazo.visible=!1,BotonLanzarTarea=game_objeto.add.button(1100,100,"spr_cantar",function(){TareasPendientesDesdeServer(null)},this,2,1,0),BotonLanzarTarea.visible=!1,(BotonMonoJugador=game_objeto.add.button(game_objeto.world.centerX-120,game_objeto.world.height-170,"Boton_solo",InicioMonoJugador,this,2,1,0)).visible=!1,BotonMonoJugador.width=BotonMonoJugador.width,BotonMonoJugador.height=BotonMonoJugador.height,BotonMonoJugador.anchor.setTo(.5,.5),BotonContacta=game_objeto.add.button(game_objeto.world.width-100,game_objeto.world.height-30,"Contacta",function(){LoginCordova(5)},this,2,1,0),BotonContacta.visible=!1,BotonContacta.anchor.setTo(.5,.5),1==cuatrotres&&(BotonMonoJugador.width=1.4*BotonMonoJugador.width,BotonMonoJugador.height=1.4*BotonMonoJugador.height,BotonMonoJugador.y=BotonMonoJugador.y-90,BotonMonoJugador.x=BotonMonoJugador.x-45),(BotonMultiJugador=game_objeto.add.button(game_objeto.world.centerX+120,game_objeto.world.height-170,"Boton_online",InicioMultiJugador,this,2,1,0)).visible=!1,BotonMultiJugador.width=BotonMultiJugador.width,BotonMultiJugador.height=BotonMultiJugador.height,BotonMultiJugador.anchor.setTo(.5,.5),1==cuatrotres&&(BotonMultiJugador.width=1.4*BotonMultiJugador.width,BotonMultiJugador.height=1.4*BotonMultiJugador.height,BotonMultiJugador.y=BotonMultiJugador.y-90,BotonMultiJugador.x=BotonMultiJugador.x+45),(BotonClasificacion=game_objeto.add.button(game_objeto.world.centerX+420,game_objeto.world.centerY-100,"Boton_ranking",SolicitaClasificacion,this,2,1,0)).visible=!1,BotonClasificacion.width=BotonClasificacion.width,BotonClasificacion.height=BotonClasificacion.height,BotonClasificacion.anchor.setTo(.5,.5),1==cuatrotres&&(BotonClasificacion.width=BotonClasificacion.width,BotonClasificacion.height=BotonClasificacion.height,BotonClasificacion.y=BotonClasificacion.y-110,BotonClasificacion.x=BotonClasificacion.x+70),(BotonAleatorio=game_objeto.add.button(game_objeto.world.centerX-120,game_objeto.world.height-170-1e3,"Boton_aleatorio",InicioMultiJugadorAleatorio,this,2,1,0)).visible=!1,BotonAleatorio.width=BotonAleatorio.width,BotonAleatorio.height=BotonAleatorio.height,BotonAleatorio.anchor.setTo(.5,.5),1==cuatrotres&&(BotonAleatorio.width=1.4*BotonAleatorio.width,BotonAleatorio.height=1.4*BotonAleatorio.height,BotonAleatorio.y=BotonAleatorio.y-90,BotonAleatorio.x=BotonAleatorio.x-45),(BotonAmigos=game_objeto.add.button(game_objeto.world.centerX+120+1e3,game_objeto.world.height-170,"Boton_amigos",InicioMultiJugadorAmigos,this,2,1,0)).visible=!1,BotonAmigos.width=BotonAmigos.width,BotonAmigos.height=BotonAmigos.height,BotonAmigos.anchor.setTo(.5,.5),1==cuatrotres&&(BotonAmigos.width=1.4*BotonAmigos.width,BotonAmigos.height=1.4*BotonAmigos.height,BotonAmigos.y=BotonAmigos.y-90,BotonAmigos.x=BotonAmigos.x+45),BotonRobots=game_objeto.add.button(game_objeto.world.centerX+35,game_objeto.world.centerY+150,"Boton_robots",RellenarSala,this,2,1,0),BotonRobots.visible=!1,BotonRobots.width=BotonRobots.width,BotonRobots.height=BotonRobots.height,BotonRobots.anchor.setTo(.5,.5),(FondoNegro=1==cuatrotres?game_objeto.add.image(0,0,"negro_43"):game_objeto.add.image(0,0,"negro")).anchor.setTo(.5,.5),FondoNegro.scale.setTo(2,2),FondoNegro.alpha=0,ConfiguraPantallaInicio(),(Noticia=game_objeto.add.button(a,game_objeto.world.height-45,"Boton_cambiar_7_on",CerrarNoticia,this,2,1,0)).visible=!1,Noticia.anchor.setTo(.5,.5),Noticia.x=230,Noticia.y=-500;var a=devuelveX("U_C",0)-AnchoCarta,o=devuelveY("U_C",0)+AltoCarta/2+vSeparacion;1==cuatrotres&&(o+=15),(ObjTurnoU=game_objeto.add.image(a,o,"Imagen_Turno")).anchor.setTo(.5,.5),ObjTurnoU.visible=!1;var a=devuelveX("L_C",0)+AnchoCarta,o=devuelveY("L_C",0);1==cuatrotres&&(a+=15),(ObjTurnoL=game_objeto.add.image(a,o,"Imagen_Turno")).anchor.setTo(.5,.5),ObjTurnoL.visible=!1;var a=devuelveX("R_C",0)-AnchoCarta,o=devuelveY("L_C",0);1==cuatrotres&&(a-=15),(ObjTurnoR=game_objeto.add.image(a,o,"Imagen_Turno")).anchor.setTo(.5,.5),ObjTurnoR.visible=!1;var a=devuelveX("U_C",0)-AnchoCarta,o=game_objeto.world.height-AnchoCartaEscalado-AltoCartaEscalado+vSeparacion;if((ObjTurnoD=game_objeto.add.image(a,o,"Imagen_Turno")).anchor.setTo(.5,.5),ObjTurnoD.visible=!1,IntentaConexionInicial=IntentosReconexion<=2,0==EstoyConectado()&&1==PrimeraVez){try{if(ConectaServidor(),1==EstoyConectado())if(ArrayInfoJugador.length>0){ArrayInfoJugador[0].Nombre,ArrayInfoJugador[0].ProveedorID,ArrayInfoJugador[0].RedSocial;socket.emit("enviar_peticion_publicidad",socket.id,Version,ObjetoG)}else socket.emit("enviar_peticion_publicidad",socket.id,Version,ObjetoG)}catch(a){}0==FuerzaSalir&&LoginDesdeWeb()}PrimeraVez=!1,FuerzaSalir=!1,1==EstoyConectado()&&1==EstoyConectado()&&socket.emit("solicita conectados"),textoContador.x=game_objeto.world.centerX,textoContador.y=game_objeto.world.centerY+30,(textEsperando=game_objeto.add.bitmapText(game_objeto.world.centerX,game_objeto.world.centerY-50,"MiFuenteAmarilla","BitmapText",50)).text="Esperando jugadores",textEsperando.anchor.set(.5,.5),textEsperando.visible=!1,(textListos=game_objeto.add.bitmapText(game_objeto.world.centerX,game_objeto.world.centerY-50,"MiFuenteAmarilla","BitmapText",50)).anchor.set(.5,.5),textListos.text="Un momento por favor...\n Esperando al resto de compañeros.",textListos.visible=!1,GrupoD=game_objeto.add.group(),GrupoL=game_objeto.add.group(),GrupoR=game_objeto.add.group(),GrupoU=game_objeto.add.group(),GrupoMazo=game_objeto.add.group(),GrupoCentral=game_objeto.add.group(),GrupoUltimaBaza=game_objeto.add.group(),Grupo7=game_objeto.add.group(),(GrupoTextos=game_objeto.add.group()).add(textEsperando),game_objeto.world.bringToTop(GrupoTextos),GrupoTextos.add(textListos),game_objeto.world.bringToTop(GrupoTextos),(textEligiendo=game_objeto.add.bitmapText(game_objeto.world.centerX,game_objeto.world.centerY-50,"MiFuenteAmarilla","BitmapText",44)).anchor.set(.5,.5),textEligiendo.visible=!1,BotonEscribir.visible=!1,1==BotonMonoJugador.visible&&1==BotonMultiJugador.visible&&(BotonSalir.x=xSalir,BotonSalir.visible=!1)},HablandoSonidoOff=function(){BotonHablarOff.visible=!1,BotonHablarOn.visible=!0,SonidoOff(!1)},HablandoSonidoOn=function(){BotonHablarOff.visible=!0,BotonHablarOn.visible=!1,SonidoOn(!1)},PermisoMicro=function(){1==window.plugins.speechRecognition.requestPermission()?socket.emit("Consola","Hay permiso"):socket.emit("Consola","No Hay permiso")},SolicitaClasificacion=function(){var a;a=ArrayInfoJugador.length>0?ArrayInfoJugador[0].JugadorFull:null,1==EstoyConectado()?socket.emit("solicita_clasificacion",socket.id,a):(ConectaServidor(),socket.emit("solicita_clasificacion",socket.id,a))},RellenarSala=function(){1==ModoMultijugador&&1==EstoyConectado()&&socket.emit("rellenar sala",Habitacion,ArrayDelaPropiaSala[SoyElJugador-1].JugadorFull)},SonidoOff=function(a){vSonidoOnOriginal=vSonidoOn,vSonidoOn=!1,BotonSonidoOn.visible=!1,BotonSonidoOff.visible=!0},SonidoOn=function(a){0==a&&0==vSonidoOnOriginal||(vSonidoOn=!0,BotonSonidoOn.visible=!0,BotonSonidoOff.visible=!1)},CerrarNoticia=function(){Noticia.visible=!1},InicioMultiJugadorAmigos=function(){1==checkConnection()&&(CancelarAmigos(),1==ModoMultijugador&&socket.emit("enviar peticion sala amigos"))},GrabarResultado=function(a,o,e,t,r,n,i,l){if(1==ModoMultijugador){var d,s=ArrayDelaPropiaSala[a-1].Desconectado,c=ArrayDelaPropiaSala[a-1].JugadorFull,u=ArrayDelaPropiaSala[a-1].Nombre,g=ArrayDelaPropiaSala[a-1].JugadorSala,p=ArrayDelaPropiaSala[a-1].Sala,M=ArrayDelaPropiaSala[a-1].Amigo,h=ArrayDelaPropiaSala[a-1].IP;d=1==e?"v":"i",socket.emit("Enviar_Resultados",c,u,g,p,o,d,s,t,r,n,i,l,M,idPartida,h)}},onSocketListaSalaAmigos=function(a){CrearTablaSalas(a)},CrearTablaSalas=function(a){var o,e,t,r,n=document.getElementById("TablaSalas");OcultarFacebook();for(var i=n.rows.length,l=1;l<i;l++)n.deleteRow(1);for(document.getElementById("DivSalasAmigos").style.display="block",l=0;l<=a.length-1;l++)e=(o=n.insertRow(l+1)).insertCell(0),t=o.insertCell(1),(r=o.insertCell(2)).style.display="none",e.innerHTML=a[l].Sala,t.innerHTML=a[l].Creador,r.innerHTML=a[l].JugadorFull.substring(0,a[l].JugadorFull.indexOf("-",1))+46,o.onclick=function(){MostrarPidePasswordSala(this.cells[0].innerHTML,this.cells[2].innerHTML)}},CerrarTablaSalas=function(){Noticia.visible=!1,document.getElementById("DivSalasAmigos").style.display="none"},CerrarClasificacion=function(){document.getElementById("DivClasificacionContenedor").style.display="none",MostrarFacebook()},MostrarCrearSala=function(){var a=document.getElementById("DivCrearSala");document.getElementById("sala").value="",document.getElementById("pass").value="",a.style.display="block"},CerrarCrearSala=function(){document.getElementById("DivCrearSala").style.display="none"},MostrarSalir=function(a){var o="",e="";1==a&&(e=" del videojuego"),o=0==ModoMultijugador?"¿Realmente desea Salir"+e+"?":void 0!=ArrayDelaPropiaSala?4!=ArrayDelaPropiaSala.length?"¿Realmente desea Salir"+e+"?":"¿Realmente desea Salir"+e+"? Salir Implica una derrota.":"¿Realmente desea Salir"+e+"?",document.getElementById("lblSalir").textContent=o,document.getElementById("DivSalir").style.display="block"},MostrarElegirPareja=function(a){var o,e="",t="",r="",n=0;for(o=0;o<=ArrayDelaPropiaSala.length-1;o++)o+1!=SoyElJugador&&(0==n&&(e=ArrayDelaPropiaSala[o].Nombre,ArrayDelaPropiaSala[o].JugadorSala),1==n&&(t=ArrayDelaPropiaSala[o].Nombre,ArrayDelaPropiaSala[o].JugadorSala),2==n&&(r=ArrayDelaPropiaSala[o].Nombre,ArrayDelaPropiaSala[o].JugadorSala),n++);for(o=0;o<=ArrayDelaPropiaSala.length-1;o++);var i=document.getElementById("lblPareja");if(i.textContent="Elige a tu pareja",i=document.getElementById("Pareja1"),i.style.display="inline-block",i=document.getElementById("Pareja2"),i.style.display="inline-block",i=document.getElementById("Pareja3"),i.style.display="inline-block",i=document.getElementById("Pareja1"),i.textContent=e,i=document.getElementById("Pareja2"),i.textContent=t,i=document.getElementById("Pareja3"),i.textContent=r,1==a){document.getElementById("DivEligePareja").style.display="block";var l=7;timerpareja.loop(1e3,function(){l<=0?(timerpareja.stop(),1==EstoyConectado()?RespuestaPareja(2):(SalirConfirmado(),MatarConexion(),ConectaServidor())):l-=1}),timerpareja.start()}},OcultarElegirPareja=function(){timerpareja.stop(),document.getElementById("DivEligePareja").style.display="none"},MostrarFacebook=function(){document.getElementById("DivFace").style.display="inline-block"},OcultarFacebook=function(){document.getElementById("DivFace").style.display="none"},RespuestaPareja=function(a){var o,e;if(document.getElementById("DivEligePareja").style.display="none",0==EstoyConectado())SalirConfirmado(),MatarConexion(),ConectaServidor();else{1==SoyElJugador&&(e=3,1==a&&(MiPareja=2),2==a&&(MiPareja=3),3==a&&(MiPareja=4)),2==SoyElJugador&&(e=4,1==a&&(MiPareja=1),2==a&&(MiPareja=3),3==a&&(MiPareja=4)),3==SoyElJugador&&(e=1,1==a&&(MiPareja=1),2==a&&(MiPareja=2),3==a&&(MiPareja=4)),4==SoyElJugador&&(e=2,1==a&&(MiPareja=1),2==a&&(MiPareja=2),3==a&&(MiPareja=3));var t=ArrayDelaPropiaSala[MiPareja-1].OrdenEnSala;ArrayDelaPropiaSala[MiPareja-1].OrdenEnSala=e,ArrayDelaPropiaSala[e-1].OrdenEnSala=t;try{var r=ArrayDelaPropiaSala[QuienTomaElControl-1].JugadorSala}catch(a){SalirConfirmado(),MatarConexion(),ConectaServidor()}for(ArrayDelaPropiaSala.sort(sort_by("OrdenEnSala",!1,parseFloat)),o=0;o<=ArrayDelaPropiaSala.length-1;o++)if(ArrayDelaPropiaSala[o].JugadorSala==r){QuienTomaElControl=o+1;break}var n=[];n.splice(0,1e3);var i=1e5*Math.random(),l=new function(a,o,e,t,r,n,i,l){this.ArrayDelaPropiaSala=a,this.Habitacion=o,this.QuienReparte=e,this.NuevaPareja=t,this.IdMsg=r,this.ClientId=n,this.SalaID=i,this.Mensaje=l,this.Fecha=new Date(Date.now())}(ArrayDelaPropiaSala,Habitacion,4,MiPareja,i,socket.id,Habitacion,"enviar cambio parejas");ArrayAccionesDesconexiones.push(l),n.push(l),socket.emit("enviar cambio parejas",n[0],function(a){EliminarColaMensajes(a,"enviar cambio parejas")}),n.splice(0,1e3),ArrayJugadoresDesconectados.splice(0,1e3),RecalculaDesconectados()}},CerrarSalir=function(){document.getElementById("DivSalir").style.display="none"},RespuestaSalir=function(a){var o=document.getElementById("lblSalir").textContent;CerrarSalir(),1==a&&(o.search("videojuego")>=0?navigator.app.exitApp():(SalirConfirmado(),MatarConexion(),ConectaServidor()))},EliminarSalaDesdeCliente=function(a){socket.emit("enviar_eliminar_sala_amigo_cliente",a),CancelarAmigos()},MostrarPidePasswordSala=function(o,e){CerrarTablaSalas();var t=document.getElementById("DivPasswordSala");document.getElementById("sala_pass").value=o,document.getElementById("pass_pass").value="",a=e.substring(0,e.length-2),b=ArrayInfoJugador[0].JugadorFull.substring(0,ArrayInfoJugador[0].JugadorFull.indexOf("-",1)+0),1==ArrayInfoJugador[0].Admin||ArrayInfoJugador[0].JugadorFull.substring(0,ArrayInfoJugador[0].JugadorFull.indexOf("-",1)+0)==e.substring(0,e.length-2)?document.getElementById("btnEliminarSala").style.display="inline-block":document.getElementById("btnEliminarSala").style.display="none",t.style.display="block"},CancelarAmigos=function(){CerrarTablaSalas(),CerrarClasificacion(),CerrarCrearSala(),CerrarPidePasswordSala(),OcultaPantallaLogin()},CerrarPidePasswordSala=function(a){document.getElementById("DivPasswordSala").style.display="none"},ValidaPasswordSala=function(a,o){socket.emit("enviar validar password",a,o),CerrarPidePasswordSala()},CrearSala=function(a,o){var e,t;""!=a&&1==ModoMultijugador&&(ArrayInfoJugador.length>0?(e=ArrayInfoJugador[0].Nombre,t=ArrayInfoJugador[0].ProveedorID+"-"+ArrayInfoJugador[0].RedSocial):(e="",t=""),socket.emit("enviar sala nueva",a.substring(0,30),o.substring(0,30),e,t),socket.emit("enviar peticion sala amigos")),CerrarCrearSala()},ConfiguraPantallaInicio=function(){BotonMonoJugador.visible=!0,BotonMultiJugador.visible=!0,BotonContacta.visible=!0,TextCuentaMundo.visible=!0,MostrarFacebook(),BotonClasificacion.visible=!0},ConfiguraPantallaMultijugador=function(){BotonAleatorio.visible=!0,BotonAmigos.visible=!0,TextCuentaMundo.visible=!0,MostrarFacebook(),xAleatorio=game_objeto.world.centerX-120,yAleatorio=game_objeto.world.height-170,xAmigos=game_objeto.world.centerX+120,yAmigos=game_objeto.world.height-170,1==cuatrotres&&(yAleatorio=yAmigos-90),1==cuatrotres&&(yAmigos=BotonAmigos.x+45,xAmigos+=45),game_objeto.add.tween(BotonAmigos).to({x:xAmigos},400,EfectoTween2).start(),game_objeto.add.tween(BotonAleatorio).to({y:yAleatorio},400,EfectoTween1).start()},Abre=function(a){if(0==(-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://")))switch(a){case 1:window.open("/privacidad/privacidad.html","_self");break;case 2:window.open("/privacidad/clasificacion_como.html","_self")}else switch(a){case 1:cordova.InAppBrowser.open(Maquina+"/privacidad/privacidad.html","_blank","location=no");break;case 2:cordova.InAppBrowser.open(Maquina+"/privacidad/clasificacion_como.html","_blank","location=no")}},LoginCordova=function(a){var o,e=!0;if(0==(-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://")))switch(a){case 1:o=window.open("/auth/google","_self");break;case 2:o=window.open("/auth/facebook","_self");break;case 3:o=window.open("/auth/Instagram","_self");break;case 4:o=window.open("/auth/Twitter","_self");break;case 5:e=!1,o=window.open("/contacto")}else{switch(a){case 1:e=!1,window.plugins.googleplus.login({offline:!0},function(a){CierraPantallaLogin(),ObjetoG=a,InicioMultiJugador()},function(a){alert("error: "+a),CierraPantallaLogin()});break;case 2:o=cordova.InAppBrowser.open(Maquina+"/auth/facebook","_blank","location=no");break;case 3:o=cordova.InAppBrowser.open(Maquina+"/auth/Instagram","_blank","location=no");break;case 4:o=cordova.InAppBrowser.open(Maquina+"/auth/Twitter","_blank","location=no");break;case 5:e=!1,o=cordova.InAppBrowser.open(Maquina+"/contacto","_blank","location=no")}1==e&&(o.addEventListener("exit",function(a){PrimeraVezLogin=!0,SalirConfirmado(),MatarConexion(),ConectaServidor()}),o.addEventListener("loadstop",function(a){a.url.search("callbackweb")>=0&&o.close()}))}},DetenerTiempo=function(){log(!0,"Deteniendo tiempo: Es el Turno de "+vTurno+". Yo soy "+SoyElJugador),DetenerIA=!0,timerturno.stop(),timer.stop(),log(!0,"Es el Turno de "+vTurno+". Yo soy "+SoyElJugador)},MuestraOcultaChat=function(){0==MuestraChat?(document.getElementById("chat").style.display="block",MuestraChat=!0):(document.getElementById("chat").style.display="none",MuestraChat=!1)},MuestraOcultaLogin=function(){0==MuestraChat?(document.getElementById("Login").style.display="block",MuestraLogin=!0):(document.getElementById("Login").style.display="none",MuestraLogin=!1)},MuestraPantallaLogin=function(){var a;(a=document.getElementById("Login")).style.display="block",a.style.position="absolute"},TextoBocadillo=function(a,o,e,t,r,n){var i,l,d,s,c,u,g,p,M=!1,h=DevuelveUbicacionCarta(a);if(void 0==a)return!1;if(1==e&&(MuestraDorsoCante(a,o,t),0!=EstaCantado(o)&&0!=r||(RegistrarCantes.push(o),1==SoyElJugador&&(2==a&&(20==t?(o="20 en "+o,ActualizaMarcador("R",20)):(o="Las 40",ActualizaMarcador("R",40))),3==a&&(20==t?(o="20 en "+o,ActualizaMarcador("N",20)):(o="Las 40",ActualizaMarcador("N",40))),4==a&&(20==t?(o="20 en "+o,ActualizaMarcador("R",20)):(o="Las 40",ActualizaMarcador("R",40))),1==a&&(20==t?(o="20 en "+o,ActualizaMarcador("N",20)):(o="Las 40",ActualizaMarcador("N",40)))),2==SoyElJugador&&(3==a&&(20==t?(o="20 en "+o,ActualizaMarcador("R",20)):(o="Las 40",ActualizaMarcador("R",40))),4==a&&(20==t?(o="20 en "+o,ActualizaMarcador("N",20)):(o="Las 40",ActualizaMarcador("N",40))),1==a&&(20==t?(o="20 en "+o,ActualizaMarcador("R",20)):(o="Las 40",ActualizaMarcador("R",40))),2==a&&(20==t?(o="20 en "+o,ActualizaMarcador("N",20)):(o="Las 40",ActualizaMarcador("N",40)))),3==SoyElJugador&&(4==a&&(20==t?(o="20 en "+o,ActualizaMarcador("R",20)):(o="Las 40",ActualizaMarcador("R",40))),1==a&&(20==t?(o="20 en "+o,ActualizaMarcador("N",20)):(o="Las 40",ActualizaMarcador("N",40))),2==a&&(20==t?(o="20 en "+o,ActualizaMarcador("R",20)):(o="Las 40",ActualizaMarcador("R",40))),3==a&&(20==t?(o="20 en "+o,ActualizaMarcador("N",20)):(o="Las 40",ActualizaMarcador("N",40)))),4==SoyElJugador&&(1==a&&(20==t?(o="20 en "+o,ActualizaMarcador("R",20)):(o="Las 40",ActualizaMarcador("R",40))),2==a&&(20==t?(o="20 en "+o,ActualizaMarcador("N",20)):(o="Las 40",ActualizaMarcador("N",40))),3==a&&(20==t?(o="20 en "+o,ActualizaMarcador("R",20)):(o="Las 40",ActualizaMarcador("R",40))),4==a&&(20==t?(o="20 en "+o,ActualizaMarcador("N",20)):(o="Las 40",ActualizaMarcador("N",40)))))),0==e||1==e){log(!1,o),27*o.length/2,g="20_espadas";var v=game_objeto.add.image(-300,-300,g),z=v.height,m=v.width;if(log(!1,"ancho   ss "+v.width),v.destroy(),"D"==h&&(0==e?(c=(i=devuelveX("D",0)-AnchoCartaEscalado+150)+20,u=(l=devuelveY("D",0)-1.2*AltoCartaEscalado)+20):(i=game_objeto.world.centerX,l=game_objeto.world.height-2*AnchoCartaEscalado,void 0!=twBocadillo&&1==twBocadillo.isRunning&&(i+=200,log(!1,"CORRIENDO")),c=i+2.7*m,u=l+1.8*z),g="BocadilloD"),"U"==h&&(0==e?(c=(i=devuelveX("U",0))+20,u=(l=devuelveY("U",0)+AltoCarta/2)+45):(i=game_objeto.world.centerX,l=1.5*AltoCarta,void 0!=twBocadillo&&1==twBocadillo.isRunning&&(i+=200),c=i+2.7*m,u=l+1.8*z),g="BocadilloU"),"L"==h&&(0==e?(c=(i=devuelveX("L",0)+AnchoCarta/2)+20,u=(l=devuelveY("L",0)-AnchoCarta+100)+20):(i=2.5*AnchoCarta,l=game_objeto.world.centerY,void 0!=twBocadillo&&1==twBocadillo.isRunning&&(l+=100),c=i+2.7*m,u=l+1.8*z),g="BocadilloL"),"R"==h&&(0==e?(c=(i=devuelveX("R",0)-2.3*AltoCarta)+20,u=(l=devuelveY("R",0)-100)+45):(i=game_objeto.world.width-2.5*AnchoCarta,l=game_objeto.world.centerY,void 0!=twBocadillo&&1==twBocadillo.isRunning&&(l+=100),c=i+2.7*m,u=l+1.8*z),g="BocadilloR"),1==e)20==t?(g="Estallido",o.indexOf("oros")>0&&(g="20_oros",ReproducirSonido("_Oros")),o.indexOf("copas")>0&&(g="20_copas",ReproducirSonido("_Copas")),o.indexOf("espadas")>0&&(g="20_espadas",ReproducirSonido("_Espadas")),o.indexOf("bastos")>0&&(g="20_bastos",ReproducirSonido("_Bastos"))):(g="Las_40",ReproducirSonido("_Las40")),0==vReconectando&&navigator.vibrate&&window.navigator.vibrate(300),log(!1,"posicion Bocadillo: "+i),void 0!=twFondoNegro&&0==twFondoNegro.isRunning&&(FondoNegro.alpha=.7,FondoNegro.bringToTop(),(twFondoNegro=game_objeto.add.tween(FondoNegro).to({alpha:.7},1e3,EfectoTween1,!0)).onComplete.add(function(){twFondoNegro=game_objeto.add.tween(FondoNegro).to({alpha:0},500,EfectoTween1,!0,1e3,0)})),(s=game_objeto.add.image(i,l,g)).anchor.setTo(.5,.5),(twBocadillo=game_objeto.add.tween(s).to({alpha:1},1e3,EfectoTween1,!0)).onComplete.add(function(){(twBocadillo2=game_objeto.add.tween(s).to({alpha:0},500,EfectoTween1,!0,1e3,0)).onComplete.add(function(){s.destroy()})});else{for(p=0;p<=ArrayChatDeshabilitado.length-1;p++)ArrayChatDeshabilitado[p]==h&&(M=!0);if(0==M){(s=game_objeto.add.image(i,l,g)).width;(d=game_objeto.add.bitmapText(c,u,"MiFuenteNegra","BitmapText",24)).anchor.set(0,0),o=o.substring(0,42),d.text=wordwrap(o,15),d.alpha=0,(twText=game_objeto.add.tween(s).to({alpha:1},1500,EfectoTween1,!0)).onComplete.add(function(){(twTextbis=game_objeto.add.tween(s).to({alpha:0},1500,EfectoTween1,!0,2e3,0)).onComplete.add(function(){s.destroy()})}),(twText2=game_objeto.add.tween(d).to({alpha:1},1500,EfectoTween1,!0)).onComplete.add(function(){(twText2bis=game_objeto.add.tween(d).to({alpha:0},1500,EfectoTween1,!0,2e3,0)).onComplete.add(function(){d.destroy()})})}}}1==e&&Recuperarse(n,!1,"cantar")};var wordwrap=function(a,o){if(null==a)return" ";for(var e=function(a,o){return a.match(new RegExp(".{1,"+o+"}","g"))},t=[[]],r=a.split(" "),n=0;n<r.length;n++){var i=r[n];if(i.length>o)for(var l=function(a,o){var t=[];if(o>=1){var r=e(a,o-1);if(r.length>=1){for(var n=0;n<r.length-1;n++){var i=r[n]+"-";t.push(i)}t.push(r[r.length-1])}}return 0==t.length&&t.push(a),t}(i,o),d=0;d<l.length;d++){var s=l[d];(t=t.concat([[]]))[t.length-1]=t[t.length-1].concat(s)}else(function(a){var o=0;if(0!=a.length)for(var e=0;e<a.length;e++)o+=a[e].length;return o})(t[t.length-1])+i.length+1>o&&(t=t.concat([[]])),t[t.length-1]=t[t.length-1].concat(i)}for(n=0;n<t.length;n++)t[n]=t[n].join(" ");return t.join("\n")};EnviarTextoBocadillo=function(a,o,e){o=o.substring(0,60),TextoBocadillo(a,o,e,!1,!1,!1),1==ModoMultijugador&&0==e&&socket.emit("enviar texto",o,Habitacion,a,ArrayDelaPropiaSala[a-1].JugadorFull,ArrayDelaPropiaSala[a-1].Nombre)},ConectaServidor=function(){try{0==EstoyConectado()&&(socket=io.connect(Maquina,{reconnection:!0,reconnectionDelay:2e3,reconnectionDelayMax:2500,reconnectionAttempts:vIntentosGlobal,"max reconnection attempts":vIntentosGlobal,ForceNew:!1,connect_timeout:2e3,timeout:2500}),SocketInicializado=!1,setEventHandlers())}catch(a){}},InicioMultiJugador=function(a){1==checkConnection()&&(IntentosReconexion=0,BotonSalir.x=xSalir+150,BotonSalir.visible=!0,ConectaServidor(),vTurno=1,BotonMonoJugador.visible=!1,BotonMultiJugador.visible=!1,BotonContacta.visible=!1,ModoMultijugador=!0,LimpiarVariables(),LimpiarVariablesConexionNueva(),log(!0,"Entra en multijugador"),BotonCantar.loadTexture("Boton_cantar_off",0),BotonSiete.loadTexture("Boton_cambiar_7_off",0),TextCuentaMundo.visible=!0,1==EstoyConectado()&&(socket.emit("enviar_peticion_modo_multijugador",Habitacion,socket.id,!1,Version,ObjetoG),socket.emit("solicita conectados")))},InicioPartidaOnline=function(a,o){0==BotonesPartidaBloqueados&&(LimpiarVariables(),LimpiarVariablesConexionNueva(),BotonesPartidaBloqueados=!0,game_objeto.time.create(!0).add(5e3,function(){BotonesPartidaBloqueados=!1}),BotonClasificacion.visible=!1,Noticia.visible=!1,BotonSalir.visible=!0,vTurno=1,CancelarAmigos(),1==EstoyConectado()&&socket.emit("enviar_peticion_partida",socket.id,!0,a,o,Version,ObjetoG))},InicioMultiJugadorAleatorio=function(){1==checkConnection()&&InicioPartidaOnline(0,!1)},LoginDesdeWeb=function(){var a=getUrlVars().callbackweb;"g#"!=a&&"g"!=a||(SocketInicializado=!1,InicioMultiJugador(!0))},InicioMonoJugador=function(){ConectaServidor(),BotonMonoJugador.visible=!1,BotonMultiJugador.visible=!1,BotonClasificacion.visible=!1,BotonContacta.visible=!1,BotonAleatorio.visible=!1,BotonAmigos.visible=!1,TextCuentaMundo.visible=!1,ModoMultijugador=!1,LimpiarVariables(),LimpiarVariablesConexionNueva(),SoyElJugador=1,PartidaComenzada=!0,BackFondo.visible=!1,BackTapete.visible=!0,NuevaPartida(4),BotonCantar.loadTexture("Boton_cantar_off",0),BotonSiete.loadTexture("Boton_cambiar_7_off",0)},textoturno=function(){var a;return 0==ModoMultijugador?(log(!1,"vTurno en Devolver texto: "+vTurno),1==SoyElJugador&&(2==vTurno&&(a="Es el turno del jugador de su derecha"),3==vTurno&&(a="Es el turno de su compañero"),4==vTurno&&(a="Es el turno del jugador de su izquierda")),2==SoyElJugador&&(3==vTurno&&(a="Es el turno del jugador de su derecha"),4==vTurno&&(a="Es el turno de su compañero"),1==vTurno&&(a="Es el turno del jugador de su izquierda")),3==SoyElJugador&&(4==vTurno&&(a="Es el turno del jugador de su derecha"),1==vTurno&&(a="Es el turno de su compañero"),2==vTurno&&(a="Es el turno del jugador de su izquierda")),4==SoyElJugador&&(1==vTurno&&(a="Es el turno del jugador de su derecha"),2==vTurno&&(a="Es el turno de su compañero"),3==vTurno&&(a="Es el turno del jugador de su izquierda"))):a=" Es el turno de "+ArrayDelaPropiaSala[vTurno-1].Nombre,a},colision_cartas=function(a,o){log(!1,"Colisionando ")},Level.prototype.update=function(){try{GrupoL.sort("y",Phaser.Group.SORT_ASCENDING),GrupoR.sort("y",Phaser.Group.SORT_DESCENDING)}catch(a){}};var ObjetoSala=function(a,o,e,t,r,n,i,l,d,s,c,u,g,p,M,h,v,z,m,C){this.JugadorSala=a,this.Sala=o,this.SalaCerrada=e,this.Nombre=t,this.Sexo=r,this.Foto=n,this.AvatarSprite,this.Desconectado=l,this.DesconectadoFecha=d,this.Dorso=s,this.Tapete=c,this.Amigo=u,this.JugadorFull=g,this.OrdenEnSala=p,this.JugadorSalaFalseado=M,this.Admin=v,this.IP=z,this.Nivel=m,this.CampeonSemanal=C,this.JugadorSalaAnterior=a,this.NombreOri=h};setEventHandlers=function(){socket.on("connect",onSocketConnected),socket.on("reconnect_attempt",function(){IntentosReconexion++,1==ModoMultijugador&&(1==MuestraErrorDesconexion&&MensajeError("Intentando reconectar..."+IntentosReconexion),MuestraErrorDesconexion=!0,IntentosReconexion>=vIntentosGlobal&&(SalirConfirmado(),MatarConexion()))}),socket.on("reconnect",function(){IntentosReconexion=0,0==vProduccion&&socket.emit("Consola","HE RECONECTADO");1==BotonAleatorio.visible||1==BotonMonoJugador.visible||0==ArrayDelaPropiaSala.length?(PartidaComenzada=!0,SalirConfirmado(),MatarConexion(),ConectaServidor()):(MensajeError("¡Reconectado!"+ArrayDelaPropiaSala[SoyElJugador-1].Nombre),socket.emit("Reconectado",ArrayDelaPropiaSala[SoyElJugador-1].JugadorSala,ArrayDelaPropiaSala[SoyElJugador-1].Sala))}),socket.on("enviar_perfil_desde_server",onSocketPerfil),socket.on("enviar_publicidad_desde_server",onSocketPublicidad),socket.on("envio_control",onSocketControl),socket.on("disconnect",onSocketDisconnect),socket.on("conectados_sala",function(a,o){return 0==ArrayTareas.length&&0==vReconectando?(onSocketconectadosSala(a.JugadoresEnSala,a.SalaJoin,a.ArrayEnviar,a.QuienTomaElControl,!1),o(a.IdMsg)):(ArrayTareas.push(a),0)}),socket.on("baraja_desde_server",function(a,o){return 0==ArrayTareas.length&&0==vReconectando&&0==FinalizandoPartida?(onSocketBarajaDesdeServer(a.data,a.QuienReparte,a.idPartida,!1),o(a.IdMsg)):(ArrayTareas.push(a),0)}),socket.on("envio_posicion_desde_server",function(a,o){return 0==ArrayTareas.length&&0==vReconectando?(onSocketEnvioPosicionDesdeServer(a.JugadorQueMueve,a.KeyMover,a.nuevaposicion,!1),o(a.IdMsg)):(ArrayTareas.push(a),0)}),socket.on("envio_centro_desde_server",function(a,o){return 0==ArrayTareas.length&&0==vReconectando?(onSocketEnvioCentroDesdeServer(a.JugadorQueMueve,a.KeyMover,a.Turno,a.Ronda,a.Hora,!1),o(a.IdMsg)):(ArrayTareas.push(a),0)}),socket.on("Comenzad Partida",function(a,o){return 0==ArrayTareas.length&&0==vReconectando?(onSocketComenzadPartida(!1,!1),o(a.IdMsg)):(ArrayTareas.push(a),0)}),socket.on("envio_cante_desde_server",function(a,o){return 0==ArrayTareas.length&&0==vReconectando?(onSocketCantarDesdeServer(a.JugadorQueMueve,a.puntos,a.texto,!1),o(a.IdMsg)):(ArrayTareas.push(a),0)}),socket.on("envio_cambio7_desde_server",function(a,o){return 0==ArrayTareas.length&&0==vReconectando?(onSocketCambiar7DesdeServer(a.JugadorQueMueve,a.KeyMover,!1),o(a.IdMsg)):(ArrayTareas.push(a),0)}),socket.on("envio_parejas_desde_server",function(a,o){return 0==ArrayTareas.length&&0==vReconectando?(onSocketCambiarParejasDesdeServer(a.ArrayDelaPropiaSalaClienteOrdenada,a.QuienReparte),o(a.IdMsg)):(ArrayTareas.push(a),0)}),socket.on("envio_ok_parejas_desde_server",function(a,o){return 0==ArrayTareas.length&&0==vReconectando?(onSocketCambiarParejasDesdeServerOK(),o(a.IdMsg)):(ArrayTareas.push(a),0)}),socket.on("enviar_texto_desde_server",function(a,o){return onSocketEnviarTextoDesdeServer(a.data,a.QuienHabla),o(a.IdMsg)}),socket.on("desconectado_desde_server",function(a,o){return 0==ArrayTareas.length&&0==vReconectando?(onSocketDesconectadoDesdeServer(a.Jugador,a.Nombre,a.posicionJugador,a.MinutosSancion,a.QuienTomaElControl,!1),o(a.IdMsg)):(ArrayTareas.push(a),0)}),socket.on("reconectado_desde_server",function(a,o){return 0==ArrayTareas.length&&0==vReconectando?(SemaforoRondas.splice(0,1e3),onSocketReconectadoDesdeServer(a.Jugador,a.Nombre,a.posicionJugador,a.NuevoId,a.ArraySalaEnviar,a.QuienTomaElControl,a.ArrayTareasServidor,!1),o(a.IdMsg)):(ArrayTareas.push(a),0)}),socket.on("connect_failed",onSocketConexionFallida),socket.on("connect_error",onSocketServidorCaido),socket.on("envio_lista_sala_amigos",onSocketListaSalaAmigos),socket.on("MensajeServidor",onSocketMensajeServidor),socket.on("envio_validacion_salas_ok",onSocketValidacionSalaOK),socket.on("envia_clasificacion",onSocketClasificacion),socket.on("error_personalizado_desde_server",onSocketErrorDesdeServer),socket.on("cuenta jugadores",onSocketContadorJugadores),socket.on("elimina_chat_desde_server",function(){BotonEscribir.visible=!1,BotonHablarOn.visible=!1,BotonHablarOff.visible=!1})},onSocketControl=function(a){0!=a?QuienTomaElControl=NumeroJugadorSala(a):ArrayDelaPropiaSala.length>=4&&(QuienTomaElControl=SoyElJugador),SuperOrganizador()},GestorTareasLibre=function(a){var o=!1;return ArrayBloqueoTareas.length>0?o="baraja_desde_server"==ArrayTareas[0].Mensaje:(o=!0,ArrayBloqueoTareas.push(a)),o},TareasPendientesDesdeServer=function(a,o){var e,t,r,n,i=!0;if(null!=a)for(e=0;e<=a.length-1;e++)"envio_ok_parejas_desde_server"!=a[e].Mensaje&&"envio_parejas_desde_server"!=a[e].Mensaje||(i=!1,SalirConfirmado(),MatarConexion(),ConectaServidor());if(1==i){var l=["conectados_sala","baraja_desde_server","envio_posicion_desde_server","envio_centro_desde_server","Comenzad Partida","envio_cante_desde_server","envio_cambio7_desde_server","envio_parejas_desde_server","envio_ok_parejas_desde_server","desconectado_desde_server","reconectado_desde_server"];if(null!=a)if(0==ArrayTareas.length){for(e=0;e<=a.length-1;e++)if(r=!1,1==l.includes(a[e].Mensaje)&&0==ArrayTareasGestionadas.includes(a[e].IdMsg)){for(t=0;t<=ArrayTareas.length-1;t++)ArrayTareas[t].IdMsg==a[e].IdMsg&&(r=!0);0==r&&(ArrayTareas.push(a[e]),ArrayTareasGestionadas.push(a[e].IdMsg))}}else for(e=0;e<=a.length-1;e++)if(r=!1,1==l.includes(a[e].Mensaje)&&0==ArrayTareasGestionadas.includes(a[e].IdMsg)){for(t=0;t<=ArrayTareasBuffer.length-1;t++)ArrayTareasBuffer[t].IdMsg==a[e].IdMsg&&(r=!0);0==r&&(ArrayTareasBuffer.push(a[e]),ArrayTareasGestionadas.push(a[e].IdMsg))}if(i=!0,null!=a&&ArrayTareasBuffer.length>0&&(i=!1),ArrayTareas.length>0&&1==i&&(n=ArrayTareas.slice(),1==GestorTareasLibre(n[0].IdMsg)))switch(n[0].Mensaje){case"conectados_sala":onSocketconectadosSala(n[0].JugadoresEnSala,n[0].SalaJoin,n[0].ArrayEnviar,n[0].QuienTomaElControl,n[0].IdMsg),socket.emit("elimina_mensaje",n[0].IdMsg);break;case"baraja_desde_server":1==o&&(onSocketBarajaDesdeServer(n[0].data,n[0].QuienReparte,n[0].idPartida,n[0].IdMsg),socket.emit("elimina_mensaje",n[0].IdMsg));break;case"envio_posicion_desde_server":onSocketEnvioPosicionDesdeServer(n[0].JugadorQueMueve,n[0].KeyMover,n[0].nuevaposicion,n[0].IdMsg),socket.emit("elimina_mensaje",n[0].IdMsg);break;case"envio_centro_desde_server":onSocketEnvioCentroDesdeServer(n[0].JugadorQueMueve,n[0].KeyMover,n[0].Turno,n[0].Ronda,n[0].Hora,n[0].IdMsg),socket.emit("elimina_mensaje",n[0].IdMsg);break;case"Comenzad Partida":onSocketComenzadPartida(!1,n[0].IdMsg),socket.emit("elimina_mensaje",n[0].IdMsg);break;case"envio_cante_desde_server":onSocketCantarDesdeServer(n[0].JugadorQueMueve,n[0].puntos,n[0].texto,n[0].IdMsg),socket.emit("elimina_mensaje",n[0].IdMsg);break;case"envio_cambio7_desde_server":onSocketCambiar7DesdeServer(n[0].JugadorQueMueve,n[0].KeyMover,n[0].IdMsg),socket.emit("elimina_mensaje",n[0].IdMsg);break;case"desconectado_desde_server":onSocketDesconectadoDesdeServer(n[0].Jugador,n[0].Nombre,n[0].posicionJugador,n[0].MinutosSancion,n[0].QuienTomaElControl,n[0].IdMsg),socket.emit("elimina_mensaje",n[0].IdMsg);case"reconectado_desde_server":onSocketReconectadoDesdeServer(n[0].Jugador,n[0].Nombre,n[0].posicionJugador,n[0].NuevoId,n[0].ArraySalaEnviar,n[0].QuienTomaElControl,n[0].ArrayTareasServidor,n[0].IdMsg),socket.emit("elimina_mensaje",n[0].IdMsg)}}},Recuperarse=function(a,o){var e;if(ArrayTareas.length,BorrarTarea(a),ArrayTareasBuffer.length>0){for(e=0;e<=ArrayTareasBuffer.length-1;e++)ArrayTareas.push(ArrayTareasBuffer[e]);ArrayTareasBuffer.splice(0,1e4)}if(0==ArrayTareas.length){vReconectando=!1,SuperOrganizador()}else TareasPendientesDesdeServer(null,o)},onSocketErrorDesdeServer=function(a,o){"Error0"!=a&&"Error2"!=a&&"Error3"!=a&&"Error4"!=a||MuestraPantallaLogin(),"Error5"==a&&onSocketMensajeServidor(o,!0),"Error6"==a&&onSocketMensajeServidor(o,!1),"Error7"==a&&onSocketMensajeServidor(o,!1),"Error8"==a&&onSocketMensajeServidor(o,!0),"Error9"!=a&&"Error10"!=a&&"Error11"!=a||onSocketMensajeServidor(o,!0),"Error12"==a&&onSocketMensajeServidor(o,!1),"Error13"==a&&onSocketMensajeServidor(o,!1)},onSocketContadorJugadores=function(a){TextCuentaMundo.text="",-9999!=a.CuentaMundo&&(TextCuentaMundo.text="Contra el mundo: "+a.CuentaMundo+" personas\nContra amigos: "+a.CuentaAmigos+" personas\n",UsuariosOnline=a.CuentaMundo),-9999!=a.CuentaSolos&&(TextCuentaMundo.text=TextCuentaMundo.text+"Contra el juego: "+a.CuentaSolos+" personas"),0==ArrayDelaPropiaSala.length?TextCuentaMundo.x=game_objeto.world.centerX+250+TextCuentaMundo.textWidth/2:TextCuentaMundo.x=game_objeto.world.centerX-125+TextCuentaMundo.textWidth/2},onSocketCambiarParejasDesdeServer=function(a,o,e){var t,r=ArrayDelaPropiaSala[QuienTomaElControl-1].JugadorSala;for(ArrayDelaPropiaSala=a,t=0;t<=ArrayDelaPropiaSala.length-1;t++)if(ArrayDelaPropiaSala[t].JugadorSala==r){QuienTomaElControl=t+1;break}for(ArrayJugadoresDesconectados.splice(0,1e3),RecalculaDesconectados(),t=0;t<=ArrayDelaPropiaSala.length-1;t++)ArrayDelaPropiaSala[t].JugadorSala==socket.id&&(SoyElJugador=t+1);if(SemaforoAvatars.splice(0,1e3),DibujaJugadores(),0==vReconectando){var n=function(a,o,e,t,r,n){this.QuienSoy=a,this.idPartida=o,this.IdMsg=e,this.ClientId=t,this.SalaID=r,this.Mensaje=n,this.Fecha=new Date(Date.now())},i=[];i.splice(0,1e3);var l=1e5*Math.random(),d=new n(ArrayDelaPropiaSala[SoyElJugador-1].JugadorSala,idPartida,l,socket.id,Habitacion,"cambio parejas ok");for(ArrayAccionesDesconexiones.push(d),i.push(d),socket.emit("cambio parejas ok",i[0],function(a){EliminarColaMensajes(a,"cambio parejas ok")}),i.splice(0,1e3),t=0;t<=ArrayDelaPropiaSala.length-1;t++)if(SoyElJugador==QuienTomaElControl&&1==ArrayDelaPropiaSala[t].Desconectado){var l=1e5*Math.random(),d=new n(ArrayDelaPropiaSala[t].JugadorSala,idPartida,l,socket.id,Habitacion,"cambio parejas ok");ArrayAccionesDesconexiones.push(d),i.push(d),socket.emit("cambio parejas ok",i[0],function(a){EliminarColaMensajes(a,"cambio parejas ok")}),i.splice(0,1e3)}}},onSocketCambiarParejasDesdeServerOK=function(){FuerzaRepartoPartidaInicial()},FuerzaRepartoPartidaInicial=function(){0==MazoD.length&&0==MazoL.length&&0==MazoR.length&&0==MazoU.length&&4==ArrayDelaPropiaSala.length&&(vTurno=1,SoyElJugador==QuienTomaElControl&&(CrearBaraja(4),EnviarBaraja(MazoEnviar,Habitacion,4,SonVueltas,ArrayDelaPropiaSala,MarcadorPartidasNuestro+MarcadorPartidasRival)))},onSocketClasificacion=function(a,o,e,t,r,n,i,l,d,s,c,u){OcultarFacebook(),createPaginador("general",a,t,i,l),createPaginador("semanal",o,r,d,s),createPaginador("anterior",e,n,c,u)},DibujaRankingGeneral=function(a,o,e,t){var r,n,i,l,d,s,c,u,g,p,M,h,v,z,m=document.getElementById("TablaClasificacion"),C=m.rows.length;if(null!=a&&a.length>0){for(r=1;r<C;r++)m.deleteRow(1);for(document.getElementById("DivClasificacionContenedor").style.display="inline-block",z=0,r=0;r<=a.length-1;r++)1==a[r]._Tipo&&(i=(n=m.insertRow(z+1)).insertCell(0),l=n.insertCell(1),d=n.insertCell(2),s=n.insertCell(3),c=n.insertCell(4),u=n.insertCell(5),g=n.insertCell(6),p=n.insertCell(7),M=n.insertCell(8),h=n.insertCell(9),i.innerHTML=a[r]._Posicion,void 0!=a[r].Foto?l.innerHTML="<img class='zoom' src='"+a[r].Foto+"' style='max-width:30;max-height:30' >":l.innerHTML="<img class='zoom' src='"+Maquina+"/assets/images/desconocido.png' style='max-width:30;max-height:30' >",d.innerHTML=a[r].Jugador,s.innerHTML=a[r]._Jugadas,c.innerHTML=a[r]._Ganadas,u.innerHTML=a[r]._Perdidas,g.innerHTML=a[r]._Retiradas,p.innerHTML=a[r]._Grupo,M.innerHTML=a[r]._Ratio,v=CalculaAvatarLogro(a[r]._Nivel,1),h.innerHTML="<img class='zoom' src='"+Maquina+"/assets/images/"+v+"' style='max-width:30;max-height:30' >",z++);(m=document.getElementById("TextoClasificacionGlobal")).textContent=-1==o?"No sabemos quién eres. Entra con tu usuario en multijugador.":0==o?"No apareces en el ranking general.":"Estás en la posición "+o+".",m.textContent=m.textContent+"\r\nPara estar en el grupo de los jugones, juega más de "+e+" partidas.\r\nPara estar en el grupo de los frecuentes, juega más de "+t+" partidas."}},DibujaRankingSemanal=function(a,o,e,t){var r,n,i,l,d,s,c,u,g,p,M,h,v,z;if(null!=a&&a.length>0){var m=document.getElementById("TablaClasificacionSemanal"),C=m.rows.length;for(r=1;r<C;r++)m.deleteRow(1);for(z=0,r=0;r<=a.length-1;r++)2==a[r]._Tipo&&(i=(n=m.insertRow(z+1)).insertCell(0),l=n.insertCell(1),d=n.insertCell(2),s=n.insertCell(3),c=n.insertCell(4),u=n.insertCell(5),g=n.insertCell(6),p=n.insertCell(7),M=n.insertCell(8),h=n.insertCell(9),i.innerHTML=a[r]._Posicion,void 0!=a[r].Foto?l.innerHTML="<img class='zoom' src='"+a[r].Foto+"' style='max-width:30;max-height:30' >":l.innerHTML="<img class='zoom' src='"+Maquina+"/assets/images/desconocido.png' style='max-width:30;max-height:30' >",d.innerHTML=a[r].Jugador,s.innerHTML=a[r]._Jugadas,c.innerHTML=a[r]._Ganadas,u.innerHTML=a[r]._Perdidas,g.innerHTML=a[r]._Retiradas,p.innerHTML=a[r]._Grupo,M.innerHTML=a[r]._Ratio,v="sin_logro.png",1==a[r]._CampeonSemanal&&(v="medalla.png"),h.innerHTML="<img class='zoom' src='"+Maquina+"/assets/images/"+v+"' style='max-width:30;max-height:30' >",z++);(m=document.getElementById("TextoClasificacionSemanal")).textContent=-1==o?"No sabemos quién eres. Entra con tu usuario en multijugador.":0==o?"No apareces en el ranking de esta semana.":"Estás en la posición "+o+".",m.textContent=m.textContent+"\r\nPara estar en el grupo de los jugones, juega más de "+e+" partidas.\r\nPara estar en el grupo de los frecuentes, juega más de "+t+" partidas."}},DibujaRankingAnterior=function(a,o,e,t){var r,n,i,l,d,s,c,u,g,p,M,h,v,z;if(null!=a&&a.length>0){var m=document.getElementById("TablaClasificacionAnterior"),C=m.rows.length;for(r=1;r<C;r++)m.deleteRow(1);for(z=0,r=0;r<=a.length-1;r++)3==a[r]._Tipo&&(i=(n=m.insertRow(z+1)).insertCell(0),l=n.insertCell(1),d=n.insertCell(2),s=n.insertCell(3),c=n.insertCell(4),u=n.insertCell(5),g=n.insertCell(6),p=n.insertCell(7),M=n.insertCell(8),h=n.insertCell(9),i.innerHTML=a[r]._Posicion,void 0!=a[r].Foto?l.innerHTML="<img class='zoom' src='"+a[r].Foto+"' style='max-width:30;max-height:30' >":l.innerHTML="<img class='zoom' src='"+Maquina+"/assets/images/desconocido.png' style='max-width:30;max-height:30' >",d.innerHTML=a[r].Jugador,s.innerHTML=a[r]._Jugadas,c.innerHTML=a[r]._Ganadas,u.innerHTML=a[r]._Perdidas,g.innerHTML=a[r]._Retiradas,p.innerHTML=a[r]._Grupo,M.innerHTML=a[r]._Ratio,v="sin_logro.png",1==a[r]._CampeonSemanal&&(v="medalla.png"),h.innerHTML="<img class='zoom' src='"+Maquina+"/assets/images/"+v+"' style='max-width:30;max-height:30' >",z++);(m=document.getElementById("TextoClasificacionAnterior")).textContent=-1==o?"No sabemos quién eres. Entra con tu usuario en multijugador.":0==o?"No apareces en el ranking anterior.":"Estás en la posición "+o+".",m.textContent=m.textContent+"\r\nPara estar en el grupo de los jugones, juega más de "+e+" partidas.\r\nPara estar en el grupo de los frecuentes, juega más de "+t+" partidas."}},onSocketValidacionSalaOK=function(a,o){1==a?InicioPartidaOnline(1,o):onSocketErrorDesdeServer("Error7","Contraseña incorrecta.")},onSocketMensajeServidor=function(a,o){var e=EscribirTextoGuay(a,40);game_objeto.add.tween(e).to({alpha:0},1e3,EfectoTween1,!0,5e3).onComplete.add(function(){e.destroy(),1==o&&(0==vProduccion&&socket.emit("Consola","EL SERVIDOR ME ECHA"),SalirConfirmado(),MatarConexion(),ConectaServidor())})},onSocketConexionFallida=function(){},onSocketServidorCaido=function(){ErrorConexion()},onSocketPerfil=function(a){var o;ArrayInfoJugador.splice(0,1e3),o=a[0].Tapete,1==cuatrotres&&(o=o.replace(".jpg","_43.jpg")),ArrayInfoJugador.push(new ObjetoJugador(a[0].Nombre,a[0].Sexo,a[0].Foto,a[0].Dorso,o,a[0].ProveedorID,a[0].RedSocial,a[0].Admin,a[0].VersionOK,a[0].VersionMensaje,a[0].Noticia,a[0].IP,a[0].ChatDisponible,a[0].Nivel,a[0].CampeonSemanal)),""!=a[0].VersionMensaje&&onSocketErrorDesdeServer("Error8",a[0].VersionMensaje),TapeteRemoto=ArrayInfoJugador[0].Tapete,TapeteRemotoLoader=new Phaser.Loader(game_objeto),TapeteRemotoLoader.crossOrigin="Anonymous",TapeteRemotoLoader.image("TapeteRemoto",ArrayInfoJugador[0].Tapete,!0),TapeteRemotoLoader.onFileComplete.add(function(){fileCompleteTapete()}),TapeteRemotoLoader.start(),DorsoRemotoLoader=new Phaser.Loader(game_objeto),DorsoRemotoLoader.crossOrigin="Anonymous",DorsoRemotoLoader.image("ReversoRemoto",ArrayInfoJugador[0].Dorso,!0),DorsoRemotoLoader.onFileComplete.add(function(){fileCompleteDorso()}),DorsoRemotoLoader.start(),null!=ArrayInfoJugador[0].Noticia&&ContadorNoticia<=2&&4!=ArrayDelaPropiaSala.length&&0==EntradaModoJuego&&(NoticiaRemotoLoader=new Phaser.Loader(game_objeto),NoticiaRemotoLoader.crossOrigin="Anonymous",NoticiaRemotoLoader.image("NoticiaRemoto",ArrayInfoJugador[0].Noticia,!0),NoticiaRemotoLoader.onFileComplete.add(function(){fileCompleteNoticia()}),NoticiaRemotoLoader.start()),++ContadorNoticia>10&&(ContadorNoticia=0),0==BotonMonoJugador.visible&&ConfiguraPantallaMultijugador()},onSocketPublicidad=function(a){ArrayInfoJugador.splice(0,1e3);var o=a[0].Tapete;1==cuatrotres&&(o=o.replace(".jpg","_43.jpg")),ArrayInfoJugador.push(new ObjetoJugador(a[0].Nombre,a[0].Sexo,a[0].Foto,a[0].Dorso,o,a[0].ProveedorID,a[0].RedSocial,a[0].Admin,a[0].VersionOK,a[0].VersionMensaje,a[0].Noticia,a[0].IP,a[0].ChatDisponible,a[0].Nivel,a[0].CampeonSemanal)),""!=a[0].VersionMensaje&&onSocketErrorDesdeServer("Error8",a[0].VersionMensaje),TapeteRemoto=ArrayInfoJugador[0].Tapete,TapeteRemotoLoader=new Phaser.Loader(game_objeto),TapeteRemotoLoader.crossOrigin="Anonymous",TapeteRemotoLoader.image("TapeteRemoto",ArrayInfoJugador[0].Tapete,!0),TapeteRemotoLoader.onFileComplete.add(function(){fileCompleteTapete()}),TapeteRemotoLoader.start(),DorsoRemotoLoader=new Phaser.Loader(game_objeto),DorsoRemotoLoader.crossOrigin="Anonymous",DorsoRemotoLoader.image("ReversoRemoto",ArrayInfoJugador[0].Dorso,!0),DorsoRemotoLoader.onFileComplete.add(function(){fileCompleteDorso()}),DorsoRemotoLoader.start(),null!=ArrayInfoJugador[0].Noticia&&ContadorNoticia<=2&&4!=ArrayDelaPropiaSala.length&&0==EntradaModoJuego&&(NoticiaRemoto=ArrayInfoJugador[0].Noticia,NoticiaRemotoLoader=new Phaser.Loader(game_objeto),NoticiaRemotoLoader.crossOrigin="Anonymous",NoticiaRemotoLoader.image("NoticiaRemoto",ArrayInfoJugador[0].Noticia,!0),NoticiaRemotoLoader.onFileComplete.add(function(){fileCompleteNoticia()}),NoticiaRemotoLoader.start()),++ContadorNoticia>10&&(ContadorNoticia=0)},onSocketDesconectadoDesdeServer=function(a,o,e,t,r,n){var i,l,d,s;if(a!=ArrayDelaPropiaSala[SoyElJugador-1].JugadorSala&&a!=ArrayDelaPropiaSala[SoyElJugador-1].JugadorSalaAnterior){0==vProduccion&&socket.emit("Consola","PRESoy "+SoyElJugador+". Desde desconectado"),QuienTomaElControl=NumeroJugadorSala(r),log(!0,"Desconecta el jugador "),log(!0,"JUGADOR QUE DESCONECTA "+a);for(p=0;p<=ArrayDelaPropiaSala.length-1;p++)ArrayDelaPropiaSala[p].JugadorSala!=a&&ArrayDelaPropiaSala[p].JugadorSalaAnterior!=a||(ArrayDelaPropiaSala[p].Desconectado=!0);if(RecalculaDesconectados(),1==ModoMultijugador&&0==vReconectando&&EnviarEstoyListoDesconectados(),1==ModoMultijugador&&0==PartidaComenzada&&0==vReconectando&&SoyElJugador==QuienTomaElControl&&0==MarcadorPartidasNuestro&&0==MarcadorPartidasRival&&0==SonVueltas&&0==MarcadorNuestro&&0==MarcadorRival&&1==EstoyConectado()){var c=[];c.splice(0,1e3);var u=1e5*Math.random(),g=new function(a,o,e,t,r,n){this.QuienSoy=a,this.idPartida=o,this.IdMsg=e,this.ClientId=t,this.SalaID=r,this.Mensaje=n,this.Fecha=new Date(Date.now())}(a,idPartida,u,socket.id,Habitacion,"cambio parejas ok");ArrayAccionesDesconexiones.push(g),c.push(g),socket.emit("cambio parejas ok",c[0],function(a){EliminarColaMensajes(a,"cambio parejas ok")}),c.splice(0,1e3)}i=1;for(var p=0;p<=ArrayDelaPropiaSala.length-1;p++)ArrayDelaPropiaSala[p].JugadorSala!=a&&ArrayDelaPropiaSala[p].JugadorSalaAnterior!=a||(i=p);"D"==(s=DevuelveUbicacionCarta(i+1))&&(l=devuelveX("D_5",0)+110+125,d=devuelveY("L_0",0)+20+35),"R"==s&&(l=(0==cuatrotres?devuelveX("D_5",0)+245:devuelveX("R_5",0)-20)+20,d=devuelveY("R_5",0)-147+35),"U"==s&&(l=devuelveX("D_0",0)+25+20,d=(0==cuatrotres?devuelveY("R_5",0)-147:devuelveY("U_0",0)-95)+35),"L"==s&&(l=devuelveX("L_0",0)+125,d=devuelveY("L_0",0)+20+35,Desplazamiento=75),0==i&&(textJugador1.x=l,textJugador1.text="Ordenador 1",textJugador1.x="U"==s||"R"==s?textJugador1.x-textJugador1.textWidth/2-30:textJugador1.x+textJugador1.textWidth/2-30,textJugador1.y=d,ArrayDelaPropiaSala[i].Nombre="Ordenador 1",AvatarSprite1.loadTexture("Maquina",0),AvatarSprite1.width=AnchoFoto,AvatarSprite1.height=AnchoFoto,void 0!=AvatarMedalla1&&AvatarMedalla1.destroy(),void 0!=AvatarLogro1&&AvatarLogro1.destroy()),1==i&&(textJugador2.x=l,textJugador2.text="Ordenador 2",textJugador2.x="U"==s||"R"==s?textJugador2.x-textJugador2.textWidth/2-30:textJugador2.x+textJugador2.textWidth/2-30,textJugador2.y=d,ArrayDelaPropiaSala[i].Nombre="Ordenador 2",AvatarSprite2.loadTexture("Maquina",0),AvatarSprite2.width=AnchoFoto,AvatarSprite2.height=AnchoFoto,void 0!=AvatarMedalla2&&AvatarMedalla2.destroy(),void 0!=AvatarLogro2&&AvatarLogro2.destroy()),2==i&&(textJugador3.x=l,textJugador3.text="Ordenador 3",textJugador3.x="U"==s||"R"==s?textJugador3.x-textJugador3.textWidth/2-30:textJugador3.x+textJugador3.textWidth/2-30,textJugador3.y=d,ArrayDelaPropiaSala[i].Nombre="Ordenador 3",AvatarSprite3.loadTexture("Maquina",0),AvatarSprite3.width=AnchoFoto,AvatarSprite3.height=AnchoFoto,void 0!=AvatarMedalla3&&AvatarMedalla3.destroy(),void 0!=AvatarLogro3&&AvatarLogro3.destroy()),3==i&&(textJugador4.x=l,textJugador4.text="Ordenador 4",textJugador4.x="U"==s||"R"==s?textJugador4.x-textJugador4.textWidth/2-30:textJugador4.x+textJugador4.textWidth/2-30,textJugador4.y=d,ArrayDelaPropiaSala[i].Nombre="Ordenador 4",AvatarSprite4.loadTexture("Maquina",0),AvatarSprite4.width=AnchoFoto,AvatarSprite4.height=AnchoFoto,void 0!=AvatarMedalla4&&AvatarMedalla4.destroy(),void 0!=AvatarLogro4&&AvatarLogro4.destroy()),0==vReconectando&&(t>0&&onSocketErrorDesdeServer("Error13",o+" será sancionado\n con "+t+" minutos si no logra reconectar."),0==MazoD.length&&0==MazoCentral.length&&0==MazoL.length&&0==MazoR.length&&ArrayDelaPropiaSala.length>=4&&QuienTomaElControl==SoyElJugador&&0==FinalizandoPartida&&0==vReconectando&&NuevaPartida(vTurno))}Recuperarse(n,!1,!1)},DibujaMensajeEspecial=function(a,o){var e,t,r;"D"==(e=DevuelveUbicacionCarta(o+1))&&(t=game_objeto.world.centerX,r=game_objeto.world.height-2*AnchoCartaEscalado),"U"==e&&(t=game_objeto.world.centerX,r=1.5*AltoCarta),"L"==e&&(t=2.5*AnchoCarta,r=game_objeto.world.centerY),"R"==e&&(t=game_objeto.world.width-2.5*AnchoCarta,r=game_objeto.world.centerY),log(!1,"posicion Bocadillo: "+t),FondoNegro.alpha=.7,FondoNegro.bringToTop();var n=game_objeto.add.image(t,r,a);n.anchor.setTo(.5,.5);var i=game_objeto.add.tween(FondoNegro).to({alpha:.7},1e3,EfectoTween1,!0);i.onComplete.add(function(){i=game_objeto.add.tween(FondoNegro).to({alpha:0},500,EfectoTween1,!0,1e3,0)}),game_objeto.add.tween(n).to({alpha:1},1e3,EfectoTween1,!0).onComplete.add(function(){game_objeto.add.tween(n).to({alpha:0},500,EfectoTween1,!0,1e3,0).onComplete.add(function(){n.destroy()})})},onSocketReconectadoDesdeServer=function(a,o,e,t,r,n,i,l){var d,s;if(void 0==t)return 0==vProduccion&&socket.emit("Consola","Raruno"),!1;for(vReconectando,ArrayDelaPropiaSala[SoyElJugador-1].JugadorSala==a&&(vReconectando=!0,timerturno.stop(),timer.stop()),log(!0,"Desconecta el jugador "),log(!0,"JUGADOR QUE RECONECTA "+a),d=0;d<=ArrayJugadoresDesconectados.length-1;d++)if(ArrayJugadoresDesconectados[d].JugadorSala==a){ArrayJugadoresDesconectados.splice(d,1);break}for(d=0;d<=ArrayDelaPropiaSala.length-1;d++)if(ArrayDelaPropiaSala[d].JugadorSala==a){d,ArrayDelaPropiaSala[d].Desconectado=!1;break}if(void 0!=r&&null!=r&&r.length>0)for(d=0;d<=r.length-1;d++)for(s=0;s<=ArrayDelaPropiaSala.length-1;s++)r[d].JugadorSalaAnterior==ArrayDelaPropiaSala[s].JugadorSala&&(ArrayDelaPropiaSala[s].JugadorSalaAnterior=ArrayDelaPropiaSala[s].JugadorSala,ArrayDelaPropiaSala[s].Desconectado=r[d].Desconectado,ArrayDelaPropiaSala[s].JugadorSala=r[d].JugadorSala);0==vProduccion&&socket.emit("Consola","PRESoy "+SoyElJugador+". Desde reconectado "+n+"   "+t),QuienTomaElControl=NumeroJugadorSala(n),ArrayJugadoresDesconectados.splice(0,1e3),RecalculaDesconectados(),DibujaJugadores(),ArrayDelaPropiaSala[SoyElJugador-1].JugadorSala==t?0==i||void 0==i||0==i.length?Recuperarse(l,!1,!1):(BorrarTarea(l),0==l?TareasPendientesDesdeServer(i,!0):Recuperarse(l,!1,!1)):Recuperarse(l,!1,!1)},BorrarTarea=function(a){var o;if(ArrayTareas.length>0)for(o=0;o<=ArrayTareas.length-1;o++)ArrayTareas[o].IdMsg==a&&ArrayTareas.splice(o,1);if(ArrayBloqueoTareas.length>0)for(o=0;o<=ArrayBloqueoTareas.length-1;o++)ArrayBloqueoTareas[o]==a&&ArrayBloqueoTareas.splice(o,1)},BorrarTareasMias=function(){var a;if(ArrayTareas.length>0){for(a=0;a<=ArrayTareas.length-1;a++)"reconectado_desde_server"==ArrayTareas[a].Mensaje&&(ArrayDelaPropiaSala[SoyElJugador-1].JugadorSala!=ArrayTareas[a].Jugador&&ArrayDelaPropiaSala[SoyElJugador-1].JugadorSala!=ArrayTareas[a].NuevoId||(ArrayTareas[a].Borrar=!0));for(a=0;a<=ArrayTareas.length-1;a++)"desconectado_desde_server"==ArrayTareas[a].Mensaje&&ArrayDelaPropiaSala[SoyElJugador-1].JugadorSala==ArrayTareas[a].Jugador&&(ArrayTareas[a].Borrar=!0);for(;a--;)1==ArrayTareas[a].Borrar&&ArrayTareas.splice(a,1)}},onSocketConnected=function(){1==PrimeraVezLogin&&(PrimeraVezLogin=!1,InicioMultiJugador()),IntentosReconexion=0,1==EstoyConectado()&&(1!=EstoyConectado()||1!=BotonMonoJugador.visible&&1!=BotonAmigos.visible||socket.emit("solicita conectados"),1==EstoyConectado()&&0==BotonMonoJugador.visible&&0==PartidaComenzada&&1==ModoMultijugador&&socket.emit("enviar_peticion_modo_multijugador",Habitacion,socket.id,!1,Version,ObjetoG))},EstoyConectado=function(){var a=!1;try{a=socket.connected}catch(o){a=!1}return a},onSocketDisconnect=function(){ErrorConexion()},onSocketCartaMovida=function(){log(!1,"carta movida")},onSocketBarajaPedida=function(){log(!1,"ya te la env�o")},onSocketComenzadPartida=function(a,o){log(!0,"Le llega"),textListos.visible=!1,textEligiendo.visible=!1,PartidaComenzada=!0,PreparaCaracteristicasMano(),MuestraTurno(),SuperOrganizador(),0==a&&Recuperarse(o,!1,!1)},MensajeEsperandoJugadores=function(){textEligiendo.visible=!1,textEsperando.visible=!0,textEsperando.alpha=0,game_objeto.add.tween(textEsperando).to({alpha:1},1500,"Linear",!0,0,-1).yoyo(!0,3e3)},MensajeEsperandoListos=function(){textEligiendo.visible=!1,textListos.visible=!0,textListos.alpha=0,game_objeto.add.tween(textListos).to({alpha:1},1500,"Linear",!0,0,-1).yoyo(!0,3e3)},MensajeEsperandoElegir=function(){var a,o=0;for(a=0;a<=ArrayDelaPropiaSala.length-1;a++)0==ArrayDelaPropiaSala[a].Desconectado&&(o=a);textEsperando.visible=!1,ArrayDelaPropiaSala.length>0?textEligiendo.text=ArrayDelaPropiaSala[o].Nombre+" está eligiendo pareja":textEligiendo.text="Se está eligiendo pareja",textEligiendo.visible=!0,textEligiendo.alpha=0,game_objeto.add.tween(textEligiendo).to({alpha:1},1500,"Linear",!0,0,-1).yoyo(!0,3e3)},DevuelveUbicacionCartaSegunOrdenConectado=function(a){},ClickAvatar=function(a){var o,e,t,r,n=!1;for(t=a,o=DevuelveUbicacionCarta(t),log(!0,"ALGO CON LA Letra "+o),e=0;e<=ArrayChatDeshabilitado.length-1;e++)if(ArrayChatDeshabilitado[e]==o){n=!0;break}0==n?"D"!=o&&(ArrayChatDeshabilitado.push(o),1==a&&(AvatarSprite1.tint=Phaser.Color.getColor(110,110,110)),2==a&&(AvatarSprite2.tint=Phaser.Color.getColor(110,110,110)),3==a&&(AvatarSprite3.tint=Phaser.Color.getColor(110,110,110)),4==a&&(AvatarSprite4.tint=Phaser.Color.getColor(110,110,110))):(ArrayChatDeshabilitado.splice(e,1),1==a&&(AvatarSprite1.tint=Phaser.Color.getColor(255,255,255)),2==a&&(AvatarSprite2.tint=Phaser.Color.getColor(255,255,255)),3==a&&(AvatarSprite3.tint=Phaser.Color.getColor(255,255,255)),4==a&&(AvatarSprite4.tint=Phaser.Color.getColor(255,255,255))),"D"==o?r=EscribirTextoGuay("Pulse sobre la foto de los jugadores\npara activar o desactivar el chat con ellos",40):0==n?(r=EscribirTextoGuay("Chat deshabilitado con "+ArrayDelaPropiaSala[a-1].Nombre,40),0==ArrayDelaPropiaSala[0].Amigo&&socket.emit("enviar_silenciar",ArrayInfoJugador[0].JugadorFull,ArrayInfoJugador[0].IP,ArrayDelaPropiaSala[a-1].JugadorFull,Habitacion)):(r=EscribirTextoGuay("Chat habilitado con "+ArrayDelaPropiaSala[a-1].Nombre,40),0==ArrayDelaPropiaSala[0].Amigo&&socket.emit("enviar_desilenciar",ArrayInfoJugador[0].JugadorFull,ArrayInfoJugador[0].IP,ArrayDelaPropiaSala[a-1].JugadorFull,Habitacion)),game_objeto.add.tween(r).to({alpha:0},1e3,EfectoTween1,!0,1e3).onComplete.add(function(){r.destroy()})},NumeroJugadorSala=function(a){var o,e=0;for(o=0;o<=ArrayDelaPropiaSala.length-1;o++)ArrayDelaPropiaSala[o].JugadorSala==a&&(e=o+1);if(0==e)for(o=0;o<=ArrayDelaPropiaSala.length-1;o++);return 0==vProduccion&&socket.emit("Consola","Soy "+SoyElJugador+". Toma el control "+e),e},onSocketconectadosSala=function(a,o,e,t,r){OcultarFacebook(),Habitacion=o,log(!1,"conectados: "+a),log(!1,"Habitacion: "+Habitacion),ArrayDelaPropiaSala.length>0&&(vReconectando=!0);var n,i,l,d,s=e.length-1;for(BotonesPartidaBloqueados=!1,BotonSalir.x=xSalir,BotonAleatorio.visible=!1,BotonAmigos.visible=!1,log(!0,"Longitud de conectados sala aleatoria "+s),OcultaPantallaLogin(),log(!0,"Se borra "+s),c=0;c<=s;c++)if(e[c].Sala==o){for(i=!1,n=0;n<=ArrayDelaPropiaSala.length-1;n++)e[c].JugadorSala==ArrayDelaPropiaSala[n].JugadorSala&&(i=!0);0==i?(d=e[c].Tapete,1==cuatrotres&&(d=d.replace(".jpg","_43.jpg")),l=null==e[c].Foto?Maquina+"/assets/images/desconocido.png":e[c].Foto,ArrayDelaPropiaSala.push(new ObjetoSala(e[c].JugadorSala,e[c].Sala,!1,e[c].Nombre,e[c].Sexo,l,null,e[c].Desconectado,e[c].DesconectadoFecha,e[c].Dorso,d,e[c].Amigo,e[c].JugadorFull,c+1,"",e[c].Nombre,e[c].Admin,e[c].IP,e[c].Nivel,e[c].CampeonSemanal))):vReconectando=!0}0==vProduccion&&socket.emit("Consola","PRESoy "+SoyElJugador+". Desde conectados"),QuienTomaElControl=NumeroJugadorSala(t),RecalculaDesconectados(),s<=2?MensajeEsperandoJugadores():MensajeEsperandoElegir();for(var c=0;c<=ArrayDelaPropiaSala.length-1;c++)ArrayDelaPropiaSala[c].JugadorSala==socket.id&&(SoyElJugador=c+1,BackFondo.visible=!1,BackTapete.visible=!0,log(!0,ArrayDelaPropiaSala[c].Tapete),log(!0,ArrayDelaPropiaSala[c].Dorso),BotonEscribir.visible=!0,BotonHablarOn.visible=!1,BotonHablarOff.visible=!0,ArrayInfoJugador.length>0&&(BotonEscribir.visible=ArrayInfoJugador[0].ChatDisponible,0==ArrayInfoJugador[0].ChatDisponible&&(BotonHablarOn.visible=!1,BotonHablarOff.visible=!1)));if(DibujaJugadores(),4==ArrayDelaPropiaSala.length){BotonRobots.visible=!1;var u;for(c=0;c<=ArrayDelaPropiaSala.length-1;c++)0==ArrayDelaPropiaSala[c].Desconectado&&(u=ArrayDelaPropiaSala[c].JugadorSala);u==socket.id&&(vTurno=1,MostrarElegirPareja(!0))}else{for(c=0;c<=ArrayDelaPropiaSala.length-1;c++)0==ArrayDelaPropiaSala[c].Desconectado&&(u=ArrayDelaPropiaSala[c].JugadorSala);u==socket.id&&UsuariosOnline<=40?BotonRobots.visible=!0:BotonRobots.visible=!1}Recuperarse(r,!1,!1)},CalculaAvatarLogro=function(a,o){var e="SinLogro",t="sin_logro.png";return 1==a&&(e="PRO",t="nivel_pro.png"),2==a&&(e="Ninja",t="nivel_ninja.png"),3==a&&(e="Mago",t="nivel_mago.png"),4==a&&(e="Diplomado",t="nivel_diplomado.png"),1==o?t:e},DibujaJugadores=function(){var a,o,e,t,r,n,i,l=0;for(a=0;a<=ArrayDelaPropiaSala.length-1;a++){if(l=a+1,log(!0,"Jugador Temporal "+l),o=DevuelveUbicacionCarta(l),log(!0,"Ha devuelto "+o),PosicionCartas("D"),i=0,"D"==o){r=(e=devuelveX("D_5",0)+110)+125,n=(t=devuelveY("L_0",0)+20)+35,i=75}if("R"==o){r=(e=0==cuatrotres?devuelveX("D_5",0)+245:devuelveX("R_5",0)-20)+20,n=(t=devuelveY("R_5",0)-147)+35,i=-55}if("U"==o){r=(e=devuelveX("D_0",0)+25)+20,n=(t=0==cuatrotres?devuelveY("R_5",0)-147:devuelveY("U_0",0)-95)+35,i=-55}if("L"==o){r=(e=devuelveX("L_0",0))+125,n=(t=devuelveY("L_0",0)+20)+35,i=75}if(0==a)if(void 0!=AvatarSprite1&&(AvatarSprite1.destroy(),textJugador1.destroy()),AvatarSprite1=game_objeto.add.image(-1*e,-1*t,"A01"),AvatarSprite1.inputEnabled=!0,AvatarSprite1.events.onInputDown.add(function(){ClickAvatar(1)}),void 0!=AvatarMedalla1&&AvatarMedalla1.destroy(),1==ArrayDelaPropiaSala[a].CampeonSemanal&&0==ArrayDelaPropiaSala[a].Desconectado&&(AvatarMedalla1=game_objeto.add.image(e+i,t+55,"Medalla")),void 0!=AvatarLogro1&&AvatarLogro1.destroy(),ArrayDelaPropiaSala[a].Nivel>0&&0==ArrayDelaPropiaSala[a].Desconectado&&(AvatarLogro1=game_objeto.add.image(e+i,t-35,CalculaAvatarLogro(ArrayDelaPropiaSala[a].Nivel,2))),void 0!=textJugador1&&textJugador1.destroy(),(textJugador1=game_objeto.add.bitmapText(0,0,"MiFuenteAmarilla","BitmapText",22)).anchor.set(.5,.5),textJugador1.x=r,textJugador1.text="",textJugador1.text=ArrayDelaPropiaSala[a].NombreOri,ArrayDelaPropiaSala[a].Nombre=ArrayDelaPropiaSala[a].NombreOri,textJugador1.x="U"==o||"R"==o?textJugador1.x-textJugador1.textWidth/2-30:textJugador1.x+textJugador1.textWidth/2-30,textJugador1.y=n,ArrayDelaPropiaSala[a].Foto,void 0==Avatar1&&(Avatar1=new Phaser.Loader(game_objeto)),0==ArrayDelaPropiaSala[a].Desconectado)Avatar1.crossOrigin="Anonymous",Avatar1.image("imagen1",ArrayDelaPropiaSala[a].Foto,!0),Avatar1.onFileComplete.add(function(){fileComplete1()}),Avatar1.start();else{textJugador1.x=r,textJugador1.text="Ordenador 1",textJugador1.x="U"==o||"R"==o?textJugador1.x-textJugador1.textWidth/2-30:textJugador1.x+textJugador1.textWidth/2-30,textJugador1.y=n,ArrayDelaPropiaSala[a].Nombre="Ordenador 1";d="Maquina";AvatarSprite1.x<0&&(AvatarSprite1.x=-1*AvatarSprite1.x,AvatarSprite1.y=-1*AvatarSprite1.y),AvatarSprite1.name=d,AvatarSprite1.loadTexture(d,0),AvatarSprite1.width=AnchoFoto,AvatarSprite1.height=AnchoFoto}if(1==a)if(void 0!=AvatarSprite2&&(AvatarSprite2.destroy(),textJugador2.destroy()),AvatarSprite2=game_objeto.add.image(-1*e,-1*t,"A01"),AvatarSprite2.inputEnabled=!0,AvatarSprite2.events.onInputDown.add(function(){ClickAvatar(2)}),void 0!=AvatarMedalla2&&AvatarMedalla2.destroy(),1==ArrayDelaPropiaSala[a].CampeonSemanal&&0==ArrayDelaPropiaSala[a].Desconectado&&(AvatarMedalla2=game_objeto.add.image(e+i,t+55,"Medalla")),void 0!=AvatarLogro2&&AvatarLogro2.destroy(),ArrayDelaPropiaSala[a].Nivel>0&&0==ArrayDelaPropiaSala[a].Desconectado&&(AvatarLogro2=game_objeto.add.image(e+i,t-35,CalculaAvatarLogro(ArrayDelaPropiaSala[a].Nivel,2))),void 0!=textJugador2&&textJugador2.destroy(),(textJugador2=game_objeto.add.bitmapText(0,0,"MiFuenteAmarilla","BitmapText",22)).anchor.set(.5,.5),textJugador2.x=r,textJugador2.text="",textJugador2.text=ArrayDelaPropiaSala[a].NombreOri,ArrayDelaPropiaSala[a].Nombre=ArrayDelaPropiaSala[a].NombreOri,textJugador2.x="U"==o||"R"==o?textJugador2.x-textJugador2.textWidth/2-30:textJugador2.x+textJugador2.textWidth/2-30,textJugador2.y=n,ArrayDelaPropiaSala[a].Foto,void 0==Avatar2&&(Avatar2=new Phaser.Loader(game_objeto)),0==ArrayDelaPropiaSala[a].Desconectado)Avatar2.crossOrigin="Anonymous",Avatar2.image("imagen2",ArrayDelaPropiaSala[a].Foto,!0),Avatar2.onFileComplete.add(function(){fileComplete2()}),Avatar2.start();else{textJugador2.x=r,textJugador2.text="Ordenador 2",textJugador2.x="U"==o||"R"==o?textJugador2.x-textJugador2.textWidth/2-30:textJugador2.x+textJugador2.textWidth/2-30,textJugador2.y=n,ArrayDelaPropiaSala[a].Nombre="Ordenador 2";d="Maquina";AvatarSprite2.x<0&&(AvatarSprite2.x=-1*AvatarSprite2.x,AvatarSprite2.y=-1*AvatarSprite2.y),AvatarSprite2.name=d,AvatarSprite2.loadTexture(d,0),AvatarSprite2.width=AnchoFoto,AvatarSprite2.height=AnchoFoto}if(2==a)if(void 0!=AvatarSprite3&&(AvatarSprite3.destroy(),textJugador3.destroy()),AvatarSprite3=game_objeto.add.image(-1*e,-1*t,"A01"),AvatarSprite3.inputEnabled=!0,AvatarSprite3.events.onInputDown.add(function(){ClickAvatar(3)}),void 0!=AvatarMedalla3&&AvatarMedalla3.destroy(),1==ArrayDelaPropiaSala[a].CampeonSemanal&&0==ArrayDelaPropiaSala[a].Desconectado&&(AvatarMedalla3=game_objeto.add.image(e+i,t+55,"Medalla")),void 0!=AvatarLogro3&&AvatarLogro3.destroy(),ArrayDelaPropiaSala[a].Nivel>0&&0==ArrayDelaPropiaSala[a].Desconectado&&(AvatarLogro3=game_objeto.add.image(e+i,t-35,CalculaAvatarLogro(ArrayDelaPropiaSala[a].Nivel,2))),void 0!=textJugador3&&textJugador3.destroy(),(textJugador3=game_objeto.add.bitmapText(0,0,"MiFuenteAmarilla","BitmapText",22)).anchor.set(.5,.5),textJugador3.x=r,textJugador3.text="",textJugador3.text=ArrayDelaPropiaSala[a].NombreOri,ArrayDelaPropiaSala[a].Nombre=ArrayDelaPropiaSala[a].NombreOri,textJugador3.x="U"==o||"R"==o?textJugador3.x-textJugador3.textWidth/2-30:textJugador3.x+textJugador3.textWidth/2-30,textJugador3.y=n,ArrayDelaPropiaSala[a].Foto,ArrayDelaPropiaSala[a].Foto,void 0==Avatar3&&(Avatar3=new Phaser.Loader(game_objeto)),0==ArrayDelaPropiaSala[a].Desconectado)Avatar3.crossOrigin="Anonymous",Avatar3.image("imagen3",ArrayDelaPropiaSala[a].Foto,!0),Avatar3.onFileComplete.add(function(){fileComplete3()}),Avatar3.start();else{textJugador3.x=r,textJugador3.text="Ordenador 3",textJugador3.x="U"==o||"R"==o?textJugador3.x-textJugador3.textWidth/2-30:textJugador3.x+textJugador3.textWidth/2-30,textJugador3.y=n,ArrayDelaPropiaSala[a].Nombre="Ordenador 3";d="Maquina";AvatarSprite3.x<0&&(AvatarSprite3.x=-1*AvatarSprite3.x,AvatarSprite3.y=-1*AvatarSprite3.y),AvatarSprite3.name=d,AvatarSprite3.loadTexture(d,0),AvatarSprite3.width=AnchoFoto,AvatarSprite3.height=AnchoFoto}if(3==a)if(void 0!=AvatarSprite4&&(AvatarSprite4.destroy(),textJugador4.destroy()),AvatarSprite4=game_objeto.add.image(-1*e,-1*t,"A01"),AvatarSprite4.inputEnabled=!0,AvatarSprite4.events.onInputDown.add(function(){ClickAvatar(4)}),void 0!=AvatarMedalla4&&AvatarMedalla4.destroy(),1==ArrayDelaPropiaSala[a].CampeonSemanal&&0==ArrayDelaPropiaSala[a].Desconectado&&(AvatarMedalla4=game_objeto.add.image(e+i,t+55,"Medalla")),void 0!=AvatarLogro4&&AvatarLogro4.destroy(),ArrayDelaPropiaSala[a].Nivel>0&&0==ArrayDelaPropiaSala[a].Desconectado&&(AvatarLogro4=game_objeto.add.image(e+i,t-35,CalculaAvatarLogro(ArrayDelaPropiaSala[a].Nivel,2))),void 0!=textJugador4&&textJugador4.destroy(),(textJugador4=game_objeto.add.bitmapText(0,0,"MiFuenteAmarilla","BitmapText",22)).anchor.set(.5,.5),textJugador4.x=r,textJugador4.text="",textJugador4.text=ArrayDelaPropiaSala[a].NombreOri,ArrayDelaPropiaSala[a].Nombre=ArrayDelaPropiaSala[a].NombreOri,textJugador4.x="U"==o||"R"==o?textJugador4.x-textJugador4.textWidth/2-30:textJugador4.x+textJugador4.textWidth/2-30,textJugador4.y=n,ArrayDelaPropiaSala[a].Foto,void 0==Avatar4&&(Avatar4=new Phaser.Loader(game_objeto)),0==ArrayDelaPropiaSala[a].Desconectado)Avatar4.crossOrigin="Anonymous",Avatar4.image("imagen4",ArrayDelaPropiaSala[a].Foto,!0),Avatar4.onFileComplete.add(function(){fileComplete4()}),Avatar4.start();else{textJugador4.x=r,textJugador4.text="Ordenador 4",textJugador4.x="U"==o||"R"==o?textJugador4.x-textJugador4.textWidth/2-30:textJugador4.x+textJugador4.textWidth/2-30,textJugador4.y=n,ArrayDelaPropiaSala[a].Nombre="Ordenador 4";var d="Maquina";AvatarSprite4.x<0&&(AvatarSprite4.x=-1*AvatarSprite4.x,AvatarSprite4.y=-1*AvatarSprite4.y),AvatarSprite4.name=d,AvatarSprite4.loadTexture(d,0),AvatarSprite4.width=AnchoFoto,AvatarSprite4.height=AnchoFoto}}},consol=function(){log(!1,"a")},onSocketBarajaDesdeServer=function(a,o,e,t){idPartida=e,log(!0,"El que reparte es "+o+" y yo soy "+SoyElJugador),log(!0,"Recibiendo baraja.."),log(!0,"Creo el Mazo de apoyo"),log(!0,"la crea a malas "),timerBarajaRecibida.loop(1e3,function(){0==SemaforoTextoPuntuacion.length&&(timerBarajaRecibida.stop(),CrearBarajaRecibida(a,o,t))}),timerBarajaRecibida.start()},onSocketCantarDesdeServer=function(a,o,e,t){TextoBocadillo(a,e,!0,o,!0,t)},onSocketEnvioPosicionDesdeServer=function(a,o,e,t){log(!1,"Recibiendo posicion de jugador"+a+": "+o+" "+e),MoverCartaAjena(a,o,e,t)},onSocketEnvioCentroDesdeServer=function(a,o,e,t,r,n){timer.stop(),MoverCentroAjeno(a,o,t,r,n)},onSocketCambiar7DesdeServer=function(a,o,e){Cambiar7Ajeno(a,o,!1,!1,e,!1)},onSocketEnviarTextoDesdeServer=function(a,o){TextoBocadillo(o,a,!1,!1,!1,!1)},OcultaPantallaLogin=function(){document.getElementById("Login").style.display="none"},CierraPantallaLogin=function(){document.getElementById("Login").style.display="none",BotonMonoJugador.visible=!0,BotonMultiJugador.visible=!0,BotonClasificacion.visible=!0,BotonContacta.visible=!0,TextCuentaMundo.visible=!0,BotonAleatorio.visible=!1,BotonAmigos.visible=!1,BotonSalir.visible=!1},ErrorConexion=function(){1==ModoMultijugador&&(timerturno.stop(),timer.stop(),QuienTomaElControl=0)},MensajeError=function(a){var o=game_objeto.add.bitmapText(game_objeto.world.centerX,game_objeto.world.centerY,"MiFuenteAmarilla","BitmapText",50);o.anchor.set(.5,.5),o.text=a,game_objeto.add.tween(o).to({alpha:0},1500,EfectoTween1,!0,1e3).onComplete.add(function(){o.destroy()})},MensajeError2=function(a){var o=game_objeto.add.bitmapText(game_objeto.world.centerX,game_objeto.world.centerY,"MiFuenteAmarilla","BitmapText",16);o.anchor.set(.5,.5),o.text=a,game_objeto.add.tween(o).to({alpha:0},1500,EfectoTween1,!0,1e3).onComplete.add(function(){o.destroy()})},Salir=function(a){MostrarSalir(a)},SalirConfirmado=function(){CancelarAmigos(),EntradaModoJuego=!1,LimpiarVariables(),LimpiarVariablesConexionNueva(),FuerzaSalir=!0},EliminarColaMensajes=function(a,o){var e,t=!1;for(e=0;e<=ArrayAccionesDesconexiones.length-1;e++)if(ArrayAccionesDesconexiones[e].IdMsg==a){t=!0;break}1==t&&ArrayAccionesDesconexiones.splice(e,1)},MuestraTurno=function(){var a=DevuelveUbicacionCarta(vTurno);"D"==a&&(AnimacionTurnoON(ObjTurnoD),AnimacionTurnoOFF(ObjTurnoL),AnimacionTurnoOFF(ObjTurnoR),AnimacionTurnoOFF(ObjTurnoU)),"U"==a&&(AnimacionTurnoON(ObjTurnoU),AnimacionTurnoOFF(ObjTurnoL),AnimacionTurnoOFF(ObjTurnoR),AnimacionTurnoOFF(ObjTurnoD)),"L"==a&&(AnimacionTurnoON(ObjTurnoL),AnimacionTurnoOFF(ObjTurnoU),AnimacionTurnoOFF(ObjTurnoR),AnimacionTurnoOFF(ObjTurnoD)),"R"==a&&(AnimacionTurnoON(ObjTurnoR),AnimacionTurnoOFF(ObjTurnoU),AnimacionTurnoOFF(ObjTurnoL),AnimacionTurnoOFF(ObjTurnoD))},AnimacionTurnoON=function(a){a.tint=Phaser.Color.getColor(255,255,255)},AnimacionTurnoOFF=function(a){a.tint=Phaser.Color.getColor(110,110,110)},CalculaTiempoContador=function(){var a;return a=(1==vRonda&&MazoCentral.length,Tiempoturno),1!=vRonda&&(a=15),1==vNoEsta&&(a=7),10==vRonda&&(a=1),1==Rapido&&(a=.2),a},SuperOrganizador=function(){var a,o,e,t=1e3,r=!1;if(0==DetenerIA&&0==vReconectando&&0==MazoCentralBuffer){if(MuestraTurno(),1==vReconectando)return!1;if(0==ModoMultijugador)vTurno!=SoyElJugador&&(r=!0);else if(vTurno==SoyElJugador){if(0==timerturno.duration.toFixed(0)){a=CalculaTiempoContador(),1==Rapido&&(t=200),log(!1,"VECES QUE PONE EL RELOJ");timerturno.loop(t,function(){vTurno!=SoyElJugador&&timerturno.stop(),void 0!=textoContador&&(textoContador.text=""),a>Tiempoturno?textoContador.text="":1==PartidaComenzada&&(textoContador.text="Es mi turno "+a),a<=0?(textoContador.text="",timer.stop(),timerturno.stop(),IA(vTurno,!0),vNoEsta=!0):a-=1}),timerturno.start()}}else for(e=0;e<=ArrayJugadoresDesconectados.length-1;e++)if(vTurno==ArrayJugadoresDesconectados[e].Jugador&&SoyElJugador==QuienTomaElControl&&1==PartidaComenzada){r=!0;break}1==r&&(o=TiempoPensar(vTurno),timer.stop(),timer.add(o,function(){timer.stop(),IA(vTurno,!1)}),timer.start())}},ReproducirSonido=function(a){var o,e=!1,t="",r=!1;if(1==vSonidoOn&&0==vReconectando){if(e=game_objeto.sound.usingAudioTag,window.plugins)try{t=device.platform}catch(a){t="Android"}if(window.plugins&&window.plugins.NativeAudio&&1==e||"IOS"==t.toUpperCase())switch(a){case"_Reparto":window.plugins.NativeAudio.play("SndReparto");break;case"_Mesa":window.plugins.NativeAudio.play("SndMesa");break;case"_Oros":window.plugins.NativeAudio.play("Snd20Oros");break;case"_Copas":window.plugins.NativeAudio.play("Snd20Copas");break;case"_Espadas":window.plugins.NativeAudio.play("Snd20Espadas");break;case"_Bastos":window.plugins.NativeAudio.play("Snd20Bastos");break;case"_Las40":1==(o=Math.floor(2*Math.random())+1)?window.plugins.NativeAudio.play("SndLas40"):window.plugins.NativeAudio.play("SndLas40_2");break;case"_Idas":1==(o=Math.floor(2*Math.random())+1)?window.plugins.NativeAudio.play("SndIdas"):window.plugins.NativeAudio.play("SndIdas2");break;case"_Vueltas":1==(o=Math.floor(2*Math.random())+1)?window.plugins.NativeAudio.play("SndVueltas"):window.plugins.NativeAudio.play("SndVueltas2");break;case"_Arrastro":1==(o=Math.floor(2*Math.random())+1)&&window.plugins.NativeAudio.play("SndArrastro"),2==o&&window.plugins.NativeAudio.play("SndArrastro_2");break;case"_Bocarrana":1==(o=Math.floor(4*Math.random())+1)&&window.plugins.NativeAudio.play("SndBocarrana"),2==o&&window.plugins.NativeAudio.play("SndMataBocarrana");break;case"_Campeones":window.plugins.NativeAudio.play("SndCampeones");break;case"_Contar":window.plugins.NativeAudio.play("SndContar");break;case"_CotoTerminado":window.plugins.NativeAudio.play("SndCotoTerminado");break;case"_Espadilla":(o=Math.floor(10*Math.random())+1)<=8&&0==r&&(window.plugins.NativeAudio.play("SndEspadilla"),r=!0),o<=9&&0==r&&(window.plugins.NativeAudio.play("SndPuntos"),r=!0),o<=10&&0==r&&(window.plugins.NativeAudio.play("SndPajaro"),r=!0);break;case"_Ore":(o=Math.floor(10*Math.random())+1)<=8&&0==r&&(window.plugins.NativeAudio.play("SndOre"),r=!0),o<=9&&0==r&&(window.plugins.NativeAudio.play("SndPuntos"),r=!0),o<=10&&0==r&&(window.plugins.NativeAudio.play("SndPajaro"),r=!0);break;case"_OtraVezSera":0==MarcadorPartidasNuestro&&1==MarcadorPartidasRival&&(1==(o=Math.floor(2*Math.random())+1)?window.plugins.NativeAudio.play("SndPrimeraChicos"):window.plugins.NativeAudio.play("SndAPorEllos"),r=!0),0==MarcadorPartidasNuestro&&2==MarcadorPartidasRival&&(window.plugins.NativeAudio.play("SndToro"),r=!0),1==(o=Math.floor(3*Math.random())+1)&&0==r&&(window.plugins.NativeAudio.play("SndOtraVezSera"),r=!0),2==o&&0==r&&(window.plugins.NativeAudio.play("SndAPorEllos"),r=!0),3==o&&0==r&&(window.plugins.NativeAudio.play("SndChiflar"),r=!0);break;case"_Tabazo":1==(o=Math.floor(2*Math.random())+1)&&window.plugins.NativeAudio.play("SndTabazo"),2==o&&window.plugins.NativeAudio.play("SndTabazo_2");break;case"_MatanzaCaballo":1==(o=Math.floor(3*Math.random())+1)&&window.plugins.NativeAudio.play("SndMatanzaCaballo");break;case"_Ultimas":window.plugins.NativeAudio.play("SndUltimas");break;case"_Grano":1==(o=Math.floor(2*Math.random())+1)&&window.plugins.NativeAudio.play("SndGrano");break;case"_Puntos":(o=Math.floor(10*Math.random())+1)<=7&&0==r&&(window.plugins.NativeAudio.play("SndPuntos"),r=!0),o<=10&&0==r&&(window.plugins.NativeAudio.play("SndPajaro"),r=!0);break;case"_Chatarrero":1==(o=Math.floor(3*Math.random())+1)&&window.plugins.NativeAudio.play("SndChatarrero");break;case"_Suerte":1==(o=Math.floor(15*Math.random())+1)&&window.plugins.NativeAudio.play("SndGorrion"),2==o&&window.plugins.NativeAudio.play("SndGrijan"),3==o&&window.plugins.NativeAudio.play("SndMonja");break;case"_Escupe":1==(o=Math.floor(2*Math.random())+1)&&window.plugins.NativeAudio.play("SndEscupe");break;case"_GuinoteOtro":1==(o=Math.floor(1*Math.random())+1)&&window.plugins.NativeAudio.play("SndGuinoteOtro");break;case"_Faldas":1==(o=Math.floor(2*Math.random())+1)&&window.plugins.NativeAudio.play("SndFaldas")}else switch(a){case"_Reparto":SndReparto.play();break;case"_Mesa":SndMesa.play();break;case"_Oros":Snd20Oros.play();break;case"_Copas":Snd20Copas.play();break;case"_Espadas":Snd20Espadas.play();break;case"_Bastos":Snd20Bastos.play();break;case"_Las40":1==(o=Math.floor(2*Math.random())+1)?SndLas40.play():SndLas40_2.play();break;case"_Idas":1==(o=Math.floor(2*Math.random())+1)?SndIdas.play():SndIdas2.play();break;case"_Vueltas":1==(o=Math.floor(2*Math.random())+1)?SndVueltas.play():SndVueltas2.play();break;case"_Arrastro":1==(o=Math.floor(2*Math.random())+1)&&SndArrastro.play(),2==o&&SndArrastro_2.play();break;case"_Bocarrana":1==(o=Math.floor(4*Math.random())+1)&&SndBocarrana.play(),2==o&&SndMataBocarrana.play();break;case"_Campeones":SndCampeones.play();break;case"_Contar":SndContar.play();break;case"_CotoTerminado":SndCotoTerminado.play();break;case"_Espadilla":(o=Math.floor(10*Math.random())+1)<=8&&0==r&&(SndEspadilla.play(),r=!0),o<=9&&0==r&&(SndPuntos.play(),r=!0),o<=10&&0==r&&(SndPajaro.play(),r=!0);break;case"_Ore":(o=Math.floor(10*Math.random())+1)<=8&&0==r&&(SndOre.play(),r=!0),o<=9&&0==r&&(SndPuntos.play(),r=!0),o<=10&&0==r&&(SndPajaro.play(),r=!0);break;case"_OtraVezSera":0==MarcadorPartidasNuestro&&1==MarcadorPartidasRival&&(1==(o=Math.floor(2*Math.random())+1)?SndPrimeraChicos.play():SndAPorEllos.play(),r=!0),0==MarcadorPartidasNuestro&&2==MarcadorPartidasRival&&(SndToro.play(),r=!0),1==(o=Math.floor(3*Math.random())+1)&&0==r&&(SndOtraVezSera.play(),r=!0),2==o&&0==r&&(SndAPorEllos.play(),r=!0),3==o&&0==r&&(SndChiflar.play(),r=!0);break;case"_Tabazo":1==(o=Math.floor(2*Math.random())+1)&&SndTabazo.play(),2==o&&SndTabazo_2.play();break;case"_MatanzaCaballo":1==(o=Math.floor(3*Math.random())+1)&&SndMatanzaCaballo.play();break;case"_Ultimas":SndUltimas.play();break;case"_Grano":1==(o=Math.floor(2*Math.random())+1)&&SndGrano.play();break;case"_Puntos":(o=Math.floor(10*Math.random())+1)<=7&&0==r&&(SndPuntos.play(),r=!0),o<=10&&0==r&&(SndPajaro.play(),r=!0);break;case"_Chatarrero":1==(o=Math.floor(3*Math.random())+1)&&SndChatarrero.play();break;case"_Suerte":1==(o=Math.floor(15*Math.random())+1)&&SndGorrion.play(),2==o&&SndGrijan.play(),3==o&&SndMonja.play();break;case"_Escupe":1==(o=Math.floor(2*Math.random())+1)&&SndEscupe.play();break;case"_GuinoteOtro":1==(o=Math.floor(1*Math.random())+1)&&SndGuinoteOtro.play();break;case"_Faldas":1==(o=Math.floor(2*Math.random())+1)&&SndFaldas.play()}}},ArreglaReversos=function(){var a;try{for(a=0;a<=MazoL.length-1;a++)MostrarReverso(MazoL[a].cartilla);for(a=0;a<=MazoR.length-1;a++)MostrarReverso(MazoR[a].cartilla);for(a=0;a<=MazoU.length-1;a++)MostrarReverso(MazoU[a].cartilla)}catch(a){}},MueveAlTablero=function(a,o,e,t,r){if(PuntosFin(),1){if(1==ModoMultijugador&&(timerturno.stop(),timer.stop(),textoContador.text=""),GrupoCentral.add(a),PosicionCartas(o),"D"==o)var n=posX_D,i=posY_D,l=a.angle+posAngle_D;if("U"==o)var n=posX_U,i=posY_U,l=a.angle+posAngle_U;if("L"==o)var n=posX_L,i=posY_L,l=a.angle+posAngle_L;if("R"==o)var n=posX_R,i=posY_R,l=a.angle+posAngle_R;DesHabilitarClick(a),ReproducirSonido("_Mesa");try{(tw1=game_objeto.add.tween(a)).to({x:n,y:i,angle:l},vVelocidadCartasReordernar,EfectoTween1,!1),tw1.onComplete.add(function(){log(!0,"MUEVE AL TABLERO: VA A LLAMAR A QUIEN GANA MANO "+t),QuienGanaMano(e,t,r)})}catch(a){}0==cuatrotres?game_objeto.add.tween(a.scale).to({x:1,y:1},vVelocidadCartas,EfectoTween2,!0):game_objeto.add.tween(a.scale).to({x:1.2,y:1.2},vVelocidadCartas,EfectoTween2,!0),tw1.start(),a.bringToTop()}else;},DeboAceptar=function(a,o){return a==vRonda&&o==vTurno},MueveAlTablero_buffer1=function(a){var o,e,t,r,n,i=-1;if(PuntosFin(),1){if(MazoCentralBuffer.length>0||ArrayTareas.length>0){if(MazoCentralBuffer.length>0)for(n=0;n<=MazoCentralBuffer.length-1;n++)MazoCentralBuffer[n].jugador==vTurno&&MazoCentralBuffer[n].Ronda==vRonda&&(i=n);if(-1==i)ArrayTareas.length>0&&Recuperarse(a,!1,!1);else{if(o=MazoCentralBuffer[i].cartilla,e=DevuelveUbicacionCarta(MazoCentralBuffer[i].jugador),MazoCentral.push(new Carta(MazoCentralBuffer[i].palo,MazoCentralBuffer[i].idCarta,MazoCentralBuffer[i].valor,MazoCentralBuffer[i].cartilla,null,MazoCentralBuffer[i].jugador,null,MazoCentralBuffer[i].FechaHora)),MazoCentral.length,OcultarBotones(),GrupoCentral.add(o),"D"==e){var l=posX_D,d=posY_D,s=o.angle+posAngle_D;t=MazoD}if("U"==e){var l=posX_U,d=posY_U,s=o.angle+posAngle_U;t=MazoU}if("L"==e){var l=posX_L,d=posY_L,s=o.angle+posAngle_L;t=MazoL}if("R"==e){var l=posX_R,d=posY_R,s=o.angle+posAngle_R;t=MazoR}var c=MazoCentralBuffer[i].jugador,u=MazoCentralBuffer[i].Ronda;for(r=0;r<=t.length-1&&o.name!=t[r].cartilla.name;r++);MostrarAnverso(MazoCentralBuffer[i].cartilla),t.splice(r,1),MazoCentralBuffer.splice(i,1),ReubicarCartas(t,e),QuienGanaMano(u,c,a),DesHabilitarClick(o),ReproducirSonido("_Mesa"),(tw1=game_objeto.add.tween(o)).to({x:l,y:d,angle:s},vVelocidadCartasReordernar,EfectoTween1),MazoCentralBuffer.length,game_objeto.add.tween(o.scale).to({x:1,y:1},vVelocidadCartas,EfectoTween2,!0),tw1.start(),o.bringToTop()}}}else;},QuienGanaMano=function(a,o,e){var t,r,n,i,l,d,s,c=0;if(void 0==a?(log(!0,"vRonda Recibida por m� mismo "+vRonda+" Jugador: "+SoyElJugador),l=vRonda,s=SoyElJugador):(log(!0,"vRonda Recibida por par�metro "+a+" Jugador: "+o),l=a,s=o),PuntosFin(),1){if(MazoCentral.length,MazoCentral.length>=4){for(log(!0,"DEBE LIMPIAR MESA"),timer.stop(),BloquearTirada=!0,l=vRonda,3==vRonda&&(MensajeError("¡¡ de últimas !!"),ReproducirSonido("_Ultimas")),d=0;d<=3;d++)0==d&&(t=MazoCentral[d].valorReal,n=MazoCentral[d].palo,r=MazoCentral[d].jugador,i=MazoCentral[d].cartilla),(MazoCentral[d].valorReal>t&&MazoCentral[d].palo==n||MazoCentral[d].palo==Triunfo&&n!=Triunfo)&&(t=MazoCentral[d].valorReal,n=MazoCentral[d].palo,r=MazoCentral[d].jugador,i=MazoCentral[d].cartilla),c+=MazoCentral[d].valorPuntuacion;s=vTurno=r,MuestraTurno(),log(!0,"vTurno VA GANANDO "+vTurno),1==SoyElJugador&&(1==r&&(BazaNuestraGlobal=!0),2==r&&(BazaNuestraGlobal=!1),3==r&&(BazaNuestraGlobal=!0),4==r&&(BazaNuestraGlobal=!1)),2==SoyElJugador&&(2==r&&(BazaNuestraGlobal=!0),3==r&&(BazaNuestraGlobal=!1),4==r&&(BazaNuestraGlobal=!0),1==r&&(BazaNuestraGlobal=!1)),3==SoyElJugador&&(3==r&&(BazaNuestraGlobal=!0),4==r&&(BazaNuestraGlobal=!1),1==r&&(BazaNuestraGlobal=!0),2==r&&(BazaNuestraGlobal=!1)),4==SoyElJugador&&(4==r&&(BazaNuestraGlobal=!0),1==r&&(BazaNuestraGlobal=!1),2==r&&(BazaNuestraGlobal=!0),3==r&&(BazaNuestraGlobal=!1));var u;if(u=1==BazaNuestraGlobal?ActualizaMarcador("N",c):ActualizaMarcador("R",c),log(!0,"Marcador QuienGanaMano: "+MarcadorNuestro+" "+MarcadorRival+" "+u),1==u)if(DesHabilitarClick(i),c>=21&&11==MazoCentral[3].valorPuntuacion&&r==MazoCentral[3].jugador)if(ReproducirSonido("_Tabazo"),0==vReconectando){var g=game_objeto.world.width+100,p=game_objeto.world.height+100;game_objeto.world.setBounds(-50,-50,g,p),game_objeto.world.camera.position.set(0,0);var M={x:game_objeto.camera.x-30},h=Phaser.Easing.Bounce.InOut,v=game_objeto.add.tween(game_objeto.camera).to(M,50,h,!1,0,5,!0);v.onComplete.addOnce(function(){quakeEnd(),tw5=game_objeto.add.tween(i.scale),tw5.to({x:vEscalaGanadora,y:vEscalaGanadora},vVelocidadCartasReordernar,EfectoTween1,!1,TiempoCartaGanadora),log(!1,"�LAS HARA PEQUE�AS?"),tw5.onComplete.add(function(){EfectosHacerPequenas(l,s,e),i.bringToTop()}),tw5.start()}),v.start(),navigator.vibrate&&window.navigator.vibrate(300)}else EfectosHacerPequenas(l,s,e),i.bringToTop();else{z=!1;r==MazoCentral[3].jugador&&2==MazoCentral[3].valorPuntuacion&&vRonda<=4&&3!=vRonda&&c<=10&&(ReproducirSonido("_MatanzaCaballo"),z=!0),r==MazoCentral[3].jugador&&11==MazoCentral[3].valorPuntuacion&&vRonda<=4&&"oros"==MazoCentral[3].palo&&0==z&&4!=vRonda&&(ReproducirSonido("_Ore"),z=!0),r==MazoCentral[3].jugador&&11==MazoCentral[3].valorPuntuacion&&vRonda<=4&&"espadas"==MazoCentral[3].palo&&0==z&&4!=vRonda&&(ReproducirSonido("_Espadilla"),z=!0),r==MazoCentral[3].jugador&&MazoCentral[3].valorPuntuacion>=10&&c<=20&&c>11&&vRonda<=4&&0==z&&3!=vRonda&&0==SonVueltas&&(ReproducirSonido("_Puntos"),z=!0),r==MazoCentral[3].jugador&&MazoCentral[3].valorPuntuacion<10&&c<=14&&vRonda<=4&&0==z&&4!=vRonda&&0==SonVueltas&&(ReproducirSonido("_Chatarrero"),z=!0),(r==MazoCentral[0].jugador||r==MazoCentral[2].jugador)&&MazoCentral[3].valorPuntuacion>=10&&vRonda>=5&&0==z&&3!=vRonda&&(ReproducirSonido("_Escupe"),z=!0),(SoyElJugador==MazoCentral[1].jugador&&1==BazaNuestraGlobal&&MazoCentral[3].valorPuntuacion>=2&&MazoCentral[3].valorPuntuacion<=4&&vRonda<=3||SoyElJugador==MazoCentral[3].jugador&&1==BazaNuestraGlobal&&MazoCentral[3].valorPuntuacion>=2&&MazoCentral[3].valorPuntuacion<=4&&vRonda<=3)&&0==z&&(ReproducirSonido("_Grano"),z=!0),3==vRonda&&0==z&&(ReproducirSonido("_Suerte"),z=!0),tw5=game_objeto.add.tween(i.scale),tw5.to({x:vEscalaGanadora,y:vEscalaGanadora},vVelocidadCartasReordernar,EfectoTween1,!1,TiempoCartaGanadora),log(!1,"�LAS HARA PEQUE�AS?"),tw5.onComplete.add(function(){EfectosHacerPequenas(l,s,e),i.bringToTop()}),tw5.start()}}else{if(MazoCentral.length>0){var z=!1;log(!0,"REAL "+MazoCentral[MazoCentral.length-1].valorReal+" "+MazoCentral[MazoCentral.length-1].palo),5==MazoCentral[MazoCentral.length-1].valorReal&&"bastos"==MazoCentral[MazoCentral.length-1].palo&&vRonda<=4&&(ReproducirSonido("_Bocarrana"),z=!0),2==MazoCentral.length&&MazoCentral[0].valorPuntuacion>=10&&MazoCentral[0].palo!=Triunfo&&MazoCentral[1].valorPuntuacion>=10&&MazoCentral[1].palo!=Triunfo&&vRonda<=4&&0==z&&(ReproducirSonido("_GuinoteOtro"),z=!0),2==MazoCentral[MazoCentral.length-1].valorPuntuacion&&MazoCentral[MazoCentral.length-1].palo==Triunfo&&vRonda>=5&&0==z&&(ReproducirSonido("_Faldas"),z=!0),1==MazoCentral.length&&(MazoCentral[0].palo!=Triunfo&&11!=MazoCentral[0].valorPuntuacion||5!=vRonda||ReproducirSonido("_Arrastro"))}CalculaTurno(l),log(!0,"CAMBIO vTurno A"+vTurno),0==ModoMultijugador?SuperOrganizador():MueveAlTablero_buffer1(e)}ColorManoPosibles(),MostrarOcultarBotonCante()}else;},EstaConectado=function(a){var o,e=!0;for(o=0;o<=ArrayJugadoresDesconectados.length-1;o++)if(a==ArrayJugadoresDesconectados[o].Jugador){e=!1;break}return e},TiempoPensar=function(a){var o;return o=(EstaConectado(a),TiempoIA),(MazoCentral.length>=4||MazoCentral.length>=4)&&vRonda<=3&&(o+=2e3),1==Rapido&&(o=200),o},CalculaTurno=function(a){timerturno.stop(),timer.stop(),4==vTurno?vTurno=1:vTurno++,SuperOrganizador(),MuestraTurno()},EfectosHacerPequenas=function(a,o,e){var t;for(t=0;t<=MazoD.length-1;t++)MazoD[t].cartilla.tint=Phaser.Color.getColor(255,255,255);MazoCentral.length>=1&&(DesHabilitarClick(MazoCentral[0].cartilla),MazoCentral[0].cartilla.alpha=1,(twPeq1=game_objeto.add.tween(MazoCentral[0].cartilla.scale)).to({x:vEscalaPequenas,y:vEscalaPequenas},vVelocidadCartasReordernar,EfectoTween1,!1,TiempoCartaGanadora),twPeq1.onComplete.add(function(){EfectosRecogerCartas1(e)}),twPeq1.start()),MazoCentral.length>=2&&(DesHabilitarClick(MazoCentral[1].cartilla),MazoCentral[1].cartilla.alpha=1,(twPeq2=game_objeto.add.tween(MazoCentral[1].cartilla.scale)).to({x:vEscalaPequenas,y:vEscalaPequenas},vVelocidadCartasReordernar,EfectoTween1,!1,TiempoCartaGanadora),twPeq2.onComplete.add(function(){EfectosRecogerCartas2(e)}),twPeq2.start()),MazoCentral.length>=3&&(DesHabilitarClick(MazoCentral[2].cartilla),MazoCentral[2].cartilla.alpha=1,(twPeq3=game_objeto.add.tween(MazoCentral[2].cartilla.scale)).to({x:vEscalaPequenas,y:vEscalaPequenas},vVelocidadCartasReordernar,EfectoTween1,!1,TiempoCartaGanadora),twPeq3.onComplete.add(function(){EfectosRecogerCartas3(e)}),twPeq3.start()),MazoCentral.length>=4&&(DesHabilitarClick(MazoCentral[3].cartilla),MazoCentral[3].cartilla.alpha=1,(twPeq4=game_objeto.add.tween(MazoCentral[3].cartilla.scale)).to({x:vEscalaPequenas,y:vEscalaPequenas},vVelocidadCartasReordernar,EfectoTween1,!1,TiempoCartaGanadora),twPeq4.onComplete.add(function(){EfectosRecogerCartas4(a,o,e)}),twPeq4.start())},EliminarDeLaMesa=function(a,o){if(PuntosFin(),1){if(log(!1,"Se mete en EliminarDeLaMesa"),MazoCentral.splice(0,4),vRonda++,SuperOrganizador(),BloquearTirada=!1,MueveAlTablero_buffer1(o),0==ModoMultijugador){TiempoPensar(vTurno);SuperOrganizador()}1==ModoMultijugador&&ColorManoPosibles(),0==SonVueltas?0==MazoD.length&&RondaFinalizada():(MarcadorNuestro>=PuntosGanar||MarcadorRival>=PuntosGanar)&&CrearTextoPuntuacion(),MostrarOcultarBotonCante()}else;},ValidaMovimientoJugador=function(a,o){for(var e=!0,t=0;t<=SemaforoRondas.length-1;t++)if(SemaforoRondas[t].Ronda==a&&SemaforoRondas[t].Jugador==o){e=!1;break}return 1==e?(log(!0,"Validado correctamente: vRonda "+a+" Jugador "+o),SemaforoRondas.push(new ObjetoJugadoresRonda(a,o))):log(!1,"Validado Incorrectamente: vRonda "+a+" Jugador "+o),e},ValidaRepartosJugador=function(){var a,o=!0;for(a=0;a<=SemaforoRepartos.length-1;a++)if(SemaforoRepartos[a]==idPartida){o=!1;break}return 1==o&&SemaforoRepartos.push(idPartida),o},ValidaTextoPuntuacionJugador=function(){var a,o=!0;for(a=0;a<=SemaforoTextoPuntuacion.length-1;a++)if(SemaforoTextoPuntuacion[a]==idPartida){o=!1;break}return 1==o&&SemaforoTextoPuntuacion.push(idPartida),o},ValidaDibujoAvatars=function(a){var o,e=!0;for(o=0;o<=SemaforoAvatars.length-1;o++)if(SemaforoAvatars[o]==a){e=!1;break}return 1==e?(log(!1,"Avatar Validado correctamente:  "+a),SemaforoAvatars.push(a)):log(!1,"Ya estaba validado el Avatar "+a),e},MazoOBuffer=function(a,o){return vTurno==a&&vRonda==o},OrganizarManoMueveCentro=function(a,o,e,t,r,n,i){var l,d=!1;for(l=0;l<=a.length-1;l++)if(a[l].cartilla.name==e){d=!0,MazoCentral.length<=4&&1==MazoOBuffer(t,r)?(MazoCentral.push(new Carta(a[l].palo,a[l].idCarta,a[l].valor,a[l].cartilla,null,t,null,n)),MazoCentral.length,OcultarBotones(),MazoCentral.length,log(!0,"CREO QUE SE METE AQUI PARA MOVEL AL TABLERO "+t),MostrarAnverso(a[l].cartilla),MueveAlTablero(a[l].cartilla,o,r,t,i),a.splice(l,1)):(log(!0,"Rellenandoo Buffer pq el Mazo Central mide..."+MazoCentral.length+" Jugador "+t+" vRonda "+r),MazoCentralBuffer.push(new Carta(a[l].palo,a[l].idCarta,a[l].valor,a[l].cartilla,null,t,r,n)),MazoCentralBuffer.length,log(!1,"Rellenandoo Buffer..."+a[l].palo+" "+a[l].valor));break}if(0==d){for(log(!0,"Carta NO encontrada 1"),l=0;l<=Mazo.length-1;l++)Mazo[l].cartilla.name==e&&(MazoCentralBuffer.push(new Carta(Mazo[l].palo,Mazo[l].idCarta,Mazo[l].valor,Mazo[l].cartilla,null,t,r,n)),log(!0,"Rellenando Buffer por matanza... Jugador "+t+" vRonda "+r),d=!0);0==d&&(log(!0,"Carta NO encontrada 2"),CartaTriunfo.length>0&&(CartaTriunfo[0].cartilla.name==e?(log(!0,"Carta ENCONTRADA!!"),MazoCentralBuffer.push(new Carta(CartaTriunfo[0].palo,CartaTriunfo[0].idCarta,CartaTriunfo[0].valor,CartaTriunfo[0].cartilla,null,t,r,n)),d=!0):log(!1,"Carta NO ENCONTRADA!!"))),MazoCentralBuffer.length}if(0==d)for(l=0;l<=MazoCentral.length-1;l++)MazoCentral[l].idCarta==e&&(d=!0);if(0==d&&BucleManoCentro<=7){var s=game_objeto.time.create(!0);s.add(1e3,function(){OrganizarManoMueveCentro(a,o,e,t,r,n,i),BucleManoCentro++}),s.start()}else MueveAlTablero_buffer1(i);ReubicarCartas(a,o)},MoverCentroAjeno=function(a,o,e,t,r){1==SoyElJugador&&(1==a&&OrganizarManoMueveCentro(MazoD,"D",o,a,e,t,r),2==a&&OrganizarManoMueveCentro(MazoR,"R",o,a,e,t,r),3==a&&OrganizarManoMueveCentro(MazoU,"U",o,a,e,t,r),4==a&&OrganizarManoMueveCentro(MazoL,"L",o,a,e,t,r)),2==SoyElJugador&&(2==a&&OrganizarManoMueveCentro(MazoD,"D",o,a,e,t,r),3==a&&OrganizarManoMueveCentro(MazoR,"R",o,a,e,t,r),4==a&&OrganizarManoMueveCentro(MazoU,"U",o,a,e,t,r),1==a&&OrganizarManoMueveCentro(MazoL,"L",o,a,e,t,r)),3==SoyElJugador&&(3==a&&OrganizarManoMueveCentro(MazoD,"D",o,a,e,t,r),4==a&&OrganizarManoMueveCentro(MazoR,"R",o,a,e,t,r),1==a&&OrganizarManoMueveCentro(MazoU,"U",o,a,e,t,r),2==a&&OrganizarManoMueveCentro(MazoL,"L",o,a,e,t,r)),4==SoyElJugador&&(4==a&&OrganizarManoMueveCentro(MazoD,"D",o,a,e,t,r),1==a&&OrganizarManoMueveCentro(MazoR,"R",o,a,e,t,r),2==a&&OrganizarManoMueveCentro(MazoU,"U",o,a,e,t,r),3==a&&OrganizarManoMueveCentro(MazoL,"L",o,a,e,t,r))},OcultarBotones=function(){var a,o;for(0==(a=SoyElJugador-1)&&(a=4),o=0;o<=MazoCentral.length-1;o++)MazoCentral[o].jugador==a&&(BotonCantar.loadTexture("Boton_cantar_off",0),BotonSiete.loadTexture("Boton_cambiar_7_off",0))},checkConnection=function(){var a=!0;-1===document.URL.indexOf("http://")&&document.URL.indexOf("https://");if(window.plugins)try{"none"==navigator.connection.type&&(a=!1,MensajeError("Revisa tu conexión a internet"))}catch(a){MensajeError("Error "+a)}return a},PuntosFin=function(){return(MarcadorNuestro>=PuntosGanar||MarcadorRival>=PuntosGanar)&&1==SonVueltas},CrearTimers=function(){timerturno=game_objeto.time.create(!1),timerpareja=game_objeto.time.create(!1),timerestoylisto=game_objeto.time.create(!1),timerBarajaRecibida=game_objeto.time.create(!1),timerNuevaPartida=game_objeto.time.create(!1),timer=game_objeto.time.create(!1)},MuestraDorsoCante=function(a,o,e){var t,r,n,i,l,d,s,c,u,g;for("D"==(t=DevuelveUbicacionCarta(a))&&(r=MazoD),"U"==t&&(r=MazoU),"L"==t&&(r=MazoL),"R"==t&&(r=MazoR),"oros"==o&&(n=8,i=10),"copas"==o&&(n=18,i=20),"espadas"==o&&(n=28,i=30),"bastos"==o&&(n=38,i=40),l=0;l<=r.length-1;l++){if(log(!1,"CARTAAAAAAAASSSS: "+r[l].cartilla.name),r[l].cartilla.name==n)var p=l;if(r[l].cartilla.name==i)var M=l}if(d=r[p].cartilla,u=r[p].cartilla.name,s=r[M].cartilla,g=r[M].cartilla,20==e&&"D"!=t){try{d.loadTexture(MostrarDibujoCarta(d),0)}catch(a){}game_objeto.add.tween(d).to({alpha:1},2e3,EfectoTween1,!0).onComplete.add(function(){try{for(c=!0,l=0;l<=MazoCentral.length-1;l++)MazoCentral[l].Cartilla.name==u&&(c=!1);ArreglaReversos()}catch(a){c=!1}});try{s.loadTexture(MostrarDibujoCarta(s),0)}catch(a){}game_objeto.add.tween(s).to({alpha:1},2e3,EfectoTween1,!0).onComplete.add(function(){try{for(ArreglaReversos(),c=!0,l=0;l<=MazoCentral.length-1;l++)MazoCentral[l].Cartilla.name==g&&(c=!1)}catch(a){c=!1}})}},MostrarTodasCartas=function(){var a;for(a=0;a<=MazoL.length-1;a++)MazoL[a].cartilla.loadTexture(MostrarDibujoCarta(MazoL[a].cartilla),0);for(a=0;a<=MazoU.length-1;a++)MazoU[a].cartilla.loadTexture(MostrarDibujoCarta(MazoU[a].cartilla),0);for(a=0;a<=MazoR.length-1;a++)MazoR[a].cartilla.loadTexture(MostrarDibujoCarta(MazoR[a].cartilla),0)},MostrarDibujoCarta=function(a){var o;return o="A",a.name<=9?CartaMostrar=o+"0"+a.name.toString():CartaMostrar=o+a.name.toString(),CartaMostrar},MostrarAnverso=function(a){if(0==SiempreBocaArriba)try{a.loadTexture(MostrarDibujoCarta(a),0)}catch(a){}},MostrarReverso=function(a){if(0==SiempreBocaArriba)try{a.loadTexture(ReversoGlobal,0)}catch(o){log(!0,"El reverso con el catch "+a.key);try{a.loadTexture("Reverso",0)}catch(a){}}},Cambiar7Ajeno=function(a,o,e,t,r,n){var i,l,d,s=!1;for(BotonSiete.loadTexture("Boton_cambiar_7_off",0),d=DevuelveUbicacionCarta(a),log(!1,"Jugador 7: "+a+"Letra: "+d+" KEY: "+o),"D"==d&&(l=MazoD),"L"==d&&(l=MazoL),"U"==d&&(l=MazoU),"R"==d&&(l=MazoR),i=0;i<=l.length-1;i++)if(l[i].cartilla.name==o){s=!0;break}1==s&&(log(!1,"ENCONTRADA"),CartaMover=l[i].cartilla,MostrarAnverso(CartaMover),CartaMover.sendToBack(),CartaTriunfo.push(new Carta(l[i].palo,l[i].idCarta,l[i].valor,l[i].cartilla)),Grupo7.add(l[i].cartilla),game_objeto.world.bringToTop(MazoCentral),game_objeto.world.bringToTop(MazoD),l.splice(i,1),ReubicarCartas(l,d),(twEsp7=game_objeto.add.tween(CartaMover)).to({x:(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-8*vSeparacion+AnchoCarta)/2+1*(AnchoCarta+vSeparacion),y:CentroIrreal,angle:90},500,EfectoTween2),twEsp7.onComplete.add(function(){FinalizaCambio7(l,d,a,e,t,r,n)},this),"D"==d&&game_objeto.add.tween(CartaMover.scale).to({x:1,y:1},vVelocidadCartas,EfectoTween2,!0),twEsp7.start())},Cambiar7=function(){var a,o,e=!1;if((1==ModoMultijugador&&EstoyConectado()||0==ModoMultijugador)&&"Boton_cambiar_7_on"==BotonSiete.key){for(BotonSiete.loadTexture("Boton_cambiar_7_off",0),a=0;a<=MazoD.length-1;a++)if(7==MazoD[a].valor&&MazoD[a].palo==Triunfo){e=!0;break}if(1==e)if(1==ModoMultijugador){Date.now();var t=[];t.splice(0,1e3);var r=1e5*Math.random(),n=new function(a,o,e,t,r,n,i,l,d,s,c,u){this.Habitacion=a,this.JugadorQueMueve=o,this.Cartilla=e,this.SonVueltas=t,this.Partida=r,this.JugadorFull=n,this.JugadorSala=i,this.Nombre=l,this.IdMsg=d,this.ClientId=s,this.SalaID=c,this.Mensaje=u,this.Fecha=new Date(Date.now())}(Habitacion,SoyElJugador,MazoD[a].cartilla.name,SonVueltas,MarcadorPartidasNuestro+MarcadorPartidasRival,ArrayDelaPropiaSala[SoyElJugador-1].JugadorFull,ArrayDelaPropiaSala[SoyElJugador-1].JugadorSala,ArrayDelaPropiaSala[SoyElJugador-1].Nombre,r,ArrayDelaPropiaSala[SoyElJugador-1].JugadorSala,Habitacion,"enviar cambio7");ArrayAccionesDesconexiones.push(n),t.push(n),socket.emit("enviar cambio7",t[0],function(a){EliminarColaMensajes(a,"enviar cambio7")}),t.splice(0,1e3)}else o=MazoD[a].cartilla,CartaTriunfo.push(new Carta(MazoD[a].palo,MazoD[a].idCarta,MazoD[a].valor,MazoD[a].cartilla,5,MazoD[a].jugador)),DesHabilitarClick(CartaTriunfo.length-1),Grupo7.add(MazoD[a].cartilla),game_objeto.world.bringToTop(MazoCentral),game_objeto.world.bringToTop(MazoD),MazoD.splice(a,1),ReubicarCartas(MazoD,"D"),(twEsp7=game_objeto.add.tween(o)).to({x:(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-8*vSeparacion+AnchoCarta)/2+1*(AnchoCarta+vSeparacion),y:CentroIrreal,angle:90},500,EfectoTween2),twEsp7.onComplete.add(function(){DesHabilitarClick(o),FinalizaCambio7(MazoD,"D",SoyElJugador,!1,!1,!1,!1)},this),twEsp7.start(),game_objeto.add.tween(o.scale).to({x:1,y:1},vVelocidadCartas,EfectoTween2,!0)}},FinalizaCambio7=function(a,o,e,t,r,n,i){var l,d,s;a.push(new Carta(CartaTriunfo[0].palo,CartaTriunfo[0].idCarta,CartaTriunfo[0].valor,CartaTriunfo[0].cartilla,7,e)),CartaTriunfo.shift(),"D"==o&&(l=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-5*vSeparacion+AnchoCarta)/2+5*(AnchoCarta+vSeparacion),d=game_objeto.world.height-AnchoCarta,s=a[a.length-1].cartilla.angle-90,MostrarAnverso(a[a.length-1].cartilla),GrupoD.add(a[a.length-1].cartilla)),"R"==o&&(l=game_objeto.world.width-AnchoCarta,d=(game_objeto.world.height-vHorizontalDerechaPorqueSi-6*AnchoCarta-5*vSeparacion+AnchoCarta)/2+0*(AnchoCarta+vSeparacion),s=a[a.length-1].cartilla.angle+180,MostrarReverso(a[a.length-1].cartilla),GrupoR.add(a[a.length-1].cartilla)),"L"==o&&(l=AnchoCarta,d=(game_objeto.world.height-vHorizontalDerechaPorqueSi-6*AnchoCarta-5*vSeparacion+AnchoCarta)/2+5*(AnchoCarta+vSeparacion),s=a[a.length-1].cartilla.angle+0,MostrarReverso(a[a.length-1].cartilla),GrupoL.add(a[a.length-1].cartilla),log(!1,"Parte izquierda")),"U"==o&&(l=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-5*vSeparacion+AnchoCarta)/2+0*(AnchoCarta+vSeparacion),d=AnchoCarta,s=a[a.length-1].cartilla.angle-90,MostrarReverso(a[a.length-1].cartilla),GrupoU.add(a[a.length-1].cartilla)),log(!1,"Mueve la carta..."),(twEsp7=game_objeto.add.tween(a[a.length-1].cartilla)).to({x:l,y:d,angle:s},500,EfectoTween2),twEsp7.onComplete.add(function(){ReubicarCartas(a,o,!1,!1,a[a.length-1].cartilla.name),"D"==o&&(HabilitarClick(a[a.length-1].cartilla),PreparaCaracteristicasMano()),Mazo.length>0&&1==i?RobarCartas1(t,r,n):Recuperarse(n,!1,"algo")},this),twEsp7.start(),"D"==o?game_objeto.add.tween(a[a.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0):1==cuatrotres&&game_objeto.add.tween(a[a.length-1].cartilla.scale).to({x:1.2,y:1.2},vVelocidadCartas,EfectoTween2,!0),MostrarOcultarBotonCante()},TengoEl7=function(){var a,o=!1;if(Mazo.length>0)for(a=0;a<=MazoD.length-1;a++)if(7==MazoD[a].valor&&MazoD[a].palo==Triunfo){o=!0;break}return o},ActualizaMarcador=function(a,o){var e,t,r;return"N"==a?MarcadorNuestro+=o:MarcadorRival+=o,e=MarcadorNuestro>50?MarcadorNuestro-50+" Buenas":MarcadorNuestro+" Malas",t=MarcadorRival>50?MarcadorRival-50+" Buenas":MarcadorRival+" Malas",TextMarcador.text=e+"\n"+t,1==PuntosFin()?(CrearTextoPuntuacion(),r=!1):r=!0,log(!1,"Nosotros "+MarcadorNuestro),log(!1,"Rival "+MarcadorRival),r},EstaCantado=function(a){var o,e=!1;for(o=0;o<=RegistrarCantes.length-1;o++)if(RegistrarCantes[o]==a){e=!0;break}return e},PosibleCante=function(a){var o,e=!1,t=!1,r=!1,n=!1,i=!1,l=!1,d=!1,s=!1;for(o=0;o<=a.length-1;o++)10==a[o].valorReal&&"oros"==a[o].palo&&(e=!0),10==a[o].valorReal&&"copas"==a[o].palo&&(r=!0),10==a[o].valorReal&&"espadas"==a[o].palo&&(i=!0),10==a[o].valorReal&&"bastos"==a[o].palo&&(d=!0),9==a[o].valorReal&&"oros"==a[o].palo&&(t=!0),9==a[o].valorReal&&"copas"==a[o].palo&&(n=!0),9==a[o].valorReal&&"espadas"==a[o].palo&&(l=!0),9==a[o].valorReal&&"bastos"==a[o].palo&&(s=!0);return 1==e&&1==t&&0==EstaCantado("oros")||1==r&&1==n&&0==EstaCantado("copas")||1==i&&1==l&&0==EstaCantado("espadas")||1==d&&1==s&&0==EstaCantado("bastos")},MostrarOcultarBotonCante=function(){var a,o,e,t;if(log(!0,"Cantes Tamaño: "+MazoCentral.length),0==MazoCentral.length||1==MazoCentral.length){if(1==SoyElJugador&&(o=3,e=2,t=4),2==SoyElJugador&&(o=4,e=1,t=3),3==SoyElJugador&&(o=1,e=2,t=4),4==SoyElJugador&&(o=2,e=1,t=3),vRonda>1)if(0==ModoMultijugador)1==BazaNuestraGlobal?Cantar(3):(Cantar(2),Cantar(4));else if(SoyElJugador==QuienTomaElControl)if(1==BazaNuestraGlobal)for(a=0;a<=ArrayJugadoresDesconectados.length-1;a++)ArrayJugadoresDesconectados[a].Jugador==o&&Cantar(o);else for(a=0;a<=ArrayJugadoresDesconectados.length-1;a++)ArrayJugadoresDesconectados[a].Jugador==e&&Cantar(e),ArrayJugadoresDesconectados[a].Jugador==t&&Cantar(t);log(!0,"Cantes Baza Nuestra: "+BazaNuestraGlobal),log(!0,"Cantes Posible Cante "+PosibleCante(MazoD)),1==BazaNuestraGlobal&&1==PosibleCante(MazoD)?BotonCantar.loadTexture("Boton_cantar_on",0):BotonCantar.loadTexture("Boton_cantar_off",0),1==BazaNuestraGlobal&&1==TengoEl7()?BotonSiete.loadTexture("Boton_cambiar_7_on",0):BotonSiete.loadTexture("Boton_cambiar_7_off",0)}else BotonCantar.loadTexture("Boton_cantar_off",0),BotonSiete.loadTexture("Boton_cambiar_7_off",0)},EnviarCante=function(a,o,e,t,r,n,i,l,d){Date.now();var s=[];s.splice(0,1e3);var c=new function(a,o,e,t,r,n,i,l,d,s,c,u,g){this.Habitacion=a,this.JugadorQueMueve=o,this.Puntos=e,this.Palo=t,this.SonVueltas=r,this.Partida=n,this.JugadorFull=i,this.JugadorSala=l,this.Nombre=d,this.IdMsg=s,this.ClientId=c,this.SalaID=u,this.Mensaje=g,this.Fecha=new Date(Date.now())}(a,o,e,t,r,n,i,l,d,1e5*Math.random(),l,a,"enviar cante");ArrayAccionesDesconexiones.push(c),s.push(c),socket.emit("enviar cante",s[0],function(a){EliminarColaMensajes(a,"enviar cante")}),s.splice(0,1e3)},Cantar=function(a){var o,e,t=!1,r=!1,n=!1,i=!1,l=!1,d=!1,s=!1,c=!1,u=[];if((1==ModoMultijugador&&EstoyConectado()||0==ModoMultijugador)&&("Boton_cantar_on"==BotonCantar.key&&a==SoyElJugador||a!=SoyElJugador)){for("Boton_cantar_on"==BotonCantar.key&&a==SoyElJugador&&BotonCantar.loadTexture("Boton_cantar_off",0),1==ModoMultijugador?("D"==(e=DevuelveUbicacionCarta(a))&&(u=MazoD),"U"==e&&(u=MazoU),"L"==e&&(u=MazoL),"R"==e&&(u=MazoR)):(1==a&&(u=MazoD),2==a&&(u=MazoR),3==a&&(u=MazoU),4==a&&(u=MazoL)),o=0;o<=u.length-1;o++)10==u[o].valorReal&&"oros"==u[o].palo&&(t=!0),10==u[o].valorReal&&"copas"==u[o].palo&&(n=!0),10==u[o].valorReal&&"espadas"==u[o].palo&&(l=!0),10==u[o].valorReal&&"bastos"==u[o].palo&&(s=!0),9==u[o].valorReal&&"oros"==u[o].palo&&(r=!0),9==u[o].valorReal&&"copas"==u[o].palo&&(i=!0),9==u[o].valorReal&&"espadas"==u[o].palo&&(d=!0),9==u[o].valorReal&&"bastos"==u[o].palo&&(c=!0);1==t&&1==r&&0==EstaCantado("oros")&&(log(!1,"Canta en Oros"),"oros"==Triunfo?1==ModoMultijugador?EnviarCante(Habitacion,a,40,"oros",SonVueltas,MarcadorPartidasNuestro+MarcadorPartidasRival,ArrayDelaPropiaSala[a-1].JugadorFull,ArrayDelaPropiaSala[a-1].JugadorSala,ArrayDelaPropiaSala[a-1].Nombre):(TextoBocadillo(a,"oros",!0,40,!1,!1),RegistrarCantes.push("oros")):1==ModoMultijugador?EnviarCante(Habitacion,a,20,"oros",SonVueltas,MarcadorPartidasNuestro+MarcadorPartidasRival,ArrayDelaPropiaSala[a-1].JugadorFull,ArrayDelaPropiaSala[a-1].JugadorSala,ArrayDelaPropiaSala[a-1].Nombre):(TextoBocadillo(a,"oros",!0,20,!1,!1),RegistrarCantes.push("oros"))),1==n&&1==i&&0==EstaCantado("copas")&&(log(!1,"Canta en copas"),"copas"==Triunfo?1==ModoMultijugador?EnviarCante(Habitacion,a,40,"copas",SonVueltas,MarcadorPartidasNuestro+MarcadorPartidasRival,ArrayDelaPropiaSala[a-1].JugadorFull,ArrayDelaPropiaSala[a-1].JugadorSala,ArrayDelaPropiaSala[a-1].Nombre):(TextoBocadillo(a,"copas",!0,40,!1,!1),RegistrarCantes.push("copas")):1==ModoMultijugador?EnviarCante(Habitacion,a,20,"copas",SonVueltas,MarcadorPartidasNuestro+MarcadorPartidasRival,ArrayDelaPropiaSala[a-1].JugadorFull,ArrayDelaPropiaSala[a-1].JugadorSala,ArrayDelaPropiaSala[a-1].Nombre):(TextoBocadillo(a,"copas",!0,20,!1,!1),RegistrarCantes.push("copas"))),1==l&&1==d&&0==EstaCantado("espadas")&&(log(!1,"Canta en espadas"),"espadas"==Triunfo?1==ModoMultijugador?EnviarCante(Habitacion,a,40,"espadas",SonVueltas,MarcadorPartidasNuestro+MarcadorPartidasRival,ArrayDelaPropiaSala[a-1].JugadorFull,ArrayDelaPropiaSala[a-1].JugadorSala,ArrayDelaPropiaSala[a-1].Nombre):(TextoBocadillo(a,"espadas",!0,40,!1,!1),RegistrarCantes.push("espadas")):1==ModoMultijugador?EnviarCante(Habitacion,a,20,"espadas",SonVueltas,MarcadorPartidasNuestro+MarcadorPartidasRival,ArrayDelaPropiaSala[a-1].JugadorFull,ArrayDelaPropiaSala[a-1].JugadorSala,ArrayDelaPropiaSala[a-1].Nombre):(TextoBocadillo(a,"espadas",!0,20,!1,!1),RegistrarCantes.push("espadas"))),1==s&&1==c&&0==EstaCantado("bastos")&&(log(!1,"Canta en bastos"),"bastos"==Triunfo?1==ModoMultijugador?EnviarCante(Habitacion,a,40,"bastos",SonVueltas,MarcadorPartidasNuestro+MarcadorPartidasRival,ArrayDelaPropiaSala[a-1].JugadorFull,ArrayDelaPropiaSala[a-1].JugadorSala,ArrayDelaPropiaSala[a-1].Nombre):(TextoBocadillo(a,"bastos",!0,40,!1,!1),RegistrarCantes.push("bastos")):1==ModoMultijugador?EnviarCante(Habitacion,a,20,"bastos",SonVueltas,MarcadorPartidasNuestro+MarcadorPartidasRival,ArrayDelaPropiaSala[a-1].JugadorFull,ArrayDelaPropiaSala[a-1].JugadorSala,ArrayDelaPropiaSala[a-1].Nombre):(TextoBocadillo(a,"bastos",!0,20,!1,!1),RegistrarCantes.push("bastos"))),1==PuntosFin()&&CrearTextoPuntuacion()}},ColorManoPosibles=function(a){var o;if(vTurno==SoyElJugador)for(o=0;o<=MazoD.length-1;o++)1==ValidadorReglas(MazoD[o],SoyElJugador)?MazoD[o].cartilla.tint=Phaser.Color.getColor(255,255,255):MazoD[o].cartilla.tint=Phaser.Color.getColor(110,110,110);else for(o=0;o<=MazoD.length-1;o++)MazoD[o].cartilla.tint=Phaser.Color.getColor(255,255,255)},ValidadorReglas=function(a,o){var e,t,r,n=[],i=[];if("D"==(r=DevuelveUbicacionCarta(o))&&(i=MazoD),"U"==r&&(i=MazoU),"R"==r&&(i=MazoR),"L"==r&&(i=MazoL),0==MazoCentral.length||vRonda<=RondaArrastre)e=!0;else if(1==RTengoMismoPalo(i)){for(log(!1,"Tengo del mismo palo"),n.splice(0,4),t=0;t<=MazoCentral.length-1;t++)n.push(new CartaBazaNuestra(MazoCentral[t].palo,MazoCentral[t].valorReal,MazoCentral[t].jugador));if(1==RBazaEsNuestra(n,o))log(!1,"La Baza es nuestra"),a.palo==MazoCentral[0].palo?(log(!1,"La carta es del mismo palo"),e=!0):(log(!1,"La carta NO es del mismo palo"),e=!1);else{for(log(!1,"NO es nuestra Baza.."),n.splice(0,4),t=0;t<=MazoCentral.length-1;t++)n.push(new CartaBazaNuestra(MazoCentral[t].palo,MazoCentral[t].valorReal,MazoCentral[t].jugador));n.push(new CartaBazaNuestra(a.palo,a.valorReal,o)),log(!1,n[n.length-1].palo+" - "+n[n.length-1].valorReal+" - "+n[n.length-1].jugador),1==RBazaEsNuestra(n,o)?(log(!1,"La Baza no ser�a nuestra"),a.palo==MazoCentral[0].palo?(log(!1,"Es del mismo palo"),e=!0):(log(!1,"No es del mismo palo"),e=!1)):1==RHariaBaza("MismoPalo",o,i)?(log(!1,"Har�a Baza con otra carta del mismo palo"),e=!1):(log(!1,"NO har�a Baza con otra carta del mismo palo"),e=a.palo==MazoCentral[0].palo||1!=RTengoMismoPalo(i))}}else{for(n.splice(0,4),t=0;t<=MazoCentral.length-1;t++)n.push(new CartaBazaNuestra(MazoCentral[t].palo,MazoCentral[t].valorReal,MazoCentral[t].jugador));if(1==RBazaEsNuestra(n,o))e=!0;else{for(n.splice(0,4),t=0;t<=MazoCentral.length-1;t++)n.push(new CartaBazaNuestra(MazoCentral[t].palo,MazoCentral[t].valorReal,MazoCentral[t].jugador));n.push(new CartaBazaNuestra(a.palo,a.valorReal,o)),e=1==RBazaEsNuestra(n,o)||1!=RHariaBaza("OtroPalo",o,i)}}return e},log=function(a,o){},RHariaBaza=function(a,o,e){var t,r,n,i=[];if(n=!1,"MismoPalo"==a)for(t=0;t<=e.length-1;t++)if(0==n){for(i.splice(0,4),r=0;r<=MazoCentral.length-1;r++)i.push(new CartaBazaNuestra(MazoCentral[r].palo,MazoCentral[r].valorReal,MazoCentral[r].jugador));if(MazoCentral[0].palo==e[t].palo&&(i.push(new CartaBazaNuestra(e[t].palo,e[t].valorReal,o)),1==RBazaEsNuestra(i,o))){n=!0;break}}if("MismoPaloSinBaza"==a)for(t=0;t<=e.length-1;t++)if(0==n){for(i.splice(0,4),r=0;r<=MazoCentral.length-1;r++)i.push(new CartaBazaNuestra(MazoCentral[r].palo,MazoCentral[r].valorReal,MazoCentral[r].jugador));if(MazoCentral[0].palo==e[t].palo&&(i.push(new CartaBazaNuestra(e[t].palo,e[t].valorReal,o)),1==RBazaEsNuestra(i,o))){n=!0;break}}if("OtroPalo"==a)for(t=0;t<=e.length-1;t++)if(0==n){for(i.splice(0,4),r=0;r<=MazoCentral.length-1;r++)i.push(new CartaBazaNuestra(MazoCentral[r].palo,MazoCentral[r].valorReal,MazoCentral[r].jugador));if(MazoCentral[0].palo!=e[t].palo&&(i.push(new CartaBazaNuestra(e[t].palo,e[t].valorReal,o)),1==RBazaEsNuestra(i,o))){n=!0;break}}return n},RTengoMismoPalo=function(a){var o,e;for(e=!1,o=0;o<=a.length-1;o++)if(a[o].palo==MazoCentral[0].palo){e=!0;break}return e},RBazaEsNuestra=function(a,o){var e,t,r,n,i;for(e=0;e<=a.length-1;e++)0==e&&(n=a[e].valorReal,i=a[e].palo,t=a[e].jugador),(a[e].valorReal>n&&a[e].palo==i||a[e].palo==Triunfo&&i!=Triunfo)&&(n=a[e].valorReal,i=a[e].palo,t=a[e].jugador);return 1==o&&(1==t&&(r=!0),2==t&&(r=!1),3==t&&(r=!0),4==t&&(r=!1)),2==o&&(2==t&&(r=!0),3==t&&(r=!1),4==t&&(r=!0),1==t&&(r=!1)),3==o&&(3==t&&(r=!0),4==t&&(r=!1),1==t&&(r=!0),2==t&&(r=!1)),4==o&&(4==t&&(r=!0),1==t&&(r=!1),2==t&&(r=!0),3==t&&(r=!1)),r},DevuelveUbicacionCarta=function(a){var o="D";return log(!0,"Dentro de DevuelveUbicacion "+SoyElJugador+" "+a),1==SoyElJugador&&(1==a&&(o="D"),2==a&&(o="R"),3==a&&(o="U"),4==a&&(o="L")),2==SoyElJugador&&(2==a&&(o="D"),3==a&&(o="R"),4==a&&(o="U"),1==a&&(o="L")),3==SoyElJugador&&(3==a&&(o="D"),4==a&&(o="R"),1==a&&(o="U"),2==a&&(o="L")),4==SoyElJugador&&(4==a&&(o="D"),1==a&&(o="R"),2==a&&(o="U"),3==a&&(o="L")),log(!1,"Va a Devolver.."+o),o},DevuelveJugadorSegunMazo=function(a){var o;return 1==SoyElJugador&&("D"==a&&(o=1),"R"==a&&(o=2),"U"==a&&(o=3),"L"==a&&(o=4)),2==SoyElJugador&&("D"==a&&(o=2),"R"==a&&(o=3),"U"==a&&(o=4),"L"==a&&(o=1)),3==SoyElJugador&&("D"==a&&(o=3),"R"==a&&(o=4),"U"==a&&(o=1),"L"==a&&(o=2)),4==SoyElJugador&&("D"==a&&(o=4),"R"==a&&(o=1),"U"==a&&(o=2),"L"==a&&(o=3)),o},Esconde_Mazo=function(a){var o,e;if(1==SoyElJugador&&(1==a&&(e="D"),2==a&&(e="R"),3==a&&(e="U"),4==a&&(e="L")),2==SoyElJugador&&(2==a&&(e="D"),3==a&&(e="R"),4==a&&(e="U"),1==a&&(e="L")),3==SoyElJugador&&(3==a&&(e="D"),4==a&&(e="R"),1==a&&(e="U"),2==a&&(e="L")),4==SoyElJugador&&(4==a&&(e="D"),1==a&&(e="R"),2==a&&(e="U"),3==a&&(e="L")),"D"==e)for(o=0;o<=Mazo.length-1;o++)Mazo[o].cartilla.x=game_objeto.world.centerX+o/2,Mazo[o].cartilla.y=game_objeto.world.height-AltoCartaEscalado-Mazo[o].cartilla.height/2-2*vSeparacion-70;if("U"==e)for(o=0;o<=Mazo.length-1;o++)Mazo[o].cartilla.x=game_objeto.world.centerX+o/2,Mazo[o].cartilla.y=Mazo[o].cartilla.height+Mazo[o].cartilla.height/2+2*vSeparacion;if("L"==e)for(o=0;o<=Mazo.length-1;o++)Mazo[o].cartilla.x=Mazo[o].cartilla.height+Mazo[o].cartilla.height/2+2*vSeparacion+o/2,Mazo[o].cartilla.y=CentroIrreal;if("R"==e)for(o=0;o<=Mazo.length-1;o++)Mazo[o].cartilla.x=game_objeto.world.width-Mazo[o].cartilla.height-Mazo[o].cartilla.height/2-3*vSeparacion+o/2,Mazo[o].cartilla.y=CentroIrreal},MoverMazo=function(){var a;for(a=0;a<=Mazo.length-1;a++){var o=game_objeto.add.tween(Mazo[a].cartilla);o.to({x:(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-5*vSeparacion+AnchoCarta)/2+0*(AnchoCarta+vSeparacion)+a/2,y:CentroIrreal},500,EfectoTween1),o.start()}1==ModoMultijugador?EnviarEstoyListo():(PreparaCaracteristicasMano(),SuperOrganizador()),BotonCantar.visible=!0,BotonSiete.visible=!0},EnviarEstoyListo=function(){if(0==PartidaComenzada){var a=[];a.splice(0,1e3);var o=1e5*Math.random(),e=new function(a,o,e,t,r,n,i){this.Habitacion=a,this.JugadorSala=o,this.idPartida=e,this.IdMsg=t,this.ClientId=r,this.SalaID=n,this.Mensaje=i,this.Fecha=new Date(Date.now())}(Habitacion,socket.id,idPartida,o,ArrayDelaPropiaSala[SoyElJugador-1].JugadorSala,Habitacion,"Estoy listo");ArrayAccionesDesconexiones.push(e),a.push(e),0==vProduccion&&socket.emit("Consola","Envio listo desconecta "+SoyElJugador),socket.emit("Estoy listo",a[0],function(a){EliminarColaMensajes(a,"Estoy listo")}),a.splice(0,1e3),EnviarEstoyListoDesconectados()}},EnviarEstoyListoDesconectados=function(){var a;if(QuienTomaElControl==SoyElJugador)for(a=0;a<=ArrayDelaPropiaSala.length-1;a++)if(1==ArrayDelaPropiaSala[a].Desconectado){var o=[];o.splice(0,1e3);var e=1e5*Math.random(),t=new function(a,o,e,t,r,n,i){this.Habitacion=a,this.JugadorSala=o,this.idPartida=e,this.IdMsg=t,this.ClientId=r,this.SalaID=n,this.Mensaje=i,this.Fecha=new Date(Date.now())}(Habitacion,ArrayDelaPropiaSala[a].JugadorSala,idPartida,e,ArrayDelaPropiaSala[a].JugadorSala,Habitacion,"Estoy listo");ArrayAccionesDesconexiones.push(t),o.push(t),0==vProduccion&&socket.emit("Consola","Envio listo desconectados al inicio "+ArrayDelaPropiaSala[a].JugadorSala),socket.emit("Estoy listo",o[0],function(a){EliminarColaMensajes(a,"Estoy listo")}),o.splice(0,1e3)}},RecalculaDesconectados=function(){var a,o;for(ArrayJugadoresDesconectados.splice(0,1e3),a=0;a<=ArrayDelaPropiaSala.length-1;a++)if(1==ArrayDelaPropiaSala[a].Desconectado){o=!1;for(var e=0;e<=ArrayJugadoresDesconectados.length-1;e++)ArrayJugadoresDesconectados[e].JugadorSala==ArrayDelaPropiaSala[a].JugadorSala&&(o=!0);0==o&&ArrayJugadoresDesconectados.push(new ObjetoDesconexion(a+1,ArrayDelaPropiaSala[a].JugadorSala))}else for(e=ArrayJugadoresDesconectados.length;e--;)ArrayJugadoresDesconectados[e].JugadorSala==ArrayDelaPropiaSala[a].JugadorSala&&ArrayJugadoresDesconectados.splice(e,1)},SacaTriunfo=function(a){SemaforoRepartos.splice(0,100),SemaforoTextoPuntuacion.splice(0,100);var o=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);o.to({x:(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-8*vSeparacion+AnchoCarta)/2+1*(AnchoCarta+vSeparacion),y:CentroIrreal,angle:90},500,EfectoTween1),o.onComplete.add(MoverMazo,this),o.start(),CartaTriunfo.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,Mazo[Mazo.length-1].jugador)),MostrarAnverso(Mazo[Mazo.length-1].cartilla),Grupo7.add(CartaTriunfo[CartaTriunfo.length-1].cartilla),game_objeto.world.bringToTop(GrupoMazo),game_objeto.world.bringToTop(GrupoD),Triunfo=CartaTriunfo[CartaTriunfo.length-1].palo,Mazo.pop(),1==ModoMultijugador&&(ObjTurnoD.visible=!0,ObjTurnoR.visible=!0,ObjTurnoU.visible=!0,ObjTurnoL.visible=!0),RepartoFinalizado=!0,Recuperarse(a,!1,!1)},RobarCartas1=function(a,o,e){var t,r=o;if(log(!1,"Intenta robar.."),Mazo.length>0){if(Mazo[Mazo.length-1].cartilla,"U"==(t=DevuelveUbicacionCarta(r))){var n=MazoU,i=Mazo[Mazo.length-1].cartilla.angle;MostrarReverso(Mazo[Mazo.length-1].cartilla),GrupoU.add(Mazo[Mazo.length-1].cartilla)}if("D"==t){var n=MazoD,i=Mazo[Mazo.length-1].cartilla.angle;MostrarAnverso(Mazo[Mazo.length-1].cartilla),GrupoD.add(Mazo[Mazo.length-1].cartilla)}if("L"==t){var n=MazoL,i=Mazo[Mazo.length-1].cartilla.angle+90;MostrarReverso(Mazo[Mazo.length-1].cartilla),GrupoL.add(Mazo[Mazo.length-1].cartilla)}if("R"==t){var n=MazoR,i=Mazo[Mazo.length-1].cartilla.angle+270;MostrarReverso(Mazo[Mazo.length-1].cartilla),GrupoR.add(Mazo[Mazo.length-1].cartilla)}log(!1,"Tama�o de la mano "+n.length),n.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,Mazo[Mazo.length-1].jugador)),ReproducirSonido("_Reparto"),"D"==t&&PreparaCaracteristicasMano(),Mazo.pop();var l=devuelveX(t,99);log(!1,"X de "+t+" "+l);var d=devuelveY(t,99);Mazo.length>0?((tw1=game_objeto.add.tween(n[n.length-1].cartilla)).to({x:l,y:d,angle:i},vVelocidadRobar,EfectoTween1),tw1.onComplete.add(function(){ReubicarCartas(n,t),RobarCartas2(a,o,e)}),"D"==t&&game_objeto.add.tween(n[n.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),tw1.start()):(log(!1,"No quedan cartas"),log(!1,"Mazo grr: "+Mazo[0].valor+" "+Mazo[0].palo)),CartaTriunfo.length>0&&CartaTriunfo[CartaTriunfo.length-1].cartilla.moveDown()}},RobarCartas2=function(a,o,e){var t,r=o+1;if(Mazo.length>0){if(r>4&&(r-=4),Mazo[Mazo.length-1].cartilla,"U"==(t=DevuelveUbicacionCarta(r))){var n=MazoU,i=Mazo[Mazo.length-1].cartilla.angle;MostrarReverso(Mazo[Mazo.length-1].cartilla),GrupoU.add(Mazo[Mazo.length-1].cartilla)}if("D"==t){var n=MazoD,i=Mazo[Mazo.length-1].cartilla.angle;MostrarAnverso(Mazo[Mazo.length-1].cartilla),GrupoD.add(Mazo[Mazo.length-1].cartilla)}if("L"==t){var n=MazoL,i=Mazo[Mazo.length-1].cartilla.angle+90;MostrarReverso(Mazo[Mazo.length-1].cartilla),GrupoL.add(Mazo[Mazo.length-1].cartilla)}if("R"==t){var n=MazoR,i=Mazo[Mazo.length-1].cartilla.angle+270;MostrarReverso(Mazo[Mazo.length-1].cartilla),GrupoR.add(Mazo[Mazo.length-1].cartilla)}n.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,Mazo[Mazo.length-1].jugador)),ReproducirSonido("_Reparto"),"D"==t&&PreparaCaracteristicasMano(),Mazo.pop();var l=devuelveX(t,99),d=devuelveY(t,99);log(!1,"X de "+t+" "+l),Mazo.length>0&&((tw1=game_objeto.add.tween(n[n.length-1].cartilla)).to({x:l,y:d,angle:i},vVelocidadRobar,EfectoTween1),tw1.onComplete.add(function(){ReubicarCartas(n,t),RobarCartas3(a,o,e)}),"D"==t&&game_objeto.add.tween(n[n.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),tw1.start()),CartaTriunfo.length>0&&CartaTriunfo[CartaTriunfo.length-1].cartilla.moveDown()}},RobarCartas3=function(a,o,e){var t,r=o+2;if(r>4&&(r-=4),Mazo.length>0){if(Mazo[Mazo.length-1].cartilla,"U"==(t=DevuelveUbicacionCarta(r))){var n=MazoU,i=Mazo[Mazo.length-1].cartilla.angle;MostrarReverso(Mazo[Mazo.length-1].cartilla),GrupoU.add(Mazo[Mazo.length-1].cartilla)}if("D"==t){var n=MazoD,i=Mazo[Mazo.length-1].cartilla.angle;MostrarAnverso(Mazo[Mazo.length-1].cartilla),GrupoD.add(Mazo[Mazo.length-1].cartilla)}if("L"==t){var n=MazoL,i=Mazo[Mazo.length-1].cartilla.angle+90;MostrarReverso(Mazo[Mazo.length-1].cartilla),GrupoL.add(Mazo[Mazo.length-1].cartilla)}if("R"==t){var n=MazoR,i=Mazo[Mazo.length-1].cartilla.angle+270;MostrarReverso(Mazo[Mazo.length-1].cartilla),GrupoR.add(Mazo[Mazo.length-1].cartilla)}n.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,Mazo[Mazo.length-1].jugador)),ReproducirSonido("_Reparto"),"D"==t&&PreparaCaracteristicasMano(),Mazo.pop();var l=devuelveX(t,99),d=devuelveY(t,99);log(!1,"X de "+t+" "+l),(Mazo.length>0||CartaTriunfo.length>0)&&((tw1=game_objeto.add.tween(n[n.length-1].cartilla)).to({x:l,y:d,angle:i},vVelocidadRobar,EfectoTween1),tw1.onComplete.add(function(){ReubicarCartas(n,t),RobarCartas4(a,o,e)}),"D"==t&&game_objeto.add.tween(n[n.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),tw1.start()),CartaTriunfo.length>0&&CartaTriunfo[CartaTriunfo.length-1].cartilla.moveDown()}},RobarCartas4=function(a,o,e){var t,r,n=[],i=o+3;if(i>4&&(i-=4),Mazo.length>0||CartaTriunfo.length>0){if(log(!1,"koooo"),n=Mazo.length>0?Mazo:CartaTriunfo,n[n.length-1].cartilla,"U"==(t=DevuelveUbicacionCarta(i))){var l=MazoU,d=n[n.length-1].cartilla.angle;for(r=0;r<=n.length-1;r++)MostrarReverso(n[r].cartilla);GrupoU.add(n[n.length-1].cartilla)}if("D"==t){var l=MazoD,d=n[n.length-1].cartilla.angle;MostrarAnverso(n[n.length-1].cartilla),GrupoD.add(n[n.length-1].cartilla)}if("L"==t){var l=MazoL,d=n[n.length-1].cartilla.angle+90;for(r=0;r<=n.length-1;r++)MostrarReverso(n[r].cartilla);GrupoL.add(n[n.length-1].cartilla)}if("R"==t){var l=MazoR,d=n[n.length-1].cartilla.angle+270;for(r=0;r<=n.length-1;r++)MostrarReverso(n[r].cartilla);GrupoR.add(n[n.length-1].cartilla)}l.push(new Carta(n[n.length-1].palo,n[n.length-1].idCarta,n[n.length-1].valor,n[n.length-1].cartilla,5,n[n.length-1].jugador)),ReproducirSonido("_Reparto"),"D"==t&&PreparaCaracteristicasMano(),n.pop(),0==n.length&&(d-=90);var s=devuelveX(t,99),c=devuelveY(t,99);log(!1,"X de "+t+" "+s),(tw1=game_objeto.add.tween(l[l.length-1].cartilla)).to({x:s,y:c,angle:d},vVelocidadCartasReordernar,EfectoTween1),tw1.onComplete.add(function(){ReubicarCartas(l,t),EliminarDeLaMesa(a,e)}),"D"==t&&game_objeto.add.tween(l[l.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),tw1.start(),CartaTriunfo.length>0&&CartaTriunfo[CartaTriunfo.length-1].cartilla.moveDown()}MostrarOcultarBotonCante()},EliminaTextoPantalla=function(a){a.destroy()},Trucaposicion=function(a,o,e){if(1==EstoyConectado())for(var t=0;t<=o.length-1;t++)if(o[t].cartilla.name==a.name){o[t].posicion=e,1==ModoMultijugador&&socket.emit("enviar posicion",Habitacion,SoyElJugador,o[t].cartilla.name,e);break}},devuelveX=function(a,o){for(var e=0;e<Mazoposiciones.length;e++)if(Mazoposiciones[e].Mazo==a&&Mazoposiciones[e].posicion==o)return Mazoposiciones[e].x},devuelveY=function(a,o){for(var e=0;e<Mazoposiciones.length;e++)if(Mazoposiciones[e].Mazo==a&&Mazoposiciones[e].posicion==o)return Mazoposiciones[e].y},ReubicarCartas=function(a,o,e,t,r){for(n=0;n<=a.length-1;n++)a[n].cartilla.name==r&&(a[n].posicion=10);a.sort(sort_by("posicion",!1,parseFloat));for(n=0;n<=a.length-1;n++)a[n].posicion=n;if(1==e){for(var n=0;n<=a.length-1&&a[n].cartilla.name!=t;n++);PosicionCartas(o);var i=devuelveX(o,n),l=devuelveY(o,n);"L"==o&&(DesHabilitarClick(a[n].cartilla),(twReu=game_objeto.add.tween(a[n].cartilla)).to({x:i+a[a.length-1].cartilla.width,y:l},vVelocidadCartasReordernar,EfectoTween1),twReu.onComplete.add(EfectosReordenarCartasPrevioL,this),twReu.start()),"R"==o&&(DesHabilitarClick(a[n].cartilla),(twReu=game_objeto.add.tween(a[n].cartilla)).to({x:i-a[a.length-1].cartilla.width,y:l},vVelocidadCartasReordernar,EfectoTween1),twReu.onComplete.add(EfectosReordenarCartasPrevioR,this),twReu.start()),"U"==o&&(DesHabilitarClick(a[n].cartilla),(twReu=game_objeto.add.tween(a[n].cartilla)).to({x:i,y:l+a[a.length-1].cartilla.width},vVelocidadCartasReordernar,EfectoTween1),twReu.onComplete.add(EfectosReordenarCartasPrevioU,this),twReu.start())}else EfectosReordenarCartas(o)},EfectosReordenarCartasPrevioR=function(){EfectosReordenarCartas("R")},EfectosReordenarCartasPrevioL=function(){EfectosReordenarCartas("L")},EfectosReordenarCartasPrevioU=function(){EfectosReordenarCartas("U")},EfectosReordenarCartas=function(a){var o=[];if("U"==a&&(o=MazoU),"D"==a&&(o=MazoD),"L"==a&&(o=MazoL),"R"==a&&(o=MazoR),PosicionCartas(a),o.length>=1){var e=devuelveX(a,0),t=devuelveY(a,0);(twReu=game_objeto.add.tween(o[0].cartilla)).to({x:e,y:t},vVelocidadCartasReordernar,EfectoTween1),twReu.start()}if(o.length>=2){var e=devuelveX(a,1),t=devuelveY(a,1);(twReu=game_objeto.add.tween(o[1].cartilla)).to({x:e,y:t},vVelocidadCartasReordernar,EfectoTween1),twReu.start()}if(o.length>=3){var e=devuelveX(a,2),t=devuelveY(a,2);(twReu=game_objeto.add.tween(o[2].cartilla)).to({x:e,y:t},vVelocidadCartasReordernar,EfectoTween1),twReu.start()}if(o.length>=4){if(Mazo.length>0)var e=devuelveX(a,3),t=devuelveY(a,3);else if("R"==a)var e=devuelveX(a,3),t=devuelveY(a,3);else var e=devuelveX(a,3),t=devuelveY(a,3);(twReu=game_objeto.add.tween(o[3].cartilla)).to({x:e,y:t},vVelocidadCartasReordernar,EfectoTween1),twReu.start()}if(o.length>=5){var e=devuelveX(a,4),t=devuelveY(a,4);(twReu=game_objeto.add.tween(o[4].cartilla)).to({x:e,y:t},vVelocidadCartasReordernar,EfectoTween1),twReu.start()}if(o.length>=6){var e=devuelveX(a,5),t=devuelveY(a,5);(twReu=game_objeto.add.tween(o[5].cartilla)).to({x:e,y:t},vVelocidadCartasReordernar,EfectoTween1),twReu.start()}},PreparaCaracteristicasMano=function(){var a;for(a=0;a<=MazoD.length-1;a++)MazoD[a].cartilla.inputEnabled=!0,MazoD[a].cartilla.input.enableDrag(!1,!0),MazoD[a].cartilla.events.onDragUpdate.add(Moviendo_Carta),MazoD[a].cartilla.events.onDragStop.add(Parar_Drag)},DesHabilitarClick=function(a){a.inputEnabled=!1},HabilitarClick=function(a){log(!1,"Activa el sprite."),a.inputEnabled=!0};var sort_by=function(a,o,e){var t=e?function(o){return e(o[a])}:function(o){return o[a]};return o=o?-1:1,function(a,e){return a=t(a),e=t(e),o*((a>e)-(e>a))}};MoverCartaAjena=function(a,o,e,t){1==SoyElJugador&&(2==a&&OrganizarManoOrdenamiento(MazoR,"R",o,e,t),3==a&&OrganizarManoOrdenamiento(MazoU,"U",o,e,t),4==a&&OrganizarManoOrdenamiento(MazoL,"L",o,e,t)),2==SoyElJugador&&(3==a&&OrganizarManoOrdenamiento(MazoR,"R",o,e,t),4==a&&OrganizarManoOrdenamiento(MazoU,"U",o,e,t),1==a&&OrganizarManoOrdenamiento(MazoL,"L",o,e,t)),3==SoyElJugador&&(4==a&&OrganizarManoOrdenamiento(MazoR,"R",o,e,t),1==a&&OrganizarManoOrdenamiento(MazoU,"U",o,e,t),2==a&&OrganizarManoOrdenamiento(MazoL,"L",o,e,t)),4==SoyElJugador&&(1==a&&OrganizarManoOrdenamiento(MazoR,"R",o,e,t),2==a&&OrganizarManoOrdenamiento(MazoU,"U",o,e,t),3==a&&OrganizarManoOrdenamiento(MazoL,"L",o,e,t))},OrganizarManoOrdenamiento=function(a,o,e,t,r){for(var n=0;n<=a.length-1;n++)if(a[n].cartilla.name==e){a[n].posicion=t,ReubicarCartas(a,o,!0,e);break}Recuperarse(r,!1,"orden")},EfectosRecogerCartas1=function(a){var o;if(MazoCentral.length>=1)if(MostrarReverso(MazoCentral[0].cartilla),1==BazaNuestraGlobal){for(o=1;o<=UltimaBazaNuestra.length;o++)UltimaBazaNuestra.alpha=1;UltimaBazaNuestra.splice(0,10),DesHabilitarClick(MazoCentral[0].cartilla),(twRecoger1=game_objeto.add.tween(MazoCentral[0].cartilla)).to({x:devuelveX("ULTIMA_Baza",0),y:devuelveY("ULTIMA_Baza",0),angle:Math.floor(360*Math.random())+1},vVelocidadCartasReordernar,EfectoTween1),twRecoger1.start(),GrupoUltimaBaza.add(MazoCentral[0].cartilla),MazoRecogido.push(MazoCentral[0].cartilla),UltimaBazaNuestra.push(MazoCentral[0].cartilla),HabilitarVerUltimaBaza(MazoCentral[0].cartilla)}else{for(o=1;o<=UltimaBazaRival.length;o++)UltimaBazaRival.alpha=1;UltimaBazaRival.splice(0,10),DesHabilitarClick(MazoCentral[0].cartilla),(twRecoger1=game_objeto.add.tween(MazoCentral[0].cartilla)).to({x:devuelveX("ULTIMA_Baza_Rival",0),y:devuelveY("ULTIMA_Baza_Rival",0),angle:Math.floor(360*Math.random())+1},vVelocidadCartasReordernar,EfectoTween1),twRecoger1.start(),GrupoUltimaBaza.add(MazoCentral[0].cartilla),MazoRecogidoRival.push(MazoCentral[0].cartilla),UltimaBazaRival.push(MazoCentral[0].cartilla),HabilitarVerUltimaBaza(MazoCentral[0].cartilla)}},EfectosRecogerCartas2=function(a){MazoCentral.length>=2&&(MostrarReverso(MazoCentral[1].cartilla),1==BazaNuestraGlobal?(DesHabilitarClick(MazoCentral[1].cartilla),(twRecoger2=game_objeto.add.tween(MazoCentral[1].cartilla)).to({x:devuelveX("ULTIMA_Baza",0),y:devuelveY("ULTIMA_Baza",0),angle:Math.floor(360*Math.random())+1},vVelocidadCartasReordernar,EfectoTween1),twRecoger2.start(),MazoRecogido.push(MazoCentral[1].cartilla),UltimaBazaNuestra.push(MazoCentral[1].cartilla),HabilitarVerUltimaBaza(MazoCentral[1].cartilla),GrupoUltimaBaza.add(MazoCentral[1].cartilla)):(DesHabilitarClick(MazoCentral[1].cartilla),(twRecoger2=game_objeto.add.tween(MazoCentral[1].cartilla)).to({x:devuelveX("ULTIMA_Baza_Rival",0),y:devuelveY("ULTIMA_Baza_Rival",0),angle:Math.floor(360*Math.random())+1},vVelocidadCartasReordernar,EfectoTween1),twRecoger2.start(),MazoRecogidoRival.push(MazoCentral[1].cartilla),UltimaBazaRival.push(MazoCentral[1].cartilla),HabilitarVerUltimaBaza(MazoCentral[1].cartilla),GrupoUltimaBaza.add(MazoCentral[1].cartilla)))},EfectosRecogerCartas3=function(a){MazoCentral.length>=3&&(MostrarReverso(MazoCentral[2].cartilla),1==BazaNuestraGlobal?(DesHabilitarClick(MazoCentral[2].cartilla),(twRecoger3=game_objeto.add.tween(MazoCentral[2].cartilla)).to({x:devuelveX("ULTIMA_Baza",0),y:devuelveY("ULTIMA_Baza",0),angle:Math.floor(360*Math.random())+1},vVelocidadCartasReordernar,EfectoTween1),twRecoger3.start(),MazoRecogido.push(MazoCentral[2].cartilla),UltimaBazaNuestra.push(MazoCentral[2].cartilla),HabilitarVerUltimaBaza(MazoCentral[2].cartilla),GrupoUltimaBaza.add(MazoCentral[2].cartilla)):(DesHabilitarClick(MazoCentral[2].cartilla),(twRecoger3=game_objeto.add.tween(MazoCentral[2].cartilla)).to({x:devuelveX("ULTIMA_Baza_Rival",0),y:devuelveY("ULTIMA_Baza_Rival",0),angle:Math.floor(360*Math.random())+1},vVelocidadCartasReordernar,EfectoTween1),twRecoger3.start(),MazoRecogidoRival.push(MazoCentral[2].cartilla),UltimaBazaRival.push(MazoCentral[2].cartilla),HabilitarVerUltimaBaza(MazoCentral[2].cartilla),GrupoUltimaBaza.add(MazoCentral[2].cartilla)))},EfectosRecogerCartas4=function(a,o,e){MazoCentral.length>=4&&(MostrarReverso(MazoCentral[3].cartilla),1==BazaNuestraGlobal?(DesHabilitarClick(MazoCentral[3].cartilla),(twRecoger4=game_objeto.add.tween(MazoCentral[3].cartilla)).to({x:devuelveX("ULTIMA_Baza",0),y:devuelveY("ULTIMA_Baza",0),angle:Math.floor(360*Math.random())+1},vVelocidadCartasReordernar,EfectoTween1),Mazo.length>0?twRecoger4.onComplete.add(function(){ForzarCambio7(a,o,e),MazoRecogido.push(MazoCentral[3].cartilla),UltimaBazaNuestra.push(MazoCentral[3].cartilla),HabilitarVerUltimaBaza(MazoCentral[3].cartilla),GrupoUltimaBaza.add(MazoCentral[3].cartilla)}):(log(!1,"se deber�a meter aqu�"),MazoRecogido.push(MazoCentral[3].cartilla),UltimaBazaNuestra.push(MazoCentral[3].cartilla),HabilitarVerUltimaBaza(MazoCentral[3].cartilla),GrupoUltimaBaza.add(MazoCentral[3].cartilla),twRecoger4.onComplete.add(function(){EliminarDeLaMesa(a,e)})),twRecoger4.start()):(DesHabilitarClick(MazoCentral[3].cartilla),(twRecoger4=game_objeto.add.tween(MazoCentral[3].cartilla)).to({x:devuelveX("ULTIMA_Baza_Rival",0),y:devuelveY("ULTIMA_Baza_Rival",0),angle:Math.floor(360*Math.random())+1},vVelocidadCartasReordernar,EfectoTween1),Mazo.length>0?twRecoger4.onComplete.add(function(){ForzarCambio7(a,o,e),MazoRecogidoRival.push(MazoCentral[3].cartilla),UltimaBazaRival.push(MazoCentral[3].cartilla),HabilitarVerUltimaBaza(MazoCentral[3].cartilla),GrupoUltimaBaza.add(MazoCentral[3].cartilla)}):(log(!1,"o aqu�"),MazoRecogidoRival.push(MazoCentral[3].cartilla),UltimaBazaRival.push(MazoCentral[3].cartilla),HabilitarVerUltimaBaza(MazoCentral[3].cartilla),GrupoUltimaBaza.add(MazoCentral[3].cartilla),twRecoger4.onComplete.add(function(){EliminarDeLaMesa(a,e)})),twRecoger4.start()))},ForzarCambio7=function(a,o,e){var t,r,n,i,l=!1;for(t=0;t<=MazoD.length-1;t++)MazoD[t].palo==Triunfo&&7==MazoD[t].valor&&(l=!0,n=MazoD[t].cartilla.name,i="D");for(t=0;t<=MazoR.length-1;t++)MazoR[t].palo==Triunfo&&7==MazoR[t].valor&&(l=!0,n=MazoR[t].cartilla.name,i="R");for(t=0;t<=MazoU.length-1;t++)MazoU[t].palo==Triunfo&&7==MazoU[t].valor&&(l=!0,n=MazoU[t].cartilla.name,i="U");for(t=0;t<=MazoL.length-1;t++)MazoL[t].palo==Triunfo&&7==MazoL[t].valor&&(l=!0,n=MazoL[t].cartilla.name,i="L");r=DevuelveJugadorSegunMazo(i),log(!1,"La vRonda es "+a),1==l&&CartaTriunfo[0].valorReal>7&&4==a&&(1==BazaNuestraGlobal&&("D"==i||"U"==i)||0==BazaNuestraGlobal&&("L"==i||"R"==i))?(log(!1,"Carta a cambiar "+n),Cambiar7Ajeno(r,n,a,o,e,!0)):RobarCartas1(a,o,e)},EscribirTextoGuay=function(a,o){var e;return e=game_objeto.add.bitmapText(0,0,"MiFuenteAmarilla","BitmapText",o),e.text=a,e.anchor.set(.5,.5),e.x=game_objeto.world.centerX,e.y=game_objeto.world.centerY,e},RondaFinalizada=function(){FinalizandoPartida=!0,LimpiandoPartida(),1==ModoMultijugador&&socket.emit("abre_sala_jugador",Habitacion,socket.id),0==SonVueltas&&Recuento()},Recuento=function(){var a;log(!0,"A contar.."),FinalizandoPartida=!0,ReproducirSonido("_Contar"),a=EscribirTextoGuay("¡¡ A Contar !!",60),(twRec1=game_objeto.add.tween(a).to({x:game_objeto.world.centerX},800,EfectoTweenRebote)).onComplete.add(function(){(twRec2=game_objeto.add.tween(a).to({alpha:0},1e3,EfectoTween1,!1)).onComplete.add(function(){a.destroy(),MueveRecogidasAlCentro()}),twRec2.start()}),twRec1.start(),log(!0,"Recuento")},MueveRecogidasAlCentro=function(){var a;if(log(!1,"LLega a MueveRecogidasAlCentro"),MazoRecogido.length>0){for(a=0;a<=MazoRecogido.length-1;a++)DeshabilitarVerUltimaBaza(MazoRecogido[a]),MazoRecogido[a].bringToTop();for(a=0;a<=MazoRecogidoRival.length-1;a++)DeshabilitarVerUltimaBaza(MazoRecogidoRival[a]);for(a=MazoRecogido.length-1;a>=0;a--)(twRec2=game_objeto.add.tween(MazoRecogido[a])).to({x:game_objeto.world.centerX,y:game_objeto.world.height-MazoRecogido[a].height,angle:0},600,EfectoTween2),0==a&&twRec2.onComplete.add(MueveParaContar,this),twRec2.start(),(twRec3=game_objeto.add.tween(MazoRecogido[a].scale)).to({x:vEscalaUltimaBaza,y:vEscalaUltimaBaza}),twRec3.start()}else CrearTextoPuntuacion()},MueveParaContar=function(){MazoRecogido.length>0&&(MazoRecogido[MazoRecogido.length-1].bringToTop(),MostrarAnverso(MazoRecogido[MazoRecogido.length-1]),(twRec2=game_objeto.add.tween(MazoRecogido[MazoRecogido.length-1])).to({x:game_objeto.world.centerX,y:game_objeto.world.centerY-100,angle:Math.round(180*Math.random()-45)},50,EfectoTween1),MazoRecogido.length>1?twRec2.onComplete.add(function(){MazoRecogido[MazoRecogido.length-1].moveUp(),MazoRecogidoApoyo.push(MazoRecogido[MazoRecogido.length-1]),ReproducirSonido("_Reparto"),MazoRecogido.pop(),MueveParaContar()},this):twRec2.onComplete.add(function(){MazoRecogidoApoyo.push(MazoRecogido[MazoRecogido.length-1]),ReproducirSonido("_Reparto"),MazoRecogido.pop(),MueveParaContar(),MueveParaBarajar()},this),twRec2.start())},MueveParaBarajar=function(){var a,o,e=0,t=0,r=!1;MazoRecogidoApoyo.length>0&&(r=!0),o=DevuelveUbicacionCarta(vTurno);try{"D"==o&&(e=game_objeto.world.centerX,t=game_objeto.world.height+2*MazoRecogidoApoyo[MazoRecogidoApoyo.length-1].height),"U"==o&&(e=game_objeto.world.centerX,t=0-2*MazoRecogidoApoyo[MazoRecogidoApoyo.length-1].height),"L"==o&&(e=0-2*MazoRecogidoApoyo[MazoRecogidoApoyo.length-1].width,t=CentroIrreal),"R"==o&&(e=game_objeto.world.width+2*MazoRecogidoApoyo[MazoRecogidoApoyo.length-1].width,t=CentroIrreal)}catch(a){}if(log(!1,"Tama�o Rival "+MazoRecogidoRival.length),log(!1,"Tama�o Apoyo "+MazoRecogidoApoyo.length),MazoRecogidoRival.length>0)for(a=0;a<=MazoRecogidoRival.length-1;a++)(twRec1=game_objeto.add.tween(MazoRecogidoRival[a])).to({x:e,y:t},1e3,EfectoTween2,!1,500),0==r&&a==MazoRecogidoRival.length-1&&twRec1.onComplete.add(CrearTextoPuntuacion,this),twRec1.start();if(MazoRecogidoApoyo.length>0)for(a=0;a<=MazoRecogidoApoyo.length-1;a++)(twRec2=game_objeto.add.tween(MazoRecogidoApoyo[a])).to({x:e,y:t},1e3,EfectoTween2,!1,500),1==r&&a==MazoRecogidoApoyo.length-1&&twRec2.onComplete.add(CrearTextoPuntuacion,this),twRec2.start();else CrearTextoPuntuacion()},CrearTextoPuntuacion=function(){var a,o,e,t,r,n;if(1==ValidaTextoPuntuacionJugador()){for(n=0;n<=ArrayTareas.length-1&&"baraja_desde_server"!=ArrayTareas[n].Mensaje;n++)ArrayTareas[n].Borrar=!0;for(;n--;)1==ArrayTareas[n].Borrar&&ArrayTareas.splice(n,1);FinalizandoPartida=!0,timerturno.stop(),timer.stop(),MostrarTodasCartas(),r=0==SonVueltas||1==vReconectando?0:3500;var i=game_objeto.time.create(!0);i.add(r,function(){LimpiarSprites(),TextMarcador.visible=!1,TextTituloMarcador.visible=!1;var r=vTurno;if(1==EstoyConectado())if(ArrayInfoJugador.length>0){ArrayInfoJugador[0].Nombre,ArrayInfoJugador[0].ProveedorID,ArrayInfoJugador[0].RedSocial;socket.emit("enviar_peticion_publicidad",socket.id,Version,ObjetoG)}else socket.emit("enviar_peticion_publicidad",socket.id,Version,ObjetoG);if(1==BazaNuestraGlobal?0==SonVueltas&&(MarcadorNuestro+=10):0==SonVueltas&&(MarcadorRival+=10),t=MarcadorNuestro>=PuntosGanar||MarcadorRival>=PuntosGanar,SonVueltas=1!=SonVueltas,1==t&&(SonVueltas=!1,LimpiandoPartida()),o=MarcadorNuestro>50?MarcadorNuestro-50+" Buenas":MarcadorNuestro+" Malas",e=MarcadorRival>50?MarcadorRival-50+" Buenas":MarcadorRival+" Malas",TextMarcador.text=o+"\n"+e,TextoCampeon="¡¡ Vamos de vueltas !!",MarcadorNuestro>=PuntosGanar&&MarcadorRival>=PuntosGanar?1==BazaNuestraGlobal?(MarcadorPartidasNuestro++,GrabarResultado(SoyElJugador,MarcadorPartidasNuestro+MarcadorPartidasRival-1,SonVueltas,1,!1,!1,!1,!1),MarcadorPartidasNuestro==PartidasCoto?(TextoCampeon="¡¡ Ganamos la partida\n y el coto !!",ReproducirSonido("_Campeones")):(TextoCampeon="¡¡ Ganamos la partida !!",ReproducirSonido("_Campeones"))):(MarcadorPartidasRival++,GrabarResultado(SoyElJugador,MarcadorPartidasNuestro+MarcadorPartidasRival-1,SonVueltas,2,!1,!1,!1,!1),MarcadorPartidasRival==PartidasCoto?(TextoCampeon="¡¡ Perdimos el coto  :(  !!",ReproducirSonido("_OtraVezSera")):(TextoCampeon="Hemos perdido la partida.\n ¡¡ A por ellos !!",ReproducirSonido("_OtraVezSera"))):(MarcadorNuestro>=PuntosGanar&&(MarcadorPartidasNuestro++,GrabarResultado(SoyElJugador,MarcadorPartidasNuestro+MarcadorPartidasRival-1,SonVueltas,1,!1,!1,!1,!1),MarcadorPartidasNuestro==PartidasCoto?(TextoCampeon="¡¡ Ganamos la partida\n y el coto !!",ContadorNoticia=0,ReproducirSonido("_Campeones")):(TextoCampeon="¡¡ Ganamos la partida !!",ReproducirSonido("_Campeones"))),MarcadorRival>=PuntosGanar&&(MarcadorPartidasRival++,GrabarResultado(SoyElJugador,MarcadorPartidasNuestro+MarcadorPartidasRival-1,SonVueltas,2,!1,!1,!1,!1),MarcadorPartidasRival==PartidasCoto?(TextoCampeon="¡¡ Perdimos el coto  :(  !!",ContadorNoticia=0,ReproducirSonido("_OtraVezSera")):(TextoCampeon="Hemos perdido la partida.\n ¡¡ A por ellos !!",ReproducirSonido("_OtraVezSera")))),MarcadorPartidasNuestro==PartidasCoto||MarcadorPartidasRival==PartidasCoto){var n;1==ModoMultijugador&&1==EstoyConectado()&&socket.emit("NoResta",socket.id,Habitacion),n=MarcadorPartidasNuestro==PartidasCoto?"Copa":"Perder";var i=game_objeto.add.image(game_objeto.world.width+500,game_objeto.world.centerY,n);i.anchor.setTo(.5,.5),(twRec1=game_objeto.add.tween(i).to({x:game_objeto.world.centerX},1e3,EfectoTweenRebote,!0)).onComplete.add(function(){ReproducirSonido("_CotoTerminado"),game_objeto.add.tween(i).to({alpha:0},0,EfectoTween1,!0,3e3),i.destroy()})}(a=EscribirTextoGuay(TextoCampeon,60)).anchor.setTo(.5,.5);var l=1e3,d=2e3;if(1==vReconectando)var l=0,d=0;(twRec1=game_objeto.add.tween(a).to({alpha:0},l,EfectoTween1,!0,d)).onComplete.add(function(){a.destroy();var n=document.getElementById("Clasificacion").rows[1].cells;n[1].innerHTML=o,n[2].innerHTML=MarcadorPartidasNuestro,(n=document.getElementById("Clasificacion").rows[2].cells)[1].innerHTML=e,n[2].innerHTML=MarcadorPartidasRival,document.getElementById("DivResultado").style.display="block",1==t&&(MarcadorNuestro=0,MarcadorRival=0);var i=0,l=3e3;if(1==vReconectando)var i=0,l=0;(twRec2=game_objeto.add.tween(a).to({alpha:0},i,EfectoTween1,!0,l)).onComplete.add(function(){document.getElementById("DivResultado").style.display="none",MarcadorPartidasNuestro==PartidasCoto||MarcadorPartidasRival==PartidasCoto?MatarConexionDeMentira():(SemaforoRepartos.splice(0,100),SemaforoTextoPuntuacion.splice(0,100),FinalizandoPartida=!1,game_objeto.time.removeAll(),CrearTimers(),0==vReconectando&&0==ArrayTareas.length?NuevaPartida(r):(timerNuevaPartida.loop(1e3,function(){ArrayTareas.length>0&&"baraja_desde_server"==ArrayTareas[0].Mensaje&&(timerNuevaPartida.stop(),Recuperarse(!1,!0,!1))}),timerNuevaPartida.start()))})})}),i.start()}},MatarConexion=function(){try{MuestraErrorDesconexion=!1,socket.disconnect(),socket=void 0,Habitacion=Math.floor(Math.random()),IntentosReconexion=5}catch(a){}Habitacion=Math.floor(Math.random()),game_objeto.state.start("Level")},MatarConexionDeMentira=function(){Habitacion=Math.floor(Math.random()),LimpiarVariablesConexionNueva(),LimpiarVariables(),game_objeto.state.start("Level")},LimpiarSprites=function(){var a;for(ObjTurnoR.visible=!1,ObjTurnoL.visible=!1,ObjTurnoU.visible=!1,ObjTurnoD.visible=!1,a=0;a<=Mazo.length-1;a++)try{Mazo[a].cartilla.destroy()}catch(a){MensajeError("Destroy error")}for(a=0;a<=MazoR.length-1;a++)try{MazoR[a].cartilla.destroy()}catch(a){MensajeError("Destroy error")}for(a=0;a<=MazoL.length-1;a++)try{MazoL[a].cartilla.destroy()}catch(a){MensajeError("Destroy error")}for(a=0;a<=MazoU.length-1;a++)try{MazoU[a].cartilla.destroy()}catch(a){MensajeError("Destroy error")}for(a=0;a<=MazoD.length-1;a++)try{MazoD[a].cartilla.destroy()}catch(a){MensajeError("Destroy error")}for(a=0;a<=MazoCentral.length-1;a++)try{MazoCentral[a].cartilla.destroy()}catch(a){MensajeError("Destroy error")}for(a=0;a<=MazoCentral.length-1;a++)try{MazoCentral[a].cartilla.destroy()}catch(a){MensajeError("Destroy error")}for(a=0;a<=CartaTriunfo.length-1;a++)try{CartaTriunfo[a].cartilla.destroy()}catch(a){MensajeError("Destroy error")}for(a=0;a<=MazoRecogido.length-1;a++)try{MazoRecogido[a].destroy()}catch(a){MensajeError("Destroy error")}for(a=0;a<=MazoRecogidoRival.length-1;a++)try{MazoRecogidoRival[a].destroy()}catch(a){MensajeError("Destroy error")}Mazo.splice(0,100),MazoR.splice(0,100),MazoL.splice(0,100),MazoU.splice(0,100),MazoD.splice(0,100),MazoCentral.splice(0,100),CartaTriunfo.splice(0,100),MazoRecogido.splice(0,100),MazoRecogidoRival.splice(0,100),GrupoD.removeAll(),GrupoL.removeAll(),GrupoR.removeAll(),GrupoU.removeAll(),GrupoMazo.removeAll(),GrupoCentral.removeAll(),GrupoUltimaBaza.removeAll(),Grupo7.removeAll(),GrupoTextos.removeAll(),twText.isRunning||twTextbis.isRunning||twText2.isRunning||twText2bis.isRunning||twMensajeError.isRunning||game_objeto.tweens.removeAll()},LimpiarVariables=function(){var a;for(BucleManoCentro=0,vNoEsta=!1,FinalizandoPartida=!1,PartidaComenzada=!1,RepartoFinalizado=!1,0==ArrayTareas.length&&(BloquearTirada=!1),BotonesPartidaBloqueados=!1,Noticia.visible=!1,TextMarcador.visible=!1,TextTituloMarcador.visible=!1,BotonCantar.visible=!1,BotonSiete.visible=!1,textoContador.text="",ObjTurnoR.visible=!1,ObjTurnoL.visible=!1,ObjTurnoU.visible=!1,ObjTurnoD.visible=!1,BotonHablarOn.visible=!1,BotonHablarOff.visible=!1,BotonEscribir.visible=!1,log(!0,"Limpiando variables.."),a=0;a<=Mazo.length-1;a++)try{Mazo[a].cartilla.destroy()}catch(a){MensajeError("Destroy error")}for(a=0;a<=MazoR.length-1;a++)try{MazoR[a].cartilla.destroy()}catch(a){MensajeError("Destroy error")}for(a=0;a<=MazoL.length-1;a++)try{MazoL[a].cartilla.destroy()}catch(a){MensajeError("Destroy error")}for(a=0;a<=MazoU.length-1;a++)try{MazoU[a].cartilla.destroy()}catch(a){MensajeError("Destroy error")}for(a=0;a<=MazoD.length-1;a++)try{MazoD[a].cartilla.destroy()}catch(a){MensajeError("Destroy error")}for(a=0;a<=MazoCentral.length-1;a++)try{MazoCentral[a].cartilla.destroy()}catch(a){MensajeError("Destroy error")}for(a=0;a<=MazoCentral.length-1;a++)try{MazoCentral[a].cartilla.destroy()}catch(a){MensajeError("Destroy error")}for(a=0;a<=CartaTriunfo.length-1;a++)try{CartaTriunfo[a].cartilla.destroy()}catch(a){MensajeError("Destroy error")}for(a=0;a<=MazoRecogido.length-1;a++)try{MazoRecogido[a].destroy()}catch(a){MensajeError("Destroy error")}for(a=0;a<=MazoRecogidoRival.length-1;a++)try{MazoRecogidoRival[a].destroy()}catch(a){MensajeError("Destroy error")}BotonCantar.loadTexture("Boton_cantar_off",0),BotonSiete.loadTexture("Boton_cambiar_7_off",0),ArrayAccionesDesconexiones.splice(0,1e3),Mazo.splice(0,100),MazoEnviar.splice(0,100),MazoR.splice(0,100),MazoL.splice(0,100),MazoU.splice(0,100),MazoD.splice(0,100),Mazoposiciones.splice(0,100),MazoCentral.splice(0,100),MazoCentralBuffer.splice(0,100),MazoCentralBufferEspecial7.splice(0,100),CartaTriunfo.splice(0,100),MazoRecogido.splice(0,100),MazoRecogidoApoyo.splice(0,100),MazoRecogidoRival.splice(0,100),SemaforoRondas.splice(0,100),SemaforoAvatars.splice(0,100),vRonda=1,vRondaApoyo=1,RondaJugada.splice(0,100),BazaNuestraGlobal=!1,RegistrarCantes.splice(0,100),UltimaBazaNuestra.splice(0,100),UltimaBazaRival.splice(0,100),ArrayDescartePosible.splice(0,100),log(!0,"Fin limpiando variables..")},LimpiarVariablesConexionNueva=function(){BotonesPartidaBloqueados=!1,BucleManoCentro=0,vReconectando=!1,vNoEsta=!1,FinalizandoPartida=!1,ObjTurnoR.visible=!1,ObjTurnoL.visible=!1,ObjTurnoU.visible=!1,ObjTurnoD.visible=!1,BloquearTirada=!1,log(!0,"Limpiando variables conexión nueva.."),Habitacion=Math.floor(Math.random()),OcultaClasificacion(),SemaforoRepartos.splice(0,100),SemaforoTextoPuntuacion.splice(0,100),ArrayTareas.splice(0,1e4),ArrayTareasBuffer.splice(0,1e4),ArrayBloqueoTareas.splice(0,1e4),ArrayAccionesDesconexiones.splice(0,1e3),TextMarcador.visible=!1,TextTituloMarcador.visible=!1,textoContador.text="",BotonCantar.visible=!1,BotonSiete.visible=!1,MarcadorNuestro=0,MarcadorRival=0,MarcadorPartidasNuestro=0,MarcadorPartidasRival=0,ArrayDelaPropiaSala.splice(0,1e3),ArrayJugadoresDesconectados.splice(0,1e3),ArrayChatDeshabilitado.splice(0,1e3),QuienTomaElControl=0,PartidaComenzada=!1,RepartoFinalizado=!1,SonVueltas=!1,vRonda=1,vRondaApoyo=1,vTurno=1},ComunBarajas=function(){GrupoD=game_objeto.add.group(),GrupoL=game_objeto.add.group(),GrupoR=game_objeto.add.group(),GrupoU=game_objeto.add.group(),GrupoMazo=game_objeto.add.group(),GrupoCentral=game_objeto.add.group(),GrupoUltimaBaza=game_objeto.add.group(),Grupo7=game_objeto.add.group(),(GrupoTextos=game_objeto.add.group()).add(textEsperando),game_objeto.world.bringToTop(GrupoTextos),GrupoTextos.add(textListos),game_objeto.world.bringToTop(GrupoTextos),twBocadillo=game_objeto.add.tween(CartaDummie),twFondoNegro=game_objeto.add.tween(CartaDummie),twRec1=game_objeto.add.tween(CartaDummie),twRec2=game_objeto.add.tween(CartaDummie),twRec3=game_objeto.add.tween(CartaDummie),tw1=game_objeto.add.tween(CartaDummie),tw2=game_objeto.add.tween(CartaDummie),tw3=game_objeto.add.tween(CartaDummie),tw4=game_objeto.add.tween(CartaDummie),twRecoger1=game_objeto.add.tween(CartaDummie),twRecoger2=game_objeto.add.tween(CartaDummie),twRecoger3=game_objeto.add.tween(CartaDummie),twRecoger4=game_objeto.add.tween(CartaDummie),twPeq1=game_objeto.add.tween(CartaDummie),twPeq2=game_objeto.add.tween(CartaDummie),twPeq3=game_objeto.add.tween(CartaDummie),twPeq4=game_objeto.add.tween(CartaDummie),twText=game_objeto.add.tween(CartaDummie),twTextbis=game_objeto.add.tween(CartaDummie),twText2=game_objeto.add.tween(CartaDummie),twText2bis=game_objeto.add.tween(CartaDummie),twMensajeError=game_objeto.add.tween(CartaDummie)},NuevaPartida=function(a){var o,e,t=a;if(0==ModoMultijugador)CrearBaraja(t);else if(t==SoyElJugador||QuienTomaElControl==SoyElJugador){for(e=!1,o=0;o<=ArrayJugadoresDesconectados.length-1;o++)ArrayJugadoresDesconectados[o].Jugador==t&&(e=!0);t!=SoyElJugador&&1!=e||(CrearBaraja(t),log(!1,MazoEnviar.length),1==ModoMultijugador&&(log(!0,"... y la envío"),log(!0,"Envío que reparte: "+t),EnviarBaraja(MazoEnviar,Habitacion,t,SonVueltas,ArrayDelaPropiaSala,MarcadorPartidasNuestro+MarcadorPartidasRival)))}},LimpiandoPartida=function(){textoContador.text="",PartidaComenzada=!1,RepartoFinalizado=!1,timerturno.stop(),timer.stop(),BotonCantar.loadTexture("Boton_cantar_off",0),BotonSiete.loadTexture("Boton_cambiar_7_off",0),BotonCantar.visible=!1,BotonSiete.visible=!1},HabilitarVerUltimaBaza=function(a){a.inputEnabled=!0,a.input.disableDrag(),a.events.onInputDown.add(MuestraUltimaBaza)},DeshabilitarVerUltimaBaza=function(a){a.inputEnabled=!1},MuestraUltimaBaza=function(a){log(!1,"mostrando �ltima Baza");var o,e,t="Nuestro",r=!1;for(MazoMostrar=[],o=0;o<=MazoRecogido.length-1;o++)if(MazoRecogido[o].bringToTop(),a.name==MazoRecogido[o].name){r=!0,t="Nuestro";break}if(1==r)e=UltimaBazaNuestra;else{for(o=0;o<=MazoRecogidoRival.length-1;o++)if(a.name==MazoRecogidoRival[o].name){r=!0,t="Rival";break}1==r&&(e=UltimaBazaRival)}for(o=0;o<=e.length-1;o++)MazoMostrar.push(e[o]),GrupoUltimaBaza.add(MazoMostrar[o]),MostrarAnverso(MazoMostrar[o]),MazoMostrar[o].bringToTop();if(1==r){for(o=0;o<=MazoCentral.length-1;o++)MazoCentral[o].cartilla.alpha=.2;try{twUB1=game_objeto.add.tween(MazoMostrar[0].scale),twUB1.to({x:vEscalaUltimaBaza,y:vEscalaUltimaBaza,angle:0},vVelocidadCartasReordernar,EfectoTween1),twUB1.start(),twUB1=game_objeto.add.tween(MazoMostrar[0]),twUB1.to({x:game_objeto.world.centerX,y:CentroIrreal,angle:0},vVelocidadCartasReordernar,EfectoTween1),twUB1.start(),twUB1=game_objeto.add.tween(MazoMostrar[1].scale),twUB1.to({x:vEscalaUltimaBaza,y:vEscalaUltimaBaza,angle:0},vVelocidadCartasReordernar,EfectoTween1),twUB1.start(),twUB1=game_objeto.add.tween(MazoMostrar[1]),twUB1.to({x:game_objeto.world.centerX+1*AnchoCarta+vSeparacion,y:CentroIrreal,angle:0},vVelocidadCartasReordernar,EfectoTween1),twUB1.start(),twUB1=game_objeto.add.tween(MazoMostrar[2].scale),twUB1.to({x:vEscalaUltimaBaza,y:vEscalaUltimaBaza,angle:0},vVelocidadCartasReordernar,EfectoTween1),twUB1.start(),twUB1=game_objeto.add.tween(MazoMostrar[2]),twUB1.to({x:game_objeto.world.centerX+2*AnchoCarta+2*vSeparacion,y:CentroIrreal,angle:0},vVelocidadCartasReordernar,EfectoTween1),twUB1.start(),twUB1=game_objeto.add.tween(MazoMostrar[3].scale),twUB1.to({x:vEscalaUltimaBaza,y:vEscalaUltimaBaza,angle:0},vVelocidadCartasReordernar,EfectoTween1),twUB1.start(),twUB1=game_objeto.add.tween(MazoMostrar[3]),twUB1.to({x:game_objeto.world.centerX+3*AnchoCarta+3*vSeparacion,y:CentroIrreal,angle:0},vVelocidadCartasReordernar,EfectoTween1),twUB1.onComplete.add(function(){EfectoHacerPequenasUltimaBaza(MazoMostrar,t)}),twUB1.start()}catch(a){}}},EfectoHacerPequenasUltimaBaza=function(a,o){twUB1=game_objeto.add.tween(a[0].scale),twUB1.to({x:vEscalaPequenas,y:vEscalaPequenas},vVelocidadCartasReordernar,EfectoTween1,!1,500),twUB1.start(),twUB1=game_objeto.add.tween(a[1].scale),twUB1.to({x:vEscalaPequenas,y:vEscalaPequenas},vVelocidadCartasReordernar,EfectoTween1,!1,500),twUB1.start(),twUB1=game_objeto.add.tween(a[2].scale),twUB1.to({x:vEscalaPequenas,y:vEscalaPequenas},vVelocidadCartasReordernar,EfectoTween1,!1,500),twUB1.start(),twUB1=game_objeto.add.tween(a[3].scale),twUB1.to({x:vEscalaPequenas,y:vEscalaPequenas},vVelocidadCartasReordernar,EfectoTween1,!1,500),twUB1.onComplete.add(function(){EfectoRecogerUltimaBaza(a,o)}),twUB1.start()},EfectoRecogerUltimaBaza=function(a,o){var e,t;for("Nuestro"==o?(e=devuelveX("ULTIMA_Baza",0),t=devuelveY("ULTIMA_Baza",0)):(e=devuelveX("ULTIMA_Baza_Rival",0),t=devuelveY("ULTIMA_Baza_Rival",0)),MostrarReverso(a[0]),MostrarReverso(a[1]),MostrarReverso(a[2]),MostrarReverso(a[3]),twUB1=game_objeto.add.tween(a[0]),a[0].alpha=1,twUB1.to({x:e,y:t,angle:Math.floor(360*Math.random())+1},vVelocidadCartasReordernar,EfectoTween1),twUB1.start(),twUB1=game_objeto.add.tween(a[1]),a[1].alpha=1,twUB1.to({x:e,y:t,angle:Math.floor(360*Math.random())+1},vVelocidadCartasReordernar,EfectoTween1),twUB1.start(),twUB1=game_objeto.add.tween(a[2]),a[2].alpha=1,twUB1.to({x:e,y:t,angle:Math.floor(360*Math.random())+1},vVelocidadCartasReordernar,EfectoTween1),twUB1.start(),twUB1=game_objeto.add.tween(a[3]),a[3].alpha=1,twUB1.to({x:e,y:t,angle:Math.floor(360*Math.random())+1},vVelocidadCartasReordernar,EfectoTween1),twUB1.start(),i=0;i<=MazoCentral.length-1;i++)MazoCentral[i].cartilla.alpha=1},quakeEnd=function(){var a=game_objeto.world.width+-100,o=game_objeto.world.height+-100;game_objeto.world.setBounds(0,0,a,o),game_objeto.world.camera.position.set(0,0)},OcultaClasificacion=function(){document.getElementById("DivResultado").style.display="none"},EnviarBaraja=function(a,o,e,t,r,n){Date.now();var i=[];i.splice(0,1e3);var l=1e5*Math.random(),d=new function(a,o,e,t,r,n,i,l,d,s,c){this.MazoEnviar=a,this.Habitacion=o,this.QuienReparte=e,this.SonVueltas=t,this.ArrayDelaPropiaSala=r,this.Partida=n,this.idPartida=i,this.IdMsg=l,this.ClientId=d,this.SalaID=s,this.Mensaje=c,this.Fecha=new Date(Date.now())}(a,o,e,t,r,n,idPartida=l,l,socket.id,o,"enviar baraja");ArrayAccionesDesconexiones.push(d),i.push(d),socket.emit("enviar baraja",i[0],function(a){EliminarColaMensajes(a,"enviar baraja")}),i.splice(0,1e3)},Repartir_Desde_Abajo=function(a){Repartir_Desde_Abajo_D1(a)},Repartir_Desde_Abajo_U1=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null)),ReproducirSonido("_Reparto");try{var o=devuelveX("U",0),e=devuelveY("U",0);(tw1=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),tw1.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Abajo_U2(a)}),tw1.start(),Mazo.pop()}catch(a){}},Repartir_Desde_Abajo_U2=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null)),ReproducirSonido("_Reparto");var o=devuelveX("U",1),e=devuelveY("U",1);(tw2=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),tw2.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Abajo_U3(a)}),tw2.start(),Mazo.pop()},Repartir_Desde_Abajo_U3=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null)),ReproducirSonido("_Reparto");var o=devuelveX("U",2),e=devuelveY("U",2);(tw3=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),tw3.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Abajo_L1(a)}),tw3.start(),Mazo.pop()},Repartir_Desde_Abajo_L1=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null)),ReproducirSonido("_Reparto");var o=devuelveX("L",0),e=devuelveY("L",0);(tw4=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),tw4.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Abajo_L2(a)}),tw4.start(),Mazo.pop()},Repartir_Desde_Abajo_L2=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null)),ReproducirSonido("_Reparto");var o=devuelveX("L",1),e=devuelveY("L",1);(twEsp7=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),twEsp7.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Abajo_L3(a)}),twEsp7.start(),Mazo.pop()},Repartir_Desde_Abajo_L3=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null)),ReproducirSonido("_Reparto");var o=devuelveX("L",2),e=devuelveY("L",2);(twReu=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),twReu.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Abajo_D4(a)}),twReu.start(),Mazo.pop()},Repartir_Desde_Abajo_D1=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null)),MostrarAnverso(Mazo[Mazo.length-1].cartilla);try{ReproducirSonido("_Reparto"),1==SonVueltas?(TextMarcador.visible=!0,TextTituloMarcador.visible=!0,ReproducirSonido("_Vueltas")):ReproducirSonido("_Idas");var o=devuelveX("D",0),e=devuelveY("D",0);(twRec1=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),twRec1.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Abajo_D2(a)}),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),twRec1.start(),Mazo.pop()}catch(a){}},Repartir_Desde_Abajo_D2=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",1),e=devuelveY("D",1);(twRec2=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),twRec2.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Abajo_D3(a)}),twRec2.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Abajo_D3=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",2),e=devuelveY("D",2);(twRec3=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),twRec3.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Abajo_R1(a)}),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),twRec3.start(),Mazo.pop()},Repartir_Desde_Abajo_R1=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null)),ReproducirSonido("_Reparto");var o=devuelveX("R",0),e=devuelveY("R",0),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Abajo_R2(a)}),t.start(),Mazo.pop()},Repartir_Desde_Abajo_R2=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null)),ReproducirSonido("_Reparto");var o=devuelveX("R",1),e=devuelveY("R",1),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Abajo_R3(a)}),t.start(),Mazo.pop()},Repartir_Desde_Abajo_R3=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null)),ReproducirSonido("_Reparto");var o=devuelveX("R",2),e=devuelveY("R",2),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Abajo_U1(a)}),t.start(),Mazo.pop()},Repartir_Desde_Abajo_U4=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null)),ReproducirSonido("_Reparto");var o=devuelveX("U",3),e=devuelveY("U",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Abajo_U5(a)}),t.start(),Mazo.pop()},Repartir_Desde_Abajo_U5=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null)),ReproducirSonido("_Reparto");var o=devuelveX("U",4),e=devuelveY("U",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Abajo_U6(a)}),t.start(),Mazo.pop()},Repartir_Desde_Abajo_U6=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null)),ReproducirSonido("_Reparto");var o=devuelveX("U",5),e=devuelveY("U",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Abajo_L4(a)}),t.start(),Mazo.pop()},Repartir_Desde_Abajo_L4=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null)),ReproducirSonido("_Reparto");var o=devuelveX("L",3),e=devuelveY("L",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Abajo_L5(a)}),t.start(),Mazo.pop()},Repartir_Desde_Abajo_L5=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null)),ReproducirSonido("_Reparto");var o=devuelveX("L",4),e=devuelveY("L",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Abajo_L6(a)}),t.start(),Mazo.pop()},Repartir_Desde_Abajo_L6=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null)),ReproducirSonido("_Reparto");var o=devuelveX("L",5),e=devuelveY("L",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),SacaTriunfo(a)}),t.start(),Mazo.pop()},Repartir_Desde_Abajo_D4=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",3),e=devuelveY("D",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Abajo_D5(a)}),t.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Abajo_D5=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",4),e=devuelveY("D",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Abajo_D6(a)}),t.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Abajo_D6=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",5),e=devuelveY("D",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Abajo_R4(a)}),t.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Abajo_R4=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null)),ReproducirSonido("_Reparto");var o=devuelveX("R",3),e=devuelveY("R",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Abajo_R5(a)}),t.start(),Mazo.pop()},Repartir_Desde_Abajo_R5=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null)),ReproducirSonido("_Reparto");var o=devuelveX("R",4),e=devuelveY("R",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Abajo_R6(a)}),t.start(),Mazo.pop()},Repartir_Desde_Abajo_R6=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null)),ReproducirSonido("_Reparto");var o=devuelveX("R",5),e=devuelveY("R",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Abajo_U4(a)}),t.start(),Mazo.pop()},Repartir_Desde_Arriba=function(a){Repartir_Desde_Arriba_U1(a)},Repartir_Desde_Arriba_U1=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null)),ReproducirSonido("_Reparto"),1==SonVueltas?(TextMarcador.visible=!0,TextTituloMarcador.visible=!0,ReproducirSonido("_Vueltas")):ReproducirSonido("_Idas");var o=devuelveX("U",0),e=devuelveY("U",0);(tw1=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),tw1.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Arriba_U2(a)}),tw1.start(),Mazo.pop()},Repartir_Desde_Arriba_U2=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null)),ReproducirSonido("_Reparto");var o=devuelveX("U",1),e=devuelveY("U",1);(tw2=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),tw2.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Arriba_U3(a)}),tw2.start(),Mazo.pop()},Repartir_Desde_Arriba_U3=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null)),ReproducirSonido("_Reparto");var o=devuelveX("U",2),e=devuelveY("U",2);(tw3=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),tw3.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Arriba_L1(a)}),tw3.start(),Mazo.pop()},Repartir_Desde_Arriba_L1=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null)),ReproducirSonido("_Reparto");var o=devuelveX("L",0),e=devuelveY("L",0);(tw4=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),tw4.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Arriba_L2(a)}),tw4.start(),Mazo.pop()},Repartir_Desde_Arriba_L2=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null)),ReproducirSonido("_Reparto");var o=devuelveX("L",1),e=devuelveY("L",1);(twEsp7=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),twEsp7.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Arriba_L3(a)}),twEsp7.start(),Mazo.pop()},Repartir_Desde_Arriba_L3=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null)),ReproducirSonido("_Reparto");var o=devuelveX("L",2),e=devuelveY("L",2);(twReu=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),twReu.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Arriba_D1(a)}),twReu.start(),Mazo.pop()},Repartir_Desde_Arriba_D1=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",0),e=devuelveY("D",0);(twRec1=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),twRec1.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Arriba_D2(a)}),twRec1.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Arriba_D2=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",1),e=devuelveY("D",1);(twRec2=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),twRec2.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Arriba_D3(a)}),twRec2.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Arriba_D3=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",2),e=devuelveY("D",2);(twRec3=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),twRec3.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Arriba_R1(a)}),twRec3.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Arriba_R1=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null)),ReproducirSonido("_Reparto");var o=devuelveX("R",0),e=devuelveY("R",0),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Arriba_R2(a)}),t.start(),Mazo.pop()},Repartir_Desde_Arriba_R2=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null)),ReproducirSonido("_Reparto");var o=devuelveX("R",1),e=devuelveY("R",1),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Arriba_R3(a)}),t.start(),Mazo.pop()},Repartir_Desde_Arriba_R3=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null)),ReproducirSonido("_Reparto");var o=devuelveX("R",2),e=devuelveY("R",2),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Arriba_U4(a)}),t.start(),Mazo.pop()},Repartir_Desde_Arriba_U4=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null)),ReproducirSonido("_Reparto");var o=devuelveX("U",3),e=devuelveY("U",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Arriba_U5(a)}),t.start(),Mazo.pop()},Repartir_Desde_Arriba_U5=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null)),ReproducirSonido("_Reparto");var o=devuelveX("U",4),e=devuelveY("U",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Arriba_U6(a)}),t.start(),Mazo.pop()},Repartir_Desde_Arriba_U6=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null)),ReproducirSonido("_Reparto");var o=devuelveX("U",5),e=devuelveY("U",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Arriba_L4(a)}),t.start(),Mazo.pop()},Repartir_Desde_Arriba_L4=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null)),ReproducirSonido("_Reparto");var o=devuelveX("L",3),e=devuelveY("L",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Arriba_L5(a)}),t.start(),Mazo.pop()},Repartir_Desde_Arriba_L5=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null)),ReproducirSonido("_Reparto");var o=devuelveX("L",4),e=devuelveY("L",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Arriba_L6(a)}),t.start(),Mazo.pop()},Repartir_Desde_Arriba_L6=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null)),ReproducirSonido("_Reparto");var o=devuelveX("L",5),e=devuelveY("L",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Arriba_D4(a)}),t.start(),Mazo.pop()},Repartir_Desde_Arriba_D4=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",3),e=devuelveY("D",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Arriba_D5(a)}),t.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Arriba_D5=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",4),e=devuelveY("D",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Arriba_D6(a)}),t.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Arriba_D6=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",5),e=devuelveY("D",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Arriba_R4(a)}),t.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Arriba_R4=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null)),ReproducirSonido("_Reparto");var o=devuelveX("R",3),e=devuelveY("R",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Arriba_R5(a)}),t.start(),Mazo.pop()},Repartir_Desde_Arriba_R5=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null)),ReproducirSonido("_Reparto");var o=devuelveX("R",4),e=devuelveY("R",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Arriba_R6(a)}),t.start(),Mazo.pop()},Repartir_Desde_Arriba_R6=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null)),ReproducirSonido("_Reparto");var o=devuelveX("R",5),e=devuelveY("R",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),SacaTriunfo(a)}),t.start(),Mazo.pop()},Repartir_Desde_Derecha=function(a){Repartir_Desde_Derecha_R1(a)},Repartir_Desde_Derecha_U1=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null)),ReproducirSonido("_Reparto");var o=devuelveX("U",0),e=devuelveY("U",0);(tw1=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),tw1.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Derecha_U2(a)}),tw1.start(),Mazo.pop()},Repartir_Desde_Derecha_U2=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null)),ReproducirSonido("_Reparto");var o=devuelveX("U",1),e=devuelveY("U",1);(tw2=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),tw2.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Derecha_U3(a)}),tw2.start(),Mazo.pop()},Repartir_Desde_Derecha_U3=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null)),ReproducirSonido("_Reparto");var o=devuelveX("U",2),e=devuelveY("U",2);(tw3=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),tw3.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Derecha_L1(a)}),tw3.start(),Mazo.pop()},Repartir_Desde_Derecha_L1=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null)),ReproducirSonido("_Reparto");var o=devuelveX("L",0),e=devuelveY("L",0);(tw4=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),tw4.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Derecha_L2(a)}),tw4.start(),Mazo.pop()},Repartir_Desde_Derecha_L2=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null)),ReproducirSonido("_Reparto");var o=devuelveX("L",1),e=devuelveY("L",1);(twEsp7=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),twEsp7.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Derecha_L3(a)}),twEsp7.start(),Mazo.pop()},Repartir_Desde_Derecha_L3=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null)),ReproducirSonido("_Reparto");var o=devuelveX("L",2),e=devuelveY("L",2);(twRec1=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),twRec1.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Derecha_D1(a)}),twRec1.start(),Mazo.pop()},Repartir_Desde_Derecha_D1=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",0),e=devuelveY("D",0);(twRec2=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),twRec2.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Derecha_D2(a)}),twRec2.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Derecha_D2=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",1),e=devuelveY("D",1);(twReu=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),twReu.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Derecha_D3(a)}),twReu.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Derecha_D3=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",2),e=devuelveY("D",2);(twRec3=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),twRec3.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Derecha_R4(a)}),twRec3.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Derecha_R1=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null)),ReproducirSonido("_Reparto"),1==SonVueltas?(TextMarcador.visible=!0,TextTituloMarcador.visible=!0,ReproducirSonido("_Vueltas")):ReproducirSonido("_Idas");var o=devuelveX("R",0),e=devuelveY("R",0),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Derecha_R2(a)}),t.start(),Mazo.pop()},Repartir_Desde_Derecha_R2=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null)),ReproducirSonido("_Reparto");var o=devuelveX("R",1),e=devuelveY("R",1),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Derecha_R3(a)}),t.start(),Mazo.pop()},Repartir_Desde_Derecha_R3=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null)),ReproducirSonido("_Reparto");var o=devuelveX("R",2),e=devuelveY("R",2),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Derecha_U1(a)}),t.start(),Mazo.pop()},Repartir_Desde_Derecha_U4=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null)),ReproducirSonido("_Reparto");var o=devuelveX("U",3),e=devuelveY("U",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Derecha_U5(a)}),t.start(),Mazo.pop()},Repartir_Desde_Derecha_U5=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null)),ReproducirSonido("_Reparto");var o=devuelveX("U",4),e=devuelveY("U",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Derecha_U6(a)}),t.start(),Mazo.pop()},Repartir_Desde_Derecha_U6=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null)),ReproducirSonido("_Reparto");var o=devuelveX("U",5),e=devuelveY("U",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Derecha_L4(a)}),t.start(),Mazo.pop()},Repartir_Desde_Derecha_L4=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null)),ReproducirSonido("_Reparto");var o=devuelveX("L",3),e=devuelveY("L",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Derecha_L5(a)}),t.start(),Mazo.pop()},Repartir_Desde_Derecha_L5=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null)),ReproducirSonido("_Reparto");var o=devuelveX("L",4),e=devuelveY("L",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Derecha_L6(a)}),t.start(),Mazo.pop()},Repartir_Desde_Derecha_L6=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null)),ReproducirSonido("_Reparto");var o=devuelveX("L",5),e=devuelveY("L",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Derecha_D4(a)}),t.start(),Mazo.pop()},Repartir_Desde_Derecha_D4=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",3),e=devuelveY("D",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Derecha_D5(a)}),t.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Derecha_D5=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",4),e=devuelveY("D",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Derecha_D6(a)}),t.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Derecha_D6=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",5),e=devuelveY("D",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),SacaTriunfo(a)}),t.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Derecha_R4=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null)),ReproducirSonido("_Reparto");var o=devuelveX("R",3),e=devuelveY("R",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Derecha_R5(a)}),t.start(),Mazo.pop()},Repartir_Desde_Derecha_R5=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null)),ReproducirSonido("_Reparto");var o=devuelveX("R",4),e=devuelveY("R",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Derecha_R6(a)}),t.start(),Mazo.pop()},Repartir_Desde_Derecha_R6=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null)),ReproducirSonido("_Reparto");var o=devuelveX("R",5),e=devuelveY("R",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Derecha_U4(a)}),t.start(),Mazo.pop()},Repartir_Desde_Izquierda=function(a){Repartir_Desde_Izquierda_L1(a)},Repartir_Desde_Izquierda_U1=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null)),ReproducirSonido("_Reparto");var o=devuelveX("U",0),e=devuelveY("U",0);(tw1=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),tw1.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Izquierda_U2(a)}),tw1.start(),Mazo.pop()},Repartir_Desde_Izquierda_U2=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null)),ReproducirSonido("_Reparto");var o=devuelveX("U",1),e=devuelveY("U",1);(tw2=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),tw2.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Izquierda_U3(a)}),tw2.start(),Mazo.pop()},Repartir_Desde_Izquierda_U3=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null)),ReproducirSonido("_Reparto");var o=devuelveX("U",2),e=devuelveY("U",2);(tw3=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),tw3.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Izquierda_L4(a)}),tw3.start(),Mazo.pop()},Repartir_Desde_Izquierda_L1=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null)),ReproducirSonido("_Reparto"),1==SonVueltas?(TextMarcador.visible=!0,TextTituloMarcador.visible=!0,ReproducirSonido("_Vueltas")):ReproducirSonido("_Idas");var o=devuelveX("L",0),e=devuelveY("L",0);(tw4=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),tw4.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Izquierda_L2(a)}),tw4.start(),Mazo.pop()},Repartir_Desde_Izquierda_L2=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null)),ReproducirSonido("_Reparto");var o=devuelveX("L",1),e=devuelveY("L",1);(twEsp7=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),twEsp7.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Izquierda_L3(a)}),twEsp7.start(),Mazo.pop()},Repartir_Desde_Izquierda_L3=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null)),ReproducirSonido("_Reparto");var o=devuelveX("L",2),e=devuelveY("L",2);(twReu=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),twReu.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Izquierda_D1(a)}),twReu.start(),Mazo.pop()},Repartir_Desde_Izquierda_D1=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",0),e=devuelveY("D",0);(twRec1=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),twRec1.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Izquierda_D2(a)}),twRec1.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Izquierda_D2=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",1),e=devuelveY("D",1);(twRec2=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),twRec2.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Izquierda_D3(a)}),twRec2.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Izquierda_D3=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",2),e=devuelveY("D",2);(twRec3=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla)).to({x:o,y:e},vVelocidadCartas,EfectoTween2),twRec3.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Izquierda_R1(a)}),twRec3.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Izquierda_R1=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,0,null)),ReproducirSonido("_Reparto");var o=devuelveX("R",0),e=devuelveY("R",0),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Izquierda_R2(a)}),t.start(),Mazo.pop()},Repartir_Desde_Izquierda_R2=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,1,null)),ReproducirSonido("_Reparto");var o=devuelveX("R",1),e=devuelveY("R",1),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Izquierda_R3(a)}),t.start(),Mazo.pop()},Repartir_Desde_Izquierda_R3=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,2,null)),ReproducirSonido("_Reparto");var o=devuelveX("R",2),e=devuelveY("R",2),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Izquierda_U1(a)}),t.start(),Mazo.pop()},Repartir_Desde_Izquierda_U4=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null)),ReproducirSonido("_Reparto");var o=devuelveX("U",3),e=devuelveY("U",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Izquierda_U5(a)}),t.start(),Mazo.pop()},Repartir_Desde_Izquierda_U5=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null)),ReproducirSonido("_Reparto");var o=devuelveX("U",4),e=devuelveY("U",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),Repartir_Desde_Izquierda_U6(a)}),t.start(),Mazo.pop()},Repartir_Desde_Izquierda_U6=function(a){MazoU.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null)),ReproducirSonido("_Reparto");var o=devuelveX("U",5),e=devuelveY("U",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoU.add(MazoU[MazoU.length-1].cartilla),SacaTriunfo(a)}),t.start(),Mazo.pop()},Repartir_Desde_Izquierda_L4=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null)),ReproducirSonido("_Reparto");var o=devuelveX("L",3),e=devuelveY("L",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Izquierda_L5(a)}),t.start(),Mazo.pop()},Repartir_Desde_Izquierda_L5=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null)),ReproducirSonido("_Reparto");var o=devuelveX("L",4),e=devuelveY("L",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Izquierda_L6(a)}),t.start(),Mazo.pop()},Repartir_Desde_Izquierda_L6=function(a){MazoL.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null)),ReproducirSonido("_Reparto");var o=devuelveX("L",5),e=devuelveY("L",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+90},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoL.add(MazoL[MazoL.length-1].cartilla),Repartir_Desde_Izquierda_D4(a)}),t.start(),Mazo.pop()},Repartir_Desde_Izquierda_D4=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",3),e=devuelveY("D",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Izquierda_D5(a)}),t.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Izquierda_D5=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",4),e=devuelveY("D",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Izquierda_D6(a)}),t.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Izquierda_D6=function(a){MazoD.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null)),ReproducirSonido("_Reparto"),MostrarAnverso(Mazo[Mazo.length-1].cartilla);var o=devuelveX("D",5),e=devuelveY("D",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoD.add(MazoD[MazoD.length-1].cartilla),Repartir_Desde_Izquierda_R4(a)}),t.start(),game_objeto.add.tween(Mazo[Mazo.length-1].cartilla.scale).to({x:vEscaladoCarta,y:vEscaladoCarta},vVelocidadCartas,EfectoTween2,!0),Mazo.pop()},Repartir_Desde_Izquierda_R4=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,3,null)),ReproducirSonido("_Reparto");var o=devuelveX("R",3),e=devuelveY("R",3),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Izquierda_R5(a)}),t.start(),Mazo.pop()},Repartir_Desde_Izquierda_R5=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,4,null)),ReproducirSonido("_Reparto");var o=devuelveX("R",4),e=devuelveY("R",4),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Izquierda_R6(a)}),t.start(),Mazo.pop()},Repartir_Desde_Izquierda_R6=function(a){MazoR.push(new Carta(Mazo[Mazo.length-1].palo,Mazo[Mazo.length-1].idCarta,Mazo[Mazo.length-1].valor,Mazo[Mazo.length-1].cartilla,5,null)),ReproducirSonido("_Reparto");var o=devuelveX("R",5),e=devuelveY("R",5),t=game_objeto.add.tween(Mazo[Mazo.length-1].cartilla);t.to({x:o,y:e,angle:Mazo[Mazo.length-1].cartilla.angle+270},vVelocidadCartas,EfectoTween2),t.onComplete.add(function(){GrupoR.add(MazoR[MazoR.length-1].cartilla),Repartir_Desde_Izquierda_U4(a)}),t.start(),Mazo.pop()},window.onload=function(){0==(-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://"))&&Inicia()},Inicia=function(){var a,o;window.innerHeight/window.innerWidth<.68?(a=1366,o=662):(a=1366,o=1024);var e=-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://");ForceSet=1!=e;var t={width:a,height:o,id:"koko",renderer:Phaser.CANVAS,parent:"gamer",transparent:!1,antialias:!0,forceSetTimeOut:ForceSet},r=new Phaser.Game(t);r.state.add("Boot",Boot),r.state.add("Menu",Menu),r.state.add("Preload",Preload),r.state.add("Level",Level),r.state.start("Boot")};var proto=Object.create(Phaser.State);Boot.prototype=proto,Boot.prototype.init=function(){this.input.maxPointers=1,this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL;var a=-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://");this.stage.disableVisibilityChange=1!=a,this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!1},Boot.prototype.preload=function(){this.load.pack("preload","assets/assets-pack.json")},Boot.prototype.create=function(){this.game.state.start("Preload")};var proto=Object.create(Phaser.State);Menu.prototype=proto,Menu.prototype.create=function(){this.startGame()},Menu.prototype.startGame=function(){this.game.state.start("Level")},PosicionCartas=function(a){var o,e;Mazoposiciones.splice(0,1e3),"D"==a&&(e=MazoD),"U"==a&&(e=MazoU),"L"==a&&(e=MazoL),"R"==a&&(e=MazoR);vRonda>5?(log(!1,"INCREIBLE0"),"R"==a||"U"==a?o=e.length+1:(o=e.length+1,log(!1,"INCREIBLE"))):0==e.length?o=6:7==(o=e.length+1)&&(o=6),0==PartidaComenzada&&(o=6);var t=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCartaEscalado-5*vSeparacion+AnchoCartaEscalado)/2+0*(AnchoCartaEscalado+vSeparacion)-AnchoCartaEscalado-AnchoCarta/2+30,r=game_objeto.world.height-AnchoCartaEscalado-30;Mazoposiciones.push(new PosicionesCartas("ULTIMA_Baza",0,t,r));t=1==ModoMultijugador?(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-5*vSeparacion+AnchoCarta)/2+5*(AnchoCarta+vSeparacion)+AnchoCarta-AnchoFoto/2+1.5*AnchoCarta:game_objeto.world.width-AnchoCarta;r=AnchoCarta;Mazoposiciones.push(new PosicionesCartas("ULTIMA_Baza_Rival",0,t,r));var t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCartaEscalado*o-5*vSeparacion+AnchoCartaEscalado)/2+0*(AnchoCartaEscalado+vSeparacion),r=game_objeto.world.height-AnchoCartaEscalado;Mazoposiciones.push(new PosicionesCartas("D",0,t,r-60));var t=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCartaEscalado-5*vSeparacion+AnchoCartaEscalado)/2+0*(AnchoCartaEscalado+vSeparacion),r=game_objeto.world.height-AnchoCartaEscalado;Mazoposiciones.push(new PosicionesCartas("D",98,t,r-60));var t=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCartaEscalado-5*vSeparacion+AnchoCartaEscalado)/2-AnchoCartaEscalado/2,r=game_objeto.world.height-2*AltoCarta-vSeparacion/2;Mazoposiciones.push(new PosicionesCartas("D_0",0,t,r-60));var t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCartaEscalado*o-5*vSeparacion+AnchoCartaEscalado)/2+1*(AnchoCartaEscalado+vSeparacion),r=game_objeto.world.height-AnchoCartaEscalado;Mazoposiciones.push(new PosicionesCartas("D",1,t,r-60));var t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCartaEscalado*o-5*vSeparacion+AnchoCartaEscalado)/2+2*(AnchoCartaEscalado+vSeparacion),r=game_objeto.world.height-AnchoCartaEscalado;Mazoposiciones.push(new PosicionesCartas("D",2,t,r-60));var t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCartaEscalado*o-5*vSeparacion+AnchoCartaEscalado)/2+3*(AnchoCartaEscalado+vSeparacion),r=game_objeto.world.height-AnchoCartaEscalado;Mazoposiciones.push(new PosicionesCartas("D",3,t,r-60));var t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCartaEscalado*o-5*vSeparacion+AnchoCartaEscalado)/2+4*(AnchoCartaEscalado+vSeparacion),r=game_objeto.world.height-AnchoCartaEscalado;Mazoposiciones.push(new PosicionesCartas("D",4,t,r-60));var t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCartaEscalado*o-5*vSeparacion+AnchoCartaEscalado)/2+5*(AnchoCartaEscalado+vSeparacion),r=game_objeto.world.height-AnchoCartaEscalado;Mazoposiciones.push(new PosicionesCartas("D",5,t,r-60));var t=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCartaEscalado-5*vSeparacion+AnchoCartaEscalado)/2+5*(AnchoCartaEscalado+vSeparacion),r=game_objeto.world.height-AnchoCartaEscalado;Mazoposiciones.push(new PosicionesCartas("D_5",0,t,r-60));var t=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCartaEscalado-5*vSeparacion+AnchoCartaEscalado)/2+5*(AnchoCartaEscalado+vSeparacion),r=game_objeto.world.height-AnchoCartaEscalado;if(Mazoposiciones.push(new PosicionesCartas("D",99,t,r-60)),vRonda<=4)t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCarta*o-5*vSeparacion+AnchoCarta)/2+5*(AnchoCarta+vSeparacion);else t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCarta*o-5*vSeparacion+AnchoCarta)/2+5*(AnchoCarta+vSeparacion)-(6-o)*(AnchoCarta+vSeparacion);r=AnchoCarta;Mazoposiciones.push(new PosicionesCartas("U",0,t,r));var t=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-5*vSeparacion+AnchoCarta)/2+4*(AnchoCarta+vSeparacion)+AnchoCarta-AnchoFoto/2,r=2*AnchoCarta;if(Mazoposiciones.push(new PosicionesCartas("U_0",0,t,r)),vRonda<=4)t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCarta*o-5*vSeparacion+AnchoCarta)/2+4*(AnchoCarta+vSeparacion);else t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCarta*o-5*vSeparacion+AnchoCarta)/2+4*(AnchoCarta+vSeparacion)-(6-o)*(AnchoCarta+vSeparacion);r=AnchoCarta;if(Mazoposiciones.push(new PosicionesCartas("U",1,t,r)),vRonda<=4)t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCarta*o-5*vSeparacion+AnchoCarta)/2+3*(AnchoCarta+vSeparacion);else t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCarta*o-5*vSeparacion+AnchoCarta)/2+3*(AnchoCarta+vSeparacion)-(6-o)*(AnchoCarta+vSeparacion);r=AnchoCarta;Mazoposiciones.push(new PosicionesCartas("U",2,t,r));t=AnchoCarta;if(vRonda<=14)r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+0*(AnchoCarta/2+vSeparacion)*1;else r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+0*(AnchoCarta/2+vSeparacion)*1+(0+o)*(AnchoCarta/2+vSeparacion)*1;Mazoposiciones.push(new PosicionesCartas("L",0,t,r));t=AnchoCarta;if(vRonda<=14)r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+1*(AnchoCarta/2+vSeparacion)*1;else r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+1*(AnchoCarta/2+vSeparacion)*1+(0+o)*(AnchoCarta/2+vSeparacion)*1;Mazoposiciones.push(new PosicionesCartas("L",1,t,r));t=AnchoCarta;if(vRonda<=14)r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+2*(AnchoCarta/2+vSeparacion)*1;else r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+2*(AnchoCarta/2+vSeparacion)*1+(0+o)*(AnchoCarta/2+vSeparacion)*1;Mazoposiciones.push(new PosicionesCartas("L",2,t,r));r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*6)/2+2*(AnchoCarta/2+vSeparacion)*1;Mazoposiciones.push(new PosicionesCartas("L_C",0,t,r)),vFormulaAjuste=vSeparacion*(6-o);t=game_objeto.world.width-AnchoCarta;if(vRonda<=4)r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+5*(AnchoCarta/2+vSeparacion)*1;else r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+5*(AnchoCarta/2+vSeparacion)*1-(6-o)*(AnchoCarta/2+vSeparacion)*1-vFormulaAjuste;Mazoposiciones.push(new PosicionesCartas("R",0,t,r));t=game_objeto.world.width-AnchoCarta;if(vRonda<=4)r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+4*(AnchoCarta/2+vSeparacion)*1;else r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+4*(AnchoCarta/2+vSeparacion)*1-(6-o)*(AnchoCarta/2+vSeparacion)*1-vFormulaAjuste;Mazoposiciones.push(new PosicionesCartas("R",1,t,r));t=game_objeto.world.width-AnchoCarta;if(vRonda<=4)r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+3*(AnchoCarta/2+vSeparacion)*1;else r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+3*(AnchoCarta/2+vSeparacion)*1-(6-o)*(AnchoCarta/2+vSeparacion)*1-vFormulaAjuste;Mazoposiciones.push(new PosicionesCartas("R",2,t,r));var t=game_objeto.world.width-AnchoCarta,r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*6)/2+3*(AnchoCarta/2+vSeparacion)*1;if(Mazoposiciones.push(new PosicionesCartas("R_C",0,t,r)),vRonda<=4)t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCarta*o-5*vSeparacion+AnchoCarta)/2+2*(AnchoCarta+vSeparacion);else t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCarta*o-5*vSeparacion+AnchoCarta)/2+2*(AnchoCarta+vSeparacion)-(6-o)*(AnchoCarta+vSeparacion);r=AnchoCarta;if(Mazoposiciones.push(new PosicionesCartas("U",3,t,r)),vRonda<=4)t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCarta*o-5*vSeparacion+AnchoCarta)/2+1*(AnchoCarta+vSeparacion);else t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCarta*o-5*vSeparacion+AnchoCarta)/2+1*(AnchoCarta+vSeparacion)-(6-o)*(AnchoCarta+vSeparacion);r=AnchoCarta;if(Mazoposiciones.push(new PosicionesCartas("U",4,t,r)),vRonda<=4)t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCarta*o-5*vSeparacion+AnchoCarta)/2+0*(AnchoCarta+vSeparacion);else t=(game_objeto.world.width-vHorizontalPorqueSi-AnchoCarta*o-5*vSeparacion+AnchoCarta)/2+0*(AnchoCarta+vSeparacion)-(6-o)*(AnchoCarta+vSeparacion);r=AnchoCarta;Mazoposiciones.push(new PosicionesCartas("U",5,t,r));var t=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-5*vSeparacion+AnchoCarta)/2+0*(AnchoCarta+vSeparacion),r=AnchoCarta;Mazoposiciones.push(new PosicionesCartas("U",99,t,r));var t=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-5*vSeparacion+AnchoCarta)/2+0*(AnchoCarta+vSeparacion),r=AnchoCarta;Mazoposiciones.push(new PosicionesCartas("U_C",0,t,r));t=AnchoCarta;if(vRonda<=14)r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+3*(AnchoCarta/2+vSeparacion)*1;else r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+3*(AnchoCarta/2+vSeparacion)*1+(0+o)*(AnchoCarta/2+vSeparacion)*1;Mazoposiciones.push(new PosicionesCartas("L",3,t,r));t=AnchoCarta;if(vRonda<=14)r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+4*(AnchoCarta/2+vSeparacion)*1;else r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+4*(AnchoCarta/2+vSeparacion)*1+(0+o)*(AnchoCarta/2+vSeparacion)*1;Mazoposiciones.push(new PosicionesCartas("L",4,t,r));t=AnchoCarta;if(vRonda<=14)r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+5*(AnchoCarta/2+vSeparacion)*1;else r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+5*(AnchoCarta/2+vSeparacion)*1+(0+o)*(AnchoCarta/2+vSeparacion)*1;Mazoposiciones.push(new PosicionesCartas("L",5,t,r));var t=vSeparacion+5,r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*6)/2+5*(AnchoCarta/2+vSeparacion)+AnchoCarta/2+vSeparacion;Mazoposiciones.push(new PosicionesCartas("L_0",0,t,r));var t=AnchoCarta,r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*6)/2+5*(AnchoCarta/2+vSeparacion);Mazoposiciones.push(new PosicionesCartas("L",99,t,r));t=game_objeto.world.width-AnchoCarta;if(vRonda<=4)r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+2*(AnchoCarta/2+vSeparacion)*1;else r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+2*(AnchoCarta/2+vSeparacion)*1-(6-o)*(AnchoCarta/2+vSeparacion)*1-vFormulaAjuste;Mazoposiciones.push(new PosicionesCartas("R",3,t,r));t=game_objeto.world.width-AnchoCarta;if(vRonda<=4)r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+1*(AnchoCarta/2+vSeparacion)*1;else r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+1*(AnchoCarta/2+vSeparacion)*1-(6-o)*(AnchoCarta/2+vSeparacion)*1-vFormulaAjuste;Mazoposiciones.push(new PosicionesCartas("R",4,t,r));t=game_objeto.world.width-AnchoCarta;if(vRonda<=4)r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+0*(AnchoCarta/2+vSeparacion)*1;else r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*o)/2+0*(AnchoCarta/2+vSeparacion)*1-(6-o)*(AnchoCarta/2+vSeparacion)*1-vFormulaAjuste;Mazoposiciones.push(new PosicionesCartas("R",5,t,r));var t=game_objeto.world.width-AnchoCarta,r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*6)/2+0*(AnchoCarta/2+vSeparacion)*1;Mazoposiciones.push(new PosicionesCartas("R_5",0,t,r));var t=game_objeto.world.width-2*(AnchoCarta+vSeparacion),r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*6)/2-1*(AnchoCarta/2+vSeparacion)*1;Mazoposiciones.push(new PosicionesCartas("R_0",0,t,r));var t=game_objeto.world.width-AnchoCarta,r=(game_objeto.world.height-vHorizontalDerechaPorqueSi-AnchoCarta/2*6)/2+0*(AnchoCarta/2+vSeparacion);Mazoposiciones.push(new PosicionesCartas("R",99,t,r)),PosicionCartasCentro()},PosicionCartasCentro=function(){posX_D=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-5*vSeparacion+AnchoCarta)/2+4*AnchoCarta,posY_D=CentroIrreal+AnchoCarta-AnchoCarta/5-25,posAngle_D=0,posX_U=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-5*vSeparacion+AnchoCarta)/2+4*AnchoCarta,posY_U=CentroIrreal-AnchoCarta/2-15,posAngle_U=0,posX_L=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-5*vSeparacion+AnchoCarta)/2+4*AnchoCarta-AnchoCarta+AnchoCarta/5,posY_L=CentroIrreal-10,posAngle_L=-90,posX_R=(game_objeto.world.width-vHorizontalPorqueSi-6*AnchoCarta-5*vSeparacion+AnchoCarta)/2+5*AnchoCarta-AnchoCarta/5,posY_R=CentroIrreal-10,posAngle_R=90},CrearTapete=function(){try{textEsperando.visible=!1,1==ModoMultijugador&&MensajeEsperandoListos(),log(!0,"Se destuye. Recibida")}catch(a){log(!0,"No se destuye. Recibida")}if(1==LogicalTapeteRemoto&&1==LogicalDorsoRemoto){a="TapeteRemoto";BackTapete.name=a;try{BackTapete.loadTexture(a,0)}catch(a){log(!0,"No se pudo cargar el tapete remoto."),0==cuatrotres?BackTapete.loadTexture("Tapete"):BackTapete.loadTexture("Tapete_43")}ReversoGlobal="ReversoRemoto"}else{if(0==cuatrotres)a="Tapete";else var a="Tapete_43";BackTapete.name=a;try{BackTapete.loadTexture(a,0)}catch(a){log(!0,"No se pudo cargar el tapete local."),0==cuatrotres?BackTapete.loadTexture("Tapete"):BackTapete.loadTexture("Tapete_43")}ReversoGlobal="Reverso"}LogicalTapeteRemoto=!1,LogicalDorsoRemoto=!1},CrearBaraja=function(a){var o,e,t,r;if(ComunBarajas(),PartidaComenzada=!1,FinalizandoPartida=!1,RepartoFinalizado=!1,0==ModoMultijugador&&(Mazo=[],MazoEnviar=[],TextCuentaMundo.visible=!1,OcultarElegirPareja(),BotonSalir.x=xSalir,BotonSalir.visible=!0,EntradaModoJuego=!0,log(!0,"He repartido yo"),LimpiarVariables(),OcultarFacebook(),1==SonVueltas&&(TextMarcador.visible=!0,TextTituloMarcador.visible=!0),CrearTapete()),0==ModoMultijugador?Mazo.splice(0,100):MazoEnviar.splice(0,100),[12,37,36,35,34,33,32,31,28,27,26,25,24,23,22,9,4,17,16,15,14,13,2,11,1,7,21,18,5,3,38,6,40,19,30,29,39,20,10,8].forEach(function(a,t,n){(o=a)<=10?(e="oros",r=o):o<=20?(e="copas",r=o-10):o<=30?(e="espadas",r=o-20):(e="bastos",r=o-30),log(!1,e),0==ModoMultijugador?Mazo.push(new Carta(e,o,r,null,null,null)):MazoEnviar.push(new Carta(e,o,r,null,null,null))}),Mazo=Phaser.ArrayUtils.shuffle(Mazo),MazoEnviar=Phaser.ArrayUtils.shuffle(MazoEnviar),0==ModoMultijugador){for(t=0;t<=Mazo.length-1;t++){if(0==SiempreBocaArriba)Mazo[t].cartilla=game_objeto.add.image(-100,game_objeto.world.centerY/2,ReversoGlobal);else{var n;n=Mazo[t].idCarta<=9?"A0"+Mazo[t].idCarta:"A"+Mazo[t].idCarta,Mazo[t].cartilla=game_objeto.add.image(-100,game_objeto.world.centerY/2,n)}1==cuatrotres&&(Mazo[t].cartilla.width=1.2*Mazo[t].cartilla.width,Mazo[t].cartilla.height=1.2*Mazo[t].cartilla.height),Mazo[t].cartilla.name=Mazo[t].idCarta,GrupoMazo.add(Mazo[t].cartilla),Mazo[t].cartilla.anchor.setTo(.5,.5),Mazo[t].cartilla.events.onDragUpdate.add(dragUpdate)}PosicionCartas("D"),Esconde_Mazo(a),4==a&&(1==SoyElJugador&&Repartir_Desde_Abajo(!1),2==SoyElJugador&&Repartir_Desde_Izquierda(!1),3==SoyElJugador&&Repartir_Desde_Arriba(!1),4==SoyElJugador&&Repartir_Desde_Derecha(!1)),1==a&&(2==SoyElJugador&&Repartir_Desde_Abajo(!1),3==SoyElJugador&&Repartir_Desde_Izquierda(!1),4==SoyElJugador&&Repartir_Desde_Arriba(!1),1==SoyElJugador&&Repartir_Desde_Derecha(!1)),2==a&&(3==SoyElJugador&&Repartir_Desde_Abajo(!1),4==SoyElJugador&&Repartir_Desde_Izquierda(!1),1==SoyElJugador&&Repartir_Desde_Arriba(!1),2==SoyElJugador&&Repartir_Desde_Derecha(!1)),3==a&&(4==SoyElJugador&&Repartir_Desde_Abajo(!1),1==SoyElJugador&&Repartir_Desde_Izquierda(!1),2==SoyElJugador&&Repartir_Desde_Arriba(!1),3==SoyElJugador&&Repartir_Desde_Derecha(!1)),game_objeto.world.bringToTop(GrupoTextos),5==(vTurno=a+1)&&(vTurno=1),MuestraTurno(),0==ModoMultijugador?PartidaComenzada=!0:PreparaCaracteristicasMano(),game_objeto.world.bringToTop(GrupoD),log(!1,"Soy el "+SoyElJugador+" y reparte "+a)}};var proto=Object.create(Phaser.State);Preload.prototype=proto,Preload.prototype.preload=function(){var a=this.add.image(this.world.centerX,this.world.centerY,"loading");a.anchor.set(.5,.5),this.load.setPreloadSprite(a),this.load.bitmapFont("MiFuenteAmarilla","assets/fonts/font.png","assets/fonts/font.fnt"),this.load.bitmapFont("MiFuenteNegra","assets/fonts/fontblack.png","assets/fonts/fontblack.fnt"),this.load.image("A01","assets/images/Cartas/pro/Oros/1.png",!0),this.load.image("A02","assets/images/Cartas/pro/Oros/2.png",!0),this.load.image("A03","assets/images/Cartas/pro/Oros/3.png",!0),this.load.image("A04","assets/images/Cartas/pro/Oros/4.png",!0),this.load.image("A05","assets/images/Cartas/pro/Oros/5.png",!0),this.load.image("A06","assets/images/Cartas/pro/Oros/6.png",!0),this.load.image("A07","assets/images/Cartas/pro/Oros/7.png",!0),this.load.image("A08","assets/images/Cartas/pro/Oros/10.png",!0),this.load.image("A09","assets/images/Cartas/pro/Oros/11.png",!0),this.load.image("A10","assets/images/Cartas/pro/Oros/12.png",!0),this.load.image("A11","assets/images/Cartas/pro/Copas/1.png",!0),this.load.image("A12","assets/images/Cartas/pro/Copas/2.png",!0),this.load.image("A13","assets/images/Cartas/pro/Copas/3.png",!0),this.load.image("A14","assets/images/Cartas/pro/Copas/4.png",!0),this.load.image("A15","assets/images/Cartas/pro/Copas/5.png",!0),this.load.image("A16","assets/images/Cartas/pro/Copas/6.png",!0),this.load.image("A17","assets/images/Cartas/pro/Copas/7.png",!0),this.load.image("A18","assets/images/Cartas/pro/Copas/10.png",!0),this.load.image("A19","assets/images/Cartas/pro/Copas/11.png",!0),this.load.image("A20","assets/images/Cartas/pro/Copas/12.png",!0),this.load.image("A21","assets/images/Cartas/pro/Espadas/1.png",!0),this.load.image("A22","assets/images/Cartas/pro/Espadas/2.png",!0),this.load.image("A23","assets/images/Cartas/pro/Espadas/3.png",!0),this.load.image("A24","assets/images/Cartas/pro/Espadas/4.png",!0),this.load.image("A25","assets/images/Cartas/pro/Espadas/5.png",!0),this.load.image("A26","assets/images/Cartas/pro/Espadas/6.png",!0),this.load.image("A27","assets/images/Cartas/pro/Espadas/7.png",!0),this.load.image("A28","assets/images/Cartas/pro/Espadas/10.png",!0),this.load.image("A29","assets/images/Cartas/pro/Espadas/11.png",!0),this.load.image("A30","assets/images/Cartas/pro/Espadas/12.png",!0),this.load.image("A31","assets/images/Cartas/pro/Bastos/1.png",!0),this.load.image("A32","assets/images/Cartas/pro/Bastos/2.png",!0),this.load.image("A33","assets/images/Cartas/pro/Bastos/3.png",!0),this.load.image("A34","assets/images/Cartas/pro/Bastos/4.png",!0),this.load.image("A35","assets/images/Cartas/pro/Bastos/5.png",!0),this.load.image("A36","assets/images/Cartas/pro/Bastos/6.png",!0),this.load.image("A37","assets/images/Cartas/pro/Bastos/7.png",!0),this.load.image("A38","assets/images/Cartas/pro/Bastos/10.png",!0),this.load.image("A39","assets/images/Cartas/pro/Bastos/11.png",!0),this.load.image("A40","assets/images/Cartas/pro/Bastos/12.png",!0),this.load.image("B01","assets/images/Cartas/guinarte/Oros/1.png",!0),this.load.image("B02","assets/images/Cartas/guinarte/Oros/2.png",!0),this.load.image("B03","assets/images/Cartas/guinarte/Oros/3.png",!0),this.load.image("B04","assets/images/Cartas/guinarte/Oros/4.png",!0),this.load.image("B05","assets/images/Cartas/guinarte/Oros/5.png",!0),this.load.image("B06","assets/images/Cartas/guinarte/Oros/6.png",!0),this.load.image("B07","assets/images/Cartas/guinarte/Oros/7.png",!0),this.load.image("B08","assets/images/Cartas/guinarte/Oros/10.png",!0),this.load.image("B09","assets/images/Cartas/guinarte/Oros/11.png",!0),this.load.image("B10","assets/images/Cartas/guinarte/Oros/12.png",!0),this.load.image("B11","assets/images/Cartas/guinarte/Copas/1.png",!0),this.load.image("B12","assets/images/Cartas/guinarte/Copas/2.png",!0),this.load.image("B13","assets/images/Cartas/guinarte/Copas/3.png",!0),this.load.image("B14","assets/images/Cartas/guinarte/Copas/4.png",!0),this.load.image("B15","assets/images/Cartas/guinarte/Copas/5.png",!0),this.load.image("B16","assets/images/Cartas/guinarte/Copas/6.png",!0),this.load.image("B17","assets/images/Cartas/guinarte/Copas/7.png",!0),this.load.image("B18","assets/images/Cartas/guinarte/Copas/10.png",!0),this.load.image("B19","assets/images/Cartas/guinarte/Copas/11.png",!0),this.load.image("B20","assets/images/Cartas/guinarte/Copas/12.png",!0),this.load.image("B21","assets/images/Cartas/guinarte/Espadas/1.png",!0),this.load.image("B22","assets/images/Cartas/guinarte/Espadas/2.png",!0),this.load.image("B23","assets/images/Cartas/guinarte/Espadas/3.png",!0),this.load.image("B24","assets/images/Cartas/guinarte/Espadas/4.png",!0),this.load.image("B25","assets/images/Cartas/guinarte/Espadas/5.png",!0),this.load.image("B26","assets/images/Cartas/guinarte/Espadas/6.png",!0),this.load.image("B27","assets/images/Cartas/guinarte/Espadas/7.png",!0),this.load.image("B28","assets/images/Cartas/guinarte/Espadas/10.png",!0),this.load.image("B29","assets/images/Cartas/guinarte/Espadas/11.png",!0),this.load.image("B30","assets/images/Cartas/guinarte/Espadas/12.png",!0),this.load.image("B31","assets/images/Cartas/guinarte/Bastos/1.png",!0),this.load.image("B32","assets/images/Cartas/guinarte/Bastos/2.png",!0),this.load.image("B33","assets/images/Cartas/guinarte/Bastos/3.png",!0),this.load.image("B34","assets/images/Cartas/guinarte/Bastos/4.png",!0),this.load.image("B35","assets/images/Cartas/guinarte/Bastos/5.png",!0),this.load.image("B36","assets/images/Cartas/guinarte/Bastos/6.png",!0),this.load.image("B37","assets/images/Cartas/guinarte/Bastos/7.png",!0),this.load.image("B38","assets/images/Cartas/guinarte/Bastos/10.png",!0),this.load.image("B39","assets/images/Cartas/guinarte/Bastos/11.png",!0),this.load.image("B40","assets/images/Cartas/guinarte/Bastos/12.png",!0),this.load.image("BocadilloD","assets/images/Bocadillo_D.png",!0),this.load.image("BocadilloR","assets/images/Bocadillo_R.png",!0),this.load.image("BocadilloU","assets/images/Bocadillo_U.png",!0),this.load.image("BocadilloL","assets/images/Bocadillo_L.png",!0),this.load.image("Reverso","assets/images/Cartas/Reversos/reverso.png",!0),this.load.image("Maquina","assets/images/Cartas/Reversos/maquina.jpg"),this.load.image("Tapete","assets/images/Cartas/Tapetes/tapete.jpg"),this.load.image("Tapete_43","assets/images/Cartas/Tapetes/tapete_43.jpg"),this.load.image("Las_40","assets/images/las 40.png",!0),this.load.image("20_oros","assets/images/20 oros.png",!0),this.load.image("20_copas","assets/images/20 copas.png",!0),this.load.image("20_espadas","assets/images/20 espadas.png",!0),this.load.image("20_bastos","assets/images/20 bastos.png",!0),this.load.image("FondoPrincipal","assets/images/fondo_principal.png",!0),this.load.image("FondoPrincipal_43","assets/images/fondo_principal_43.png",!0),this.load.image("Boton_solo","assets/images/Botones/jugar_solo.png",!0),this.load.image("Boton_online","assets/images/Botones/jugar_online.png",!0),this.load.image("Boton_ranking","assets/images/Botones/boton_ranking.png",!0),this.load.image("Boton_amigos","assets/images/Botones/jugar_con_amigos.png",!0),this.load.image("Boton_bar1","assets/images/Botones/jugar_bar_1.png",!0),this.load.image("Boton_aleatorio","assets/images/Botones/jugar_mundo.png",!0),this.load.image("Boton_cambiar_7_on","assets/images/cambiar 7.png",!0),this.load.image("Boton_cambiar_7_off","assets/images/cambiar 7 gris.png",!0),this.load.image("Boton_cantar_on","assets/images/cantar.png",!0),this.load.image("Boton_cantar_off","assets/images/cantar gris.png",!0),this.load.image("Desconectado","assets/images/desconectado.png",!0),this.load.image("Conectado","assets/images/conectado.png",!0),this.load.image("Copa","assets/images/copa.png",!0),this.load.image("Perder","assets/images/perder.png",!0),this.load.image("Boton_Salir","assets/images/salir.png",!0),this.load.image("Imagen_Turno","assets/images/imagen_turno.png",!0),this.load.image("Contacta","assets/images/contacta.png",!0),this.load.image("Boton_sonido_on","assets/images/sound_on.png",!0),this.load.image("Boton_sonido_off","assets/images/sound_off.png",!0),this.load.image("Boton_robots","assets/images/completar_robots.png",!0),this.load.image("Boton_micro_off","assets/images/micro_off.png",!0),this.load.image("Boton_micro_on","assets/images/micro_on.png",!0),this.load.image("Boton_escribir","assets/images/teclado.png",!0),this.load.image("Ninja","assets/images/nivel_ninja.png",!0),this.load.image("Medalla","assets/images/medalla.png",!0),this.load.image("Mago","assets/images/nivel_mago.png",!0),this.load.image("PRO","assets/images/nivel_pro.png",!0),this.load.image("Diplomado","assets/images/nivel_diplomado.png",!0),this.load.image("SinLogro","assets/images/sin_logro.png",!0),this.load.image("negro","assets/images/negro.png",!0),this.load.image("negro_43","assets/images/negro_43.png",!0),window.plugins&&window.plugins.NativeAudio&&(LoadCordova("SndMesa","assets/sounds/mesa.mp3"),LoadCordova("SndReparto","assets/sounds/reparto.mp3"),LoadCordova("Snd20Oros","assets/sounds/cantes/20_oros.mp3"),LoadCordova("Snd20Copas","assets/sounds/cantes/20_copas.mp3"),LoadCordova("Snd20Espadas","assets/sounds/cantes/20_espadas.mp3"),LoadCordova("Snd20Bastos","assets/sounds/cantes/20_bastos.mp3"),LoadCordova("SndLas40","assets/sounds/cantes/las_40.mp3"),LoadCordova("SndLas40_2","assets/sounds/cantes/las_40_2.mp3"),LoadCordova("SndIdas","assets/sounds/idas.mp3"),LoadCordova("SndVueltas","assets/sounds/vueltas.mp3"),LoadCordova("SndAPorEllos","assets/sounds/a_por_ellos.mp3"),LoadCordova("SndArrastro","assets/sounds/arrastro.mp3"),LoadCordova("SndArrastro2","assets/sounds/arrastro_2.mp3"),LoadCordova("SndBocarrana","assets/sounds/bocarrana.mp3"),LoadCordova("SndCampeones","assets/sounds/campeones.mp3"),LoadCordova("SndContar","assets/sounds/contar.mp3"),LoadCordova("SndCotoTerminado","assets/sounds/coto_terminado.mp3"),LoadCordova("SndEspadilla","assets/sounds/espadilla.mp3"),LoadCordova("SndOre","assets/sounds/ore.mp3"),LoadCordova("SndOtraVezSera","assets/sounds/otra_vez.mp3"),LoadCordova("SndTabazo","assets/sounds/tabazo.mp3"),LoadCordova("SndTabazo2","assets/sounds/tabazo_2.mp3"),LoadCordova("SndMatanzaCaballo","assets/sounds/matanza_caballo.mp3"),LoadCordova("SndIdas2","assets/sounds/idas2.mp3"),LoadCordova("SndVueltas2","assets/sounds/vueltas2.mp3"),LoadCordova("SndGrano","assets/sounds/grano.mp3"),LoadCordova("SndUltimas","assets/sounds/ultimas.mp3"),LoadCordova("SndChatarrero","assets/sounds/chatarrero.mp3"),LoadCordova("SndChiflar","assets/sounds/chiflar.mp3"),LoadCordova("SndEscupe","assets/sounds/escupe.mp3"),LoadCordova("SndFaldas","assets/sounds/faldas.mp3"),LoadCordova("SndGorrion","assets/sounds/gorrion.mp3"),LoadCordova("SndGrijan","assets/sounds/grijan.mp3"),LoadCordova("SndGuinoteOtro","assets/sounds/guinote_otro.mp3"),LoadCordova("SndMataBocarrana","assets/sounds/mata_bocarrana.mp3"),LoadCordova("SndMonja","assets/sounds/monja.mp3"),LoadCordova("SndPajaro","assets/sounds/pajaro.mp3"),LoadCordova("SndPrimeraChicos","assets/sounds/primera_chicos.mp3"),LoadCordova("SndPuntos","assets/sounds/puntosaudio.mp3"),LoadCordova("SndToro","assets/sounds/toro.mp3")),this.load.audio("SndReparto",["assets/sounds/reparto.ogg","assets/sounds/reparto.mp3"]),this.load.audio("SndMesa",["assets/sounds/mesa.ogg","assets/sounds/mesa.mp3"]),this.load.audio("Snd20Oros",["assets/sounds/cantes/20_oros.ogg","assets/sounds/cantes/20_oros.mp3"]),this.load.audio("Snd20Copas",["assets/sounds/cantes/20_copas.ogg","assets/sounds/cantes/20_copas.mp3"]),this.load.audio("Snd20Espadas",["assets/sounds/cantes/20_espadas.ogg","assets/sounds/cantes/20_espadas.mp3"]),this.load.audio("Snd20Bastos",["assets/sounds/cantes/20_bastos.ogg","assets/sounds/cantes/20_bastos.mp3"]),this.load.audio("SndLas40",["assets/sounds/cantes/las_40.ogg","assets/sounds/cantes/las_40.mp3"]),this.load.audio("SndLas40_2",["assets/sounds/cantes/las_40_2.ogg","assets/sounds/cantes/las_40_2.mp3"]),this.load.audio("SndIdas",["assets/sounds/idas.ogg","assets/sounds/idas.mp3"]),this.load.audio("SndVueltas",["assets/sounds/vueltas.ogg","assets/sounds/vueltas.mp3"]),this.load.audio("SndAPorEllos",["assets/sounds/a_por_ellos.ogg","assets/sounds/a_por_ellos.mp3"]),this.load.audio("SndArrastro",["assets/sounds/arrastro.ogg","assets/sounds/arrastro.mp3"]),this.load.audio("SndArrastro2",["assets/sounds/arrastro_2.ogg","assets/sounds/arrastro_2.mp3"]),this.load.audio("SndBocarrana",["assets/sounds/bocarrana.ogg","assets/sounds/bocarrana.mp3"]),this.load.audio("SndCampeones",["assets/sounds/campeones.ogg","assets/sounds/campeones.mp3"]),this.load.audio("SndContar",["assets/sounds/contar.ogg","assets/sounds/contar.mp3"]),this.load.audio("SndCotoTerminado",["assets/sounds/coto_terminado.ogg","assets/sounds/coto_terminado.mp3"]),this.load.audio("SndEspadilla",["assets/sounds/espadilla.ogg","assets/sounds/espadilla.mp3"]),this.load.audio("SndOre",["assets/sounds/ore.ogg","assets/sounds/ore.mp3"]),this.load.audio("SndOtraVezSera",["assets/sounds/otra_vez.ogg","assets/sounds/otra_vez.mp3"]),this.load.audio("SndTabazo",["assets/sounds/tabazo.ogg","assets/sounds/tabazo.mp3"]),this.load.audio("SndTabazo2",["assets/sounds/tabazo_2.ogg","assets/sounds/tabazo_2.mp3"]),this.load.audio("SndMatanzaCaballo",["assets/sounds/matanza_caballo.ogg","assets/sounds/matanza_caballo.mp3"]),this.load.audio("SndIdas2",["assets/sounds/idas2.ogg","assets/sounds/idas2.mp3"]),this.load.audio("SndVueltas2",["assets/sounds/vueltas2.ogg","assets/sounds/vueltas2.mp3"]),this.load.audio("SndGrano",["assets/sounds/grano.ogg","assets/sounds/grano.mp3"]),this.load.audio("SndUltimas",["assets/sounds/ultimas.ogg","assets/sounds/ultimas.mp3"]),this.load.audio("SndChatarrero",["assets/sounds/chatarrero.ogg","assets/sounds/chatarrero.mp3"]),this.load.audio("SndChiflar",["assets/sounds/chiflar.ogg","assets/sounds/chiflar.mp3"]),this.load.audio("SndEscupe",["assets/sounds/escupe.ogg","assets/sounds/escupe.mp3"]),this.load.audio("SndFaldas",["assets/sounds/faldas.ogg","assets/sounds/faldas.mp3"]),this.load.audio("SndGorrion",["assets/sounds/gorrion.ogg","assets/sounds/gorrion.mp3"]),this.load.audio("SndGrijan",["assets/sounds/grijan.ogg","assets/sounds/grijan.mp3"]),this.load.audio("SndGuinoteOtro",["assets/sounds/guinote_otro.ogg","assets/sounds/guinote_otro.mp3"]),this.load.audio("SndMataBocarrana",["assets/sounds/mata_bocarrana.ogg","assets/sounds/mata_bocarrana.mp3"]),this.load.audio("SndMonja",["assets/sounds/monja.ogg","assets/sounds/monja.mp3"]),this.load.audio("SndPajaro",["assets/sounds/pajaro.ogg","assets/sounds/pajaro.mp3"]),this.load.audio("SndPrimeraChicos",["assets/sounds/primera_chicos.ogg","assets/sounds/primera_chicos.mp3"]),this.load.audio("SndPuntos",["assets/sounds/puntosaudio.ogg","assets/sounds/puntosaudio.mp3"]),this.load.audio("SndToro",["assets/sounds/toro.ogg","assets/sounds/toro.mp3"]),this.load.spritesheet("spr_cantar","assets/buttons/button_sprite_sheet.png",193,71)},LoadCordova=function(a,o){window.plugins.NativeAudio.preloadSimple(a,o,function(a){},function(a){})},Preload.prototype.create=function(){this.game.state.start("Menu")},Destruye=function(a){try{a.destroy()}catch(a){}},CrearBarajaRecibida=function(a,o,e){var t;for(ComunBarajas(),PartidaComenzada=!1,FinalizandoPartida=!1,RepartoFinalizado=!1,timerBarajaRecibida.stop(),timerNuevaPartida.stop(),TextCuentaMundo.visible=!1,OcultarElegirPareja(),BotonSalir.x=xSalir,BotonSalir.visible=!0,LimpiarVariables(),EntradaModoJuego=!0,1==SonVueltas&&(TextMarcador.visible=!0,TextTituloMarcador.visible=!0),1==ModoMultijugador&&(BotonEscribir.visible=!0,BotonHablarOn.visible=!1,BotonHablarOff.visible=!0,ArrayInfoJugador.length>0&&(BotonEscribir.visible=ArrayInfoJugador[0].ChatDisponible)),OcultarFacebook(),CrearTapete(),t=0;t<=a.length-1;t++){if(Mazo.push(new Carta(a[t].palo,a[t].idCarta,a[t].valor,null,null,null)),0==SiempreBocaArriba)Mazo[t].cartilla=game_objeto.add.image(50,game_objeto.world.centerY/2,ReversoGlobal);else{var r;r=Mazo[t].idCarta<=9?"A0"+Mazo[t].idCarta:"A"+Mazo[t].idCarta,Mazo[t].cartilla=game_objeto.add.image(50,game_objeto.world.centerY/2,r)}1==cuatrotres&&(Mazo[t].cartilla.width=1.2*Mazo[t].cartilla.width,Mazo[t].cartilla.height=1.2*Mazo[t].cartilla.height),Mazo[t].cartilla.name=Mazo[t].idCarta,Mazo[t].cartilla.anchor.setTo(.5,.5)}MazoEnviarApoyo.splice(0,100),PosicionCartas("D"),log(!1,"Llega...");Esconde_Mazo(o),log(!0,"REPARTE "+o),4==o&&(1==SoyElJugador&&Repartir_Desde_Abajo(e),2==SoyElJugador&&Repartir_Desde_Izquierda(e),3==SoyElJugador&&Repartir_Desde_Arriba(e),4==SoyElJugador&&Repartir_Desde_Derecha(e)),1==o&&(2==SoyElJugador&&Repartir_Desde_Abajo(e),3==SoyElJugador&&Repartir_Desde_Izquierda(e),4==SoyElJugador&&Repartir_Desde_Arriba(e),1==SoyElJugador&&Repartir_Desde_Derecha(e)),2==o&&(3==SoyElJugador&&Repartir_Desde_Abajo(e),4==SoyElJugador&&Repartir_Desde_Izquierda(e),1==SoyElJugador&&Repartir_Desde_Arriba(e),2==SoyElJugador&&Repartir_Desde_Derecha(e)),3==o&&(4==SoyElJugador&&Repartir_Desde_Abajo(e),1==SoyElJugador&&Repartir_Desde_Izquierda(e),2==SoyElJugador&&Repartir_Desde_Arriba(e),3==SoyElJugador&&Repartir_Desde_Derecha(e)),game_objeto.world.bringToTop(GrupoTextos),log(!1,"Soy el "+SoyElJugador+" y reparte "+o),5==(vTurno=o+1)&&(vTurno=1),game_objeto.world.bringToTop(GrupoD)},EstaConectado=function(a){var o,e=!0;for(o=0;o<=ArrayJugadoresDesconectados.length-1;o++)if(ArrayJugadoresDesconectados[o].Jugador==a){e=!1;break}return e},IA=function(a,o){var e,t,r,n,i,l=!1,d=[],s=[];if(timer.stop(),timerturno.stop(),(1==RepartoFinalizado&&1==PartidaComenzada&&MarcadorNuestro<PuntosGanar&&MarcadorRival<PuntosGanar||1==RepartoFinalizado&&0==SonVueltas&&1==PartidaComenzada)&&0==PuntosFin()&&(vTurno!=SoyElJugador&&SoyElJugador==QuienTomaElControl&&1==ModoMultijugador&&0==EstaConectado(vTurno)||vTurno==SoyElJugador&&timerturno.duration.toFixed(0)<=0&&1==ModoMultijugador||0==ModoMultijugador)&&0==vReconectando&&(0==ModoMultijugador||1==ModoMultijugador&&1==EstoyConectado())){for(timerturno.stop(),timer.stop(),e=MazoCentral.length+1,log(!1,"vRonda "+vRonda),d.splice(0,100),a=vTurno,log(!0,"IA JUGADOR QUE MUEVE "+a),"D"==(n=DevuelveUbicacionCarta(a))&&(s=MazoD),"U"==n&&(s=MazoU),"L"==n&&(s=MazoL),"R"==n&&(s=MazoR),log(!0,"DEBERIA SACAR CARTA DEL Mazo "+n),t=0;t<=s.length-1;t++)d.push(new Carta(s[t].palo,s[t].idCarta,s[t].valor,null,null,null)),d[t].cartilla=s[t].cartilla;for(t=0;t<=d.length-1;t++)0==ValidadorReglas(d[t],a)&&(d[t].palo="BORRAR");for(r=0;r<=5;r++)a:for(t=0;t<=d.length-1;t++)if("BORRAR"==d[t].palo){d.splice(t,1);break a}if(d.length>0){var c=IA_PartidaGanada(d,a,e);l=0!=c?c:1==IA_MasDe20()?IA_Sujeta(d,a,"Alto",e):1==IA_MasDe10()||1==SonVueltas&&3==e?0==SonVueltas&&4==vRonda?IA_Descarte(d,a,e):IA_Sujeta(d,a,"Bajo",e):IA_Descarte(d,a,e);for(var u=0;u<=d.length-1;u++)if(d[u].idCarta===l)d[u].palo,d[u].numero,d[u].valor;for(i=!1,t=0;t<=d.length-1;t++)if(d[t].cartilla.name==l){i=!0;break}if(0==i&&IA(a,!1),(0==ModoMultijugador&&SoyElJugador!=a||1==ModoMultijugador)&&(0==ModoMultijugador||1==ModoMultijugador&&1==EstoyConectado())&&1==ValidaMovimientoJugador(vRonda,a)&&(log(!0,"IA: ENVIO CARTA AL CENTRO "+l+" AUTOMATICAMENTE CON vTurno "+a),0==ModoMultijugador?MoverCentroAjeno(a,l,vRonda,Date.now(),!1):log(!0,"Envio la carta al centro desde IA para mi"),1==ModoMultijugador)){Date.now();var g=[];g.splice(0,1e3);var p=1e5*Math.random(),M=new function(a,o,e,t,r,n,i,l,d,s,c,u,g,p){this.Habitacion=a,this.SoyElJugador=o,this.Cartilla=e,this.Turno=t,this.Ronda=r,this.SonVueltas=n,this.Partida=i,this.JugadorFull=l,this.JugadorSala=d,this.Nombre=s,this.IdMsg=c,this.ClientId=u,this.SalaID=g,this.Mensaje=p,this.Fecha=new Date(Date.now())}(Habitacion,a,l,a,vRonda,SonVueltas,MarcadorPartidasNuestro+MarcadorPartidasRival,ArrayDelaPropiaSala[a-1].JugadorFull,ArrayDelaPropiaSala[a-1].JugadorSala,ArrayDelaPropiaSala[a-1].Nombre,p,ArrayDelaPropiaSala[a-1].JugadorSala,Habitacion,"enviar carta centro");ArrayAccionesDesconexiones.push(M),g.push(M),socket.emit("enviar carta centro",g[0],function(a){EliminarColaMensajes(a,"enviar carta centro")}),g.splice(0,1e3),d[t].palo==Triunfo&&(1==d[t].valor&&GrabarResultado(a,MarcadorPartidasNuestro+MarcadorPartidasRival,SonVueltas,0,!1,!1,!0,!1),3==d[t].valor&&GrabarResultado(a,MarcadorPartidasNuestro+MarcadorPartidasRival,SonVueltas,0,!1,!1,!1,!0))}}else log(!0,"No muevo porque el MazoIA mide 0")}},IA_MasDe10=function(){var a,o=!1,e=0;for(a=0;a<=MazoCentral.length-1;a++)e+=MazoCentral[a].valorPuntuacion;return e>=10&&(o=!0),o},IA_PartidaGanada=function(a,o,e){var t,r=0,n=0,i=0,l=0,d=0;for(t=0;t<=MazoCentral.length-1;t++)d+=MazoCentral[t].valorPuntuacion;for(t=0;t<=a.length-1;t++)a[t].palo==Triunfo&&a[t].valorPuntuacion>=2&&a[t].valorPuntuacion>i&&(i=a[t].valorPuntuacion,r=t);for(t=0;t<=a.length-1;t++)a[t].valorPuntuacion>l&&(l=a[t].valorPuntuacion,n=t);if(MarcadorNuestro+i+d>=PuntosGanar){if(4==e){s=IA_DevuelveKey(a,a[n].palo,a[n].valorReal);if(0!=IA_Ganaria(a,o,s))return s;s=IA_DevuelveKey(a,a[r].palo,a[r].valorReal);return 0!=IA_Ganaria(a,o,s)&&s}var s=IA_DevuelveKey(a,a[r].palo,a[r].valorReal);return 0!=IA_Ganaria(a,o,s)&&s}return!1},IA_Ganaria=function(a,o,e){var t,r,n,i=!1,l=[];for(l.splice(0,100),t=0;t<=MazoCentral.length-1;t++)l.push(new CartaBazaNuestra(MazoCentral[t].palo,MazoCentral[t].valorReal,MazoCentral[t].jugador));for(r=0;r<=a.length-1;r++)if(a[r].cartilla.name==e){l.push(new CartaBazaNuestra(a[r].palo,a[r].valorReal,o));break}return 1==RBazaEsNuestra(l,o)&&(i=!0),n=1==i&&e,log(!0,"IA_Ganaria "+o+" "+n),n},IA_MasDe20=function(){var a,o=!1,e=0;for(a=0;a<=MazoCentral.length-1;a++)e+=MazoCentral[a].valorPuntuacion;return e>=20&&(o=!0),o},IA_Descarte=function(a,o,e){var t,r,n=!1,i=RBazaEsNuestra(MazoCentral,o);for(ArrayDescartePosible.splice(0,100),t=0;t<=a.length-1;t++)CuentaPalos(a[t].palo);if(Devolver=IA_Cargar(a,o,e),0==Devolver){for(t=0;t<=ArrayDescartePosible.length-1;t++)if(1==ArrayDescartePosible[t].veces&&ArrayDescartePosible[t].palo!=Triunfo)for(r=0;r<=a.length-1;r++){var l=IA_DevuelveKey(a,a[r].palo,a[r].valorReal);if(a[r].palo==ArrayDescartePosible[t].palo&&a[r].valorPuntuacion<10&&(1==e||0==IA_Ganaria(a,o,l)&&2==e||(3==e||4==e)&&(1==i||0==IA_Ganaria(a,o,l)))){n=!0,Devolver=a[r].cartilla.name;break}}}else n=!0;return 0==n&&(Devolver=IA_AleatoriaNoTriunfo(a,o,e)),log(!1,"IA_Descarte "+o+" "+Devolver),Devolver};var ObjetoDescarte=function(a,o){this.palo=a,this.veces=o};CuentaPalos=function(a){var o,e=!1;for(o=0;o<=ArrayDescartePosible.length-1;o++)if(ArrayDescartePosible[o].palo==a){ArrayDescartePosible[o].veces=ArrayDescartePosible[o].veces+1,e=!0;break}0==e&&ArrayDescartePosible.push(new ObjetoDescarte(a,1))},IA_AleatoriaNoTriunfo=function(a,o,e){var t,r,n=[],i=!1,l=RBazaEsNuestra(MazoCentral,o);for(n.splice(0,100),t=0;t<=a.length-1;t++)n.push(new CartaIA(a[t].palo,a[t].valorReal,a[t].cartilla.name,a[t].valorPuntuacion));for(t=0;t<=20;t++)if(Phaser.ArrayUtils.shuffle(n),n[0].palo!=Triunfo&&n[0].valorPuntuacion<10){d=IA_DevuelveKey(n,n[0].palo,n[0].valorReal);if(1==e||0==IA_Ganaria(a,o,d)&&2==e||(3==e||4==e)&&(1==l||0==IA_Ganaria(a,o,d))){i=!0,r=n[0].name;break}}if(0==i)for(t=0;t<=20;t++)if(Phaser.ArrayUtils.shuffle(n),n[0].palo!=Triunfo&&n[0].valorPuntuacion<10){i=!0,r=n[0].name;break}if(0==i)for(t=0;t<=20;t++)if(Phaser.ArrayUtils.shuffle(n),n[0].palo!=Triunfo){d=IA_DevuelveKey(n,n[0].palo,n[0].valorReal);if(1==e||0!=IA_Ganaria(a,o,d)&&2==e||(3==e||4==e)&&0!=IA_Ganaria(a,o,d)){i=!0,r=n[0].name;break}}if(0==i)for(t=0;t<=20;t++)if(Phaser.ArrayUtils.shuffle(n),n[0]!=Triunfo){var d=IA_DevuelveKey(n,n[0].palo,n[0].valorReal);i=!0,r=n[0].name;break}return 0==i&&(Phaser.ArrayUtils.shuffle(n),r=n[0].name),log(!1,"IA_ALEATORIONOTriunfo "+o+" "+r),r},IA_AleatoriaSiTriunfo=function(a,o){var e,t,r=[],n=!1;for(r.splice(0,100),e=0;e<=a.length-1;e++)r.push(new CartaIA(a[e].palo,a[e].valorReal,a[e].cartilla.name,a[e].valorPuntuacion));for(e=0;e<=20;e++)if(Phaser.ArrayUtils.shuffle(r),r[0].palo==Triunfo){i=IA_DevuelveKey(r,r[0].palo,r[0].valorReal);if(0!=IA_Ganaria(a,o,i)){n=!0,t=r[0].name;break}}if(0==n)for(e=0;e<=20;e++)if(Phaser.ArrayUtils.shuffle(r),r[0].palo!=Triunfo){var i=IA_DevuelveKey(r,r[0].palo,r[0].valorReal);if(0!=IA_Ganaria(a,o,i)){n=!0,t=r[0].name;break}}return 0==n&&(Phaser.ArrayUtils.shuffle(r),t=r[0].name),log(!1,"IA_ALEATORIOSITriunfo "+o+" "+t),t},MiCompiHaTiradoTriunfo=function(a,o){var e=!1;return 3==o&&a.length>0&&a[0].palo==Triunfo&&(e=!0),e},IA_Sujeta=function(a,o,e,t){var r,n,i=100,l=0,d=!1,s=!1,c=[];if(0==(d=IA_Cargar(a,o,t)))if(1==RBazaEsNuestra(MazoCentral,o)&&1==MiCompiHaTiradoTriunfo(MazoCentral,t))d=IA_Descarte(a,o);else{if(4==t){for(c.splice(0,100),r=0;r<=a.length-1;r++)c.push(new CartaIA(a[r].palo,a[r].valorReal,a[r].cartilla.name,a[r].valorPuntuacion));for(Phaser.ArrayUtils.shuffle(c),r=0;r<=c.length-1;r++)if(c[r].palo!=Triunfo){u=IA_DevuelveKey(c,c[r].palo,c[r].valorReal);if(0!=IA_Ganaria(a,o,u)){Encontrado=!0,d=c[r].name;break}}}if(0==d){for(r=0;r<=a.length-1;r++)a[r].palo==Triunfo&&a[r].valorReal<i&&(i=a[r].valorReal);for(r=0;r<=a.length-1;r++)a[r].palo==Triunfo&&a[r].valorReal>l&&(l=a[r].valorReal);if("Bajo"==e?100!=i?(s=!0,n=i):s=!1:0!=l?(s=!0,n=l):s=!1,1==s){var u=IA_DevuelveKey(a,Triunfo,n);0!=(d=IA_Ganaria(a,o,u))||(d=IA_AleatoriaSiTriunfo(a,o),0==(d=IA_Ganaria(a,o,d))&&(d=IA_Descarte(a,o)))}else d=IA_AleatoriaNoTriunfo(a,o),0==(d=IA_Ganaria(a,o,d))&&(d=IA_Descarte(a,o))}}return log(!1,"IA_Sujeta "+o+" "+d),d},IA_DeboCargar=function(a){return 1==RBazaEsNuestra(MazoCentral,a)},IA_Cargar=function(a,o,e){var t,r=[],n=RBazaEsNuestra(MazoCentral,o),i=!1;for(r.splice(0,100),t=0;t<=a.length-1;t++)r.push(new CartaIA(a[t].palo,a[t].valorReal,a[t].cartilla.name,a[t].valorPuntuacion));if(Phaser.ArrayUtils.shuffle(r),4==e)for(t=0;t<=r.length-1;t++){d=IA_DevuelveKey(r,r[t].palo,r[t].valorReal);if((1==n||0!=IA_Ganaria(a,o,d))&&r[t].palo!=Triunfo&&r[t].valorPuntuacion>=10){l=!0,i=r[t].name;break}}else{var l=!1;if(1==n){for(t=0;t<=MazoCentral.length-1;t++)if(MazoCentral[t].palo==Triunfo&&MazoCentral[t].valorReal>=10){l=!0;break}if(1==l)for(t=0;t<=r.length-1;t++){var d=IA_DevuelveKey(r,r[t].palo,r[t].valorReal);if((1==n||0!=IA_Ganaria(a,o,d))&&r[t].palo!=Triunfo&&r[t].valorPuntuacion>=10){l=!0,i=r[t].name;break}}}else i=!1}return log(!1,"IA_Cargar "+o+" "+i),i},IA_DevuelveKey=function(a,o,e){var t,r=!1;for(t=0;t<=a.length-1;t++)if(a[t].valorReal==e&&a[t].palo==o){r=void 0!=a[t].name?a[t].name:a[t].cartilla.name;break}return r};